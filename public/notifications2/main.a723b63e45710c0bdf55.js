(self.webpackChunknotifications2=self.webpackChunknotifications2||[]).push([[179],{8255:Je=>{function Ae(G){return Promise.resolve().then(()=>{var I=new Error("Cannot find module '"+G+"'");throw I.code="MODULE_NOT_FOUND",I})}Ae.keys=()=>[],Ae.resolve=Ae,Ae.id=8255,Je.exports=Ae},7716:(Je,Ae,G)=>{"use strict";G.d(Ae,{deG:()=>fw,tb:()=>fv,AFp:()=>Eb,ip1:()=>wb,CZH:()=>Ih,hGG:()=>iI,z2F:()=>dl,sBO:()=>qT,Sil:()=>_p,_Vd:()=>wo,EJc:()=>Tb,SBq:()=>Yi,qLn:()=>vu,vpe:()=>ts,gxx:()=>mf,tBr:()=>ya,XFs:()=>Ke,OlP:()=>Rn,zs3:()=>Nn,ZZ4:()=>Xo,aQg:()=>Zc,soG:()=>vp,YKP:()=>oh,v3s:()=>pv,h0i:()=>Xc,PXZ:()=>So,R0b:()=>Zi,FiY:()=>ws,Lbi:()=>MD,g9A:()=>Db,Qsj:()=>m0,FYo:()=>ep,JOm:()=>lo,Tiy:()=>Fm,q3G:()=>Yt,tp0:()=>Kn,EAV:()=>Lb,Rgc:()=>Eo,dDg:()=>Sh,DyG:()=>Ol,q4F:()=>v0,GfV:()=>km,s_b:()=>rp,ifc:()=>Qe,eFA:()=>qD,G48:()=>$D,X6Q:()=>Ob,_c5:()=>bv,VLi:()=>Io,c2e:()=>Ib,zSh:()=>_d,wAp:()=>ct,vHH:()=>De,EiD:()=>Rs,mCW:()=>si,qzn:()=>Ss,JVY:()=>cg,pB0:()=>Rc,eBb:()=>zl,L6k:()=>sd,LAX:()=>Ho,cg1:()=>La,Tjo:()=>bA,kL8:()=>zc,yhl:()=>ug,dqk:()=>on,sIi:()=>Md,CqO:()=>_m,QGY:()=>Nf,F4k:()=>O_,RDi:()=>Dl,AaK:()=>ae,z3N:()=>Bo,TTD:()=>Fh,xp6:()=>Tw,uIk:()=>Ef,Suo:()=>$u,Xpm:()=>Wt,lG2:()=>Ph,Yz7:()=>Gt,cJS:()=>In,oAB:()=>Zu,Yjl:()=>Rp,Y36:()=>xf,_UZ:()=>Ud,qZA:()=>ym,TgZ:()=>vm,Ikx:()=>Gf,LFG:()=>Qt,$8M:()=>Xp,NdJ:()=>jd,CRH:()=>Wu,ALo:()=>dD,lcZ:()=>pD,iGM:()=>ob,LSH:()=>Zl,kYT:()=>Ap,_uU:()=>Lf,hij:()=>Wc});var I=G(9765),de=G(5319),M=G(7574),X=G(6682),ye=G(8819);function ee(o){for(let s in o)if(o[s]===ee)return s;throw Error("Could not find renamed property on target object.")}function ae(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ae).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const s=o.toString();if(null==s)return""+s;const u=s.indexOf("\n");return-1===u?s:s.substring(0,u)}function te(o,s){return null==o||""===o?null===s?"":s:null==s||""===s?o:o+" "+s}const $=ee({__forward_ref__:ee});function Z(o){return o.__forward_ref__=Z,o.toString=function(){return ae(this())},o}function j(o){return function(o){return"function"==typeof o&&o.hasOwnProperty($)&&o.__forward_ref__===Z}(o)?o():o}class De extends Error{constructor(s,u){super(function(o,s){return`${o?`NG0${o}: `:""}${s}`}(s,u)),this.code=s}}function Ne(o){return"string"==typeof o?o:null==o?"":String(o)}function Pe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ne(o)}function $t(o,s){const u=s?` in ${s}`:"";throw new De("201",`No provider for ${Pe(o)} found${u}`)}function at(o,s){null==o&&function(o,s,u,l){throw new Error(`ASSERTION ERROR: ${o}`+(null==l?"":` [Expected=> ${u} ${l} ${s} <=Actual]`))}(s,o,null,"!=")}function Gt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function In(o){return{providers:o.providers||[],imports:o.imports||[]}}function tr(o){return Pi(o,jt)||Pi(o,fr)}function Pi(o,s){return o.hasOwnProperty(s)?o[s]:null}function qa(o){return o&&(o.hasOwnProperty(Mt)||o.hasOwnProperty(hr))?o[Mt]:null}const jt=ee({\u0275prov:ee}),Mt=ee({\u0275inj:ee}),fr=ee({ngInjectableDef:ee}),hr=ee({ngInjectorDef:ee});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let mn;function wn(o){const s=mn;return mn=o,s}function Ks(o,s,u){const l=tr(o);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&Ke.Optional?null:void 0!==s?s:void $t(ae(o),"Injector")}function Mi(o){return{toString:o}.toString()}var Gn=(()=>((Gn=Gn||{})[Gn.OnPush=0]="OnPush",Gn[Gn.Default=1]="Default",Gn))(),Qe=(()=>((Qe=Qe||{})[Qe.Emulated=0]="Emulated",Qe[Qe.None=2]="None",Qe[Qe.ShadowDom=3]="ShadowDom",Qe))();const Et="undefined"!=typeof globalThis&&globalThis,Nh="undefined"!=typeof window&&window,os="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,on=Et||"undefined"!=typeof global&&global||Nh||os,sn={},Q=[],q=ee({\u0275cmp:ee}),re=ee({\u0275dir:ee}),pe=ee({\u0275pipe:ee}),ie=ee({\u0275mod:ee}),je=ee({\u0275loc:ee}),it=ee({\u0275fac:ee}),Vt=ee({__NG_ELEMENT_ID__:ee});let nn=0;function Wt(o){return Mi(()=>{const u={},l={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Gn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||Q,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Qe.Emulated,id:"c",styles:o.styles||Q,_:null,setInput:null,schemas:o.schemas||null,tView:null},p=o.directives,m=o.features,b=o.pipes;return l.id+=nn++,l.inputs=ml(o.inputs,u),l.outputs=ml(o.outputs),m&&m.forEach(w=>w(l)),l.directiveDefs=p?()=>("function"==typeof p?p():p).map(Tr):null,l.pipeDefs=b?()=>("function"==typeof b?b():b).map(Sr):null,l})}function Tr(o){return _r(o)||function(o){return o[re]||null}(o)}function Sr(o){return function(o){return o[pe]||null}(o)}const Qs={};function Zu(o){return Mi(()=>{const s={type:o.type,bootstrap:o.bootstrap||Q,declarations:o.declarations||Q,imports:o.imports||Q,exports:o.exports||Q,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(Qs[o.id]=o.type),s})}function Ap(o,s){return Mi(()=>{const u=yi(o,!0);u.declarations=s.declarations||Q,u.imports=s.imports||Q,u.exports=s.exports||Q})}function ml(o,s){if(null==o)return sn;const u={};for(const l in o)if(o.hasOwnProperty(l)){let p=o[l],m=p;Array.isArray(p)&&(m=p[1],p=p[0]),u[p]=l,s&&(s[p]=m)}return u}const Ph=Wt;function Rp(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function _r(o){return o[q]||null}function yi(o,s){const u=o[ie]||null;if(!u&&!0===s)throw new Error(`Type ${ae(o)} does not have '\u0275mod' property.`);return u}function En(o){return Array.isArray(o)&&"object"==typeof o[1]}function _i(o){return Array.isArray(o)&&!0===o[1]}function ec(o){return 0!=(8&o.flags)}function xr(o){return 2==(2&o.flags)}function yl(o){return 1==(1&o.flags)}function no(o){return null!==o.template}function Fi(o){return 0!=(512&o[2])}function xo(o,s){return o.hasOwnProperty(it)?o[it]:null}class Oh{constructor(s,u,l){this.previousValue=s,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function Fh(){return wl}function wl(o){return o.type.prototype.ngOnChanges&&(o.setInput=Mp),Pp}function Pp(){const o=Op(this),s=null==o?void 0:o.current;if(s){const u=o.previous;if(u===sn)o.previous=s;else for(let l in s)u[l]=s[l];o.current=null,this.ngOnChanges(s)}}function Mp(o,s,u,l){const p=Op(o)||function(o,s){return o[ta]=s}(o,{previous:sn,current:null}),m=p.current||(p.current={}),b=p.previous,w=this.declaredInputs[u],D=b[w];m[w]=new Oh(D&&D.currentValue,s,b===sn),o[l]=s}Fh.ngInherit=!0;const ta="__ngSimpleChanges__";function Op(o){return o[ta]||null}let Cl;function Dl(o){Cl=o}function vn(o){return!!o.listen}const pt={createRenderer:(o,s)=>void 0!==Cl?Cl:"undefined"!=typeof document?document:void 0};function dn(o){for(;Array.isArray(o);)o=o[0];return o}function bi(o,s){return dn(s[o.index])}function us(o,s){return o.data[s]}function jr(o,s){const u=s[o];return En(u)?u:u[0]}function Lp(o){return 4==(4&o[2])}function Vp(o){return 128==(128&o[2])}function ls(o,s){return null==s?null:o[s]}function kh(o){o[18]=0}function fs(o,s){o[5]+=s;let u=o,l=o[3];for(;null!==l&&(1===s&&1===u[5]||-1===s&&0===u[5]);)l[5]+=s,u=l,l=l[3]}const ht={lFrame:hs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vv(){return ht.bindingsEnabled}function Se(){return ht.lFrame.lView}function Ut(){return ht.lFrame.tView}function Dn(){let o=ac();for(;null!==o&&64===o.type;)o=o.parent;return o}function ac(){return ht.lFrame.currentTNode}function Nr(o,s){const u=ht.lFrame;u.currentTNode=o,u.isParent=s}function uc(){return ht.lFrame.isParent}function ra(){return ht.isInCheckNoChangesMode}function No(o){ht.isInCheckNoChangesMode=o}function Po(){return ht.lFrame.bindingIndex++}function Hp(o,s){const u=ht.lFrame;u.bindingIndex=u.bindingRootIndex=o,Br(s)}function Br(o){ht.lFrame.currentDirectiveIndex=o}function Sl(){return ht.lFrame.currentQueryIndex}function ia(o){ht.lFrame.currentQueryIndex=o}function Gp(o){const s=o[1];return 2===s.type?s.declTNode:1===s.type?o[6]:null}function Vh(o,s,u){if(u&Ke.SkipSelf){let p=s,m=o;for(;!(p=p.parent,null!==p||u&Ke.Host||(p=Gp(m),null===p||(m=m[15],10&p.type))););if(null===p)return!1;s=p,o=m}const l=ht.lFrame=Al();return l.currentTNode=s,l.lView=o,!0}function oa(o){const s=Al(),u=o[1];ht.lFrame=s,s.currentTNode=u.firstChild,s.lView=o,s.tView=u,s.contextLView=o,s.bindingIndex=u.bindingStartIndex,s.inI18n=!1}function Al(){const o=ht.lFrame,s=null===o?null:o.child;return null===s?hs(o):s}function hs(o){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=s),s}function $p(){const o=ht.lFrame;return ht.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Hv=$p;function Mo(){const o=$p();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Wn(){return ht.lFrame.selectedIndex}function Li(o){ht.lFrame.selectedIndex=o}function An(){const o=ht.lFrame;return us(o.tView,o.selectedIndex)}function ds(o,s){for(let u=s.directiveStart,l=s.directiveEnd;u<l;u++){const m=o.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:N}=m;b&&(o.contentHooks||(o.contentHooks=[])).push(-u,b),w&&((o.contentHooks||(o.contentHooks=[])).push(u,w),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,w)),D&&(o.viewHooks||(o.viewHooks=[])).push(-u,D),S&&((o.viewHooks||(o.viewHooks=[])).push(u,S),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,S)),null!=N&&(o.destroyHooks||(o.destroyHooks=[])).push(u,N)}}function ps(o,s,u){gs(o,s,3,u)}function fc(o,s,u,l){(3&o[2])===u&&gs(o,s,u,l)}function hc(o,s){let u=o[2];(3&u)===s&&(u&=2047,u+=1,o[2]=u)}function gs(o,s,u,l){const m=null!=l?l:-1,b=s.length-1;let w=0;for(let D=void 0!==l?65535&o[18]:0;D<b;D++)if("number"==typeof s[D+1]){if(w=s[D],null!=l&&w>=l)break}else s[D]<0&&(o[18]+=65536),(w<m||-1==m)&&(Wp(o,u,s,D),o[18]=(4294901760&o[18])+D+2),D++}function Wp(o,s,u,l){const p=u[l]<0,m=u[l+1],w=o[p?-u[l]:u[l]];if(p){if(o[2]>>11<o[18]>>16&&(3&o[2])===s){o[2]+=2048;try{m.call(w)}finally{}}}else try{m.call(w)}finally{}}class tu{constructor(s,u,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function Hh(o,s,u){const l=vn(o);let p=0;for(;p<u.length;){const m=u[p];if("number"==typeof m){if(0!==m)break;p++;const b=u[p++],w=u[p++],D=u[p++];l?o.setAttribute(s,w,D,b):s.setAttributeNS(b,w,D)}else{const b=m,w=u[++p];Ui(b)?l&&o.setProperty(s,b,w):l?o.setAttribute(s,b,w):s.setAttribute(b,w),p++}}return p}function zp(o){return 3===o||4===o||6===o}function Ui(o){return 64===o.charCodeAt(0)}function pc(o,s){if(null!==s&&0!==s.length)if(null===o||0===o.length)o=s.slice();else{let u=-1;for(let l=0;l<s.length;l++){const p=s[l];"number"==typeof p?u=p:0===u||Kp(o,u,p,null,-1===u||2===u?s[++l]:null)}}return o}function Kp(o,s,u,l,p){let m=0,b=o.length;if(-1===s)b=-1;else for(;m<o.length;){const w=o[m++];if("number"==typeof w){if(w===s){b=-1;break}if(w>s){b=m-1;break}}}for(;m<o.length;){const w=o[m];if("number"==typeof w)break;if(w===u){if(null===l)return void(null!==p&&(o[m+1]=p));if(l===o[m+1])return void(o[m+2]=p)}m++,null!==l&&m++,null!==p&&m++}-1!==b&&(o.splice(b,0,s),m=b+1),o.splice(m++,0,u),null!==l&&o.splice(m++,0,l),null!==p&&o.splice(m++,0,p)}function Rl(o){return-1!==o}function sa(o){return 32767&o}function gc(o,s){let u=function(o){return o>>16}(o),l=s;for(;u>0;)l=l[15],u--;return l}let Qp=!0;function aa(o){const s=Qp;return Qp=o,s}let lw=0;function nu(o,s){const u=yn(o,s);if(-1!==u)return u;const l=s[1];l.firstCreatePass&&(o.injectorIndex=s.length,$h(l.data,o),$h(s,null),$h(l.blueprint,null));const p=tt(o,s),m=o.injectorIndex;if(Rl(p)){const b=sa(p),w=gc(p,s),D=w[1].data;for(let S=0;S<8;S++)s[m+S]=w[b+S]|D[b+S]}return s[m+8]=p,m}function $h(o,s){o.push(0,0,0,0,0,0,0,0,s)}function yn(o,s){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===s[o.injectorIndex+8]?-1:o.injectorIndex}function tt(o,s){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,l=null,p=s;for(;null!==p;){const m=p[1],b=m.type;if(l=2===b?m.declTNode:1===b?p[6]:null,null===l)return-1;if(u++,p=p[15],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return-1}function Ei(o,s,u){!function(o,s,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(Vt)&&(l=u[Vt]),null==l&&(l=u[Vt]=lw++);const p=255&l;s.data[o+(p>>5)]|=1<<p}(o,s,u)}function ii(o,s,u){if(u&Ke.Optional)return o;$t(s,"NodeInjector")}function Wh(o,s,u,l){if(u&Ke.Optional&&void 0===l&&(l=null),0==(u&(Ke.Self|Ke.Host))){const p=o[9],m=wn(void 0);try{return p?p.get(s,l,u&Ke.Optional):Ks(s,l,u&Ke.Optional)}finally{wn(m)}}return ii(l,s,u)}function Jp(o,s,u,l=Ke.Default,p){if(null!==o){const m=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const s=o.hasOwnProperty(Vt)?o[Vt]:void 0;return"number"==typeof s?s>=0?255&s:qh:s}(u);if("function"==typeof m){if(!Vh(s,o,l))return l&Ke.Host?ii(p,u,l):Wh(s,u,l,p);try{const b=m(l);if(null!=b||l&Ke.Optional)return b;$t(u)}finally{Hv()}}else if("number"==typeof m){let b=null,w=yn(o,s),D=-1,S=l&Ke.Host?s[16][6]:null;for((-1===w||l&Ke.SkipSelf)&&(D=-1===w?tt(o,s):s[w+8],-1!==D&&mc(l,!1)?(b=s[1],w=sa(D),s=gc(D,s)):w=-1);-1!==w;){const N=s[1];if(zh(m,w,N.data)){const F=Pl(w,s,u,b,l,S);if(F!==Hr)return F}D=s[w+8],-1!==D&&mc(l,s[1].data[w+8]===S)&&zh(m,w,s)?(b=N,w=sa(D),s=gc(D,s)):w=-1}}}return Wh(s,u,l,p)}const Hr={};function qh(){return new iu(Dn(),Se())}function Pl(o,s,u,l,p,m){const b=s[1],w=b.data[o+8],N=ru(w,b,u,null==l?xr(w)&&Qp:l!=b&&0!=(3&w.type),p&Ke.Host&&m===w);return null!==N?rr(s,b,N,w):Hr}function ru(o,s,u,l,p){const m=o.providerIndexes,b=s.data,w=1048575&m,D=o.directiveStart,N=m>>20,U=p?w+N:o.directiveEnd;for(let z=l?w:w+N;z<U;z++){const J=b[z];if(z<D&&u===J||z>=D&&J.type===u)return z}if(p){const z=b[D];if(z&&no(z)&&z.type===u)return D}return null}function rr(o,s,u,l){let p=o[u];const m=s.data;if(function(o){return o instanceof tu}(p)){const b=p;b.resolving&&function(o,s){throw new De("200",`Circular dependency in DI detected for ${o}`)}(Pe(m[u]));const w=aa(b.canSeeViewProviders);b.resolving=!0;const D=b.injectImpl?wn(b.injectImpl):null;Vh(o,l,Ke.Default);try{p=o[u]=b.factory(void 0,m,o,l),s.firstCreatePass&&u>=l.directiveStart&&function(o,s,u){const{ngOnChanges:l,ngOnInit:p,ngDoCheck:m}=s.type.prototype;if(l){const b=wl(s);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,b)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,p),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,m))}(u,m[u],s)}finally{null!==D&&wn(D),aa(w),b.resolving=!1,Hv()}}return p}function zh(o,s,u){return!!(u[s+(o>>5)]&1<<o)}function mc(o,s){return!(o&Ke.Self||o&Ke.Host&&s)}class iu{constructor(s,u){this._tNode=s,this._lView=u}get(s,u,l){return Jp(this._tNode,this._lView,s,l,u)}}function Xp(o){return function(o,s){if("class"===s)return o.classes;if("style"===s)return o.styles;const u=o.attrs;if(u){const l=u.length;let p=0;for(;p<l;){const m=u[p];if(zp(m))break;if(0===m)p+=2;else if("number"==typeof m)for(p++;p<l&&"string"==typeof u[p];)p++;else{if(m===s)return u[p+1];p+=2}}}return null}(Dn(),o)}const Fo="__parameters__";function Lo(o,s,u){return Mi(()=>{const l=function(o){return function(...u){if(o){const l=o(...u);for(const p in l)this[p]=l[p]}}}(s);function p(...m){if(this instanceof p)return l.apply(this,m),this;const b=new p(...m);return w.annotation=b,w;function w(D,S,N){const F=D.hasOwnProperty(Fo)?D[Fo]:Object.defineProperty(D,Fo,{value:[]})[Fo];for(;F.length<=N;)F.push(null);return(F[N]=F[N]||[]).push(b),D}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=o,p.annotationCls=p,p})}class Rn{constructor(s,u){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Gt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const fw=new Rn("AnalyzeForEntryComponents"),Ol=Function;function Ci(o,s){void 0===s&&(s=o);for(let u=0;u<o.length;u++){let l=o[u];Array.isArray(l)?(s===o&&(s=o.slice(0,u)),Ci(l,s)):s!==o&&s.push(l)}return s}function pr(o,s){o.forEach(u=>Array.isArray(u)?pr(u,s):s(u))}function Uo(o,s,u){s>=o.length?o.push(u):o.splice(s,0,u)}function ha(o,s){return s>=o.length-1?o.pop():o.splice(s,1)[0]}const Ec={},Zh="__NG_DI_FLAG__",au="ngTempTokenPath",Xh=/\n/gm,ed="__source",Cc=ee({provide:String,useValue:ee});let _s;function yt(o){const s=_s;return _s=o,s}function Vl(o,s=Ke.Default){if(void 0===_s)throw new Error("inject() must be called from an injection context");return null===_s?Ks(o,void 0,s):_s.get(o,s&Ke.Optional?null:void 0,s)}function Qt(o,s=Ke.Default){return(mn||Vl)(j(o),s)}function ma(o){const s=[];for(let u=0;u<o.length;u++){const l=j(o[u]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let p,m=Ke.Default;for(let b=0;b<l.length;b++){const w=l[b],D=og(w);"number"==typeof D?-1===D?p=w.token:m|=D:p=w}s.push(Qt(p,m))}else s.push(Qt(l))}return s}function bs(o,s){return o[Zh]=s,o.prototype[Zh]=s,o}function og(o){return o[Zh]}function Bi(o,s,u,l){const p=o[au];throw s[ed]&&p.unshift(s[ed]),o.message=function(o,s,u,l=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let p=ae(s);if(Array.isArray(s))p=s.map(ae).join(" -> ");else if("object"==typeof s){let m=[];for(let b in s)if(s.hasOwnProperty(b)){let w=s[b];m.push(b+":"+("string"==typeof w?JSON.stringify(w):ae(w)))}p=`{${m.join(", ")}}`}return`${u}${l?"("+l+")":""}[${p}]: ${o.replace(Xh,"\n  ")}`}("\n"+o.message,p,u,l),o.ngTokenPath=p,o[au]=null,o}const ya=bs(Lo("Inject",o=>({token:o})),-1),ws=bs(Lo("Optional"),8),Kn=bs(Lo("SkipSelf"),4);let Is;function jn(o){var s;return(null===(s=function(){if(void 0===Is&&(Is=null,on.trustedTypes))try{Is=on.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Is}())||void 0===s?void 0:s.createHTML(o))||o}class Ts{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ry extends Ts{getTypeName(){return"HTML"}}class ag extends Ts{getTypeName(){return"Style"}}class Wl extends Ts{getTypeName(){return"Script"}}class od extends Ts{getTypeName(){return"URL"}}class ql extends Ts{getTypeName(){return"ResourceURL"}}function Bo(o){return o instanceof Ts?o.changingThisBreaksApplicationSecurity:o}function Ss(o,s){const u=ug(o);if(null!=u&&u!==s){if("ResourceURL"===u&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===s}function ug(o){return o instanceof Ts&&o.getTypeName()||null}function cg(o){return new ry(o)}function sd(o){return new ag(o)}function zl(o){return new Wl(o)}function Ho(o){return new od(o)}function Rc(o){return new ql(o)}class Kl{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const u=(new window.DOMParser).parseFromString(jn(s),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(s):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class lg{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const l=this.inertDocument.createElement("body");u.appendChild(l)}}getInertBodyElement(s){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=jn(s),u;const l=this.inertDocument.createElement("body");return l.innerHTML=jn(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const u=s.attributes;for(let p=u.length-1;0<p;p--){const b=u.item(p).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&s.removeAttribute(b)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const fg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Go=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function si(o){return(o=String(o)).match(fg)||o.match(Go)?o:"unsafe:"+o}function ai(o){const s={};for(const u of o.split(","))s[u]=!0;return s}function ao(...o){const s={};for(const u of o)for(const l in u)u.hasOwnProperty(l)&&(s[l]=!0);return s}const Yl=ai("area,br,col,hr,img,wbr"),ba=ai("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xc=ai("rp,rt"),fu=ao(Yl,ao(ba,ai("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ao(xc,ai("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ao(xc,ba)),As=ai("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$o=ai("srcset"),Nc=ao(As,$o,ai("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ai("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ay=ai("script,style,template");class Jl{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let u=s.firstChild,l=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?l=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,l&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(s){const u=s.nodeName.toLowerCase();if(!fu.hasOwnProperty(u))return this.sanitizedSomething=!0,!ay.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const l=s.attributes;for(let p=0;p<l.length;p++){const m=l.item(p),b=m.name,w=b.toLowerCase();if(!Nc.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let D=m.value;As[w]&&(D=si(D)),$o[w]&&(o=D,D=(o=String(o)).split(",").map(s=>si(s.trim())).join(", ")),this.buf.push(" ",b,'="',mg(D),'"')}var o;return this.buf.push(">"),!0}endElement(s){const u=s.nodeName.toLowerCase();fu.hasOwnProperty(u)&&!Yl.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(s){this.buf.push(mg(s))}checkClobberedElement(s,u){if(u&&(s.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return u}}const pg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gg=/([^\#-~ |!])/g;function mg(o){return o.replace(/&/g,"&amp;").replace(pg,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(gg,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let br;function Rs(o,s){let u=null;try{br=br||function(o){const s=new lg(o);return function(){try{return!!(new window.DOMParser).parseFromString(jn(""),"text/html")}catch(o){return!1}}()?new Kl(s):s}(o);let l=s?String(s):"";u=br.getInertBodyElement(l);let p=5,m=l;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,l=m,m=u.innerHTML,u=br.getInertBodyElement(l)}while(l!==m);return jn((new Jl).sanitizeChildren(uo(u)||u))}finally{if(u){const l=uo(u)||u;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function uo(o){return"content"in o&&function(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Yt=(()=>((Yt=Yt||{})[Yt.NONE=0]="NONE",Yt[Yt.HTML=1]="HTML",Yt[Yt.STYLE=2]="STYLE",Yt[Yt.SCRIPT=3]="SCRIPT",Yt[Yt.URL=4]="URL",Yt[Yt.RESOURCE_URL=5]="RESOURCE_URL",Yt))();function Zl(o){const s=function(){const o=Se();return o&&o[12]}();return s?s.sanitize(Yt.URL,o)||"":Ss(o,"URL")?Bo(o):si(Ne(o))}const Ea="__ngContext__";function ir(o,s){o[Ea]=s}function Xl(o){const s=function(o){return o[Ea]||null}(o);return s?Array.isArray(s)?s:s.lView:null}function Da(o){return o.ngOriginalError}function dy(o,...s){o.error(...s)}class vu{constructor(){this._console=console}handleError(s){const u=this._findOriginalError(s),l=this._findContext(s),p=(o=s)&&o.ngErrorLogger||dy;var o;p(this._console,"ERROR",s),u&&p(this._console,"ORIGINAL ERROR",u),l&&p(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(Da(s)):null}_findOriginalError(s){let u=s&&Da(s);for(;u&&Da(u);)u=Da(u);return u||null}}const Dg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(on))();function co(o){return o instanceof Function?o():o}var lo=(()=>((lo=lo||{})[lo.Important=1]="Important",lo[lo.DashCase=2]="DashCase",lo))();function Ms(o,s){return undefined(o,s)}function Fs(o){const s=o[3];return _i(s)?s[3]:s}function rf(o){return gd(o[13])}function Rg(o){return gd(o[4])}function gd(o){for(;null!==o&&!_i(o);)o=o[4];return o}function Ia(o,s,u,l,p){if(null!=l){let m,b=!1;_i(l)?m=l:En(l)&&(b=!0,l=l[0]);const w=dn(l);0===o&&null!==u?null==p?O(s,u,w):R(s,u,w,p||null,!0):1===o&&null!==u?R(s,u,w,p||null,!0):2===o?function(o,s,u){const l=W(o,s);l&&function(o,s,u,l){vn(o)?o.removeChild(s,u,l):s.removeChild(u)}(o,l,s,u)}(s,w,b):3===o&&s.destroyNode(w),null!=m&&function(o,s,u,l,p){const m=u[7];m!==dn(u)&&Ia(s,o,l,m,p);for(let w=10;w<u.length;w++){const D=u[w];Ta(D[1],D,o,s,l,m)}}(s,o,m,u,p)}}function md(o,s,u){return vn(o)?o.createElement(s,u):null===u?o.createElement(s):o.createElementNS(u,s)}function sf(o,s){const u=o[9],l=u.indexOf(s),p=s[3];1024&s[2]&&(s[2]&=-1025,fs(p,-1)),u.splice(l,1)}function af(o,s){if(o.length<=10)return;const u=10+s,l=o[u];if(l){const p=l[17];null!==p&&p!==o&&sf(p,l),s>0&&(o[u-1][4]=l[4]);const m=ha(o,10+s);!function(o,s){Ta(o,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const b=m[19];null!==b&&b.detachView(m[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function d(o,s){if(!(256&s[2])){const u=s[11];vn(u)&&u.destroyNode&&Ta(o,s,u,3,null,null),function(o){let s=o[13];if(!s)return h(o[1],o);for(;s;){let u=null;if(En(s))u=s[13];else{const l=s[10];l&&(u=l)}if(!u){for(;s&&!s[4]&&s!==o;)En(s)&&h(s[1],s),s=s[3];null===s&&(s=o),En(s)&&h(s[1],s),u=s&&s[4]}s=u}}(s)}}function h(o,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(o,s){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let l=0;l<u.length;l+=2){const p=s[u[l]];if(!(p instanceof tu)){const m=u[l+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const w=p[m[b]],D=m[b+1];try{D.call(w)}finally{}}else try{m.call(p)}finally{}}}}(o,s),function(o,s){const u=o.cleanup,l=s[7];let p=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const b=u[m+1],w="function"==typeof b?b(s):dn(s[b]),D=l[p=u[m+2]],S=u[m+3];"boolean"==typeof S?w.removeEventListener(u[m],D,S):S>=0?l[p=S]():l[p=-S].unsubscribe(),m+=2}else{const b=l[p=u[m+1]];u[m].call(b)}if(null!==l){for(let m=p+1;m<l.length;m++)l[m]();s[7]=null}}(o,s),1===s[1].type&&vn(s[11])&&s[11].destroy();const u=s[17];if(null!==u&&_i(s[3])){u!==s[3]&&sf(u,s);const l=s[19];null!==l&&l.detachView(o)}}}function E(o,s,u){return function(o,s,u){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return u[0];if(2&l.flags){const p=o.data[l.directiveStart].encapsulation;if(p===Qe.None||p===Qe.Emulated)return null}return bi(l,u)}(o,s.parent,u)}function R(o,s,u,l,p){vn(o)?o.insertBefore(s,u,l,p):s.insertBefore(u,l,p)}function O(o,s,u){vn(o)?o.appendChild(s,u):s.appendChild(u)}function L(o,s,u,l,p){null!==l?R(o,s,u,l,p):O(o,s,u)}function W(o,s){return vn(o)?o.parentNode(s):s.parentNode}let Ve=function(o,s,u){return 40&o.type?bi(o,u):null};function _t(o,s,u,l){const p=E(o,l,s),m=s[11],w=function(o,s,u){return Ve(o,s,u)}(l.parent||s[6],l,s);if(null!=p)if(Array.isArray(u))for(let D=0;D<u.length;D++)L(m,p,u[D],w,!1);else L(m,p,u,w,!1)}function xn(o,s){if(null!==s){const u=s.type;if(3&u)return bi(s,o);if(4&u)return _u(-1,o[s.index]);if(8&u){const l=s.child;if(null!==l)return xn(o,l);{const p=o[s.index];return _i(p)?_u(-1,p):dn(p)}}if(32&u)return Ms(s,o)()||dn(o[s.index]);{const l=Di(o,s);return null!==l?Array.isArray(l)?l[0]:xn(Fs(o[16]),l):xn(o,s.next)}}return null}function Di(o,s){return null!==s?o[16][6].projection[s.projection]:null}function _u(o,s){const u=10+o+1;if(u<s.length){const l=s[u],p=l[1].firstChild;if(null!==p)return xn(l,p)}return s[7]}function bu(o,s,u,l,p,m,b){for(;null!=u;){const w=l[u.index],D=u.type;if(b&&0===s&&(w&&ir(dn(w),l),u.flags|=4),64!=(64&u.flags))if(8&D)bu(o,s,u.child,l,p,m,!1),Ia(s,o,p,w,m);else if(32&D){const S=Ms(u,l);let N;for(;N=S();)Ia(s,o,p,N,m);Ia(s,o,p,w,m)}else 16&D?wu(o,s,l,u,p,m):Ia(s,o,p,w,m);u=b?u.projectionNext:u.next}}function Ta(o,s,u,l,p,m){bu(u,l,o.firstChild,s,p,m,!1)}function wu(o,s,u,l,p,m){const b=u[16],D=b[6].projection[l.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)Ia(s,o,p,D[S],m);else bu(o,s,D,b[3],p,m,!0)}function ww(o,s,u){vn(o)?o.setAttribute(s,"style",u):s.style.cssText=u}function Sy(o,s,u){vn(o)?""===u?o.removeAttribute(s,"class"):o.setAttribute(s,"class",u):s.className=u}function Ay(o,s,u){let l=o.length;for(;;){const p=o.indexOf(s,u);if(-1===p)return p;if(0===p||o.charCodeAt(p-1)<=32){const m=s.length;if(p+m===l||o.charCodeAt(p+m)<=32)return p}u=p+1}}const Ew="ng-template";function EI(o,s,u){let l=0;for(;l<o.length;){let p=o[l++];if(u&&"class"===p){if(p=o[l],-1!==Ay(p.toLowerCase(),s,0))return!0}else if(1===p){for(;l<o.length&&"string"==typeof(p=o[l++]);)if(p.toLowerCase()===s)return!0;return!1}}return!1}function Ry(o){return 4===o.type&&o.value!==Ew}function CI(o,s,u){return s===(4!==o.type||u?o.value:Ew)}function DI(o,s,u){let l=4;const p=o.attrs||[],m=function(o){for(let s=0;s<o.length;s++)if(zp(o[s]))return s;return o.length}(p);let b=!1;for(let w=0;w<s.length;w++){const D=s[w];if("number"!=typeof D){if(!b)if(4&l){if(l=2|1&l,""!==D&&!CI(o,D,u)||""===D&&1===s.length){if(Wo(l))return!1;b=!0}}else{const S=8&l?D:s[++w];if(8&l&&null!==o.attrs){if(!EI(o.attrs,S,u)){if(Wo(l))return!1;b=!0}continue}const F=xy(8&l?"class":D,p,Ry(o),u);if(-1===F){if(Wo(l))return!1;b=!0;continue}if(""!==S){let U;U=F>m?"":p[F+1].toLowerCase();const z=8&l?U:null;if(z&&-1!==Ay(z,S,0)||2&l&&S!==U){if(Wo(l))return!1;b=!0}}}}else{if(!b&&!Wo(l)&&!Wo(D))return!1;if(b&&Wo(D))continue;b=!1,l=D|1&l}}return Wo(l)||b}function Wo(o){return 0==(1&o)}function xy(o,s,u,l){if(null===s)return-1;let p=0;if(l||!u){let m=!1;for(;p<s.length;){const b=s[p];if(b===o)return p;if(3===b||6===b)m=!0;else{if(1===b||2===b){let w=s[++p];for(;"string"==typeof w;)w=s[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=m?1:2}return-1}return function(o,s){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const l=o[u];if("number"==typeof l)return-1;if(l===s)return u;u++}return-1}(s,o)}function Cw(o,s,u=!1){for(let l=0;l<s.length;l++)if(DI(o,s[l],u))return!0;return!1}function Iw(o,s){return o?":not("+s.trim()+")":s}function SI(o){let s=o[0],u=1,l=2,p="",m=!1;for(;u<o.length;){let b=o[u];if("string"==typeof b)if(2&l){const w=o[++u];p+="["+b+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?p+="."+b:4&l&&(p+=" "+b);else""!==p&&!Wo(b)&&(s+=Iw(m,p),p=""),l=b,m=m||!Wo(l);u++}return""!==p&&(s+=Iw(m,p)),s}const bt={};function Tw(o){Py(Ut(),Se(),Wn()+o,ra())}function Py(o,s,u,l){if(!l)if(3==(3&s[2])){const m=o.preOrderCheckHooks;null!==m&&ps(s,m,u)}else{const m=o.preOrderHooks;null!==m&&fc(s,m,0,u)}Li(u)}function Hy(o,s){const u=o.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const p=u[l],m=u[l+1];if(-1!==m){const b=o.data[m];ia(p),b.contentQueries(2,s[m],m)}}}function Ug(o,s,u,l,p,m,b,w,D,S){const N=s.blueprint.slice();return N[0]=p,N[2]=140|l,kh(N),N[3]=N[15]=o,N[8]=u,N[10]=b||o&&o[10],N[11]=w||o&&o[11],N[12]=D||o&&o[12]||null,N[9]=S||o&&o[9]||null,N[6]=m,N[16]=2==s.type?o[16]:N,N}function k(o,s,u,l,p){let m=o.data[s];if(null===m)m=function(o,s,u,l,p){const m=ac(),b=uc(),D=o.data[s]=function(o,s,u,l,p,m){return{type:u,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,u,s,l,p);return null===o.firstChild&&(o.firstChild=D),null!==m&&(b?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(o,s,u,l,p),ht.lFrame.inI18n&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=l,m.attrs=p;const b=function(){const o=ht.lFrame,s=o.currentTNode;return o.isParent?s:s.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return Nr(m,!0),m}function lf(o,s,u,l){if(0===u)return-1;const p=s.length;for(let m=0;m<u;m++)s.push(l),o.blueprint.push(l),o.data.push(null);return p}function ff(o,s,u){oa(s);try{const l=o.viewQuery;null!==l&&$g(1,l,u);const p=o.template;null!==p&&$y(o,s,p,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Hy(o,s),o.staticViewQueries&&$g(2,o.viewQuery,u);const m=o.components;null!==m&&function(o,s){for(let u=0;u<s.length;u++)qw(o,s[u])}(s,m)}catch(l){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),l}finally{s[2]&=-5,Mo()}}function Vc(o,s,u,l){const p=s[2];if(256==(256&p))return;oa(s);const m=ra();try{kh(s),function(o){ht.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&$y(o,s,u,2,l);const b=3==(3&p);if(!m)if(b){const S=o.preOrderCheckHooks;null!==S&&ps(s,S,null)}else{const S=o.preOrderHooks;null!==S&&fc(s,S,0,null),hc(s,0)}if(function(o){for(let s=rf(o);null!==s;s=Rg(s)){if(!s[2])continue;const u=s[9];for(let l=0;l<u.length;l++){const p=u[l],m=p[3];0==(1024&p[2])&&fs(m,1),p[2]|=1024}}}(s),function(o){for(let s=rf(o);null!==s;s=Rg(s))for(let u=10;u<s.length;u++){const l=s[u],p=l[1];Vp(l)&&Vc(p,l,p.template,l[8])}}(s),null!==o.contentQueries&&Hy(o,s),!m)if(b){const S=o.contentCheckHooks;null!==S&&ps(s,S)}else{const S=o.contentHooks;null!==S&&fc(s,S,1),hc(s,1)}!function(o,s){const u=o.hostBindingOpCodes;if(null!==u)try{for(let l=0;l<u.length;l++){const p=u[l];if(p<0)Li(~p);else{const m=p,b=u[++l],w=u[++l];Hp(b,m),w(2,s[m])}}}finally{Li(-1)}}(o,s);const w=o.components;null!==w&&function(o,s){for(let u=0;u<s.length;u++)e_(o,s[u])}(s,w);const D=o.viewQuery;if(null!==D&&$g(2,D,l),!m)if(b){const S=o.viewCheckHooks;null!==S&&ps(s,S)}else{const S=o.viewHooks;null!==S&&fc(s,S,2),hc(s,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,fs(s[3],-1))}finally{Mo()}}function Nw(o,s,u,l){const p=s[10],m=!ra(),b=Lp(s);try{m&&!b&&p.begin&&p.begin(),b&&ff(o,s,l),Vc(o,s,u,l)}finally{m&&!b&&p.end&&p.end()}}function $y(o,s,u,l,p){const m=Wn(),b=2&l;try{Li(-1),b&&s.length>20&&Py(o,s,20,ra()),u(l,p)}finally{Li(m)}}function zy(o){const s=o.tView;return null===s||s.incompleteFirstPass?o.tView=hf(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):s}function hf(o,s,u,l,p,m,b,w,D,S){const N=20+l,F=N+p,U=function(o,s){const u=[];for(let l=0;l<s;l++)u.push(l<o?null:bt);return u}(N,F),z="function"==typeof S?S():S;return U[1]={type:o,blueprint:U,template:u,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:D,consts:z,incompleteFirstPass:!1}}function Cu(o,s,u,l){const p=Wg(s);null===u?p.push(l):(p.push(u),o.firstCreatePass&&qg(o).push(l,p.length-1))}function Ow(o,s,u){for(let l in o)if(o.hasOwnProperty(l)){const p=o[l];(u=null===u?{}:u).hasOwnProperty(l)?u[l].push(s,p):u[l]=[s,p]}return u}function Lw(o,s,u,l,p,m){const b=m.hostBindings;if(b){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const D=~s.index;(function(o){let s=o.length;for(;s>0;){const u=o[--s];if("number"==typeof u&&u<0)return u}return 0})(w)!=D&&w.push(D),w.push(l,p,b)}}function Er(o,s){null!==o.hostBindings&&o.hostBindings(1,s)}function Vw(o,s){s.flags|=2,(o.components||(o.components=[])).push(s.index)}function Uw(o,s,u){if(u){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)u[s.exportAs[l]]=o;no(s)&&(u[""]=o)}}function Xy(o,s,u){o.flags|=1,o.directiveStart=s,o.directiveEnd=s+u,o.providerIndexes=s}function jw(o,s,u,l,p){o.data[l]=p;const m=p.factory||(p.factory=xo(p.type)),b=new tu(m,no(p),null);o.blueprint[l]=b,u[l]=b,Lw(o,s,0,l,lf(o,u,p.hostVars,bt),p)}function Bw(o,s,u){const l=bi(s,o),p=zy(u),m=o[10],b=gf(o,Ug(o,p,null,u.onPush?64:16,l,s,m,m.createRenderer(l,u),null,null));o[s.index]=b}function ho(o,s,u,l,p,m){const b=bi(o,s);!function(o,s,u,l,p,m,b){if(null==m)vn(o)?o.removeAttribute(s,p,u):s.removeAttribute(p);else{const w=null==b?Ne(m):b(m,l||"",p);vn(o)?o.setAttribute(s,p,w,u):u?s.setAttributeNS(u,p,w):s.setAttribute(p,w)}}(s[11],b,m,o.value,u,l,p)}function Hw(o,s,u,l,p,m){const b=m[s];if(null!==b){const w=l.setInput;for(let D=0;D<b.length;){const S=b[D++],N=b[D++],F=b[D++];null!==w?l.setInput(u,F,S,N):u[N]=F}}}function ci(o,s){let u=null,l=0;for(;l<s.length;){const p=s[l];if(0!==p)if(5!==p){if("number"==typeof p)break;o.hasOwnProperty(p)&&(null===u&&(u=[]),u.push(p,o[p],s[l+1])),l+=2}else l+=2;else l+=4}return u}function e_(o,s){const u=jr(s,o);if(Vp(u)){const l=u[1];80&u[2]?Vc(l,u,l.template,u[8]):u[5]>0&&Bg(u)}}function Bg(o){for(let l=rf(o);null!==l;l=Rg(l))for(let p=10;p<l.length;p++){const m=l[p];if(1024&m[2]){const b=m[1];Vc(b,m,b.template,m[8])}else m[5]>0&&Bg(m)}const u=o[1].components;if(null!==u)for(let l=0;l<u.length;l++){const p=jr(u[l],o);Vp(p)&&p[5]>0&&Bg(p)}}function qw(o,s){const u=jr(s,o),l=u[1];(function(o,s){for(let u=s.length;u<o.blueprint.length;u++)s.push(o.blueprint[u])})(l,u),ff(l,u,u[8])}function gf(o,s){return o[13]?o[14][4]=s:o[13]=s,o[14]=s,s}function t_(o){for(;o;){o[2]|=64;const s=Fs(o);if(Fi(o)&&!s)return o;o=s}return null}function Hg(o,s,u){const l=s[10];l.begin&&l.begin();try{Vc(o,s,o.template,u)}catch(p){throw Yw(s,p),p}finally{l.end&&l.end()}}function Gg(o){!function(o){for(let s=0;s<o.components.length;s++){const u=o.components[s],l=Xl(u),p=l[1];Nw(p,l,p.template,u)}}(o[8])}function $g(o,s,u){ia(0),s(o,u)}const r_=(()=>Promise.resolve(null))();function Wg(o){return o[7]||(o[7]=[])}function qg(o){return o.cleanup||(o.cleanup=[])}function Yw(o,s){const u=o[9],l=u?u.get(vu,null):null;l&&l.handleError(s)}function zg(o,s,u,l,p){for(let m=0;m<u.length;){const b=u[m++],w=u[m++],D=s[b],S=o.data[b];null!==S.setInput?S.setInput(D,p,l,w):D[w]=p}}function ks(o,s,u){const l=function(o,s){return dn(s[o])}(s,o);!function(o,s,u){vn(o)?o.setValue(s,u):s.textContent=u}(o[11],l,u)}function Kg(o,s,u){let l=u?o.styles:null,p=u?o.classes:null,m=0;if(null!==s)for(let b=0;b<s.length;b++){const w=s[b];"number"==typeof w?m=w:1==m?p=te(p,w):2==m&&(l=te(l,w+": "+s[++b]+";"))}u?o.styles=l:o.stylesWithoutHost=l,u?o.classes=p:o.classesWithoutHost=p}const mf=new Rn("INJECTOR",-1);class vf{get(s,u=Ec){if(u===Ec){const l=new Error(`NullInjectorError: No provider for ${ae(s)}!`);throw l.name="NullInjectorError",l}return u}}const _d=new Rn("Set Injector scope."),bd={},Yg={};let yf;function Jg(){return void 0===yf&&(yf=new vf),yf}function Zg(o,s=null,u=null,l){return new o_(o,u,s||Jg(),l)}class o_{constructor(s,u,l,p=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&pr(u,w=>this.processProvider(w,s,u)),pr([s],w=>this.processInjectorType(w,[],m)),this.records.set(mf,Uc(void 0,this));const b=this.records.get(_d);this.scope=null!=b?b.value:null,this.source=p||("object"==typeof s?null:ae(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,u=Ec,l=Ke.Default){this.assertNotDestroyed();const p=yt(this),m=wn(void 0);try{if(!(l&Ke.SkipSelf)){let w=this.records.get(s);if(void 0===w){const D=("function"==typeof(o=s)||"object"==typeof o&&o instanceof Rn)&&tr(s);w=D&&this.injectableDefInScope(D)?Uc(Xg(s),bd):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&Ke.Self?Jg():this.parent).get(s,u=l&Ke.Optional&&u===Ec?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[au]=b[au]||[]).unshift(ae(s)),p)throw b;return Bi(b,s,"R3InjectorError",this.source)}throw b}finally{wn(m),yt(p)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,p)=>s.push(ae(p))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,u,l){if(!(s=j(s)))return!1;let p=qa(s);const m=null==p&&s.ngModule||void 0,b=void 0===m?s:m,w=-1!==l.indexOf(b);if(void 0!==m&&(p=qa(m)),null==p)return!1;if(null!=p.imports&&!w){let N;l.push(b);try{pr(p.imports,F=>{this.processInjectorType(F,u,l)&&(void 0===N&&(N=[]),N.push(F))})}finally{}if(void 0!==N)for(let F=0;F<N.length;F++){const{ngModule:U,providers:z}=N[F];pr(z,J=>this.processProvider(J,U,z||Q))}}this.injectorDefTypes.add(b);const D=xo(b)||(()=>new b);this.records.set(b,Uc(D,bd));const S=p.providers;if(null!=S&&!w){const N=s;pr(S,F=>this.processProvider(F,N,S))}return void 0!==m&&void 0!==s.providers}processProvider(s,u,l){let p=Tu(s=j(s))?s:j(s&&s.provide);const m=em(o=s)?Uc(void 0,o.useValue):Uc(function(o,s,u){let l;if(Tu(o)){const p=j(o);return xo(p)||Xg(p)}if(em(o))l=()=>j(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))l=()=>o.useFactory(...ma(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))l=()=>Qt(j(o.useExisting));else{const p=j(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return xo(p)||Xg(p);l=()=>new p(...ma(o.deps))}return l}(o),bd);var o;if(Tu(s)||!0!==s.multi)this.records.get(p);else{let b=this.records.get(p);b||(b=Uc(void 0,bd,!0),b.factory=()=>ma(b.multi),this.records.set(p,b)),p=s,b.multi.push(s)}this.records.set(p,m)}hydrate(s,u){return u.value===bd&&(u.value=Yg,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(o=u.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var o}injectableDefInScope(s){if(!s.providedIn)return!1;const u=j(s.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Xg(o){const s=tr(o),u=null!==s?s.factory:xo(o);if(null!==u)return u;if(o instanceof Rn)throw new Error(`Token ${ae(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const s=o.length;if(s>0){const l=function(o,s){const u=[];for(let l=0;l<o;l++)u.push(s);return u}(s,"?");throw new Error(`Can't resolve all parameters for ${ae(o)}: (${l.join(", ")}).`)}const u=function(o){const s=o&&(o[jt]||o[fr]);if(s){const u=function(o){if(o.hasOwnProperty("name"))return o.name;const s=(""+o).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),s}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Error("unreachable")}function Uc(o,s,u=!1){return{factory:o,value:s,multi:u?[]:void 0}}function em(o){return null!==o&&"object"==typeof o&&Cc in o}function Tu(o){return"function"==typeof o}const Xw=function(o,s,u){return function(o,s=null,u=null,l){const p=Zg(o,s,u,l);return p._resolveInjectorDefTypes(),p}({name:u},s,o,u)};let Nn=(()=>{class o{static create(u,l){return Array.isArray(u)?Xw(u,l,""):Xw(u.providers,u.parent,u.name||"")}}return o.THROW_IF_NOT_FOUND=Ec,o.NULL=new vf,o.\u0275prov=Gt({token:o,providedIn:"any",factory:()=>Qt(mf)}),o.__NG_ELEMENT_ID__=-1,o})();function xd(o,s){ds(Xl(o)[1],Dn())}let jc=null;function Ls(){if(!jc){const o=on.Symbol;if(o&&o.iterator)jc=o.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<s.length;++u){const l=s[u];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(jc=l)}}}return jc}class Wi{constructor(s){this.wrapped=s}static wrap(s){return new Wi(s)}static unwrap(s){return Wi.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof Wi}}function Md(o){return!!Od(o)&&(Array.isArray(o)||!(o instanceof Map)&&Ls()in o)}function Od(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function zr(o,s,u){return!Object.is(o[s],u)&&(o[s]=u,!0)}function Ef(o,s,u,l){const p=Se();return zr(p,Po(),s)&&(Ut(),ho(An(),p,o,s,u,l)),Ef}function xf(o,s=Ke.Default){const u=Se();return null===u?Qt(o,s):Jp(Dn(),u,j(o),s)}function mm(o,s,u,l,p){const b=p?"class":"style";zg(o,u,s.inputs[b],b,l)}function vm(o,s,u,l){const p=Se(),m=Ut(),b=20+o,w=p[11],D=p[b]=md(w,s,ht.lFrame.currentNamespace),S=m.firstCreatePass?function(o,s,u,l,p,m,b){const w=s.consts,S=k(s,o,2,p,ls(w,m));return function(o,s,u,l){let p=!1;if(Vv()){const m=function(o,s,u){const l=o.directiveRegistry;let p=null;if(l)for(let m=0;m<l.length;m++){const b=l[m];Cw(u,b.selectors,!1)&&(p||(p=[]),Ei(nu(u,s),o,b.type),no(b)?(Vw(o,u),p.unshift(b)):p.push(b))}return p}(o,s,u),b=null===l?null:{"":-1};if(null!==m){p=!0,Xy(u,o.data.length,m.length);for(let N=0;N<m.length;N++){const F=m[N];F.providersResolver&&F.providersResolver(F)}let w=!1,D=!1,S=lf(o,s,m.length,null);for(let N=0;N<m.length;N++){const F=m[N];u.mergedAttrs=pc(u.mergedAttrs,F.hostAttrs),jw(o,u,s,S,F),Uw(S,F,b),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const U=F.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),w=!0),!D&&(U.ngOnChanges||U.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),D=!0),S++}!function(o,s){const l=s.directiveEnd,p=o.data,m=s.attrs,b=[];let w=null,D=null;for(let S=s.directiveStart;S<l;S++){const N=p[S],F=N.inputs,U=null===m||Ry(s)?null:ci(F,m);b.push(U),w=Ow(F,S,w),D=Ow(N.outputs,S,D)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=b,s.inputs=w,s.outputs=D}(o,u)}b&&function(o,s,u){if(s){const l=o.localNames=[];for(let p=0;p<s.length;p+=2){const m=u[s[p+1]];if(null==m)throw new De("301",`Export of name '${s[p+1]}' not found!`);l.push(s[p],m)}}}(u,l,b)}u.mergedAttrs=pc(u.mergedAttrs,u.attrs)}(s,u,S,ls(w,b)),null!==S.attrs&&Kg(S,S.attrs,!1),null!==S.mergedAttrs&&Kg(S,S.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,S),S}(b,m,p,0,s,u,l):m.data[b];Nr(S,!0);const N=S.mergedAttrs;null!==N&&Hh(w,D,N);const F=S.classes;null!==F&&Sy(w,D,F);const U=S.styles;null!==U&&ww(w,D,U),64!=(64&S.flags)&&_t(m,p,D,S),0===ht.lFrame.elementDepthCount&&ir(D,p),ht.lFrame.elementDepthCount++,yl(S)&&(function(o,s,u){!Vv()||(function(o,s,u,l){const p=u.directiveStart,m=u.directiveEnd;o.firstCreatePass||nu(u,s),ir(l,s);const b=u.initialInputs;for(let w=p;w<m;w++){const D=o.data[w],S=no(D);S&&Bw(s,u,D);const N=rr(s,o,w,u);ir(N,s),null!==b&&Hw(0,w-p,N,D,0,b),S&&(jr(u.index,s)[8]=N)}}(o,s,u,bi(u,s)),128==(128&u.flags)&&function(o,s,u){const l=u.directiveStart,p=u.directiveEnd,b=u.index,w=ht.lFrame.currentDirectiveIndex;try{Li(b);for(let D=l;D<p;D++){const S=o.data[D],N=s[D];Br(D),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Er(S,N)}}finally{Li(-1),Br(w)}}(o,s,u))}(m,p,S),function(o,s,u){if(ec(s)){const p=s.directiveEnd;for(let m=s.directiveStart;m<p;m++){const b=o.data[m];b.contentQueries&&b.contentQueries(1,u[m],m)}}}(m,S,p)),null!==l&&function(o,s,u=bi){const l=s.localNames;if(null!==l){let p=s.index+1;for(let m=0;m<l.length;m+=2){const b=l[m+1],w=-1===b?u(s,o):o[b];o[p++]=w}}}(p,S)}function ym(){let o=Dn();uc()?ht.lFrame.isParent=!1:(o=o.parent,Nr(o,!1));const s=o;ht.lFrame.elementDepthCount--;const u=Ut();u.firstCreatePass&&(ds(u,o),ec(o)&&u.queries.elementEnd(o)),null!=s.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(s)&&mm(u,s,Se(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(s)&&mm(u,s,Se(),s.stylesWithoutHost,!1)}function Ud(o,s,u,l){vm(o,s,u,l),ym()}function Nf(o){return!!o&&"function"==typeof o.then}function O_(o){return!!o&&"function"==typeof o.subscribe}const _m=O_;function jd(o,s,u,l){const p=Se(),m=Ut(),b=Dn();return function(o,s,u,l,p,m,b,w){const D=yl(l),N=o.firstCreatePass&&qg(o),F=s[8],U=Wg(s);let z=!0;if(3&l.type||w){const oe=bi(l,s),Me=w?w(oe):oe,Ee=U.length,ot=w?wt=>w(dn(wt[l.index])):l.index;if(vn(u)){let wt=null;if(!w&&D&&(wt=function(o,s,u,l){const p=o.cleanup;if(null!=p)for(let m=0;m<p.length-1;m+=2){const b=p[m];if(b===u&&p[m+1]===l){const w=s[7],D=p[m+2];return w.length>D?w[D]:null}"string"==typeof b&&(m+=2)}return null}(o,s,p,l.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=m,wt.__ngLastListenerFn__=m,z=!1;else{m=FE(l,s,F,m,!1);const Kt=u.listen(Me,p,m);U.push(m,Kt),N&&N.push(p,ot,Ee,Ee+1)}}else m=FE(l,s,F,m,!0),Me.addEventListener(p,m,b),U.push(m),N&&N.push(p,ot,Ee,b)}else m=FE(l,s,F,m,!1);const J=l.outputs;let ge;if(z&&null!==J&&(ge=J[p])){const oe=ge.length;if(oe)for(let Me=0;Me<oe;Me+=2){const Lr=s[ge[Me]][ge[Me+1]].subscribe(m),zs=U.length;U.push(m,Lr),N&&N.push(p,l.index,zs,-(zs+1))}}}(m,p,p[11],b,o,s,!!u,l),jd}function pT(o,s,u,l){try{return!1!==u(l)}catch(p){return Yw(o,p),!1}}function FE(o,s,u,l,p){return function m(b){if(b===Function)return l;const w=2&o.flags?jr(o.index,s):s;0==(32&s[2])&&t_(w);let D=pT(s,0,l,b),S=m.__ngNextListenerFn__;for(;S;)D=pT(s,0,S,b)&&D,S=S.__ngNextListenerFn__;return p&&!1===D&&(b.preventDefault(),b.returnValue=!1),D}}function Lf(o,s=""){const u=Se(),l=Ut(),p=o+20,m=l.firstCreatePass?k(l,p,1,s,null):l.data[p],b=u[p]=function(o,s){return vn(o)?o.createText(s):o.createTextNode(s)}(u[11],s);_t(l,u,b,m),Nr(m,!1)}function Wc(o,s,u){const l=Se(),p=function(o,s,u,l){return zr(o,Po(),u)?s+Ne(u)+l:bt}(l,o,s,u);return p!==bt&&ks(l,Wn(),p),Wc}function Gf(o,s,u){const l=Se();return zr(l,Po(),s)&&function(o,s,u,l,p,m,b,w){const D=bi(s,u);let N,S=s.inputs;!w&&null!=S&&(N=S[l])?(zg(o,u,N,l,p),xr(s)&&function(o,s){const u=jr(s,o);16&u[2]||(u[2]|=64)}(u,s.index)):3&s.type&&(l=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(l),p=null!=b?b(p,s.value||"",l):p,vn(m)?m.setProperty(D,l,p):Ui(l)||(D.setProperty?D.setProperty(l,p):D[l]=p))}(Ut(),An(),l,o,s,l[11],u,!0),Gf}const qc=void 0;var $f=["en",[["a","p"],["AM","PM"],qc],[["AM","PM"],qc,qc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qc,"{1} 'at' {0}",qc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const s=Math.floor(Math.abs(o)),u=o.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===u?1:5}];let _o={};function La(o){const s=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=X_(s);if(u)return u;const l=s.split("-")[0];if(u=X_(l),u)return u;if("en"===l)return $f;throw new Error(`Missing locale data for the locale "${o}".`)}function zc(o){return La(o)[ct.PluralCase]}function X_(o){return o in _o||(_o[o]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[o]),_o[o]}var ct=(()=>((ct=ct||{})[ct.LocaleId=0]="LocaleId",ct[ct.DayPeriodsFormat=1]="DayPeriodsFormat",ct[ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",ct[ct.DaysFormat=3]="DaysFormat",ct[ct.DaysStandalone=4]="DaysStandalone",ct[ct.MonthsFormat=5]="MonthsFormat",ct[ct.MonthsStandalone=6]="MonthsStandalone",ct[ct.Eras=7]="Eras",ct[ct.FirstDayOfWeek=8]="FirstDayOfWeek",ct[ct.WeekendRange=9]="WeekendRange",ct[ct.DateFormat=10]="DateFormat",ct[ct.TimeFormat=11]="TimeFormat",ct[ct.DateTimeFormat=12]="DateTimeFormat",ct[ct.NumberSymbols=13]="NumberSymbols",ct[ct.NumberFormats=14]="NumberFormats",ct[ct.CurrencyCode=15]="CurrencyCode",ct[ct.CurrencySymbol=16]="CurrencySymbol",ct[ct.CurrencyName=17]="CurrencyName",ct[ct.Currencies=18]="Currencies",ct[ct.Directionality=19]="Directionality",ct[ct.PluralCase=20]="PluralCase",ct[ct.ExtraData=21]="ExtraData",ct))();const Kc="en-US";let qf=Kc;function Bs(o){at(o,"Expected localeId to be defined"),"string"==typeof o&&(qf=o.toLowerCase().replace(/_/g,"-"))}class Oe{}const Yc="ngComponent";class Zd{resolveComponentFactory(s){throw function(o){const s=Error(`No component factory found for ${ae(o)}. Did you add it to @NgModule.entryComponents?`);return s[Yc]=o,s}(s)}}let wo=(()=>{class o{}return o.NULL=new Zd,o})();function Xd(...o){}function Jc(o,s){return new Yi(bi(o,s))}const GT=function(){return Jc(Dn(),Se())};let Yi=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=GT,o})();function g0(o){return o instanceof Yi?o.nativeElement:o}class ep{}let m0=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>Xf(),o})();const Xf=function(){const o=Se(),u=jr(Dn().index,o);return function(o){return o[11]}(En(u)?u:o)};let Fm=(()=>{class o{}return o.\u0275prov=Gt({token:o,providedIn:"root",factory:()=>null}),o})();class km{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const v0=new km("12.2.14");class y0{constructor(){}supports(s){return Md(s)}create(s){return new _0(s)}}const CC=(o,s)=>s;class _0{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||CC}forEachItem(s){let u;for(u=this._itHead;null!==u;u=u._next)s(u)}forEachOperation(s){let u=this._itHead,l=this._removalsHead,p=0,m=null;for(;u||l;){const b=!l||u&&u.currentIndex<Zo(l,p,m)?u:l,w=Zo(b,p,m),D=b.currentIndex;if(b===l)p--,l=l._nextRemoved;else if(u=u._next,null==b.previousIndex)p++;else{m||(m=[]);const S=w-p,N=D-p;if(S!=N){for(let U=0;U<S;U++){const z=U<m.length?m[U]:m[U]=0,J=z+U;N<=J&&J<S&&(m[U]=z+1)}m[b.previousIndex]=N-S}}w!==D&&s(b,w,D)}}forEachPreviousItem(s){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)s(u)}forEachAddedItem(s){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)s(u)}forEachMovedItem(s){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)s(u)}forEachRemovedItem(s){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)s(u)}forEachIdentityChange(s){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)s(u)}diff(s){if(null==s&&(s=[]),!Md(s))throw new Error(`Error trying to diff '${ae(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let p,m,b,u=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)m=s[w],b=this._trackByFn(w,m),null!==u&&Object.is(u.trackById,b)?(l&&(u=this._verifyReinsertion(u,m,b,w)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,b,w),l=!0),u=u._next}else p=0,function(o,s){if(Array.isArray(o))for(let u=0;u<o.length;u++)s(o[u]);else{const u=o[Ls()]();let l;for(;!(l=u.next()).done;)s(l.value)}}(s,w=>{b=this._trackByFn(p,w),null!==u&&Object.is(u.trackById,b)?(l&&(u=this._verifyReinsertion(u,w,b,p)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,b,p),l=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,u,l,p){let m;return null===s?m=this._itTail:(m=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,u)||this._addIdentityChange(s,u),this._reinsertAfter(s,m,p)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,p))?(Object.is(s.item,u)||this._addIdentityChange(s,u),this._moveAfter(s,m,p)):s=this._addAfter(new $T(u,l),m,p),s}_verifyReinsertion(s,u,l,p){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?s=this._reinsertAfter(m,s._prev,p):s.currentIndex!=p&&(s.currentIndex=p,this._addToMoves(s,p)),s}_truncate(s){for(;null!==s;){const u=s._next;this._addToRemovals(this._unlink(s)),s=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const p=s._prevRemoved,m=s._nextRemoved;return null===p?this._removalsHead=m:p._nextRemoved=m,null===m?this._removalsTail=p:m._prevRemoved=p,this._insertAfter(s,u,l),this._addToMoves(s,l),s}_moveAfter(s,u,l){return this._unlink(s),this._insertAfter(s,u,l),this._addToMoves(s,l),s}_addAfter(s,u,l){return this._insertAfter(s,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,u,l){const p=null===u?this._itHead:u._next;return s._next=p,s._prev=u,null===p?this._itTail=s:p._prev=s,null===u?this._itHead=s:u._next=s,null===this._linkedRecords&&(this._linkedRecords=new b0),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const u=s._prev,l=s._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,s}_addToMoves(s,u){return s.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new b0),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,u){return s.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class $T{constructor(s,u){this.item=s,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const u=s._prevDup,l=s._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class b0{constructor(){this.map=new Map}put(s){const u=s.trackById;let l=this.map.get(u);l||(l=new DC,this.map.set(u,l)),l.add(s)}get(s,u){const p=this.map.get(s);return p?p.get(s,u):null}remove(s){const u=s.trackById;return this.map.get(u).remove(s)&&this.map.delete(u),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zo(o,s,u){const l=o.previousIndex;if(null===l)return l;let p=0;return u&&l<u.length&&(p=u[l]),l+s+p}class w0{constructor(){}supports(s){return s instanceof Map||Od(s)}create(){return new Lm}}class Lm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let u;for(u=this._mapHead;null!==u;u=u._next)s(u)}forEachPreviousItem(s){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)s(u)}forEachChangedItem(s){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)s(u)}forEachAddedItem(s){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)s(u)}forEachRemovedItem(s){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)s(u)}diff(s){if(s){if(!(s instanceof Map||Od(s)))throw new Error(`Error trying to diff '${ae(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(p,l);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,u){if(s){const l=s._prev;return u._next=s,u._prev=l,s._prev=u,l&&(l._next=u),s===this._mapHead&&(this._mapHead=u),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(s,u){if(this._records.has(s)){const p=this._records.get(s);this._maybeAddToChanges(p,u);const m=p._prev,b=p._next;return m&&(m._next=b),b&&(b._prev=m),p._next=null,p._prev=null,p}const l=new WT(s);return this._records.set(s,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,u){Object.is(u,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=u,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,u){s instanceof Map?s.forEach(u):Object.keys(s).forEach(l=>u(s[l],l))}}class WT{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function E0(){return new Xo([new y0])}let Xo=(()=>{class o{constructor(u){this.factories=u}static create(u,l){if(null!=l){const p=l.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:l=>o.create(u,l||E0()),deps:[[o,new Kn,new ws]]}}find(u){const l=this.factories.find(p=>p.supports(u));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(o){return o.name||typeof o}(u)}'`)}}return o.\u0275prov=Gt({token:o,providedIn:"root",factory:E0}),o})();function C0(){return new Zc([new w0])}let Zc=(()=>{class o{constructor(u){this.factories=u}static create(u,l){if(l){const p=l.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:l=>o.create(u,l||C0()),deps:[[o,new Kn,new ws]]}}find(u){const l=this.factories.find(p=>p.supports(u));if(l)return l;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return o.\u0275prov=Gt({token:o,providedIn:"root",factory:C0}),o})();function Vm(o,s,u,l,p=!1){for(;null!==u;){const m=s[u.index];if(null!==m&&l.push(dn(m)),_i(m))for(let w=10;w<m.length;w++){const D=m[w],S=D[1].firstChild;null!==S&&Vm(D[1],D,S,l)}const b=u.type;if(8&b)Vm(o,s,u.child,l);else if(32&b){const w=Ms(u,s);let D;for(;D=w();)l.push(D)}else if(16&b){const w=Di(s,u);if(Array.isArray(w))l.push(...w);else{const D=Fs(s[16]);Vm(D[1],D,w,l,!0)}}u=p?u.projectionNext:u.next}return l}class $s{constructor(s,u){this._lView=s,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,u=s[1];return Vm(u,s,u.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(_i(s)){const u=s[8],l=u?u.indexOf(this):-1;l>-1&&(af(s,l),ha(u,l))}this._attachedToViewContainer=!1}d(this._lView[1],this._lView)}onDestroy(s){Cu(this._lView[1],this._lView,null,s)}markForCheck(){t_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Hg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,s,u){No(!0);try{Hg(o,s,u)}finally{No(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Ta(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class IC extends $s{constructor(s){super(s),this._view=s}detectChanges(){Gg(this._view)}checkNoChanges(){!function(o){No(!0);try{Gg(o)}finally{No(!1)}}(this._view)}get context(){return null}}const TC=function(o){return function(o,s,u){if(xr(o)&&!u){const l=jr(o.index,s);return new $s(l,l)}return 47&o.type?new $s(s[16],s):null}(Dn(),Se(),16==(16&o))};let qT=(()=>{class o{}return o.__NG_ELEMENT_ID__=TC,o})();const QT=[new w0],rh=new Xo([new y0]),SC=new Zc(QT),AC=function(){return ih(Dn(),Se())};let Eo=(()=>{class o{}return o.__NG_ELEMENT_ID__=AC,o})();const jm=Eo,JT=class extends jm{constructor(s,u,l){super(),this._declarationLView=s,this._declarationTContainer=u,this.elementRef=l}createEmbeddedView(s){const u=this._declarationTContainer.tViews,l=Ug(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(u)),ff(u,l,s),new $s(l)}};function ih(o,s){return 4&o.type?new JT(s,o,Jc(o,s)):null}class Xc{}class oh{}const ZT=function(){return MC(Dn(),Se())};let rp=(()=>{class o{}return o.__NG_ELEMENT_ID__=ZT,o})();const NC=rp,PC=class extends NC{constructor(s,u,l){super(),this._lContainer=s,this._hostTNode=u,this._hostLView=l}get element(){return Jc(this._hostTNode,this._hostLView)}get injector(){return new iu(this._hostTNode,this._hostLView)}get parentInjector(){const s=tt(this._hostTNode,this._hostLView);if(Rl(s)){const u=gc(s,this._hostLView),l=sa(s);return new iu(u[1].data[l+8],u)}return new iu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const u=D0(this._lContainer);return null!==u&&u[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,u,l){const p=s.createEmbeddedView(u||{});return this.insert(p,l),p}createComponent(s,u,l,p,m){const b=l||this.parentInjector;if(!m&&null==s.ngModule&&b){const D=b.get(Xc,null);D&&(m=D)}const w=s.create(b,p,void 0,m);return this.insert(w.hostView,u),w}insert(s,u){const l=s._lView,p=l[1];if(_i(l[3])){const N=this.indexOf(s);if(-1!==N)this.detach(N);else{const F=l[3],U=new PC(F,F[6],F[3]);U.detach(U.indexOf(s))}}const m=this._adjustIndex(u),b=this._lContainer;!function(o,s,u,l){const p=10+l,m=u.length;l>0&&(u[p-1][4]=s),l<m-10?(s[4]=u[p],Uo(u,10+l,s)):(u.push(s),s[4]=null),s[3]=u;const b=s[17];null!==b&&u!==b&&function(o,s){const u=o[9];s[16]!==s[3][3][16]&&(o[2]=!0),null===u?o[9]=[s]:u.push(s)}(b,s);const w=s[19];null!==w&&w.insertView(o),s[2]|=128}(p,l,b,m);const w=_u(m,b),D=l[11],S=W(D,b[7]);return null!==S&&function(o,s,u,l,p,m){l[0]=p,l[6]=s,Ta(o,l,u,1,p,m)}(p,b[6],D,l,S,w),s.attachToViewContainerRef(),Uo(Hm(b),m,s),s}move(s,u){return this.insert(s,u)}indexOf(s){const u=D0(this._lContainer);return null!==u?u.indexOf(s):-1}remove(s){const u=this._adjustIndex(s,-1),l=af(this._lContainer,u);l&&(ha(Hm(this._lContainer),u),d(l[1],l))}detach(s){const u=this._adjustIndex(s,-1),l=af(this._lContainer,u);return l&&null!=ha(Hm(this._lContainer),u)?new $s(l):null}_adjustIndex(s,u=0){return null==s?this.length+u:s}};function D0(o){return o[8]}function Hm(o){return o[8]||(o[8]=[])}function MC(o,s){let u;const l=s[o.index];if(_i(l))u=l;else{let p;if(8&o.type)p=dn(l);else{const m=s[11];p=m.createComment("");const b=bi(o,s);R(m,W(m,b),p,function(o,s){return vn(o)?o.nextSibling(s):s.nextSibling}(m,b),!1)}s[o.index]=u=function(o,s,u,l){return new Array(o,!0,!1,s,null,0,l,u,null,null)}(l,s,p,o),gf(s,u)}return new PC(u,o,s)}const gh={};class q0 extends wo{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const u=_r(s);return new zm(u,this.ngModule)}}function iD(o){const s=[];for(let u in o)o.hasOwnProperty(u)&&s.push({propName:o[u],templateName:u});return s}const IS=new Rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Dg});class zm extends Oe{constructor(s,u){super(),this.componentDef=s,this.ngModule=u,this.componentType=s.type,this.selector=s.selectors.map(SI).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return iD(this.componentDef.inputs)}get outputs(){return iD(this.componentDef.outputs)}create(s,u,l,p){const m=(p=p||this.ngModule)?function(o,s){return{get:(u,l,p)=>{const m=o.get(u,gh,p);return m!==gh||l===gh?m:s.get(u,l,p)}}}(s,p.injector):s,b=m.get(ep,pt),w=m.get(Fm,null),D=b.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",N=l?function(o,s,u){if(vn(o))return o.selectRootElement(s,u===Qe.ShadowDom);let l="string"==typeof s?o.querySelector(s):s;return l.textContent="",l}(D,l,this.componentDef.encapsulation):md(b.createRenderer(null,this.componentDef),S,function(o){const s=o.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(S)),F=this.componentDef.onPush?576:528,U=function(o,s){return{components:[],scheduler:o||Dg,clean:r_,playerHandler:s||null,flags:0}}(),z=hf(0,null,null,1,0,null,null,null,null,null),J=Ug(null,z,U,F,null,null,b,D,w,m);let ge,oe;oa(J);try{const Me=function(o,s,u,l,p,m){const b=u[1];u[20]=o;const D=k(b,20,2,"#host",null),S=D.mergedAttrs=s.hostAttrs;null!==S&&(Kg(D,S,!0),null!==o&&(Hh(p,o,S),null!==D.classes&&Sy(p,o,D.classes),null!==D.styles&&ww(p,o,D.styles)));const N=l.createRenderer(o,s),F=Ug(u,zy(s),null,s.onPush?64:16,u[20],D,l,N,m||null,null);return b.firstCreatePass&&(Ei(nu(D,u),b,s.type),Vw(b,D),Xy(D,u.length,1)),gf(u,F),u[20]=F}(N,this.componentDef,J,b,D);if(N)if(l)Hh(D,N,["ng-version",v0.full]);else{const{attrs:Ee,classes:ot}=function(o){const s=[],u=[];let l=1,p=2;for(;l<o.length;){let m=o[l];if("string"==typeof m)2===p?""!==m&&s.push(m,o[++l]):8===p&&u.push(m);else{if(!Wo(p))break;p=m}l++}return{attrs:s,classes:u}}(this.componentDef.selectors[0]);Ee&&Hh(D,N,Ee),ot&&ot.length>0&&Sy(D,N,ot.join(" "))}if(oe=us(z,20),void 0!==u){const Ee=oe.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const wt=u[ot];Ee.push(null!=wt?Array.from(wt):null)}}ge=function(o,s,u,l,p){const m=u[1],b=function(o,s,u){const l=Dn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),jw(o,l,s,lf(o,s,1,null),u));const p=rr(s,o,l.directiveStart,l);ir(p,s);const m=bi(l,s);return m&&ir(m,s),p}(m,u,s);if(l.components.push(b),o[8]=b,p&&p.forEach(D=>D(b,s)),s.contentQueries){const D=Dn();s.contentQueries(1,b,D.directiveStart)}const w=Dn();return!m.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Li(w.index),Lw(u[1],w,0,w.directiveStart,w.directiveEnd,s),Er(s,b)),b}(Me,this.componentDef,J,U,[xd]),ff(z,J,null)}finally{Mo()}return new oD(this.componentType,ge,Jc(oe,J),J,oe)}}class oD extends class{}{constructor(s,u,l,p,m){super(),this.location=l,this._rootLView=p,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new IC(p),this.componentType=s}get injector(){return new iu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const ju=new Map;class NS extends Xc{constructor(s,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new q0(this);const l=yi(s),p=s[je]||null;p&&Bs(p),this._bootstrapComponents=co(l.bootstrap),this._r3Injector=Zg(s,u,[{provide:Xc,useValue:this},{provide:wo,useValue:this.componentFactoryResolver}],ae(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,u=Nn.THROW_IF_NOT_FOUND,l=Ke.Default){return s===Nn||s===Xc||s===mf?this:this._r3Injector.get(s,u,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Km extends oh{constructor(s){super(),this.moduleType=s,null!==yi(s)&&function(o){const s=new Set;!function u(l){const p=yi(l,!0),m=p.id;null!==m&&(function(o,s,u){if(s&&s!==u)throw new Error(`Duplicate module registered for ${o} - ${ae(s)} vs ${ae(s.name)}`)}(m,ju.get(m),l),ju.set(m,l));const b=co(p.imports);for(const w of b)s.has(w)||(s.add(w),u(w))}(o)}(s)}create(s){return new NS(this.moduleType,s)}}function hp(o,s,u,l,p,m){const b=s+u;return zr(o,b,p)?function(o,s,u){return o[s]=u}(o,b+1,m?l.call(m,p):l(p)):function(o,s){const u=o[s];return u===bt?void 0:u}(o,b+1)}function dD(o,s){const u=Ut();let l;const p=o+20;u.firstCreatePass?(l=function(o,s){if(s)for(let u=s.length-1;u>=0;u--){const l=s[u];if(o===l.name)return l}throw new De("302",`The pipe '${o}' could not be found!`)}(s,u.pipeRegistry),u.data[p]=l,l.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,l.onDestroy)):l=u.data[p];const m=l.factory||(l.factory=xo(l.type)),b=wn(xf);try{const w=aa(!1),D=m();return aa(w),function(o,s,u,l){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),s[u]=l}(u,Se(),p,D),D}finally{wn(b)}}function pD(o,s,u){const l=o+20,p=Se(),m=function(o,s){return o[s]}(p,l);return function(o,s){Wi.isWrapped(s)&&(s=Wi.unwrap(s),o[ht.lFrame.bindingIndex]=bt);return s}(p,function(o,s){return o[1].data[s].pure}(p,l)?hp(p,function(){const o=ht.lFrame;let s=o.bindingRootIndex;return-1===s&&(s=o.bindingRootIndex=o.tView.bindingStartIndex),s}(),s,m.transform,u,m):m.transform(u))}function Ym(o){return s=>{setTimeout(o,void 0,s)}}const ts=class extends I.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,u,l){var p,m,b;let w=s,D=u||(()=>null),S=l;if(s&&"object"==typeof s){const F=s;w=null===(p=F.next)||void 0===p?void 0:p.bind(F),D=null===(m=F.error)||void 0===m?void 0:m.bind(F),S=null===(b=F.complete)||void 0===b?void 0:b.bind(F)}this.__isAsync&&(D=Ym(D),w&&(w=Ym(w)),S&&(S=Ym(S)));const N=super.subscribe({next:w,error:D,complete:S});return s instanceof de.w&&s.add(N),N}};function dp(){return this._results[Ls()]()}class bn{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Ls(),l=bn.prototype;l[u]||(l[u]=dp)}get changes(){return this._changes||(this._changes=new ts)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,u){return this._results.reduce(s,u)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,u){const l=this;l.dirty=!1;const p=Ci(s);(this._changesDetected=!function(o,s,u){if(o.length!==s.length)return!1;for(let l=0;l<o.length;l++){let p=o[l],m=s[l];if(u&&(p=u(p),m=u(m)),m!==p)return!1}return!0}(l._results,p,u))&&(l._results=p,l.length=p.length,l.last=p[this.length-1],l.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class yh{constructor(s){this.queryList=s,this.matches=null}clone(){return new yh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const u=s.queries;if(null!==u){const l=null!==s.contentQueries?s.contentQueries[0]:u.length,p=[];for(let m=0;m<l;m++){const b=u.getByIndex(m);p.push(this.queries[b.indexInDeclarationView].clone())}return new Jm(p)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let u=0;u<this.queries.length;u++)null!==sb(s,u).matches&&this.queries[u].setDirty()}}class nb{constructor(s,u,l=null){this.predicate=s,this.flags=u,this.read=l}}class rb{constructor(s=[]){this.queries=s}elementStart(s,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,u)}elementEnd(s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(s)}embeddedTView(s){let u=null;for(let l=0;l<this.length;l++){const p=null!==u?u.length:0,m=this.getByIndex(l).embeddedTView(s,p);m&&(m.indexInDeclarationView=l,null!==u?u.push(m):u=[m])}return null!==u?new rb(u):null}template(s,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,u)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Gu{constructor(s,u=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(s,u){this.isApplyingToNode(u)&&this.matchTNode(s,u)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,u){this.elementStart(s,u)}embeddedTView(s,u){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,u),new Gu(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let p=0;p<l.length;p++){const m=l[p];this.matchTNodeWithReadOption(s,u,OS(u,m)),this.matchTNodeWithReadOption(s,u,ru(u,s,m,!1,!1))}else l===Eo?4&u.type&&this.matchTNodeWithReadOption(s,u,-1):this.matchTNodeWithReadOption(s,u,ru(u,s,l,!1,!1))}matchTNodeWithReadOption(s,u,l){if(null!==l){const p=this.metadata.read;if(null!==p)if(p===Yi||p===rp||p===Eo&&4&u.type)this.addMatch(u.index,-2);else{const m=ru(u,s,p,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,l)}}addMatch(s,u){null===this.matches?this.matches=[s,u]:this.matches.push(s,u)}}function OS(o,s){const u=o.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===s)return u[l+1];return null}function Xn(o,s,u,l){return-1===u?function(o,s){return 11&o.type?Jc(o,s):4&o.type?ih(o,s):null}(s,o):-2===u?function(o,s,u){return u===Yi?Jc(s,o):u===Eo?ih(s,o):u===rp?MC(s,o):void 0}(o,s,l):rr(o,o[1],u,s)}function ib(o,s,u,l){const p=s[19].queries[l];if(null===p.matches){const m=o.data,b=u.matches,w=[];for(let D=0;D<b.length;D+=2){const S=b[D];w.push(S<0?null:Xn(s,m[S],b[D+1],u.metadata.read))}p.matches=w}return p.matches}function Zm(o,s,u,l){const p=o.queries.getByIndex(u),m=p.matches;if(null!==m){const b=ib(o,s,p,u);for(let w=0;w<m.length;w+=2){const D=m[w];if(D>0)l.push(b[w/2]);else{const S=m[w+1],N=s[-D];for(let F=10;F<N.length;F++){const U=N[F];U[17]===U[3]&&Zm(U[1],U,S,l)}if(null!==N[9]){const F=N[9];for(let U=0;U<F.length;U++){const z=F[U];Zm(z[1],z,S,l)}}}}}return l}function ob(o){const s=Se(),u=Ut(),l=Sl();ia(l+1);const p=sb(u,l);if(o.dirty&&Lp(s)===(2==(2&p.metadata.flags))){if(null===p.matches)o.reset([]);else{const m=p.crossesNgTemplate?Zm(u,s,l,[]):ib(u,s,p,l);o.reset(m,g0),o.notifyOnChanges()}return!0}return!1}function $u(o,s,u,l){const p=Ut();if(p.firstCreatePass){const m=Dn();(function(o,s,u){null===o.queries&&(o.queries=new rb),o.queries.track(new Gu(s,u))})(p,new nb(s,u,l),m.index),function(o,s){const u=o.contentQueries||(o.contentQueries=[]);s!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,s)}(p,o),2==(2&u)&&(p.staticContentQueries=!0)}!function(o,s,u){const l=new bn(4==(4&u));Cu(o,s,l,l.destroy),null===s[19]&&(s[19]=new Jm),s[19].queries.push(new yh(l))}(p,Se(),u)}function Wu(){return o=Se(),s=Sl(),o[19].queries[s].queryList;var o,s}function sb(o,s){return o.queries.getByIndex(s)}const wb=new Rn("Application Initializer");let Ih=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Xd,this.reject=Xd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,p)=>{this.resolve=l,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const m=this.appInits[p]();if(Nf(m))u.push(m);else if(_m(m)){const b=new Promise((w,D)=>{m.subscribe({complete:w,error:D})});u.push(b)}}Promise.all(u).then(()=>{l()}).catch(p=>{this.reject(p)}),0===u.length&&l(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(Qt(wb,8))},o.\u0275prov=Gt({token:o,factory:o.\u0275fac}),o})();const Eb=new Rn("AppId"),Cb={provide:Eb,useFactory:function(){return`${Th()}${Th()}${Th()}`},deps:[]};function Th(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Db=new Rn("Platform Initializer"),MD=new Rn("Platform ID"),fv=new Rn("appBootstrapListener");let Ib=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=Gt({token:o,factory:o.\u0275fac}),o})();const vp=new Rn("LocaleId"),Tb=new Rn("DefaultCurrencyCode");class XS{constructor(s,u){this.ngModuleFactory=s,this.componentFactories=u}}const Sb=function(o){return new Km(o)},eA=Sb,LD=function(o){return Promise.resolve(Sb(o))},VD=function(o){const s=Sb(o),l=co(yi(o).declarations).reduce((p,m)=>{const b=_r(m);return b&&p.push(new zm(b)),p},[]);return new XS(s,l)},lr=VD,nA=function(o){return Promise.resolve(VD(o))};let _p=(()=>{class o{constructor(){this.compileModuleSync=eA,this.compileModuleAsync=LD,this.compileModuleAndAllComponentsSync=lr,this.compileModuleAndAllComponentsAsync=nA}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=Gt({token:o,factory:o.\u0275fac}),o})();const oA=(()=>Promise.resolve(0))();function Ab(o){"undefined"==typeof Zone?oA.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Zi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ts(!1),this.onMicrotaskEmpty=new ts(!1),this.onStable=new ts(!1),this.onError=new ts(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!l&&u,p.shouldCoalesceRunChangeDetection=l,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function(){let o=on.requestAnimationFrame,s=on.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&s){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(o){const s=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(on,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,xb(o),o.isCheckStableRunning=!0,Rb(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),xb(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,p,m,b,w)=>{try{return hl(o),u.invokeTask(p,m,b,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&s(),Nb(o)}},onInvoke:(u,l,p,m,b,w,D)=>{try{return hl(o),u.invoke(p,m,b,w,D)}finally{o.shouldCoalesceRunChangeDetection&&s(),Nb(o)}},onHasTask:(u,l,p,m)=>{u.hasTask(p,m),l===p&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,xb(o),Rb(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,l,p,m)=>(u.handleError(p,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(p)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,u,l){return this._inner.run(s,u,l)}runTask(s,u,l,p){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+p,s,sA,Xd,Xd);try{return m.runTask(b,u,l)}finally{m.cancelTask(b)}}runGuarded(s,u,l){return this._inner.runGuarded(s,u,l)}runOutsideAngular(s){return this._outer.run(s)}}const sA={};function Rb(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function xb(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function hl(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Nb(o){o._nesting--,Rb(o)}class GD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ts,this.onMicrotaskEmpty=new ts,this.onStable=new ts,this.onError=new ts}run(s,u,l){return s.apply(u,l)}runGuarded(s,u,l){return s.apply(u,l)}runOutsideAngular(s){return s()}runTask(s,u,l,p){return s.apply(u,l)}}let Sh=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zi.assertNotInAngularZone(),Ab(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ab(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,p){let m=-1;l&&l>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:p})}whenStable(u,l,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,l,p){return[]}}return o.\u0275fac=function(u){return new(u||o)(Qt(Zi))},o.\u0275prov=Gt({token:o,factory:o.\u0275fac}),o})(),bp=(()=>{class o{constructor(){this._applications=new Map,wp.addToWindow(this)}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return wp.findTestabilityInTree(this,u,l)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=Gt({token:o,factory:o.\u0275fac}),o})();class uA{addToWindow(s){}findTestabilityInTree(s,u,l){return null}}function Io(o){wp=o}let wp=new uA,Pb=!0,Mb=!1;function Ob(){return Mb=!0,Pb}function $D(){if(Mb)throw new Error("Cannot enable prod mode after platform setup.");Pb=!1}let To;const WD=new Rn("AllowMultipleToken");class So{constructor(s,u){this.name=s,this.token=u}}function qD(o,s,u=[]){const l=`Platform: ${s}`,p=new Rn(l);return(m=[])=>{let b=zD();if(!b||b.injector.get(WD,!1))if(o)o(u.concat(m).concat({provide:p,useValue:!0}));else{const w=u.concat(m).concat({provide:p,useValue:!0},{provide:_d,useValue:"platform"});!function(o){if(To&&!To.destroyed&&!To.injector.get(WD,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");To=o.get(KD);const s=o.get(Db,null);s&&s.forEach(u=>u())}(Nn.create({providers:w,name:l}))}return function(o){const s=zD();if(!s)throw new Error("No platform exists!");if(!s.injector.get(o,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(p)}}function zD(){return To&&!To.destroyed?To:null}let KD=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const w=function(o,s){let u;return u="noop"===o?new GD:("zone.js"===o?void 0:o)||new Zi({enableLongStackTrace:Ob(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),u}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:Zi,useValue:w}];return w.run(()=>{const S=Nn.create({providers:D,parent:this.injector,name:u.moduleType.name}),N=u.create(S),F=N.injector.get(vu,null);if(!F)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:z=>{F.handleError(z)}});N.onDestroy(()=>{qs(this._modules,N),U.unsubscribe()})}),function(o,s,u){try{const l=u();return Nf(l)?l.catch(p=>{throw s.runOutsideAngular(()=>o.handleError(p)),p}):l}catch(l){throw s.runOutsideAngular(()=>o.handleError(l)),l}}(F,w,()=>{const U=N.injector.get(Ih);return U.runInitializers(),U.donePromise.then(()=>(Bs(N.injector.get(vp,Kc)||Kc),this._moduleDoBootstrap(N),N))})})}bootstrapModule(u,l=[]){const p=dv({},l);return function(o,s,u){const l=new Km(u);return Promise.resolve(l)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,p))}_moduleDoBootstrap(u){const l=u.injector.get(dl);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>l.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${ae(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(Qt(Nn))},o.\u0275prov=Gt({token:o,factory:o.\u0275fac}),o})();function dv(o,s){return Array.isArray(s)?s.reduce(dv,o):Object.assign(Object.assign({},o),s)}let dl=(()=>{class o{constructor(u,l,p,m,b){this._zone=u,this._injector=l,this._exceptionHandler=p,this._componentFactoryResolver=m,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new M.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),D=new M.y(S=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{Zi.assertNotInAngularZone(),Ab(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{Zi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{N.unsubscribe(),F.unsubscribe()}});this.isStable=(0,X.T)(w,D.pipe((0,ye.B)()))}bootstrap(u,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let p;p=u instanceof Oe?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(p.componentType);const m=function(o){return o.isBoundToModule}(p)?void 0:this._injector.get(Xc),w=p.create(Nn.NULL,[],l||p.selector,m),D=w.location.nativeElement,S=w.injector.get(Sh,null),N=S&&w.injector.get(bp);return S&&N&&N.registerApplication(D,S),w.onDestroy(()=>{this.detachView(w.hostView),qs(this.components,w),N&&N.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;qs(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(fv,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(Qt(Zi),Qt(Nn),Qt(vu),Qt(wo),Qt(Ih))},o.\u0275prov=Gt({token:o,factory:o.\u0275fac}),o})();function qs(o,s){const u=o.indexOf(s);u>-1&&o.splice(u,1)}class pv{}class mA{}const vA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Lb=(()=>{class o{constructor(u,l){this._compiler=u,this._config=l||vA}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[l,p]=u.split("#");return void 0===p&&(p="default"),G(8255)(l).then(m=>m[p]).then(m=>gv(m,l,p)).then(m=>this._compiler.compileModuleAsync(m))}loadFactory(u){let[l,p]=u.split("#"),m="NgFactory";return void 0===p&&(p="default",m=""),G(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(b=>b[p+m]).then(b=>gv(b,l,p))}}return o.\u0275fac=function(u){return new(u||o)(Qt(_p),Qt(mA,8))},o.\u0275prov=Gt({token:o,factory:o.\u0275fac}),o})();function gv(o,s,u){if(!o)throw new Error(`Cannot find '${u}' in '${s}'`);return o}const bA=function(o){return null},bv=qD(null,"core",[{provide:MD,useValue:"unknown"},{provide:KD,deps:[Nn]},{provide:bp,deps:[]},{provide:Ib,deps:[]}]),IA=[{provide:dl,useClass:dl,deps:[Zi,Nn,vu,wo,Ih]},{provide:IS,deps:[Zi],useFactory:function(o){let s=[];return o.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(u){s.push(u)}}},{provide:Ih,useClass:Ih,deps:[[new ws,wb]]},{provide:_p,useClass:_p,deps:[]},Cb,{provide:Xo,useFactory:function(){return rh},deps:[]},{provide:Zc,useFactory:function(){return SC},deps:[]},{provide:vp,useFactory:function(o){return Bs(o=o||"undefined"!=typeof $localize&&$localize.locale||Kc),o},deps:[[new ya(vp),new ws,new Kn]]},{provide:Tb,useValue:"USD"}];let iI=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(Qt(dl))},o.\u0275mod=Zu({type:o}),o.\u0275inj=In({providers:IA}),o})()},57:(Je,Ae,G)=>{"use strict";G.d(Ae,{hO:()=>tn,xv:()=>$e,Dh:()=>Ce,HU:()=>Z,GT:()=>De,sI:()=>fn,on:()=>Ge,ss:()=>j,pX:()=>me,yq:()=>ft});var I=G(7771),de=G(3637),M=G(3342),X=G(3101),ye=G(6136),ee=G(7716),we=G(2329);function ae(){}Je=G.hmd(Je);class te{constructor(fe,he=I.N){this.zone=fe,this.delegate=he}now(){return this.delegate.now()}schedule(fe,he,ue){const Te=this.zone;return this.delegate.schedule(function(st){Te.runGuarded(()=>{fe.apply(this,[st])})},he,ue)}}class ${constructor(fe){this.zone=fe,this.task=null}call(fe,he){const ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ae,{},ae,ae)),he.pipe((0,M.b)({next:ue,complete:ue,error:ue})).subscribe(fe).add(ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Z{constructor(fe){this.ngZone=fe,this.outsideAngular=fe.runOutsideAngular(()=>new te(Zone.current)),this.insideAngular=fe.run(()=>new te(Zone.current,de.z))}}function j(ce){return function(he){return(he=he.lift(new $(ce.ngZone))).pipe((0,X.R)(ce.outsideAngular),(0,ye.QV)(ce.insideAngular))}}const Y=["ngOnDestroy"],me=(ce,fe,he,ue={})=>new Proxy(ce,{get:(Te,le)=>he.runOutsideAngular(()=>{var st;if(ce[le])return(null===(st=null==ue?void 0:ue.spy)||void 0===st?void 0:st.get)&&ue.spy.get(le,ce[le]),ce[le];if(Y.indexOf(le)>-1)return()=>{};const lt=fe.toPromise().then(gn=>{const Ze=gn&&gn[le];return"function"==typeof Ze?Ze.bind(gn):Ze&&Ze.then?Ze.then(at=>he.run(()=>at)):he.run(()=>Ze)});return new Proxy(()=>{},{get:(gn,Ze)=>lt[Ze],apply:(gn,Ze,at)=>lt.then(We=>{var Ye;const At=We&&We(...at);return(null===(Ye=null==ue?void 0:ue.spy)||void 0===Ye?void 0:Ye.apply)&&ue.spy.apply(le,at,At),At})})})}),De=(ce,fe)=>{fe.forEach(he=>{Object.getOwnPropertyNames(he.prototype||he).forEach(ue=>{Object.defineProperty(ce.prototype,ue,Object.getOwnPropertyDescriptor(he.prototype||he,ue))})})},Ce=new ee.OlP("angularfire2.app.options"),$e=new ee.OlP("angularfire2.app.nameOrConfig"),Pe=new ee.GfV("6.1.5");function Ge(ce,fe,he){const Te="object"==typeof he&&he||{};Te.name=Te.name||"string"==typeof he&&he||"[DEFAULT]";const st=we.Z.apps.filter(lt=>lt&&lt.name===Te.name)[0]||fe.runOutsideAngular(()=>we.Z.initializeApp(ce,Te));try{JSON.stringify(ce)!==JSON.stringify(st.options)&&Ue("error",`${st.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(lt){}return st}const ft=()=>{Ue("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},Ue=(ce,...fe)=>{(0,ee.X6Q)()&&"undefined"!=typeof console&&console[ce](...fe)};function fn(ce,fe,he,ue,Te){const[le,...st]=globalThis.\u0275AngularfireInstanceCache.get(ce)||[];if(le){try{Te.some((lt,gn)=>{const Ze=st[gn];return lt&&"object"==typeof lt?JSON.stringify(lt)!==JSON.stringify(Ze):lt!==Ze})&&Ue("error",`${fe} was already initialized on the ${he.name} Firebase App instance with different settings.${Je.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(lt){}return le}{const lt=ue();return globalThis.\u0275AngularfireInstanceCache.set(ce,[lt,...Te]),lt}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const Ht={provide:class{},useFactory:Ge,deps:[Ce,ee.R0b,[new ee.FiY,$e]]};let tn=(()=>{class ce{constructor(he){we.Z.registerVersion("angularfire",Pe.full,he.toString()),we.Z.registerVersion("angular",ee.q4F.full)}static initializeApp(he,ue){return{ngModule:ce,providers:[{provide:Ce,useValue:he},{provide:$e,useValue:ue}]}}}return ce.\u0275fac=function(he){return new(he||ce)(ee.LFG(ee.Lbi))},ce.\u0275mod=ee.oAB({type:ce}),ce.\u0275inj=ee.cJS({providers:[Ht]}),ce})()},9759:(Je,Ae,G)=>{"use strict";G.d(Ae,{Z:()=>at});var ye,Ue,I=G(4762),de=G(4685),M=G(6034),X=G(300),ee=((ye={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ye["bad-app-name"]="Illegal App name: '{$appName}",ye["duplicate-app"]="Firebase App named '{$appName}' already exists",ye["app-deleted"]="Firebase App named '{$appName}' already deleted",ye["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ye["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ye),we=new de.LL("app","Firebase",ee),ae="@firebase/app",$t="[DEFAULT]",fn=((Ue={})[ae]="fire-core",Ue["@firebase/analytics"]="fire-analytics",Ue["@firebase/app-check"]="fire-app-check",Ue["@firebase/auth"]="fire-auth",Ue["@firebase/database"]="fire-rtdb",Ue["@firebase/functions"]="fire-fn",Ue["@firebase/installations"]="fire-iid",Ue["@firebase/messaging"]="fire-fcm",Ue["@firebase/performance"]="fire-perf",Ue["@firebase/remote-config"]="fire-rc",Ue["@firebase/storage"]="fire-gcs",Ue["@firebase/firestore"]="fire-fst",Ue["fire-js"]="fire-js",Ue["firebase-wrapper"]="fire-js-all",Ue),Ht=new X.Yd("@firebase/app"),tn=function(){function We(Ye,At,hn){var Gt=this;this.firebase_=hn,this.isDeleted_=!1,this.name_=At.name,this.automaticDataCollectionEnabled_=At.automaticDataCollectionEnabled||!1,this.options_=(0,de.p$)(Ye),this.container=new M.H0(At.name),this._addComponent(new M.wA("app",function(){return Gt},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(mi){return Gt._addComponent(mi)})}return Object.defineProperty(We.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Ye){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Ye},enumerable:!1,configurable:!0}),Object.defineProperty(We.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(We.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),We.prototype.delete=function(){var Ye=this;return new Promise(function(At){Ye.checkDestroyed_(),At()}).then(function(){return Ye.firebase_.INTERNAL.removeApp(Ye.name_),Promise.all(Ye.container.getProviders().map(function(At){return At.delete()}))}).then(function(){Ye.isDeleted_=!0})},We.prototype._getService=function(Ye,At){var hn;void 0===At&&(At=$t),this.checkDestroyed_();var Gt=this.container.getProvider(Ye);return!Gt.isInitialized()&&"EXPLICIT"===(null===(hn=Gt.getComponent())||void 0===hn?void 0:hn.instantiationMode)&&Gt.initialize(),Gt.getImmediate({identifier:At})},We.prototype._removeServiceInstance=function(Ye,At){void 0===At&&(At=$t),this.container.getProvider(Ye).clearInstance(At)},We.prototype._addComponent=function(Ye){try{this.container.addComponent(Ye)}catch(At){Ht.debug("Component "+Ye.name+" failed to register with FirebaseApp "+this.name,At)}},We.prototype._addOrOverwriteComponent=function(Ye){this.container.addOrOverwriteComponent(Ye)},We.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},We.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw we.create("app-deleted",{appName:this.name_})},We}();tn.prototype.name&&tn.prototype.options||tn.prototype.delete||console.log("dc");var ue=function he(){var We=function(We){var Ye={},At=new Map,hn={__esModule:!0,initializeApp:function(jt,Mt){void 0===Mt&&(Mt={}),("object"!=typeof Mt||null===Mt)&&(Mt={name:Mt});var hr=Mt;void 0===hr.name&&(hr.name=$t);var Ke=hr.name;if("string"!=typeof Ke||!Ke)throw we.create("bad-app-name",{appName:String(Ke)});if((0,de.r3)(Ye,Ke))throw we.create("duplicate-app",{appName:Ke});var mn=new We(jt,hr,hn);return Ye[Ke]=mn,mn},app:mi,registerVersion:function(jt,Mt,fr){var hr,Ke=null!==(hr=fn[jt])&&void 0!==hr?hr:jt;fr&&(Ke+="-"+fr);var mn=Ke.match(/\s|\//),nr=Mt.match(/\s|\//);if(mn||nr){var wn=['Unable to register library "'+Ke+'" with version "'+Mt+'":'];return mn&&wn.push('library name "'+Ke+'" contains illegal characters (whitespace or "/")'),mn&&nr&&wn.push("and"),nr&&wn.push('version name "'+Mt+'" contains illegal characters (whitespace or "/")'),void Ht.warn(wn.join(" "))}Pi(new M.wA(Ke+"-version",function(){return{library:Ke,version:Mt}},"VERSION"))},setLogLevel:X.Ub,onLog:function(jt,Mt){if(null!==jt&&"function"!=typeof jt)throw we.create("invalid-log-argument");(0,X.Am)(jt,Mt)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:Pi,removeApp:function(jt){delete Ye[jt]},components:At,useAsService:function(jt,Mt){return"serverAuth"===Mt?null:Mt}}};function mi(jt){if(!(0,de.r3)(Ye,jt=jt||$t))throw we.create("no-app",{appName:jt});return Ye[jt]}function Pi(jt){var Mt=jt.name;if(At.has(Mt))return Ht.debug("There were multiple attempts to register component "+Mt+"."),"PUBLIC"===jt.type?hn[Mt]:null;if(At.set(Mt,jt),"PUBLIC"===jt.type){var fr=function(nr){if(void 0===nr&&(nr=mi()),"function"!=typeof nr[Mt])throw we.create("invalid-app-argument",{appName:Mt});return nr[Mt]()};void 0!==jt.serviceProps&&(0,de.ZB)(fr,jt.serviceProps),hn[Mt]=fr,We.prototype[Mt]=function(){for(var nr=[],wn=0;wn<arguments.length;wn++)nr[wn]=arguments[wn];return this._getService.bind(this,Mt).apply(this,jt.multipleInstances?nr:[])}}for(var hr=0,Ke=Object.keys(Ye);hr<Ke.length;hr++)Ye[Ke[hr]]._addComponent(jt);return"PUBLIC"===jt.type?hn[Mt]:null}return hn.default=hn,Object.defineProperty(hn,"apps",{get:function(){return Object.keys(Ye).map(function(jt){return Ye[jt]})}}),mi.App=We,hn}(tn);return We.INTERNAL=(0,I.pi)((0,I.pi)({},We.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function(At){(0,de.ZB)(We,At)},createSubscribe:de.ne,ErrorFactory:de.LL,deepExtend:de.ZB}),We}(),Te=function(){function We(Ye){this.container=Ye}return We.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(At){if(function(We){var Ye=We.getComponent();return"VERSION"===(null==Ye?void 0:Ye.type)}(At)){var hn=At.getImmediate();return hn.library+"/"+hn.version}return null}).filter(function(At){return At}).join(" ")},We}();if((0,de.jU)()&&void 0!==self.firebase){Ht.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&Ht.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var gn=ue.initializeApp;ue.initializeApp=function(){for(var We=[],Ye=0;Ye<arguments.length;Ye++)We[Ye]=arguments[Ye];return(0,de.UG)()&&Ht.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),gn.apply(void 0,We)};var We,Ze=ue;(We=Ze).INTERNAL.registerComponent(new M.wA("platform-logger",function(At){return new Te(At)},"PRIVATE")),We.registerVersion(ae,"0.6.30",undefined),We.registerVersion("fire-js","");const at=Ze},6034:(Je,Ae,G)=>{"use strict";G.d(Ae,{wA:()=>M,H0:()=>ae,zt:()=>ye});var I=G(4762),de=G(4685),M=function(){function te($,Z,j){this.name=$,this.instanceFactory=Z,this.type=j,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return te.prototype.setInstantiationMode=function($){return this.instantiationMode=$,this},te.prototype.setMultipleInstances=function($){return this.multipleInstances=$,this},te.prototype.setServiceProps=function($){return this.serviceProps=$,this},te.prototype.setInstanceCreatedCallback=function($){return this.onInstanceCreated=$,this},te}(),X="[DEFAULT]",ye=function(){function te($,Z){this.name=$,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return te.prototype.get=function($){var Z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(Z)){var j=new de.BH;if(this.instancesDeferred.set(Z,j),this.isInitialized(Z)||this.shouldAutoInitialize())try{var Y=this.getOrInitializeService({instanceIdentifier:Z});Y&&j.resolve(Y)}catch(me){}}return this.instancesDeferred.get(Z).promise},te.prototype.getImmediate=function($){var Z,j=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Y=null!==(Z=null==$?void 0:$.optional)&&void 0!==Z&&Z;if(!this.isInitialized(j)&&!this.shouldAutoInitialize()){if(Y)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:j})}catch(me){if(Y)return null;throw me}},te.prototype.getComponent=function(){return this.component},te.prototype.setComponent=function($){var Z,j;if($.name!==this.name)throw Error("Mismatching Component "+$.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=$,this.shouldAutoInitialize()){if(function(te){return"EAGER"===te.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:X})}catch(Ge){}try{for(var Y=(0,I.XA)(this.instancesDeferred.entries()),me=Y.next();!me.done;me=Y.next()){var De=(0,I.CR)(me.value,2),$e=De[1],Ne=this.normalizeInstanceIdentifier(De[0]);try{var Pe=this.getOrInitializeService({instanceIdentifier:Ne});$e.resolve(Pe)}catch(Ge){}}}catch(Ge){Z={error:Ge}}finally{try{me&&!me.done&&(j=Y.return)&&j.call(Y)}finally{if(Z)throw Z.error}}}},te.prototype.clearInstance=function($){void 0===$&&($=X),this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)},te.prototype.delete=function(){return(0,I.mG)(this,void 0,void 0,function(){var $;return(0,I.Jh)(this,function(Z){switch(Z.label){case 0:return $=Array.from(this.instances.values()),[4,Promise.all((0,I.ev)((0,I.ev)([],(0,I.CR)($.filter(function(j){return"INTERNAL"in j}).map(function(j){return j.INTERNAL.delete()}))),(0,I.CR)($.filter(function(j){return"_delete"in j}).map(function(j){return j._delete()}))))];case 1:return Z.sent(),[2]}})})},te.prototype.isComponentSet=function(){return null!=this.component},te.prototype.isInitialized=function($){return void 0===$&&($=X),this.instances.has($)},te.prototype.getOptions=function($){return void 0===$&&($=X),this.instancesOptions.get($)||{}},te.prototype.initialize=function($){var Z,j;void 0===$&&($={});var Y=$.options,me=void 0===Y?{}:Y,De=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(De))throw Error(this.name+"("+De+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Ce=this.getOrInitializeService({instanceIdentifier:De,options:me});try{for(var $e=(0,I.XA)(this.instancesDeferred.entries()),Ne=$e.next();!Ne.done;Ne=$e.next()){var Pe=(0,I.CR)(Ne.value,2),ft=Pe[1];De===this.normalizeInstanceIdentifier(Pe[0])&&ft.resolve(Ce)}}catch($t){Z={error:$t}}finally{try{Ne&&!Ne.done&&(j=$e.return)&&j.call($e)}finally{if(Z)throw Z.error}}return Ce},te.prototype.onInit=function($,Z){var j,Y=this.normalizeInstanceIdentifier(Z),me=null!==(j=this.onInitCallbacks.get(Y))&&void 0!==j?j:new Set;me.add($),this.onInitCallbacks.set(Y,me);var De=this.instances.get(Y);return De&&$(De,Y),function(){me.delete($)}},te.prototype.invokeOnInitCallbacks=function($,Z){var j,Y,me=this.onInitCallbacks.get(Z);if(me)try{for(var De=(0,I.XA)(me),Ce=De.next();!Ce.done;Ce=De.next()){var $e=Ce.value;try{$e($,Z)}catch(Ne){}}}catch(Ne){j={error:Ne}}finally{try{Ce&&!Ce.done&&(Y=De.return)&&Y.call(De)}finally{if(j)throw j.error}}},te.prototype.getOrInitializeService=function($){var Z=$.instanceIdentifier,j=$.options,Y=void 0===j?{}:j,me=this.instances.get(Z);if(!me&&this.component&&(me=this.component.instanceFactory(this.container,{instanceIdentifier:ee(Z),options:Y}),this.instances.set(Z,me),this.instancesOptions.set(Z,Y),this.invokeOnInitCallbacks(me,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,me)}catch(De){}return me||null},te.prototype.normalizeInstanceIdentifier=function($){return void 0===$&&($=X),this.component?this.component.multipleInstances?$:X:$},te.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},te}();function ee(te){return te===X?void 0:te}var ae=function(){function te($){this.name=$,this.providers=new Map}return te.prototype.addComponent=function($){var Z=this.getProvider($.name);if(Z.isComponentSet())throw new Error("Component "+$.name+" has already been registered with "+this.name);Z.setComponent($)},te.prototype.addOrOverwriteComponent=function($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)},te.prototype.getProvider=function($){if(this.providers.has($))return this.providers.get($);var Z=new ye($,this);return this.providers.set($,Z),Z},te.prototype.getProviders=function(){return Array.from(this.providers.values())},te}()},9192:(Je,Ae,G)=>{"use strict";var I=G(9759),de=G(6034),M=G(4685),X=G(4762),ye=G(300);Je=G.hmd(Je);var ae="";function te(d){ae=d}var d,$=function(){function d(h){this.domStorage_=h,this.prefix_="firebase:"}return d.prototype.set=function(h,g){null==g?this.domStorage_.removeItem(this.prefixedName_(h)):this.domStorage_.setItem(this.prefixedName_(h),(0,M.Pz)(g))},d.prototype.get=function(h){var g=this.domStorage_.getItem(this.prefixedName_(h));return null==g?null:(0,M.cI)(g)},d.prototype.remove=function(h){this.domStorage_.removeItem(this.prefixedName_(h))},d.prototype.prefixedName_=function(h){return this.prefix_+h},d.prototype.toString=function(){return this.domStorage_.toString()},d}(),Z=function(){function d(){this.cache_={},this.isInMemoryStorage=!0}return d.prototype.set=function(h,g){null==g?delete this.cache_[h]:this.cache_[h]=g},d.prototype.get=function(h){return(0,M.r3)(this.cache_,h)?this.cache_[h]:null},d.prototype.remove=function(h){delete this.cache_[h]},d}(),j=function(d){try{if("undefined"!=typeof window&&void 0!==window[d]){var h=window[d];return h.setItem("firebase:sentinel","cache"),h.removeItem("firebase:sentinel"),new $(h)}}catch(g){}return new Z},Y=j("localStorage"),me=j("sessionStorage"),De=new ye.Yd("@firebase/database"),Ce=(d=1,function(){return d++}),$e=function(d){var h=(0,M.dS)(d),g=new M.gQ;g.update(h);var y=g.digest();return M.US.encodeByteArray(y)},Ne=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];for(var g="",y=0;y<d.length;y++){var E=d[y];Array.isArray(E)||E&&"object"==typeof E&&"number"==typeof E.length?g+=Ne.apply(null,E):g+="object"==typeof E?(0,M.Pz)(E):E,g+=" "}return g},Pe=null,Ge=!0,ft=function(d,h){(0,M.hu)(!h||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(De.logLevel=ye.in.VERBOSE,Pe=De.log.bind(De),h&&me.set("logging_enabled",!0)):"function"==typeof d?Pe=d:(Pe=null,me.remove("logging_enabled"))},Ue=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];if(!0===Ge&&(Ge=!1,null===Pe&&!0===me.get("logging_enabled")&&ft(!0)),Pe){var g=Ne.apply(null,d);Pe(g)}},$t=function(d){return function(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];Ue.apply(void 0,(0,X.ev)([d],(0,X.CR)(h)))}},fn=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var g="FIREBASE INTERNAL ERROR: "+Ne.apply(void 0,(0,X.ev)([],(0,X.CR)(d)));De.error(g)},Ht=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var g="FIREBASE FATAL ERROR: "+Ne.apply(void 0,(0,X.ev)([],(0,X.CR)(d)));throw De.error(g),new Error(g)},tn=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var g="FIREBASE WARNING: "+Ne.apply(void 0,(0,X.ev)([],(0,X.CR)(d)));De.warn(g)},fe=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},ue="[MIN_NAME]",Te="[MAX_NAME]",le=function(d,h){if(d===h)return 0;if(d===ue||h===Te)return-1;if(h===ue||d===Te)return 1;var g=tr(d),y=tr(h);return null!==g?null!==y?g-y==0?d.length-h.length:g-y:-1:null!==y?1:d<h?-1:1},st=function(d,h){return d===h?0:d<h?-1:1},lt=function(d,h){if(h&&d in h)return h[d];throw new Error("Missing required key ("+d+") in object: "+(0,M.Pz)(h))},gn=function(d){if("object"!=typeof d||null===d)return(0,M.Pz)(d);var h=[];for(var g in d)h.push(g);h.sort();for(var y="{",E=0;E<h.length;E++)0!==E&&(y+=","),y+=(0,M.Pz)(h[E]),y+=":",y+=gn(d[h[E]]);return y+"}"},Ze=function(d,h){var g=d.length;if(g<=h)return[d];for(var y=[],E=0;E<g;E+=h)y.push(d.substring(E,E+h>g?g:E+h));return y};function at(d,h){for(var g in d)d.hasOwnProperty(g)&&h(g,d[g])}var We=function(d){(0,M.hu)(!fe(d),"Invalid JSON number");var E,T,R,O,L,y=1023;0===d?(T=0,R=0,E=1/d==-1/0?1:0):(E=d<0,(d=Math.abs(d))>=Math.pow(2,1-y)?(T=(O=Math.min(Math.floor(Math.log(d)/Math.LN2),y))+y,R=Math.round(d*Math.pow(2,52-O)-Math.pow(2,52))):(T=0,R=Math.round(d/Math.pow(2,-1074))));var B=[];for(L=52;L;L-=1)B.push(R%2?1:0),R=Math.floor(R/2);for(L=11;L;L-=1)B.push(T%2?1:0),T=Math.floor(T/2);B.push(E?1:0),B.reverse();var W=B.join(""),se="";for(L=0;L<64;L+=8){var be=parseInt(W.substr(L,8),2).toString(16);1===be.length&&(be="0"+be),se+=be}return se.toLowerCase()},Gt=new RegExp("^-?(0*)\\d{1,10}$"),mi=-2147483648,In=2147483647,tr=function(d){if(Gt.test(d)){var h=Number(d);if(h>=mi&&h<=In)return h}return null},Pi=function(d){try{d()}catch(h){setTimeout(function(){throw tn("Exception was thrown by user callback.",h.stack||""),h},Math.floor(0))}},Ao=function(d,h){var g=setTimeout(d,h);return"object"==typeof g&&g.unref&&g.unref(),g},qa=function(){function d(h,g){var y=this;this.appName_=h,this.appCheckProvider=g,this.appCheck=null==g?void 0:g.getImmediate({optional:!0}),this.appCheck||null==g||g.get().then(function(E){return y.appCheck=E})}return d.prototype.getToken=function(h){var g=this;return this.appCheck?this.appCheck.getToken(h):new Promise(function(y,E){setTimeout(function(){g.appCheck?g.getToken(h).then(y,E):y(null)},0)})},d.prototype.addTokenChangeListener=function(h){var g;null===(g=this.appCheckProvider)||void 0===g||g.get().then(function(y){return y.addTokenListener(h)})},d.prototype.notifyForInvalidToken=function(){tn('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},d}(),jt=function(){function d(h,g,y){var E=this;this.appName_=h,this.firebaseOptions_=g,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(function(T){return E.auth_=T})}return d.prototype.getToken=function(h){var g=this;return this.auth_?this.auth_.getToken(h).catch(function(y){return y&&"auth/token-not-initialized"===y.code?(Ue("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(y)}):new Promise(function(y,E){setTimeout(function(){g.auth_?g.getToken(h).then(y,E):y(null)},0)})},d.prototype.addTokenChangeListener=function(h){this.auth_?this.auth_.addAuthTokenListener(h):this.authProvider_.get().then(function(g){return g.addAuthTokenListener(h)})},d.prototype.removeTokenChangeListener=function(h){this.authProvider_.get().then(function(g){return g.removeAuthTokenListener(h)})},d.prototype.notifyForInvalidToken=function(){var h='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';tn(h+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},d}(),Mt=function(){function d(h){this.accessToken=h}return d.prototype.getToken=function(h){return Promise.resolve({accessToken:this.accessToken})},d.prototype.addTokenChangeListener=function(h){h(this.accessToken)},d.prototype.removeTokenChangeListener=function(h){},d.prototype.notifyForInvalidToken=function(){},d.OWNER="owner",d}(),wn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gn="websocket",xh="long_polling",Tn=function(){function d(h,g,y,E,T,R,O){void 0===T&&(T=!1),void 0===R&&(R=""),void 0===O&&(O=!1),this.secure=g,this.namespace=y,this.webSocketOnly=E,this.nodeAdmin=T,this.persistenceKey=R,this.includeNamespaceInQueryParams=O,this._host=h.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Y.get("host:"+h)||this._host}return d.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},d.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(d.prototype,"host",{get:function(){return this._host},set:function(h){h!==this.internalHost&&(this.internalHost=h,this.isCacheableHost()&&Y.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),d.prototype.toString=function(){var h=this.toURLString();return this.persistenceKey&&(h+="<"+this.persistenceKey+">"),h},d.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},d}();function Et(d,h,g){var y;if((0,M.hu)("string"==typeof h,"typeof type must == string"),(0,M.hu)("object"==typeof g,"typeof params must == object"),h===Gn)y=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(h!==xh)throw new Error("Unknown connection type: "+h);y=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(g.ns=d.namespace);var E=[];return at(g,function(T,R){E.push(T+"="+R)}),y+E.join("&")}var Nh=function(){function d(){this.counters_={}}return d.prototype.incrementCounter=function(h,g){void 0===g&&(g=1),(0,M.r3)(this.counters_,h)||(this.counters_[h]=0),this.counters_[h]+=g},d.prototype.get=function(){return(0,M.p$)(this.counters_)},d}(),os={},vi={};function on(d){var h=d.toString();return os[h]||(os[h]=new Nh),os[h]}var Sp=function(){function d(h){this.onMessage_=h,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return d.prototype.closeAfter=function(h,g){this.closeAfterResponse=h,this.onClose=g,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},d.prototype.handleResponse=function(h,g){var y=this;this.pendingResponses[h]=g;for(var E=function(){var O=T.pendingResponses[T.currentResponseNum];delete T.pendingResponses[T.currentResponseNum];for(var L=function(W){O[W]&&Pi(function(){y.onMessage_(O[W])})},B=0;B<O.length;++B)L(B);if(T.currentResponseNum===T.closeAfterResponse)return T.onClose&&(T.onClose(),T.onClose=null),"break";T.currentResponseNum++},T=this;this.pendingResponses[this.currentResponseNum]&&"break"!==E(););},d}(),Q="close",ml=function(){function d(h,g,y,E,T,R,O){var L=this;this.connId=h,this.repoInfo=g,this.applicationId=y,this.appCheckToken=E,this.authToken=T,this.transportSessionId=R,this.lastSessionId=O,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$t(h),this.stats_=on(g),this.urlFn=function(B){return L.appCheckToken&&(B.ac=L.appCheckToken),Et(g,xh,B)}}return d.prototype.open=function(h,g){var y=this;this.curSegmentNum=0,this.onDisconnect_=g,this.myPacketOrderer=new Sp(h),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){y.log_("Timed out trying to connect."),y.onClosed_(),y.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,M.Yr)()||"complete"===document.readyState)d();else{var h=!1,g=function(){document.body?h||(h=!0,d()):setTimeout(g,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",g,!1),window.addEventListener("load",g,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&g()}),window.attachEvent("onload",g))}}(function(){if(!y.isClosed_){y.scriptTagHolder=new Ph(function(){for(var R=[],O=0;O<arguments.length;O++)R[O]=arguments[O];var L=(0,X.CR)(R,5),B=L[0],W=L[1],se=L[2];if(y.incrementIncomingBytes_(R),y.scriptTagHolder)if(y.connectTimeoutTimer_&&(clearTimeout(y.connectTimeoutTimer_),y.connectTimeoutTimer_=null),y.everConnected_=!0,"start"===B)y.id=W,y.password=se;else{if(B!==Q)throw new Error("Unrecognized command received: "+B);W?(y.scriptTagHolder.sendNewPolls=!1,y.myPacketOrderer.closeAfter(W,function(){y.onClosed_()})):y.onClosed_()}},function(){for(var R=[],O=0;O<arguments.length;O++)R[O]=arguments[O];var L=(0,X.CR)(R,2),B=L[0],W=L[1];y.incrementIncomingBytes_(R),y.myPacketOrderer.handleResponse(B,W)},function(){y.onClosed_()},y.urlFn);var E={start:"t"};E.ser=Math.floor(1e8*Math.random()),y.scriptTagHolder.uniqueCallbackIdentifier&&(E.cb=y.scriptTagHolder.uniqueCallbackIdentifier),E.v="5",y.transportSessionId&&(E.s=y.transportSessionId),y.lastSessionId&&(E.ls=y.lastSessionId),y.applicationId&&(E.p=y.applicationId),y.appCheckToken&&(E.ac=y.appCheckToken),"undefined"!=typeof location&&location.hostname&&wn.test(location.hostname)&&(E.r="f");var T=y.urlFn(E);y.log_("Connecting via long-poll to "+T),y.scriptTagHolder.addTag(T,function(){})}})},d.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},d.forceAllow=function(){d.forceAllow_=!0},d.forceDisallow=function(){d.forceDisallow_=!0},d.isAvailable=function(){return!((0,M.Yr)()||!d.forceAllow_&&(d.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},d.prototype.markConnectionHealthy=function(){},d.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},d.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},d.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},d.prototype.send=function(h){var g=(0,M.Pz)(h);this.bytesSent+=g.length,this.stats_.incrementCounter("bytes_sent",g.length);for(var y=(0,M.h$)(g),E=Ze(y,1840),T=0;T<E.length;T++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,E.length,E[T]),this.curSegmentNum++},d.prototype.addDisconnectPingFrame=function(h,g){if(!(0,M.Yr)()){this.myDisconnFrame=document.createElement("iframe");var y={dframe:"t"};y.id=h,y.pw=g,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},d.prototype.incrementIncomingBytes_=function(h){var g=(0,M.Pz)(h).length;this.bytesReceived+=g,this.stats_.incrementCounter("bytes_received",g)},d}(),Ph=function(){function d(h,g,y,E){if(this.onDisconnect=y,this.urlFn=E,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,M.Yr)())this.commandCB=h,this.onMessageCB=g;else{this.uniqueCallbackIdentifier=Ce(),window["pLPCommand"+this.uniqueCallbackIdentifier]=h,window["pRTLPCB"+this.uniqueCallbackIdentifier]=g,this.myIFrame=d.createIFrame_();var T="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(T='<script>document.domain="'+document.domain+'";<\/script>');var O="<html><body>"+T+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(O),this.myIFrame.doc.close()}catch(L){Ue("frame writing exception"),L.stack&&Ue(L.stack),Ue(L)}}}return d.createIFrame_=function(){var h=document.createElement("iframe");if(h.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(h);try{h.contentWindow.document||Ue("No IE domain setting required")}catch(E){var y=document.domain;h.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return h.contentDocument?h.doc=h.contentDocument:h.contentWindow?h.doc=h.contentWindow.document:h.document&&(h.doc=h.document),h},d.prototype.close=function(){var h=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==h.myIFrame&&(document.body.removeChild(h.myIFrame),h.myIFrame=null)},Math.floor(0)));var g=this.onDisconnect;g&&(this.onDisconnect=null,g())},d.prototype.startLongPoll=function(h,g){for(this.myID=h,this.myPW=g,this.alive=!0;this.newRequest_(););},d.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var h={};h.id=this.myID,h.pw=this.myPW,h.ser=this.currentSerial;for(var g=this.urlFn(h),y="",E=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){var R=this.pendingSegs.shift();y=y+"&seg"+E+"="+R.seg+"&ts"+E+"="+R.ts+"&d"+E+"="+R.d,E++}return this.addLongPollTag_(g+=y,this.currentSerial),!0}return!1},d.prototype.enqueueSegment=function(h,g,y){this.pendingSegs.push({seg:h,ts:g,d:y}),this.alive&&this.newRequest_()},d.prototype.addLongPollTag_=function(h,g){var y=this;this.outstandingRequests.add(g);var E=function(){y.outstandingRequests.delete(g),y.newRequest_()},T=setTimeout(E,Math.floor(25e3));this.addTag(h,function(){clearTimeout(T),E()})},d.prototype.addTag=function(h,g){var y=this;(0,M.Yr)()?this.doNodeLongPoll(h,g):setTimeout(function(){try{if(!y.sendNewPolls)return;var E=y.myIFrame.doc.createElement("script");E.type="text/javascript",E.async=!0,E.src=h,E.onload=E.onreadystatechange=function(){var T=E.readyState;(!T||"loaded"===T||"complete"===T)&&(E.onload=E.onreadystatechange=null,E.parentNode&&E.parentNode.removeChild(E),g())},E.onerror=function(){Ue("Long-poll script failed to load: "+h),y.sendNewPolls=!1,y.close()},y.myIFrame.doc.body.appendChild(E)}catch(T){}},Math.floor(1))},d}(),Ar=null;"undefined"!=typeof MozWebSocket?Ar=MozWebSocket:"undefined"!=typeof WebSocket&&(Ar=WebSocket);var dr=function(){function d(h,g,y,E,T,R,O){this.connId=h,this.applicationId=y,this.appCheckToken=E,this.authToken=T,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$t(this.connId),this.stats_=on(g),this.connURL=d.connectionURL_(g,R,O,E),this.nodeAdmin=g.nodeAdmin}return d.connectionURL_=function(h,g,y,E){var T={v:"5"};return!(0,M.Yr)()&&"undefined"!=typeof location&&location.hostname&&wn.test(location.hostname)&&(T.r="f"),g&&(T.s=g),y&&(T.ls=y),E&&(T.ac=E),Et(h,Gn,T)},d.prototype.open=function(h,g){var y=this;this.onDisconnect=g,this.onMessage=h,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Y.set("previous_websocket_failure",!0);try{if((0,M.Yr)()){var T={headers:{"User-Agent":"Firebase/5/"+ae+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(T.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(T.headers["X-Firebase-AppCheck"]=this.appCheckToken);var R=process.env,O=0===this.connURL.indexOf("wss://")?R.HTTPS_PROXY||R.https_proxy:R.HTTP_PROXY||R.http_proxy;O&&(T.proxy={origin:O}),this.mySock=new Ar(this.connURL,[],T)}else this.mySock=new Ar(this.connURL,[],T={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(B){this.log_("Error instantiating WebSocket.");var L=B.message||B.data;return L&&this.log_(L),void this.onClosed_()}this.mySock.onopen=function(){y.log_("Websocket connected."),y.everConnected_=!0},this.mySock.onclose=function(){y.log_("Websocket connection was disconnected."),y.mySock=null,y.onClosed_()},this.mySock.onmessage=function(B){y.handleIncomingFrame(B)},this.mySock.onerror=function(B){y.log_("WebSocket error.  Closing connection.");var W=B.message||B.data;W&&y.log_(W),y.onClosed_()}},d.prototype.start=function(){},d.forceDisallow=function(){d.forceDisallow_=!0},d.isAvailable=function(){var h=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var y=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);y&&y.length>1&&parseFloat(y[1])<4.4&&(h=!0)}return!h&&null!==Ar&&!d.forceDisallow_},d.previouslyFailed=function(){return Y.isInMemoryStorage||!0===Y.get("previous_websocket_failure")},d.prototype.markConnectionHealthy=function(){Y.remove("previous_websocket_failure")},d.prototype.appendFrame_=function(h){if(this.frames.push(h),this.frames.length===this.totalFrames){var g=this.frames.join("");this.frames=null;var y=(0,M.cI)(g);this.onMessage(y)}},d.prototype.handleNewFrameCount_=function(h){this.totalFrames=h,this.frames=[]},d.prototype.extractFrameCount_=function(h){if((0,M.hu)(null===this.frames,"We already have a frame buffer"),h.length<=6){var g=Number(h);if(!isNaN(g))return this.handleNewFrameCount_(g),null}return this.handleNewFrameCount_(1),h},d.prototype.handleIncomingFrame=function(h){if(null!==this.mySock){var g=h.data;if(this.bytesReceived+=g.length,this.stats_.incrementCounter("bytes_received",g.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(g);else{var y=this.extractFrameCount_(g);null!==y&&this.appendFrame_(y)}}},d.prototype.send=function(h){this.resetKeepAlive();var g=(0,M.Pz)(h);this.bytesSent+=g.length,this.stats_.incrementCounter("bytes_sent",g.length);var y=Ze(g,16384);y.length>1&&this.sendString_(String(y.length));for(var E=0;E<y.length;E++)this.sendString_(y[E])},d.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},d.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},d.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},d.prototype.resetKeepAlive=function(){var h=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){h.mySock&&h.sendString_("0"),h.resetKeepAlive()},Math.floor(45e3))},d.prototype.sendString_=function(h){try{this.mySock.send(h)}catch(g){this.log_("Exception thrown from WebSocket.send():",g.message||g.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d}(),yi=function(){function d(h){this.initTransports_(h)}return Object.defineProperty(d,"ALL_TRANSPORTS",{get:function(){return[ml,dr]},enumerable:!1,configurable:!0}),d.prototype.initTransports_=function(h){var g,y,E=dr&&dr.isAvailable(),T=E&&!dr.previouslyFailed();if(h.webSocketOnly&&(E||tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),T=!0),T)this.transports_=[dr];else{var R=this.transports_=[];try{for(var O=(0,X.XA)(d.ALL_TRANSPORTS),L=O.next();!L.done;L=O.next()){var B=L.value;B&&B.isAvailable()&&R.push(B)}}catch(W){g={error:W}}finally{try{L&&!L.done&&(y=O.return)&&y.call(O)}finally{if(g)throw g.error}}}},d.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},d.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},d}(),ss=function(){function d(h,g,y,E,T,R,O,L,B,W){this.id=h,this.repoInfo_=g,this.applicationId_=y,this.appCheckToken_=E,this.authToken_=T,this.onMessage_=R,this.onReady_=O,this.onDisconnect_=L,this.onKill_=B,this.lastSessionId=W,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$t("c:"+this.id+":"),this.transportManager_=new yi(g),this.log_("Connection created"),this.start_()}return d.prototype.start_=function(){var h=this,g=this.transportManager_.initialTransport();this.conn_=new g(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=g.responsesRequiredToBeHealthy||0;var y=this.connReceiver_(this.conn_),E=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){h.conn_&&h.conn_.open(y,E)},Math.floor(0));var T=g.healthyTimeout||0;T>0&&(this.healthyTimeout_=Ao(function(){h.healthyTimeout_=null,h.isHealthy_||(h.conn_&&h.conn_.bytesReceived>102400?(h.log_("Connection exceeded healthy timeout but has received "+h.conn_.bytesReceived+" bytes.  Marking connection healthy."),h.isHealthy_=!0,h.conn_.markConnectionHealthy()):h.conn_&&h.conn_.bytesSent>10240?h.log_("Connection exceeded healthy timeout but has sent "+h.conn_.bytesSent+" bytes.  Leaving connection alive."):(h.log_("Closing unhealthy connection after timeout."),h.close()))},Math.floor(T)))},d.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},d.prototype.disconnReceiver_=function(h){var g=this;return function(y){h===g.conn_?g.onConnectionLost_(y):h===g.secondaryConn_?(g.log_("Secondary connection lost."),g.onSecondaryConnectionLost_()):g.log_("closing an old connection")}},d.prototype.connReceiver_=function(h){var g=this;return function(y){2!==g.state_&&(h===g.rx_?g.onPrimaryMessageReceived_(y):h===g.secondaryConn_?g.onSecondaryMessageReceived_(y):g.log_("message on old connection"))}},d.prototype.sendRequest=function(h){this.sendData_({t:"d",d:h})},d.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},d.prototype.onSecondaryControl_=function(h){if("t"in h){var g=h.t;"a"===g?this.upgradeIfSecondaryHealthy_():"r"===g?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===g&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},d.prototype.onSecondaryMessageReceived_=function(h){var g=lt("t",h),y=lt("d",h);if("c"===g)this.onSecondaryControl_(y);else{if("d"!==g)throw new Error("Unknown protocol layer: "+g);this.pendingDataMessages.push(y)}},d.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},d.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},d.prototype.onPrimaryMessageReceived_=function(h){var g=lt("t",h),y=lt("d",h);"c"===g?this.onControl_(y):"d"===g&&this.onDataMessage_(y)},d.prototype.onDataMessage_=function(h){this.onPrimaryResponse_(),this.onMessage_(h)},d.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},d.prototype.onControl_=function(h){var g=lt("t",h);if("d"in h){var y=h.d;if("h"===g)this.onHandshake_(y);else if("n"===g){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var E=0;E<this.pendingDataMessages.length;++E)this.onDataMessage_(this.pendingDataMessages[E]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===g?this.onConnectionShutdown_(y):"r"===g?this.onReset_(y):"e"===g?fn("Server Error: "+y):"o"===g?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fn("Unknown control packet command: "+g)}},d.prototype.onHandshake_=function(h){var g=h.ts,y=h.v,E=h.h;this.sessionId=h.s,this.repoInfo_.host=E,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,g),"5"!==y&&tn("Protocol version mismatch detected"),this.tryStartUpgrade_())},d.prototype.tryStartUpgrade_=function(){var h=this.transportManager_.upgradeTransport();h&&this.startUpgrade_(h)},d.prototype.startUpgrade_=function(h){var g=this;this.secondaryConn_=new h(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=h.responsesRequiredToBeHealthy||0;var y=this.connReceiver_(this.secondaryConn_),E=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(y,E),Ao(function(){g.secondaryConn_&&(g.log_("Timed out trying to upgrade."),g.secondaryConn_.close())},Math.floor(6e4))},d.prototype.onReset_=function(h){this.log_("Reset packet received.  New host: "+h),this.repoInfo_.host=h,1===this.state_?this.close():(this.closeConnections_(),this.start_())},d.prototype.onConnectionEstablished_=function(h,g){var y=this;this.log_("Realtime connection established."),this.conn_=h,this.state_=1,this.onReady_&&(this.onReady_(g,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ao(function(){y.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},d.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},d.prototype.onSecondaryConnectionLost_=function(){var h=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===h||this.rx_===h)&&this.close()},d.prototype.onConnectionLost_=function(h){this.conn_=null,h||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Y.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},d.prototype.onConnectionShutdown_=function(h){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(h),this.onKill_=null),this.onDisconnect_=null,this.close()},d.prototype.sendData_=function(h){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(h)},d.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},d.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},d}(),vl=function(){function d(){}return d.prototype.put=function(h,g,y,E){},d.prototype.merge=function(h,g,y,E){},d.prototype.refreshAuthToken=function(h){},d.prototype.refreshAppCheckToken=function(h){},d.prototype.onDisconnectPut=function(h,g,y){},d.prototype.onDisconnectMerge=function(h,g,y){},d.prototype.onDisconnectCancel=function(h,g){},d.prototype.reportStats=function(h){},d}(),Ka=function(){function d(h){this.allowedEvents_=h,this.listeners_={},(0,M.hu)(Array.isArray(h)&&h.length>0,"Requires a non-empty array")}return d.prototype.trigger=function(h){for(var g=[],y=1;y<arguments.length;y++)g[y-1]=arguments[y];if(Array.isArray(this.listeners_[h]))for(var E=(0,X.ev)([],(0,X.CR)(this.listeners_[h])),T=0;T<E.length;T++)E[T].callback.apply(E[T].context,g)},d.prototype.on=function(h,g,y){this.validateEventType_(h),this.listeners_[h]=this.listeners_[h]||[],this.listeners_[h].push({callback:g,context:y});var E=this.getInitialEvent(h);E&&g.apply(y,E)},d.prototype.off=function(h,g,y){this.validateEventType_(h);for(var E=this.listeners_[h]||[],T=0;T<E.length;T++)if(E[T].callback===g&&(!y||y===E[T].context))return void E.splice(T,1)},d.prototype.validateEventType_=function(h){(0,M.hu)(this.allowedEvents_.find(function(g){return g===h}),"Unknown event: "+h)},d}(),Rr=function(d){function h(){var g=d.call(this,["online"])||this;return g.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,M.uI)()&&(window.addEventListener("online",function(){g.online_||(g.online_=!0,g.trigger("online",!0))},!1),window.addEventListener("offline",function(){g.online_&&(g.online_=!1,g.trigger("online",!1))},!1)),g}return(0,X.ZT)(h,d),h.getInstance=function(){return new h},h.prototype.getInitialEvent=function(g){return(0,M.hu)("online"===g,"Unknown event type: "+g),[this.online_]},h.prototype.currentlyOnline=function(){return this.online_},h}(Ka),xt=function(){function d(h,g){if(void 0===g){this.pieces_=h.split("/");for(var y=0,E=0;E<this.pieces_.length;E++)this.pieces_[E].length>0&&(this.pieces_[y]=this.pieces_[E],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=h,this.pieceNum_=g}return d.prototype.toString=function(){for(var h="",g=this.pieceNum_;g<this.pieces_.length;g++)""!==this.pieces_[g]&&(h+="/"+this.pieces_[g]);return h||"/"},d}();function et(){return new xt("")}function Nt(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function as(d){return d.pieces_.length-d.pieceNum_}function Zt(d){var h=d.pieceNum_;return h<d.pieces_.length&&h++,new xt(d.pieces_,h)}function Xu(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function eo(d,h){return void 0===h&&(h=0),d.pieces_.slice(d.pieceNum_+h)}function to(d){if(d.pieceNum_>=d.pieces_.length)return null;for(var h=[],g=d.pieceNum_;g<d.pieces_.length-1;g++)h.push(d.pieces_[g]);return new xt(h,0)}function Ot(d,h){for(var g=[],y=d.pieceNum_;y<d.pieces_.length;y++)g.push(d.pieces_[y]);if(h instanceof xt)for(y=h.pieceNum_;y<h.pieces_.length;y++)g.push(h.pieces_[y]);else{var E=h.split("/");for(y=0;y<E.length;y++)E[y].length>0&&g.push(E[y])}return new xt(g,0)}function Ft(d){return d.pieceNum_>=d.pieces_.length}function En(d,h){var g=Nt(d),y=Nt(h);if(null===g)return h;if(g===y)return En(Zt(d),Zt(h));throw new Error("INTERNAL ERROR: innerPath ("+h+") is not within outerPath ("+d+")")}function _i(d,h){for(var g=eo(d,0),y=eo(h,0),E=0;E<g.length&&E<y.length;E++){var T=le(g[E],y[E]);if(0!==T)return T}return g.length===y.length?0:g.length<y.length?-1:1}function ec(d,h){if(as(d)!==as(h))return!1;for(var g=d.pieceNum_,y=h.pieceNum_;g<=d.pieces_.length;g++,y++)if(d.pieces_[g]!==h.pieces_[y])return!1;return!0}function xr(d,h){var g=d.pieceNum_,y=h.pieceNum_;if(as(d)>as(h))return!1;for(;g<d.pieces_.length;){if(d.pieces_[g]!==h.pieces_[y])return!1;++g,++y}return!0}var yl=function(h,g){this.errorPrefix_=g,this.parts_=eo(h,0),this.byteLength_=Math.max(1,this.parts_.length);for(var y=0;y<this.parts_.length;y++)this.byteLength_+=(0,M.ug)(this.parts_[y]);xv(this)};function xv(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ea(d))}function ea(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}var Mh,Oh,Nv=function(d){function h(){var y,E,g=d.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(E="visibilitychange",y="hidden"):void 0!==document.mozHidden?(E="mozvisibilitychange",y="mozHidden"):void 0!==document.msHidden?(E="msvisibilitychange",y="msHidden"):void 0!==document.webkitHidden&&(E="webkitvisibilitychange",y="webkitHidden")),g.visible_=!0,E&&document.addEventListener(E,function(){var T=!document[y];T!==g.visible_&&(g.visible_=T,g.trigger("visible",T))},!1),g}return(0,X.ZT)(h,d),h.getInstance=function(){return new h},h.prototype.getInitialEvent=function(g){return(0,M.hu)("visible"===g,"Unknown event type: "+g),[this.visible_]},h}(Ka),_l=1e3,Ja=function(d){function h(g,y,E,T,R,O,L,B){var W=d.call(this)||this;if(W.repoInfo_=g,W.applicationId_=y,W.onDataUpdate_=E,W.onConnectStatus_=T,W.onServerInfoUpdate_=R,W.authTokenProvider_=O,W.appCheckTokenProvider_=L,W.authOverride_=B,W.id=h.nextPersistentConnectionId_++,W.log_=$t("p:"+W.id+":"),W.interruptReasons_={},W.listens=new Map,W.outstandingPuts_=[],W.outstandingGets_=[],W.outstandingPutCount_=0,W.outstandingGetCount_=0,W.onDisconnectRequestQueue_=[],W.connected_=!1,W.reconnectDelay_=_l,W.maxReconnectDelay_=3e5,W.securityDebugCallback_=null,W.lastSessionId=null,W.establishConnectionTimer_=null,W.visible_=!1,W.requestCBHash_={},W.requestNumber_=0,W.realtime_=null,W.authToken_=null,W.appCheckToken_=null,W.forceTokenRefresh_=!1,W.invalidAuthTokenCount_=0,W.invalidAppCheckTokenCount_=0,W.firstConnection_=!0,W.lastConnectionAttemptTime_=null,W.lastConnectionEstablishedTime_=null,B&&!(0,M.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Nv.getInstance().on("visible",W.onVisible_,W),-1===g.host.indexOf("fblocal")&&Rr.getInstance().on("online",W.onOnline_,W),W}return(0,X.ZT)(h,d),h.prototype.sendRequest=function(g,y,E){var T=++this.requestNumber_,R={r:T,a:g,b:y};this.log_((0,M.Pz)(R)),(0,M.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(R),E&&(this.requestCBHash_[T]=E)},h.prototype.get=function(g){var y=this;this.initConnection_();var E=new M.BH,T={p:g._path.toString(),q:g._queryObject},R={action:"g",request:T,onComplete:function(L){var B=L.d;"ok"===L.s?(y.onDataUpdate_(T.p,B,!1,null),E.resolve(B)):E.reject(B)}};this.outstandingGets_.push(R),this.outstandingGetCount_++;var O=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var L=y.outstandingGets_[O];void 0===L||R!==L||(delete y.outstandingGets_[O],y.outstandingGetCount_--,0===y.outstandingGetCount_&&(y.outstandingGets_=[]),y.log_("get "+O+" timed out on connection"),E.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(O),E.promise},h.prototype.listen=function(g,y,E,T){this.initConnection_();var R=g._queryIdentifier,O=g._path.toString();this.log_("Listen called for "+O+" "+R),this.listens.has(O)||this.listens.set(O,new Map),(0,M.hu)(g._queryParams.isDefault()||!g._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,M.hu)(!this.listens.get(O).has(R),"listen() called twice for same path/queryId.");var L={onComplete:T,hashFn:y,query:g,tag:E};this.listens.get(O).set(R,L),this.connected_&&this.sendListen_(L)},h.prototype.sendGet_=function(g){var y=this,E=this.outstandingGets_[g];this.sendRequest("g",E.request,function(T){delete y.outstandingGets_[g],y.outstandingGetCount_--,0===y.outstandingGetCount_&&(y.outstandingGets_=[]),E.onComplete&&E.onComplete(T)})},h.prototype.sendListen_=function(g){var y=this,E=g.query,T=E._path.toString(),R=E._queryIdentifier;this.log_("Listen on "+T+" for "+R);var O={p:T};g.tag&&(O.q=E._queryObject,O.t=g.tag),O.h=g.hashFn(),this.sendRequest("q",O,function(B){var W=B.d,se=B.s;h.warnOnListenWarnings_(W,E),(y.listens.get(T)&&y.listens.get(T).get(R))===g&&(y.log_("listen response",B),"ok"!==se&&y.removeListen_(T,R),g.onComplete&&g.onComplete(se,W))})},h.warnOnListenWarnings_=function(g,y){if(g&&"object"==typeof g&&(0,M.r3)(g,"w")){var E=(0,M.DV)(g,"w");if(Array.isArray(E)&&~E.indexOf("no_index")){var T='".indexOn": "'+y._queryParams.getIndex().toString()+'"',R=y._path.toString();tn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+T+" at "+R+" to your security rules for better performance.")}}},h.prototype.refreshAuthToken=function(g){this.authToken_=g,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(g)},h.prototype.reduceReconnectDelayIfAdminCredential_=function(g){(g&&40===g.length||(0,M.GJ)(g))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},h.prototype.refreshAppCheckToken=function(g){this.appCheckToken_=g,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},h.prototype.tryAuth=function(){var g=this;if(this.connected_&&this.authToken_){var y=this.authToken_,E=(0,M.w9)(y)?"auth":"gauth",T={cred:y};null===this.authOverride_?T.noauth=!0:"object"==typeof this.authOverride_&&(T.authvar=this.authOverride_),this.sendRequest(E,T,function(R){var O=R.s,L=R.d||"error";g.authToken_===y&&("ok"===O?g.invalidAuthTokenCount_=0:g.onAuthRevoked_(O,L))})}},h.prototype.tryAppCheck=function(){var g=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(y){var E=y.s,T=y.d||"error";"ok"===E?g.invalidAppCheckTokenCount_=0:g.onAppCheckRevoked_(E,T)})},h.prototype.unlisten=function(g,y){var E=g._path.toString(),T=g._queryIdentifier;this.log_("Unlisten called for "+E+" "+T),(0,M.hu)(g._queryParams.isDefault()||!g._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(E,T)&&this.connected_&&this.sendUnlisten_(E,T,g._queryObject,y)},h.prototype.sendUnlisten_=function(g,y,E,T){this.log_("Unlisten on "+g+" for "+y);var R={p:g};T&&(R.q=E,R.t=T),this.sendRequest("n",R)},h.prototype.onDisconnectPut=function(g,y,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",g,y,E):this.onDisconnectRequestQueue_.push({pathString:g,action:"o",data:y,onComplete:E})},h.prototype.onDisconnectMerge=function(g,y,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",g,y,E):this.onDisconnectRequestQueue_.push({pathString:g,action:"om",data:y,onComplete:E})},h.prototype.onDisconnectCancel=function(g,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",g,null,y):this.onDisconnectRequestQueue_.push({pathString:g,action:"oc",data:null,onComplete:y})},h.prototype.sendOnDisconnect_=function(g,y,E,T){var R={p:y,d:E};this.log_("onDisconnect "+g,R),this.sendRequest(g,R,function(O){T&&setTimeout(function(){T(O.s,O.d)},Math.floor(0))})},h.prototype.put=function(g,y,E,T){this.putInternal("p",g,y,E,T)},h.prototype.merge=function(g,y,E,T){this.putInternal("m",g,y,E,T)},h.prototype.putInternal=function(g,y,E,T,R){this.initConnection_();var O={p:y,d:E};void 0!==R&&(O.h=R),this.outstandingPuts_.push({action:g,request:O,onComplete:T}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)},h.prototype.sendPut_=function(g){var y=this,E=this.outstandingPuts_[g].action,T=this.outstandingPuts_[g].request,R=this.outstandingPuts_[g].onComplete;this.outstandingPuts_[g].queued=this.connected_,this.sendRequest(E,T,function(O){y.log_(E+" response",O),delete y.outstandingPuts_[g],y.outstandingPutCount_--,0===y.outstandingPutCount_&&(y.outstandingPuts_=[]),R&&R(O.s,O.d)})},h.prototype.reportStats=function(g){var y=this;if(this.connected_){var E={c:g};this.log_("reportStats",E),this.sendRequest("s",E,function(T){"ok"!==T.s&&y.log_("reportStats","Error sending stats: "+T.d)})}},h.prototype.onDataMessage_=function(g){if("r"in g){this.log_("from server: "+(0,M.Pz)(g));var y=g.r,E=this.requestCBHash_[y];E&&(delete this.requestCBHash_[y],E(g.b))}else{if("error"in g)throw"A server-side error has occurred: "+g.error;"a"in g&&this.onDataPush_(g.a,g.b)}},h.prototype.onDataPush_=function(g,y){this.log_("handleServerMessage",g,y),"d"===g?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===g?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===g?this.onListenRevoked_(y.p,y.q):"ac"===g?this.onAuthRevoked_(y.s,y.d):"apc"===g?this.onAppCheckRevoked_(y.s,y.d):"sd"===g?this.onSecurityDebugPacket_(y):fn("Unrecognized action received from server: "+(0,M.Pz)(g)+"\nAre you using the latest client?")},h.prototype.onReady_=function(g,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(g),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},h.prototype.scheduleConnect_=function(g){var y=this;(0,M.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){y.establishConnectionTimer_=null,y.establishConnection_()},Math.floor(g))},h.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},h.prototype.onVisible_=function(g){g&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_l,this.realtime_||this.scheduleConnect_(0)),this.visible_=g},h.prototype.onOnline_=function(g){g?(this.log_("Browser went online."),this.reconnectDelay_=_l,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},h.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_l),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var y=(new Date).getTime()-this.lastConnectionAttemptTime_,E=Math.max(0,this.reconnectDelay_-y);E=Math.random()*E,this.log_("Trying to reconnect in "+E+"ms"),this.scheduleConnect_(E),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},h.prototype.establishConnection_=function(){return(0,X.mG)(this,void 0,void 0,function(){var g,y,E,T,R,O,L,B,se,be,Re,Ve,dt,rt=this;return(0,X.Jh)(this,function(_t){switch(_t.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,g=this.onDataMessage_.bind(this),y=this.onReady_.bind(this),E=this.onRealtimeDisconnect_.bind(this),T=this.id+":"+h.nextConnectionId_++,R=this.lastSessionId,O=!1,L=null,this.realtime_={close:B=function(){L?L.close():(O=!0,E())},sendRequest:function(xn){(0,M.hu)(L,"sendRequest call when we're not connected not allowed."),L.sendRequest(xn)}},se=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,_t.label=1;case 1:return _t.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(se),this.appCheckTokenProvider_.getToken(se)])];case 2:return be=X.CR.apply(void 0,[_t.sent(),2]),Re=be[0],Ve=be[1],O?Ue("getToken() completed but was canceled"):(Ue("getToken() completed. Creating connection."),this.authToken_=Re&&Re.accessToken,this.appCheckToken_=Ve&&Ve.token,L=new ss(T,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,g,y,E,function(xn){tn(xn+" ("+rt.repoInfo_.toString()+")"),rt.interrupt("server_kill")},R)),[3,4];case 3:return dt=_t.sent(),this.log_("Failed to get token: "+dt),O||(this.repoInfo_.nodeAdmin&&tn(dt),B()),[3,4];case 4:return[2]}})})},h.prototype.interrupt=function(g){Ue("Interrupting connection for reason: "+g),this.interruptReasons_[g]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},h.prototype.resume=function(g){Ue("Resuming connection for reason: "+g),delete this.interruptReasons_[g],(0,M.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_l,this.realtime_||this.scheduleConnect_(0))},h.prototype.handleTimestamp_=function(g){var y=g-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})},h.prototype.cancelSentTransactions_=function(){for(var g=0;g<this.outstandingPuts_.length;g++){var y=this.outstandingPuts_[g];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[g],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},h.prototype.onListenRevoked_=function(g,y){var E;E=y?y.map(function(R){return gn(R)}).join("$"):"default";var T=this.removeListen_(g,E);T&&T.onComplete&&T.onComplete("permission_denied")},h.prototype.removeListen_=function(g,y){var T,E=new xt(g).toString();if(this.listens.has(E)){var R=this.listens.get(E);T=R.get(y),R.delete(y),0===R.size&&this.listens.delete(E)}else T=void 0;return T},h.prototype.onAuthRevoked_=function(g,y){Ue("Auth token revoked: "+g+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===g||"permission_denied"===g)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},h.prototype.onAppCheckRevoked_=function(g,y){Ue("App check token revoked: "+g+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===g||"permission_denied"===g)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},h.prototype.onSecurityDebugPacket_=function(g){this.securityDebugCallback_?this.securityDebugCallback_(g):"msg"in g&&console.log("FIREBASE: "+g.msg.replace("\n","\nFIREBASE: "))},h.prototype.restoreState_=function(){var g,y,E,T;this.tryAuth(),this.tryAppCheck();try{for(var R=(0,X.XA)(this.listens.values()),O=R.next();!O.done;O=R.next()){var L=O.value;try{for(var B=(E=void 0,(0,X.XA)(L.values())),W=B.next();!W.done;W=B.next())this.sendListen_(W.value)}catch(Ve){E={error:Ve}}finally{try{W&&!W.done&&(T=B.return)&&T.call(B)}finally{if(E)throw E.error}}}}catch(Ve){g={error:Ve}}finally{try{O&&!O.done&&(y=R.return)&&y.call(R)}finally{if(g)throw g.error}}for(var be=0;be<this.outstandingPuts_.length;be++)this.outstandingPuts_[be]&&this.sendPut_(be);for(;this.onDisconnectRequestQueue_.length;){var Re=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(Re.action,Re.pathString,Re.data,Re.onComplete)}for(be=0;be<this.outstandingGets_.length;be++)this.outstandingGets_[be]&&this.sendGet_(be)},h.prototype.sendConnectStats_=function(){var g={},y="js";(0,M.Yr)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),g["sdk."+y+"."+ae.replace(/\./g,"-")]=1,(0,M.uI)()?g["framework.cordova"]=1:(0,M.b$)()&&(g["framework.reactnative"]=1),this.reportStats(g)},h.prototype.shouldReconnect_=function(){var g=Rr.getInstance().currentlyOnline();return(0,M.xb)(this.interruptReasons_)&&g},h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h}(vl),Bt=function(){function d(h,g){this.name=h,this.node=g}return d.Wrap=function(h,g){return new d(h,g)},d}(),bl=function(){function d(){}return d.prototype.getCompare=function(){return this.compare.bind(this)},d.prototype.indexedValueChanged=function(h,g){var y=new Bt(ue,h),E=new Bt(ue,g);return 0!==this.compare(y,E)},d.prototype.minPost=function(){return Bt.MIN},d}(),Ov=function(d){function h(){return null!==d&&d.apply(this,arguments)||this}return(0,X.ZT)(h,d),Object.defineProperty(h,"__EMPTY_NODE",{get:function(){return Mh},set:function(g){Mh=g},enumerable:!1,configurable:!0}),h.prototype.compare=function(g,y){return le(g.name,y.name)},h.prototype.isDefinedOn=function(g){throw(0,M.g5)("KeyIndex.isDefinedOn not expected to be called.")},h.prototype.indexedValueChanged=function(g,y){return!1},h.prototype.minPost=function(){return Bt.MIN},h.prototype.maxPost=function(){return new Bt(Te,Mh)},h.prototype.makePost=function(g,y){return(0,M.hu)("string"==typeof g,"KeyIndex indexValue must always be a string."),new Bt(g,Mh)},h.prototype.toString=function(){return".key"},h}(bl),ro=new Ov,tc=function(){function d(h,g,y,E,T){void 0===T&&(T=null),this.isReverse_=E,this.resultGenerator_=T,this.nodeStack_=[];for(var R=1;!h.isEmpty();)if(h=h,R=g?y(h.key,g):1,E&&(R*=-1),R<0)h=this.isReverse_?h.left:h.right;else{if(0===R){this.nodeStack_.push(h);break}this.nodeStack_.push(h),h=this.isReverse_?h.right:h.left}}return d.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var g,h=this.nodeStack_.pop();if(g=this.resultGenerator_?this.resultGenerator_(h.key,h.value):{key:h.key,value:h.value},this.isReverse_)for(h=h.left;!h.isEmpty();)this.nodeStack_.push(h),h=h.right;else for(h=h.right;!h.isEmpty();)this.nodeStack_.push(h),h=h.left;return g},d.prototype.hasNext=function(){return this.nodeStack_.length>0},d.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var h=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(h.key,h.value):{key:h.key,value:h.value}},d}(),ti=function(){function d(h,g,y,E,T){this.key=h,this.value=g,this.color=null!=y?y:d.RED,this.left=null!=E?E:io.EMPTY_NODE,this.right=null!=T?T:io.EMPTY_NODE}return d.prototype.copy=function(h,g,y,E,T){return new d(null!=h?h:this.key,null!=g?g:this.value,null!=y?y:this.color,null!=E?E:this.left,null!=T?T:this.right)},d.prototype.count=function(){return this.left.count()+1+this.right.count()},d.prototype.isEmpty=function(){return!1},d.prototype.inorderTraversal=function(h){return this.left.inorderTraversal(h)||!!h(this.key,this.value)||this.right.inorderTraversal(h)},d.prototype.reverseTraversal=function(h){return this.right.reverseTraversal(h)||h(this.key,this.value)||this.left.reverseTraversal(h)},d.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},d.prototype.minKey=function(){return this.min_().key},d.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},d.prototype.insert=function(h,g,y){var E=this,T=y(h,E.key);return(E=T<0?E.copy(null,null,null,E.left.insert(h,g,y),null):0===T?E.copy(null,g,null,null,null):E.copy(null,null,null,null,E.right.insert(h,g,y))).fixUp_()},d.prototype.removeMin_=function(){if(this.left.isEmpty())return io.EMPTY_NODE;var h=this;return!h.left.isRed_()&&!h.left.left.isRed_()&&(h=h.moveRedLeft_()),(h=h.copy(null,null,null,h.left.removeMin_(),null)).fixUp_()},d.prototype.remove=function(h,g){var y,E;if(g(h,(y=this).key)<0)!y.left.isEmpty()&&!y.left.isRed_()&&!y.left.left.isRed_()&&(y=y.moveRedLeft_()),y=y.copy(null,null,null,y.left.remove(h,g),null);else{if(y.left.isRed_()&&(y=y.rotateRight_()),!y.right.isEmpty()&&!y.right.isRed_()&&!y.right.left.isRed_()&&(y=y.moveRedRight_()),0===g(h,y.key)){if(y.right.isEmpty())return io.EMPTY_NODE;E=y.right.min_(),y=y.copy(E.key,E.value,null,null,y.right.removeMin_())}y=y.copy(null,null,null,null,y.right.remove(h,g))}return y.fixUp_()},d.prototype.isRed_=function(){return this.color},d.prototype.fixUp_=function(){var h=this;return h.right.isRed_()&&!h.left.isRed_()&&(h=h.rotateLeft_()),h.left.isRed_()&&h.left.left.isRed_()&&(h=h.rotateRight_()),h.left.isRed_()&&h.right.isRed_()&&(h=h.colorFlip_()),h},d.prototype.moveRedLeft_=function(){var h=this.colorFlip_();return h.right.left.isRed_()&&(h=(h=(h=h.copy(null,null,null,null,h.right.rotateRight_())).rotateLeft_()).colorFlip_()),h},d.prototype.moveRedRight_=function(){var h=this.colorFlip_();return h.left.left.isRed_()&&(h=(h=h.rotateRight_()).colorFlip_()),h},d.prototype.rotateLeft_=function(){var h=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,h,null)},d.prototype.rotateRight_=function(){var h=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,h)},d.prototype.colorFlip_=function(){var h=this.left.copy(null,null,!this.left.color,null,null),g=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,h,g)},d.prototype.checkMaxDepth_=function(){var h=this.check_();return Math.pow(2,h)<=this.count()+1},d.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var h=this.left.check_();if(h!==this.right.check_())throw new Error("Black depths differ");return h+(this.isRed_()?0:1)},d.RED=!0,d.BLACK=!1,d}(),rw=function(){function d(){}return d.prototype.copy=function(h,g,y,E,T){return this},d.prototype.insert=function(h,g,y){return new ti(h,g,null)},d.prototype.remove=function(h,g){return this},d.prototype.count=function(){return 0},d.prototype.isEmpty=function(){return!0},d.prototype.inorderTraversal=function(h){return!1},d.prototype.reverseTraversal=function(h){return!1},d.prototype.minKey=function(){return null},d.prototype.maxKey=function(){return null},d.prototype.check_=function(){return 0},d.prototype.isRed_=function(){return!1},d}(),io=function(){function d(h,g){void 0===g&&(g=d.EMPTY_NODE),this.comparator_=h,this.root_=g}return d.prototype.insert=function(h,g){return new d(this.comparator_,this.root_.insert(h,g,this.comparator_).copy(null,null,ti.BLACK,null,null))},d.prototype.remove=function(h){return new d(this.comparator_,this.root_.remove(h,this.comparator_).copy(null,null,ti.BLACK,null,null))},d.prototype.get=function(h){for(var g,y=this.root_;!y.isEmpty();){if(0===(g=this.comparator_(h,y.key)))return y.value;g<0?y=y.left:g>0&&(y=y.right)}return null},d.prototype.getPredecessorKey=function(h){for(var g,y=this.root_,E=null;!y.isEmpty();){if(0===(g=this.comparator_(h,y.key))){if(y.left.isEmpty())return E?E.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}g<0?y=y.left:g>0&&(E=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},d.prototype.isEmpty=function(){return this.root_.isEmpty()},d.prototype.count=function(){return this.root_.count()},d.prototype.minKey=function(){return this.root_.minKey()},d.prototype.maxKey=function(){return this.root_.maxKey()},d.prototype.inorderTraversal=function(h){return this.root_.inorderTraversal(h)},d.prototype.reverseTraversal=function(h){return this.root_.reverseTraversal(h)},d.prototype.getIterator=function(h){return new tc(this.root_,null,this.comparator_,!1,h)},d.prototype.getIteratorFrom=function(h,g){return new tc(this.root_,h,this.comparator_,!1,g)},d.prototype.getReverseIteratorFrom=function(h,g){return new tc(this.root_,h,this.comparator_,!0,g)},d.prototype.getReverseIterator=function(h){return new tc(this.root_,null,this.comparator_,!0,h)},d.EMPTY_NODE=new rw,d}();function Np(d,h){return le(d.name,h.name)}function xo(d,h){return le(d,h)}var Mp,Op,El,Il,Za,wl=function(d){return"number"==typeof d?"number:"+We(d):"string:"+d},Pp=function(d){if(d.isLeafNode()){var h=d.val();(0,M.hu)("string"==typeof h||"number"==typeof h||"object"==typeof h&&(0,M.r3)(h,".sv"),"Priority must be a string or number.")}else(0,M.hu)(d===Oh||d.isEmpty(),"priority of unexpected type.");(0,M.hu)(d===Oh||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ta=function(){function d(h,g){void 0===g&&(g=d.__childrenNodeConstructor.EMPTY_NODE),this.value_=h,this.priorityNode_=g,this.lazyHash_=null,(0,M.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Pp(this.priorityNode_)}return Object.defineProperty(d,"__childrenNodeConstructor",{get:function(){return Mp},set:function(h){Mp=h},enumerable:!1,configurable:!0}),d.prototype.isLeafNode=function(){return!0},d.prototype.getPriority=function(){return this.priorityNode_},d.prototype.updatePriority=function(h){return new d(this.value_,h)},d.prototype.getImmediateChild=function(h){return".priority"===h?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE},d.prototype.getChild=function(h){return Ft(h)?this:".priority"===Nt(h)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE},d.prototype.hasChild=function(){return!1},d.prototype.getPredecessorChildName=function(h,g){return null},d.prototype.updateImmediateChild=function(h,g){return".priority"===h?this.updatePriority(g):g.isEmpty()&&".priority"!==h?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(h,g).updatePriority(this.priorityNode_)},d.prototype.updateChild=function(h,g){var y=Nt(h);return null===y?g:g.isEmpty()&&".priority"!==y?this:((0,M.hu)(".priority"!==y||1===as(h),".priority must be the last token in a path"),this.updateImmediateChild(y,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zt(h),g)))},d.prototype.isEmpty=function(){return!1},d.prototype.numChildren=function(){return 0},d.prototype.forEachChild=function(h,g){return!1},d.prototype.val=function(h){return h&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},d.prototype.hash=function(){if(null===this.lazyHash_){var h="";this.priorityNode_.isEmpty()||(h+="priority:"+wl(this.priorityNode_.val())+":");var g=typeof this.value_;h+=g+":",h+="number"===g?We(this.value_):this.value_,this.lazyHash_=$e(h)}return this.lazyHash_},d.prototype.getValue=function(){return this.value_},d.prototype.compareTo=function(h){return h===d.__childrenNodeConstructor.EMPTY_NODE?1:h instanceof d.__childrenNodeConstructor?-1:((0,M.hu)(h.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(h))},d.prototype.compareToLeafNode_=function(h){var g=typeof h.value_,y=typeof this.value_,E=d.VALUE_TYPE_ORDER.indexOf(g),T=d.VALUE_TYPE_ORDER.indexOf(y);return(0,M.hu)(E>=0,"Unknown leaf type: "+g),(0,M.hu)(T>=0,"Unknown leaf type: "+y),E===T?"object"===y?0:this.value_<h.value_?-1:this.value_===h.value_?0:1:T-E},d.prototype.withIndex=function(){return this},d.prototype.isIndexed=function(){return!0},d.prototype.equals=function(h){return h===this||!!h.isLeafNode()&&(this.value_===h.value_&&this.priorityNode_.equals(h.priorityNode_))},d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d}(),un=new(function(d){function h(){return null!==d&&d.apply(this,arguments)||this}return(0,X.ZT)(h,d),h.prototype.compare=function(g,y){var E=g.node.getPriority(),T=y.node.getPriority(),R=E.compareTo(T);return 0===R?le(g.name,y.name):R},h.prototype.isDefinedOn=function(g){return!g.getPriority().isEmpty()},h.prototype.indexedValueChanged=function(g,y){return!g.getPriority().equals(y.getPriority())},h.prototype.minPost=function(){return Bt.MIN},h.prototype.maxPost=function(){return new Bt(Te,new ta("[PRIORITY-POST]",El))},h.prototype.makePost=function(g,y){var E=Op(g);return new Bt(y,new ta("[PRIORITY-POST]",E))},h.prototype.toString=function(){return".priority"},h}(bl)),kp=Math.log(2),Cl=function(){function d(h){this.count=parseInt(Math.log(h+1)/kp,10),this.current_=this.count-1;var E=parseInt(Array(this.count+1).join("1"),2);this.bits_=h+1&E}return d.prototype.nextBitIsOne=function(){var h=!(this.bits_&1<<this.current_);return this.current_--,h},d}(),Dl=function(d,h,g,y){d.sort(h);var E=function(L,B){var se,be,W=B-L;if(0===W)return null;if(1===W)return se=d[L],be=g?g(se):se,new ti(be,se.node,ti.BLACK,null,null);var Re=parseInt(W/2,10)+L,Ve=E(L,Re),dt=E(Re+1,B);return se=d[Re],be=g?g(se):se,new ti(be,se.node,ti.BLACK,Ve,dt)},O=function(L){for(var B=null,W=null,se=d.length,be=function(_t,xn){var Di=se-_t,_u=se;se-=_t;var Lc=E(Di+1,_u),bu=d[Di],Ta=g?g(bu):bu;Re(new ti(Ta,bu.node,xn,null,Lc))},Re=function(_t){B?(B.left=_t,B=_t):(W=_t,B=_t)},Ve=0;Ve<L.count;++Ve){var dt=L.nextBitIsOne(),rt=Math.pow(2,L.count-(Ve+1));dt?be(rt,ti.BLACK):(be(rt,ti.BLACK),be(rt,ti.RED))}return W}(new Cl(d.length));return new io(y||h,O)},nc={},vn=function(){function d(h,g){this.indexes_=h,this.indexSet_=g}return Object.defineProperty(d,"Default",{get:function(){return(0,M.hu)(nc&&un,"ChildrenNode.ts has not been loaded"),Il=Il||new d({".priority":nc},{".priority":un})},enumerable:!1,configurable:!0}),d.prototype.get=function(h){var g=(0,M.DV)(this.indexes_,h);if(!g)throw new Error("No index defined for "+h);return g instanceof io?g:null},d.prototype.hasIndex=function(h){return(0,M.r3)(this.indexSet_,h.toString())},d.prototype.addIndex=function(h,g){(0,M.hu)(h!==ro,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var y=[],E=!1,T=g.getIterator(Bt.Wrap),R=T.getNext();R;)E=E||h.isDefinedOn(R.node),y.push(R),R=T.getNext();var O;O=E?Dl(y,h.getCompare()):nc;var L=h.toString(),B=(0,X.pi)({},this.indexSet_);B[L]=h;var W=(0,X.pi)({},this.indexes_);return W[L]=O,new d(W,B)},d.prototype.addToIndexes=function(h,g){var y=this;return new d((0,M.UI)(this.indexes_,function(T,R){var O=(0,M.DV)(y.indexSet_,R);if((0,M.hu)(O,"Missing index implementation for "+R),T===nc){if(O.isDefinedOn(h.node)){for(var L=[],B=g.getIterator(Bt.Wrap),W=B.getNext();W;)W.name!==h.name&&L.push(W),W=B.getNext();return L.push(h),Dl(L,O.getCompare())}return nc}var se=g.get(h.name),be=T;return se&&(be=be.remove(new Bt(h.name,se))),be.insert(h,h.node)}),this.indexSet_)},d.prototype.removeFromIndexes=function(h,g){return new d((0,M.UI)(this.indexes_,function(E){if(E===nc)return E;var T=g.get(h.name);return T?E.remove(new Bt(h.name,T)):E}),this.indexSet_)},d}(),pt=function(){function d(h,g,y){this.children_=h,this.priorityNode_=g,this.indexMap_=y,this.lazyHash_=null,this.priorityNode_&&Pp(this.priorityNode_),this.children_.isEmpty()&&(0,M.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(d,"EMPTY_NODE",{get:function(){return Za||(Za=new d(new io(xo),null,vn.Default))},enumerable:!1,configurable:!0}),d.prototype.isLeafNode=function(){return!1},d.prototype.getPriority=function(){return this.priorityNode_||Za},d.prototype.updatePriority=function(h){return this.children_.isEmpty()?this:new d(this.children_,h,this.indexMap_)},d.prototype.getImmediateChild=function(h){if(".priority"===h)return this.getPriority();var g=this.children_.get(h);return null===g?Za:g},d.prototype.getChild=function(h){var g=Nt(h);return null===g?this:this.getImmediateChild(g).getChild(Zt(h))},d.prototype.hasChild=function(h){return null!==this.children_.get(h)},d.prototype.updateImmediateChild=function(h,g){if((0,M.hu)(g,"We should always be passing snapshot nodes"),".priority"===h)return this.updatePriority(g);var y=new Bt(h,g),E=void 0,T=void 0;g.isEmpty()?(E=this.children_.remove(h),T=this.indexMap_.removeFromIndexes(y,this.children_)):(E=this.children_.insert(h,g),T=this.indexMap_.addToIndexes(y,this.children_));var R=E.isEmpty()?Za:this.priorityNode_;return new d(E,R,T)},d.prototype.updateChild=function(h,g){var y=Nt(h);if(null===y)return g;(0,M.hu)(".priority"!==Nt(h)||1===as(h),".priority must be the last token in a path");var E=this.getImmediateChild(y).updateChild(Zt(h),g);return this.updateImmediateChild(y,E)},d.prototype.isEmpty=function(){return this.children_.isEmpty()},d.prototype.numChildren=function(){return this.children_.count()},d.prototype.val=function(h){if(this.isEmpty())return null;var g={},y=0,E=0,T=!0;if(this.forEachChild(un,function(L,B){g[L]=B.val(h),y++,T&&d.INTEGER_REGEXP_.test(L)?E=Math.max(E,Number(L)):T=!1}),!h&&T&&E<2*y){var R=[];for(var O in g)R[O]=g[O];return R}return h&&!this.getPriority().isEmpty()&&(g[".priority"]=this.getPriority().val()),g},d.prototype.hash=function(){if(null===this.lazyHash_){var h="";this.getPriority().isEmpty()||(h+="priority:"+wl(this.getPriority().val())+":"),this.forEachChild(un,function(g,y){var E=y.hash();""!==E&&(h+=":"+g+":"+E)}),this.lazyHash_=""===h?"":$e(h)}return this.lazyHash_},d.prototype.getPredecessorChildName=function(h,g,y){var E=this.resolveIndex_(y);if(E){var T=E.getPredecessorKey(new Bt(h,g));return T?T.name:null}return this.children_.getPredecessorKey(h)},d.prototype.getFirstChildName=function(h){var g=this.resolveIndex_(h);if(g){var y=g.minKey();return y&&y.name}return this.children_.minKey()},d.prototype.getFirstChild=function(h){var g=this.getFirstChildName(h);return g?new Bt(g,this.children_.get(g)):null},d.prototype.getLastChildName=function(h){var g=this.resolveIndex_(h);if(g){var y=g.maxKey();return y&&y.name}return this.children_.maxKey()},d.prototype.getLastChild=function(h){var g=this.getLastChildName(h);return g?new Bt(g,this.children_.get(g)):null},d.prototype.forEachChild=function(h,g){var y=this.resolveIndex_(h);return y?y.inorderTraversal(function(E){return g(E.name,E.node)}):this.children_.inorderTraversal(g)},d.prototype.getIterator=function(h){return this.getIteratorFrom(h.minPost(),h)},d.prototype.getIteratorFrom=function(h,g){var y=this.resolveIndex_(g);if(y)return y.getIteratorFrom(h,function(R){return R});for(var E=this.children_.getIteratorFrom(h.name,Bt.Wrap),T=E.peek();null!=T&&g.compare(T,h)<0;)E.getNext(),T=E.peek();return E},d.prototype.getReverseIterator=function(h){return this.getReverseIteratorFrom(h.maxPost(),h)},d.prototype.getReverseIteratorFrom=function(h,g){var y=this.resolveIndex_(g);if(y)return y.getReverseIteratorFrom(h,function(R){return R});for(var E=this.children_.getReverseIteratorFrom(h.name,Bt.Wrap),T=E.peek();null!=T&&g.compare(T,h)>0;)E.getNext(),T=E.peek();return E},d.prototype.compareTo=function(h){return this.isEmpty()?h.isEmpty()?0:-1:h.isLeafNode()||h.isEmpty()?1:h===dn?-1:0},d.prototype.withIndex=function(h){if(h===ro||this.indexMap_.hasIndex(h))return this;var g=this.indexMap_.addIndex(h,this.children_);return new d(this.children_,this.priorityNode_,g)},d.prototype.isIndexed=function(h){return h===ro||this.indexMap_.hasIndex(h)},d.prototype.equals=function(h){if(h===this)return!0;if(h.isLeafNode())return!1;var g=h;if(this.getPriority().equals(g.getPriority())){if(this.children_.count()===g.children_.count()){for(var y=this.getIterator(un),E=g.getIterator(un),T=y.getNext(),R=E.getNext();T&&R;){if(T.name!==R.name||!T.node.equals(R.node))return!1;T=y.getNext(),R=E.getNext()}return null===T&&null===R}return!1}return!1},d.prototype.resolveIndex_=function(h){return h===ro?null:this.indexMap_.get(h.toString())},d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d}(),dn=new(function(d){function h(){return d.call(this,new io(xo),pt.EMPTY_NODE,vn.Default)||this}return(0,X.ZT)(h,d),h.prototype.compareTo=function(g){return g===this?0:1},h.prototype.equals=function(g){return g===this},h.prototype.getPriority=function(){return this},h.prototype.getImmediateChild=function(g){return pt.EMPTY_NODE},h.prototype.isEmpty=function(){return!1},h}(pt));function Cn(d,h){if(void 0===h&&(h=null),null===d)return pt.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(h=d[".priority"]),(0,M.hu)(null===h||"string"==typeof h||"number"==typeof h||"object"==typeof h&&".sv"in h,"Invalid priority type found: "+typeof h),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new ta(d,Cn(h));if(d instanceof Array){var L=pt.EMPTY_NODE;return at(d,function(B,W){if((0,M.r3)(d,B)&&"."!==B.substring(0,1)){var se=Cn(W);(se.isLeafNode()||!se.isEmpty())&&(L=L.updateImmediateChild(B,se))}}),L.updatePriority(Cn(h))}var y=[],E=!1;if(at(d,function(B,W){if("."!==B.substring(0,1)){var se=Cn(W);se.isEmpty()||(E=E||!se.getPriority().isEmpty(),y.push(new Bt(B,se)))}}),0===y.length)return pt.EMPTY_NODE;var R=Dl(y,Np,function(B){return B.name},xo);if(E){var O=Dl(y,un.getCompare());return new pt(R,Cn(h),new vn({".priority":O},{".priority":un}))}return new pt(R,Cn(h),vn.Default)}Object.defineProperties(Bt,{MIN:{value:new Bt(ue,pt.EMPTY_NODE)},MAX:{value:new Bt(Te,dn)}}),Ov.__EMPTY_NODE=pt.EMPTY_NODE,ta.__childrenNodeConstructor=pt,function(d){Oh=d}(dn),function(d){El=d}(dn),function(d){Op=d}(Cn);var Xa=function(d){function h(g){var y=d.call(this)||this;return y.indexPath_=g,(0,M.hu)(!Ft(g)&&".priority"!==Nt(g),"Can't create PathIndex with empty path or .priority key"),y}return(0,X.ZT)(h,d),h.prototype.extractChild=function(g){return g.getChild(this.indexPath_)},h.prototype.isDefinedOn=function(g){return!g.getChild(this.indexPath_).isEmpty()},h.prototype.compare=function(g,y){var E=this.extractChild(g.node),T=this.extractChild(y.node),R=E.compareTo(T);return 0===R?le(g.name,y.name):R},h.prototype.makePost=function(g,y){var E=Cn(g),T=pt.EMPTY_NODE.updateChild(this.indexPath_,E);return new Bt(y,T)},h.prototype.maxPost=function(){var g=pt.EMPTY_NODE.updateChild(this.indexPath_,dn);return new Bt(Te,g)},h.prototype.toString=function(){return eo(this.indexPath_,0).join("/")},h}(bl),rc=new(function(d){function h(){return null!==d&&d.apply(this,arguments)||this}return(0,X.ZT)(h,d),h.prototype.compare=function(g,y){var E=g.node.compareTo(y.node);return 0===E?le(g.name,y.name):E},h.prototype.isDefinedOn=function(g){return!0},h.prototype.indexedValueChanged=function(g,y){return!g.equals(y)},h.prototype.minPost=function(){return Bt.MIN},h.prototype.maxPost=function(){return Bt.MAX},h.prototype.makePost=function(g,y){var E=Cn(g);return new Bt(y,E)},h.prototype.toString=function(){return".value"},h}(bl)),us="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Vp=function(){var d=0,h=[];return function(g){var y=g===d;d=g;var E,T=new Array(8);for(E=7;E>=0;E--)T[E]=us.charAt(g%64),g=Math.floor(g/64);(0,M.hu)(0===g,"Cannot push at time == 0");var R=T.join("");if(y){for(E=11;E>=0&&63===h[E];E--)h[E]=0;h[E]++}else for(E=0;E<12;E++)h[E]=Math.floor(64*Math.random());for(E=0;E<12;E++)R+=us.charAt(h[E]);return(0,M.hu)(20===R.length,"nextPushId: Length should be 20."),R}}(),ic=function(d){if(d===""+In)return"-";var h=tr(d);if(null!=h)return""+(h+1);for(var g=new Array(d.length),y=0;y<g.length;y++)g[y]=d.charAt(y);if(g.length<786)return g.push("-"),g.join("");for(var E=g.length-1;E>=0&&"z"===g[E];)E--;if(-1===E)return Te;var R=us.charAt(us.indexOf(g[E])+1);return g[E]=R,g.slice(0,E+1).join("")},ls=function(d){if(d===""+mi)return ue;var h=tr(d);if(null!=h)return""+(h-1);for(var g=new Array(d.length),y=0;y<g.length;y++)g[y]=d.charAt(y);return"-"===g[g.length-1]?1===g.length?""+In:(delete g[g.length-1],g.join("")):(g[g.length-1]=us.charAt(us.indexOf(g[g.length-1])-1),g.join("")+"z".repeat(786-g.length))};function kh(d){return{type:"value",snapshotNode:d}}function fs(d,h){return{type:"child_added",snapshotNode:h,childName:d}}function ht(d,h){return{type:"child_removed",snapshotNode:h,childName:d}}function oc(d,h,g){return{type:"child_changed",snapshotNode:h,childName:d,oldSnap:g}}var Lh=function(){function d(h){this.index_=h}return d.prototype.updateChild=function(h,g,y,E,T,R){(0,M.hu)(h.isIndexed(this.index_),"A node must be indexed if only a child is updated");var O=h.getImmediateChild(g);return O.getChild(E).equals(y.getChild(E))&&O.isEmpty()===y.isEmpty()||(null!=R&&(y.isEmpty()?h.hasChild(g)?R.trackChildChange(ht(g,O)):(0,M.hu)(h.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):O.isEmpty()?R.trackChildChange(fs(g,y)):R.trackChildChange(oc(g,y,O))),h.isLeafNode()&&y.isEmpty())?h:h.updateImmediateChild(g,y).withIndex(this.index_)},d.prototype.updateFullNode=function(h,g,y){return null!=y&&(h.isLeafNode()||h.forEachChild(un,function(E,T){g.hasChild(E)||y.trackChildChange(ht(E,T))}),g.isLeafNode()||g.forEachChild(un,function(E,T){if(h.hasChild(E)){var R=h.getImmediateChild(E);R.equals(T)||y.trackChildChange(oc(E,T,R))}else y.trackChildChange(fs(E,T))})),g.withIndex(this.index_)},d.prototype.updatePriority=function(h,g){return h.isEmpty()?pt.EMPTY_NODE:h.updatePriority(g)},d.prototype.filtersNodes=function(){return!1},d.prototype.getIndexedFilter=function(){return this},d.prototype.getIndex=function(){return this.index_},d}(),Up=function(){function d(h){this.indexedFilter_=new Lh(h.getIndex()),this.index_=h.getIndex(),this.startPost_=d.getStartPost_(h),this.endPost_=d.getEndPost_(h)}return d.prototype.getStartPost=function(){return this.startPost_},d.prototype.getEndPost=function(){return this.endPost_},d.prototype.matches=function(h){return this.index_.compare(this.getStartPost(),h)<=0&&this.index_.compare(h,this.getEndPost())<=0},d.prototype.updateChild=function(h,g,y,E,T,R){return this.matches(new Bt(g,y))||(y=pt.EMPTY_NODE),this.indexedFilter_.updateChild(h,g,y,E,T,R)},d.prototype.updateFullNode=function(h,g,y){g.isLeafNode()&&(g=pt.EMPTY_NODE);var E=g.withIndex(this.index_);E=E.updatePriority(pt.EMPTY_NODE);var T=this;return g.forEachChild(un,function(R,O){T.matches(new Bt(R,O))||(E=E.updateImmediateChild(R,pt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(h,E,y)},d.prototype.updatePriority=function(h,g){return h},d.prototype.filtersNodes=function(){return!0},d.prototype.getIndexedFilter=function(){return this.indexedFilter_},d.prototype.getIndex=function(){return this.index_},d.getStartPost_=function(h){if(h.hasStart()){var g=h.getIndexStartName();return h.getIndex().makePost(h.getIndexStartValue(),g)}return h.getIndex().minPost()},d.getEndPost_=function(h){if(h.hasEnd()){var g=h.getIndexEndName();return h.getIndex().makePost(h.getIndexEndValue(),g)}return h.getIndex().maxPost()},d}(),Vv=function(){function d(h){this.rangedFilter_=new Up(h),this.index_=h.getIndex(),this.limit_=h.getLimit(),this.reverse_=!h.isViewFromLeft()}return d.prototype.updateChild=function(h,g,y,E,T,R){return this.rangedFilter_.matches(new Bt(g,y))||(y=pt.EMPTY_NODE),h.getImmediateChild(g).equals(y)?h:h.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(h,g,y,E,T,R):this.fullLimitUpdateChild_(h,g,y,T,R)},d.prototype.updateFullNode=function(h,g,y){var E;if(g.isLeafNode()||g.isEmpty())E=pt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<g.numChildren()&&g.isIndexed(this.index_)){E=pt.EMPTY_NODE.withIndex(this.index_);var T=void 0;T=this.reverse_?g.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):g.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var R=0;T.hasNext()&&R<this.limit_;){var O=T.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),O)<=0:this.index_.compare(O,this.rangedFilter_.getEndPost())<=0))break;E=E.updateImmediateChild(O.name,O.node),R++}}else{E=(E=g.withIndex(this.index_)).updatePriority(pt.EMPTY_NODE);var B=void 0,W=void 0,se=void 0;if(T=void 0,this.reverse_){T=E.getReverseIterator(this.index_),B=this.rangedFilter_.getEndPost(),W=this.rangedFilter_.getStartPost();var be=this.index_.getCompare();se=function(rt,_t){return be(_t,rt)}}else T=E.getIterator(this.index_),B=this.rangedFilter_.getStartPost(),W=this.rangedFilter_.getEndPost(),se=this.index_.getCompare();R=0;for(var Re=!1;T.hasNext();)O=T.getNext(),!Re&&se(B,O)<=0&&(Re=!0),Re&&R<this.limit_&&se(O,W)<=0?R++:E=E.updateImmediateChild(O.name,pt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(h,E,y)},d.prototype.updatePriority=function(h,g){return h},d.prototype.filtersNodes=function(){return!0},d.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},d.prototype.getIndex=function(){return this.index_},d.prototype.fullLimitUpdateChild_=function(h,g,y,E,T){var R;if(this.reverse_){var O=this.index_.getCompare();R=function(xn,Di){return O(Di,xn)}}else R=this.index_.getCompare();var L=h;(0,M.hu)(L.numChildren()===this.limit_,"");var B=new Bt(g,y),W=this.reverse_?L.getFirstChild(this.index_):L.getLastChild(this.index_),se=this.rangedFilter_.matches(B);if(L.hasChild(g)){for(var be=L.getImmediateChild(g),Re=E.getChildAfterChild(this.index_,W,this.reverse_);null!=Re&&(Re.name===g||L.hasChild(Re.name));)Re=E.getChildAfterChild(this.index_,Re,this.reverse_);var Ve=null==Re?1:R(Re,B);if(se&&!y.isEmpty()&&Ve>=0)return null!=T&&T.trackChildChange(oc(g,y,be)),L.updateImmediateChild(g,y);null!=T&&T.trackChildChange(ht(g,be));var rt=L.updateImmediateChild(g,pt.EMPTY_NODE);return null!=Re&&this.rangedFilter_.matches(Re)?(null!=T&&T.trackChildChange(fs(Re.name,Re.node)),rt.updateImmediateChild(Re.name,Re.node)):rt}return y.isEmpty()?h:se&&R(W,B)>=0?(null!=T&&(T.trackChildChange(ht(W.name,W.node)),T.trackChildChange(fs(g,y))),L.updateImmediateChild(g,y).updateImmediateChild(W.name,pt.EMPTY_NODE)):h},d}(),jp=function(){function d(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=un}return d.prototype.hasStart=function(){return this.startSet_},d.prototype.hasStartAfter=function(){return this.startAfterSet_},d.prototype.hasEndBefore=function(){return this.endBeforeSet_},d.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},d.prototype.getIndexStartValue=function(){return(0,M.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},d.prototype.getIndexStartName=function(){return(0,M.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ue},d.prototype.hasEnd=function(){return this.endSet_},d.prototype.getIndexEndValue=function(){return(0,M.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},d.prototype.getIndexEndName=function(){return(0,M.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Te},d.prototype.hasLimit=function(){return this.limitSet_},d.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},d.prototype.getLimit=function(){return(0,M.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},d.prototype.getIndex=function(){return this.index_},d.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},d.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===un},d.prototype.copy=function(){var h=new d;return h.limitSet_=this.limitSet_,h.limit_=this.limit_,h.startSet_=this.startSet_,h.indexStartValue_=this.indexStartValue_,h.startNameSet_=this.startNameSet_,h.indexStartName_=this.indexStartName_,h.endSet_=this.endSet_,h.indexEndValue_=this.indexEndValue_,h.endNameSet_=this.endNameSet_,h.indexEndName_=this.indexEndName_,h.index_=this.index_,h.viewFrom_=this.viewFrom_,h},d}();function Tl(d,h,g){var y=d.copy();return y.startSet_=!0,void 0===h&&(h=null),y.indexStartValue_=h,null!=g?(y.startNameSet_=!0,y.indexStartName_=g):(y.startNameSet_=!1,y.indexStartName_=""),y}function ac(d,h,g){var y=d.copy();return y.endSet_=!0,void 0===h&&(h=null),y.indexEndValue_=h,void 0!==g?(y.endNameSet_=!0,y.indexEndName_=g):(y.endNameSet_=!1,y.indexEndName_=""),y}function Nr(d,h){var g=d.copy();return g.index_=h,g}function uc(d){var g,h={};return d.isDefault()||(d.index_===un?g="$priority":d.index_===rc?g="$value":d.index_===ro?g="$key":((0,M.hu)(d.index_ instanceof Xa,"Unrecognized index type!"),g=d.index_.toString()),h.orderBy=(0,M.Pz)(g),d.startSet_&&(h.startAt=(0,M.Pz)(d.indexStartValue_),d.startNameSet_&&(h.startAt+=","+(0,M.Pz)(d.indexStartName_))),d.endSet_&&(h.endAt=(0,M.Pz)(d.indexEndValue_),d.endNameSet_&&(h.endAt+=","+(0,M.Pz)(d.indexEndName_))),d.limitSet_&&(d.isViewFromLeft()?h.limitToFirst=d.limit_:h.limitToLast=d.limit_)),h}function cc(d){var h={};if(d.startSet_&&(h.sp=d.indexStartValue_,d.startNameSet_&&(h.sn=d.indexStartName_)),d.endSet_&&(h.ep=d.indexEndValue_,d.endNameSet_&&(h.en=d.indexEndName_)),d.limitSet_){h.l=d.limit_;var g=d.viewFrom_;""===g&&(g=d.isViewFromLeft()?"l":"r"),h.vf=g}return d.index_!==un&&(h.i=d.index_.toString()),h}var ow=function(d){function h(g,y,E,T){var R=d.call(this)||this;return R.repoInfo_=g,R.onDataUpdate_=y,R.authTokenProvider_=E,R.appCheckTokenProvider_=T,R.log_=$t("p:rest:"),R.listens_={},R}return(0,X.ZT)(h,d),h.prototype.reportStats=function(g){throw new Error("Method not implemented.")},h.getListenId_=function(g,y){return void 0!==y?"tag$"+y:((0,M.hu)(g._queryParams.isDefault(),"should have a tag if it's not a default query."),g._path.toString())},h.prototype.listen=function(g,y,E,T){var R=this,O=g._path.toString();this.log_("Listen called for "+O+" "+g._queryIdentifier);var L=h.getListenId_(g,E),B={};this.listens_[L]=B;var W=uc(g._queryParams);this.restRequest_(O+".json",W,function(se,be){var Re=be;404===se&&(Re=null,se=null),null===se&&R.onDataUpdate_(O,Re,!1,E),(0,M.DV)(R.listens_,L)===B&&T(se?401===se?"permission_denied":"rest_error:"+se:"ok",null)})},h.prototype.unlisten=function(g,y){var E=h.getListenId_(g,y);delete this.listens_[E]},h.prototype.get=function(g){var y=this,E=uc(g._queryParams),T=g._path.toString(),R=new M.BH;return this.restRequest_(T+".json",E,function(O,L){var B=L;404===O&&(B=null,O=null),null===O?(y.onDataUpdate_(T,B,!1,null),R.resolve(B)):R.reject(new Error(B))}),R.promise},h.prototype.refreshAuthToken=function(g){},h.prototype.restRequest_=function(g,y,E){var T=this;return void 0===y&&(y={}),y.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(R){var O=(0,X.CR)(R,2),L=O[0],B=O[1];L&&L.accessToken&&(y.auth=L.accessToken),B&&B.token&&(y.ac=B.token);var W=(T.repoInfo_.secure?"https://":"http://")+T.repoInfo_.host+g+"?ns="+T.repoInfo_.namespace+(0,M.xO)(y);T.log_("Sending REST request for "+W);var se=new XMLHttpRequest;se.onreadystatechange=function(){if(E&&4===se.readyState){T.log_("REST Response for "+W+" received. status:",se.status,"response:",se.responseText);var be=null;if(se.status>=200&&se.status<300){try{be=(0,M.cI)(se.responseText)}catch(Re){tn("Failed to parse JSON response for "+W+": "+se.responseText)}E(null,be)}else 401!==se.status&&404!==se.status&&tn("Got unsuccessful REST response for "+W+" Status: "+se.status),E(se.status);E=null}},se.open("GET",W,!0),se.send()})},h}(vl),Uv=function(){function d(){this.rootNode_=pt.EMPTY_NODE}return d.prototype.getNode=function(h){return this.rootNode_.getChild(h)},d.prototype.updateSnapshot=function(h,g){this.rootNode_=this.rootNode_.updateChild(h,g)},d}();function ra(){return{value:null,children:new Map}}function No(d,h,g){if(Ft(h))d.value=g,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(h,g);else{var y=Nt(h);d.children.has(y)||d.children.set(y,ra()),No(d.children.get(y),h=Zt(h),g)}}function Ln(d,h){if(Ft(h))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;var g=d.value;return d.value=null,g.forEachChild(un,function(T,R){No(d,new xt(T),R)}),Ln(d,h)}if(d.children.size>0){var y=Nt(h);return h=Zt(h),d.children.has(y)&&Ln(d.children.get(y),h)&&d.children.delete(y),0===d.children.size}return!0}function ni(d,h,g){null!==d.value?g(h,d.value):function(d,h){d.children.forEach(function(g,y){h(y,g)})}(d,function(y,E){ni(E,new xt(h.toString()+"/"+y),g)})}var Po=function(){function d(h){this.collection_=h,this.last_=null}return d.prototype.get=function(){var h=this.collection_.get(),g=(0,X.pi)({},h);return this.last_&&at(this.last_,function(y,E){g[y]=g[y]-E}),this.last_=h,g},d}(),Hp=function(){function d(h,g){this.server_=g,this.statsToReport_={},this.statsListener_=new Po(h);var y=1e4+2e4*Math.random();Ao(this.reportStats_.bind(this),Math.floor(y))}return d.prototype.reportStats_=function(){var h=this,g=this.statsListener_.get(),y={},E=!1;at(g,function(T,R){R>0&&(0,M.r3)(h.statsToReport_,T)&&(y[T]=R,E=!0)}),E&&this.server_.reportStats(y),Ao(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},d}(),Br=(()=>(function(d){d[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Br||(Br={})),Br))();function ia(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}var Gp=function(){function d(h,g,y){this.path=h,this.affectedTree=g,this.revert=y,this.type=Br.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return d.prototype.operationForChild=function(h){if(Ft(this.path)){if(null!=this.affectedTree.value)return(0,M.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var g=this.affectedTree.subtree(new xt(h));return new d(et(),g,this.revert)}return(0,M.hu)(Nt(this.path)===h,"operationForChild called for unrelated child."),new d(Zt(this.path),this.affectedTree,this.revert)},d}(),Vh=function(){function d(h,g){this.source=h,this.path=g,this.type=Br.LISTEN_COMPLETE}return d.prototype.operationForChild=function(h){return Ft(this.path)?new d(this.source,et()):new d(this.source,Zt(this.path))},d}(),oa=function(){function d(h,g,y){this.source=h,this.path=g,this.snap=y,this.type=Br.OVERWRITE}return d.prototype.operationForChild=function(h){return Ft(this.path)?new d(this.source,et(),this.snap.getImmediateChild(h)):new d(this.source,Zt(this.path),this.snap)},d}(),Al=function(){function d(h,g,y){this.source=h,this.path=g,this.children=y,this.type=Br.MERGE}return d.prototype.operationForChild=function(h){if(Ft(this.path)){var g=this.children.subtree(new xt(h));return g.isEmpty()?null:g.value?new oa(this.source,et(),g.value):new d(this.source,et(),g)}return(0,M.hu)(Nt(this.path)===h,"Can't get a merge for a child not on the path of the operation"),new d(this.source,Zt(this.path),this.children)},d.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},d}(),hs=function(){function d(h,g,y){this.node_=h,this.fullyInitialized_=g,this.filtered_=y}return d.prototype.isFullyInitialized=function(){return this.fullyInitialized_},d.prototype.isFiltered=function(){return this.filtered_},d.prototype.isCompleteForPath=function(h){if(Ft(h))return this.isFullyInitialized()&&!this.filtered_;var g=Nt(h);return this.isCompleteForChild(g)},d.prototype.isCompleteForChild=function(h){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(h)},d.prototype.getNode=function(){return this.node_},d}(),$p=function(h){this.query_=h,this.index_=this.query_._queryParams.getIndex()};function Mo(d,h,g,y,E,T){var R=y.filter(function(O){return O.type===g});R.sort(function(O,L){return function(d,h,g){if(null==h.childName||null==g.childName)throw(0,M.g5)("Should only compare child_ events.");var y=new Bt(h.childName,h.snapshotNode),E=new Bt(g.childName,g.snapshotNode);return d.index_.compare(y,E)}(d,O,L)}),R.forEach(function(O){var L=function(d,h,g){return"value"===h.type||"child_removed"===h.type||(h.prevName=g.getPredecessorChildName(h.childName,h.snapshotNode,d.index_)),h}(d,O,T);E.forEach(function(B){B.respondsTo(O.type)&&h.push(B.createEvent(L,d.query_))})})}function Wn(d,h){return{eventCache:d,serverCache:h}}function Li(d,h,g,y){return Wn(new hs(h,g,y),d.serverCache)}function An(d,h,g,y){return Wn(d.eventCache,new hs(h,g,y))}function Uh(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function eu(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}var jh,ri=function(){function d(h,g){void 0===g&&(jh||(jh=new io(st)),g=jh),this.value=h,this.children=g}return d.fromObject=function(h){var g=new d(null);return at(h,function(y,E){g=g.set(new xt(y),E)}),g},d.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},d.prototype.findRootMostMatchingPathAndValue=function(h,g){if(null!=this.value&&g(this.value))return{path:et(),value:this.value};if(Ft(h))return null;var y=Nt(h),E=this.children.get(y);if(null!==E){var T=E.findRootMostMatchingPathAndValue(Zt(h),g);return null!=T?{path:Ot(new xt(y),T.path),value:T.value}:null}return null},d.prototype.findRootMostValueAndPath=function(h){return this.findRootMostMatchingPathAndValue(h,function(){return!0})},d.prototype.subtree=function(h){if(Ft(h))return this;var g=Nt(h),y=this.children.get(g);return null!==y?y.subtree(Zt(h)):new d(null)},d.prototype.set=function(h,g){if(Ft(h))return new d(g,this.children);var y=Nt(h),T=(this.children.get(y)||new d(null)).set(Zt(h),g),R=this.children.insert(y,T);return new d(this.value,R)},d.prototype.remove=function(h){if(Ft(h))return this.children.isEmpty()?new d(null):new d(null,this.children);var g=Nt(h),y=this.children.get(g);if(y){var E=y.remove(Zt(h)),T=void 0;return T=E.isEmpty()?this.children.remove(g):this.children.insert(g,E),null===this.value&&T.isEmpty()?new d(null):new d(this.value,T)}return this},d.prototype.get=function(h){if(Ft(h))return this.value;var g=Nt(h),y=this.children.get(g);return y?y.get(Zt(h)):null},d.prototype.setTree=function(h,g){if(Ft(h))return g;var R,y=Nt(h),T=(this.children.get(y)||new d(null)).setTree(Zt(h),g);return R=T.isEmpty()?this.children.remove(y):this.children.insert(y,T),new d(this.value,R)},d.prototype.fold=function(h){return this.fold_(et(),h)},d.prototype.fold_=function(h,g){var y={};return this.children.inorderTraversal(function(E,T){y[E]=T.fold_(Ot(h,E),g)}),g(h,this.value,y)},d.prototype.findOnPath=function(h,g){return this.findOnPath_(h,et(),g)},d.prototype.findOnPath_=function(h,g,y){var E=!!this.value&&y(g,this.value);if(E)return E;if(Ft(h))return null;var T=Nt(h),R=this.children.get(T);return R?R.findOnPath_(Zt(h),Ot(g,T),y):null},d.prototype.foreachOnPath=function(h,g){return this.foreachOnPath_(h,et(),g)},d.prototype.foreachOnPath_=function(h,g,y){if(Ft(h))return this;this.value&&y(g,this.value);var E=Nt(h),T=this.children.get(E);return T?T.foreachOnPath_(Zt(h),Ot(g,E),y):new d(null)},d.prototype.foreach=function(h){this.foreach_(et(),h)},d.prototype.foreach_=function(h,g){this.children.inorderTraversal(function(y,E){E.foreach_(Ot(h,y),g)}),this.value&&g(h,this.value)},d.prototype.foreachChild=function(h){this.children.inorderTraversal(function(g,y){y.value&&h(g,y.value)})},d}(),Vi=function(){function d(h){this.writeTree_=h}return d.empty=function(){return new d(new ri(null))},d}();function ds(d,h,g){if(Ft(h))return new Vi(new ri(g));var y=d.writeTree_.findRootMostValueAndPath(h);if(null!=y){var E=y.path,T=y.value,R=En(E,h);return T=T.updateChild(R,g),new Vi(d.writeTree_.set(E,T))}var O=new ri(g),L=d.writeTree_.setTree(h,O);return new Vi(L)}function ps(d,h,g){var y=d;return at(g,function(E,T){y=ds(y,Ot(h,E),T)}),y}function fc(d,h){if(Ft(h))return Vi.empty();var g=d.writeTree_.setTree(h,new ri(null));return new Vi(g)}function hc(d,h){return null!=gs(d,h)}function gs(d,h){var g=d.writeTree_.findRootMostValueAndPath(h);return null!=g?d.writeTree_.get(g.path).getChild(En(g.path,h)):null}function Wp(d){var h=[],g=d.writeTree_.value;return null!=g?g.isLeafNode()||g.forEachChild(un,function(y,E){h.push(new Bt(y,E))}):d.writeTree_.children.inorderTraversal(function(y,E){null!=E.value&&h.push(new Bt(y,E.value))}),h}function Pr(d,h){if(Ft(h))return d;var g=gs(d,h);return new Vi(null!=g?new ri(g):d.writeTree_.subtree(h))}function tu(d){return d.writeTree_.isEmpty()}function dc(d,h){return qp(et(),d.writeTree_,h)}function qp(d,h,g){if(null!=h.value)return g.updateChild(d,h.value);var y=null;return h.children.inorderTraversal(function(E,T){".priority"===E?((0,M.hu)(null!==T.value,"Priority writes must always be leaf nodes"),y=T.value):g=qp(Ot(d,E),T,g)}),!g.getChild(d).isEmpty()&&null!==y&&(g=g.updateChild(Ot(d,".priority"),y)),g}function ms(d,h){return $h(h,d)}function bI(d,h){if(d.snap)return xr(d.path,h);for(var g in d.children)if(d.children.hasOwnProperty(g)&&xr(Ot(d.path,g),h))return!0;return!1}function zp(d){return d.visible}function Ui(d,h,g){for(var y=Vi.empty(),E=0;E<d.length;++E){var T=d[E];if(h(T)){var R=T.path,O=void 0;if(T.snap)xr(g,R)?y=ds(y,O=En(g,R),T.snap):xr(R,g)&&(O=En(R,g),y=ds(y,et(),T.snap.getChild(O)));else{if(!T.children)throw(0,M.g5)("WriteRecord should have .snap or .children");if(xr(g,R))y=ps(y,O=En(g,R),T.children);else if(xr(R,g))if(Ft(O=En(R,g)))y=ps(y,et(),T.children);else{var L=(0,M.DV)(T.children,Nt(O));if(L){var B=L.getChild(Zt(O));y=ds(y,et(),B)}}}}}return y}function pc(d,h,g,y,E){if(y||E){var L=Pr(d.visibleWrites,h);return!E&&tu(L)?g:E||null!=g||hc(L,et())?dc(Ui(d.allWrites,function(be){return(be.visible||E)&&(!y||!~y.indexOf(be.writeId))&&(xr(be.path,h)||xr(h,be.path))},h),g||pt.EMPTY_NODE):null}var T=gs(d.visibleWrites,h);if(null!=T)return T;var R=Pr(d.visibleWrites,h);return tu(R)?g:null!=g||hc(R,et())?dc(R,g||pt.EMPTY_NODE):null}function aa(d,h,g,y){return pc(d.writeTree,d.treePath,h,g,y)}function zv(d,h){return function(d,h,g){var y=pt.EMPTY_NODE,E=gs(d.visibleWrites,h);if(E)return E.isLeafNode()||E.forEachChild(un,function(O,L){y=y.updateImmediateChild(O,L)}),y;if(g){var T=Pr(d.visibleWrites,h);return g.forEachChild(un,function(O,L){var B=dc(Pr(T,new xt(O)),L);y=y.updateImmediateChild(O,B)}),Wp(T).forEach(function(O){y=y.updateImmediateChild(O.name,O.node)}),y}return Wp(Pr(d.visibleWrites,h)).forEach(function(O){y=y.updateImmediateChild(O.name,O.node)}),y}(d.writeTree,d.treePath,h)}function Gh(d,h,g,y){return function(d,h,g,y,E){(0,M.hu)(y||E,"Either existingEventSnap or existingServerSnap must exist");var T=Ot(h,g);if(hc(d.visibleWrites,T))return null;var R=Pr(d.visibleWrites,T);return tu(R)?E.getChild(g):dc(R,E.getChild(g))}(d.writeTree,d.treePath,h,g,y)}function xl(d,h){return function(d,h){return gs(d.visibleWrites,h)}(d.writeTree,Ot(d.treePath,h))}function Yp(d,h,g){return function(d,h,g,y){var E=Ot(h,g),T=gs(d.visibleWrites,E);return null!=T?T:y.isCompleteForChild(g)?dc(Pr(d.visibleWrites,E),y.getNode().getImmediateChild(g)):null}(d.writeTree,d.treePath,h,g)}function nu(d,h){return $h(Ot(d.treePath,h),d.writeTree)}function $h(d,h){return{treePath:d,writeTree:h}}var yn=function(){function d(){this.changeMap=new Map}return d.prototype.trackChildChange=function(h){var g=h.type,y=h.childName;(0,M.hu)("child_added"===g||"child_changed"===g||"child_removed"===g,"Only child changes supported for tracking"),(0,M.hu)(".priority"!==y,"Only non-priority child changes can be tracked.");var E=this.changeMap.get(y);if(E){var T=E.type;if("child_added"===g&&"child_removed"===T)this.changeMap.set(y,oc(y,h.snapshotNode,E.snapshotNode));else if("child_removed"===g&&"child_added"===T)this.changeMap.delete(y);else if("child_removed"===g&&"child_changed"===T)this.changeMap.set(y,ht(y,E.oldSnap));else if("child_changed"===g&&"child_added"===T)this.changeMap.set(y,fs(y,h.snapshotNode));else{if("child_changed"!==g||"child_changed"!==T)throw(0,M.g5)("Illegal combination of changes: "+h+" occurred after "+E);this.changeMap.set(y,oc(y,h.snapshotNode,E.oldSnap))}}else this.changeMap.set(y,h)},d.prototype.getChanges=function(){return Array.from(this.changeMap.values())},d}(),Ei=new(function(){function d(){}return d.prototype.getCompleteChild=function(h){return null},d.prototype.getChildAfterChild=function(h,g,y){return null},d}()),Nl=function(){function d(h,g,y){void 0===y&&(y=null),this.writes_=h,this.viewCache_=g,this.optCompleteServerCache_=y}return d.prototype.getCompleteChild=function(h){var g=this.viewCache_.eventCache;if(g.isCompleteForChild(h))return g.getNode().getImmediateChild(h);var y=null!=this.optCompleteServerCache_?new hs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yp(this.writes_,h,y)},d.prototype.getChildAfterChild=function(h,g,y){var E=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:eu(this.viewCache_),T=function(d,h,g,y,E,T){return function(d,h,g,y,E,T,R){var O,L=Pr(d.visibleWrites,h),B=gs(L,et());if(null!=B)O=B;else{if(null==g)return[];O=dc(L,g)}if((O=O.withIndex(R)).isEmpty()||O.isLeafNode())return[];for(var W=[],se=R.getCompare(),be=T?O.getReverseIteratorFrom(y,R):O.getIteratorFrom(y,R),Re=be.getNext();Re&&W.length<E;)0!==se(Re,y)&&W.push(Re),Re=be.getNext();return W}(d.writeTree,d.treePath,h,g,y,E,T)}(this.writes_,E,g,1,y,h);return 0===T.length?null:T[0]},d}();function qh(d,h,g,y,E,T){var R=h.eventCache;if(null!=xl(y,g))return h;var O=void 0,L=void 0;if(Ft(g))if((0,M.hu)(h.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),h.serverCache.isFiltered()){var B=eu(h),se=zv(y,B instanceof pt?B:pt.EMPTY_NODE);O=d.filter.updateFullNode(h.eventCache.getNode(),se,T)}else{var be=aa(y,eu(h));O=d.filter.updateFullNode(h.eventCache.getNode(),be,T)}else{var Re=Nt(g);if(".priority"===Re){(0,M.hu)(1===as(g),"Can't have a priority with additional path components");var Ve=R.getNode(),dt=Gh(y,g,Ve,L=h.serverCache.getNode());O=null!=dt?d.filter.updatePriority(Ve,dt):R.getNode()}else{var rt=Zt(g),_t=void 0;if(R.isCompleteForChild(Re)){L=h.serverCache.getNode();var xn=Gh(y,g,R.getNode(),L);_t=null!=xn?R.getNode().getImmediateChild(Re).updateChild(rt,xn):R.getNode().getImmediateChild(Re)}else _t=Yp(y,Re,h.serverCache);O=null!=_t?d.filter.updateChild(R.getNode(),Re,_t,rt,E,T):R.getNode()}}return Li(h,O,R.isFullyInitialized()||Ft(g),d.filter.filtersNodes())}function Pl(d,h,g,y,E,T,R,O){var B,L=h.serverCache,W=R?d.filter:d.filter.getIndexedFilter();if(Ft(g))B=W.updateFullNode(L.getNode(),y,null);else if(W.filtersNodes()&&!L.isFiltered()){var se=L.getNode().updateChild(g,y);B=W.updateFullNode(L.getNode(),se,null)}else{var be=Nt(g);if(!L.isCompleteForPath(g)&&as(g)>1)return h;var Re=Zt(g),dt=L.getNode().getImmediateChild(be).updateChild(Re,y);B=".priority"===be?W.updatePriority(L.getNode(),dt):W.updateChild(L.getNode(),be,dt,Re,Ei,null)}var rt=An(h,B,L.isFullyInitialized()||Ft(g),W.filtersNodes());return qh(d,rt,g,E,new Nl(E,rt,T),O)}function ru(d,h,g,y,E,T,R){var L,B,O=h.eventCache,W=new Nl(E,h,T);if(Ft(g))B=d.filter.updateFullNode(h.eventCache.getNode(),y,R),L=Li(h,B,!0,d.filter.filtersNodes());else{var se=Nt(g);if(".priority"===se)B=d.filter.updatePriority(h.eventCache.getNode(),y),L=Li(h,B,O.isFullyInitialized(),O.isFiltered());else{var be=Zt(g),Re=O.getNode().getImmediateChild(se),Ve=void 0;if(Ft(be))Ve=y;else{var dt=W.getCompleteChild(se);Ve=null!=dt?".priority"===Xu(be)&&dt.getChild(to(be)).isEmpty()?dt:dt.updateChild(be,y):pt.EMPTY_NODE}L=Re.equals(Ve)?h:Li(h,d.filter.updateChild(O.getNode(),se,Ve,be,W,R),O.isFullyInitialized(),d.filter.filtersNodes())}}return L}function rr(d,h){return d.eventCache.isCompleteForChild(h)}function zh(d,h,g){return g.foreach(function(y,E){h=h.updateChild(y,E)}),h}function mc(d,h,g,y,E,T,R,O){if(h.serverCache.getNode().isEmpty()&&!h.serverCache.isFullyInitialized())return h;var B,L=h;B=Ft(g)?y:new ri(null).setTree(g,y);var W=h.serverCache.getNode();return B.children.inorderTraversal(function(se,be){if(W.hasChild(se)){var Ve=zh(0,h.serverCache.getNode().getImmediateChild(se),be);L=Pl(d,L,new xt(se),Ve,E,T,R,O)}}),B.children.inorderTraversal(function(se,be){var Re=!h.serverCache.isCompleteForChild(se)&&void 0===be.value;if(!W.hasChild(se)&&!Re){var dt=zh(0,h.serverCache.getNode().getImmediateChild(se),be);L=Pl(d,L,new xt(se),dt,E,T,R,O)}}),L}var Xp=function(){function d(h,g){this.query_=h,this.eventRegistrations_=[];var y=this.query_._queryParams,E=new Lh(y.getIndex()),T=function(d){return d.loadsAllData()?new Lh(d.getIndex()):d.hasLimit()?new Vv(d):new Up(d)}(y);this.processor_=function(d){return{filter:d}}(T);var R=g.serverCache,O=g.eventCache,L=E.updateFullNode(pt.EMPTY_NODE,R.getNode(),null),B=T.updateFullNode(pt.EMPTY_NODE,O.getNode(),null),W=new hs(L,R.isFullyInitialized(),E.filtersNodes()),se=new hs(B,O.isFullyInitialized(),T.filtersNodes());this.viewCache_=Wn(se,W),this.eventGenerator_=new $p(this.query_)}return Object.defineProperty(d.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),d}();function ou(d,h){var g=eu(d.viewCache_);return g&&(d.query._queryParams.loadsAllData()||!Ft(h)&&!g.getImmediateChild(Nt(h)).isEmpty())?g.getChild(h):null}function ko(d){return 0===d.eventRegistrations_.length}function Lo(d,h,g){var y=[];if(g){(0,M.hu)(null==h,"A cancel should cancel all event registrations.");var E=d.query._path;d.eventRegistrations_.forEach(function(L){var B=L.createCancelEvent(g,E);B&&y.push(B)})}if(h){for(var T=[],R=0;R<d.eventRegistrations_.length;++R){var O=d.eventRegistrations_[R];if(O.matches(h)){if(h.hasAnyCallback()){T=T.concat(d.eventRegistrations_.slice(R+1));break}}else T.push(O)}d.eventRegistrations_=T}else d.eventRegistrations_=[];return y}function Qv(d,h,g,y){h.type===Br.MERGE&&null!==h.source.queryId&&((0,M.hu)(eu(d.viewCache_),"We should always have a full cache before handling merges"),(0,M.hu)(Uh(d.viewCache_),"Missing event cache, even though we have a server cache"));var E=d.viewCache_,T=function(d,h,g,y,E){var R,O,T=new yn;if(g.type===Br.OVERWRITE){var L=g;L.source.fromUser?R=ru(d,h,L.path,L.snap,y,E,T):((0,M.hu)(L.source.fromServer,"Unknown source."),O=L.source.tagged||h.serverCache.isFiltered()&&!Ft(L.path),R=Pl(d,h,L.path,L.snap,y,E,O,T))}else if(g.type===Br.MERGE){var B=g;B.source.fromUser?R=function(d,h,g,y,E,T,R){var O=h;return y.foreach(function(L,B){var W=Ot(g,L);rr(h,Nt(W))&&(O=ru(d,O,W,B,E,T,R))}),y.foreach(function(L,B){var W=Ot(g,L);rr(h,Nt(W))||(O=ru(d,O,W,B,E,T,R))}),O}(d,h,B.path,B.children,y,E,T):((0,M.hu)(B.source.fromServer,"Unknown source."),O=B.source.tagged||h.serverCache.isFiltered(),R=mc(d,h,B.path,B.children,y,E,O,T))}else if(g.type===Br.ACK_USER_WRITE){var W=g;R=W.revert?function(d,h,g,y,E,T){var R;if(null!=xl(y,g))return h;var O=new Nl(y,h,E),L=h.eventCache.getNode(),B=void 0;if(Ft(g)||".priority"===Nt(g)){var W=void 0;if(h.serverCache.isFullyInitialized())W=aa(y,eu(h));else{var se=h.serverCache.getNode();(0,M.hu)(se instanceof pt,"serverChildren would be complete if leaf node"),W=zv(y,se)}B=d.filter.updateFullNode(L,W=W,T)}else{var be=Nt(g),Re=Yp(y,be,h.serverCache);null==Re&&h.serverCache.isCompleteForChild(be)&&(Re=L.getImmediateChild(be)),(B=null!=Re?d.filter.updateChild(L,be,Re,Zt(g),O,T):h.eventCache.getNode().hasChild(be)?d.filter.updateChild(L,be,pt.EMPTY_NODE,Zt(g),O,T):L).isEmpty()&&h.serverCache.isFullyInitialized()&&(R=aa(y,eu(h))).isLeafNode()&&(B=d.filter.updateFullNode(B,R,T))}return R=h.serverCache.isFullyInitialized()||null!=xl(y,et()),Li(h,B,R,d.filter.filtersNodes())}(d,h,W.path,y,E,T):function(d,h,g,y,E,T,R){if(null!=xl(E,g))return h;var O=h.serverCache.isFiltered(),L=h.serverCache;if(null!=y.value){if(Ft(g)&&L.isFullyInitialized()||L.isCompleteForPath(g))return Pl(d,h,g,L.getNode().getChild(g),E,T,O,R);if(Ft(g)){var B=new ri(null);return L.getNode().forEachChild(ro,function(se,be){B=B.set(new xt(se),be)}),mc(d,h,g,B,E,T,O,R)}return h}var W=new ri(null);return y.foreach(function(se,be){var Re=Ot(g,se);L.isCompleteForPath(Re)&&(W=W.set(se,L.getNode().getChild(Re)))}),mc(d,h,g,W,E,T,O,R)}(d,h,W.path,W.affectedTree,y,E,T)}else{if(g.type!==Br.LISTEN_COMPLETE)throw(0,M.g5)("Unknown operation type: "+g.type);R=function(d,h,g,y,E){var T=h.serverCache;return qh(d,An(h,T.getNode(),T.isFullyInitialized()||Ft(g),T.isFiltered()),g,y,Ei,E)}(d,h,g.path,y,T)}var se=T.getChanges();return function(d,h,g){var y=h.eventCache;if(y.isFullyInitialized()){var E=y.getNode().isLeafNode()||y.getNode().isEmpty(),T=Uh(d);(g.length>0||!d.eventCache.isFullyInitialized()||E&&!y.getNode().equals(T)||!y.getNode().getPriority().equals(T.getPriority()))&&g.push(kh(Uh(h)))}}(h,R,se),{viewCache:R,changes:se}}(d.processor_,E,h,g,y);return function(d,h){(0,M.hu)(h.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,M.hu)(h.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,T.viewCache),(0,M.hu)(T.viewCache.serverCache.isFullyInitialized()||!E.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=T.viewCache,ua(d,T.changes,T.viewCache.eventCache.getNode(),null)}function ua(d,h,g,y){return function(d,h,g,y){var E=[],T=[];return h.forEach(function(R){"child_changed"===R.type&&d.index_.indexedValueChanged(R.oldSnap,R.snapshotNode)&&T.push(function(d,h){return{type:"child_moved",snapshotNode:h,childName:d}}(R.childName,R.snapshotNode))}),Mo(d,E,"child_removed",h,y,g),Mo(d,E,"child_added",h,y,g),Mo(d,E,"child_moved",T,y,g),Mo(d,E,"child_changed",h,y,g),Mo(d,E,"value",h,y,g),E}(d.eventGenerator_,h,g,y?[y]:d.eventRegistrations_)}var rn,oo,eg=function(){this.views=new Map};function Ml(d,h,g,y){var E,T,R=h.source.queryId;if(null!==R){var O=d.views.get(R);return(0,M.hu)(null!=O,"SyncTree gave us an op for an invalid query."),Qv(O,h,g,y)}var L=[];try{for(var B=(0,X.XA)(d.views.values()),W=B.next();!W.done;W=B.next())L=L.concat(Qv(O=W.value,h,g,y))}catch(se){E={error:se}}finally{try{W&&!W.done&&(T=B.return)&&T.call(B)}finally{if(E)throw E.error}}return L}function Yv(d,h,g,y,E){var R=d.views.get(h._queryIdentifier);if(!R){var O=aa(g,E?y:null),L=!1;O?L=!0:y instanceof pt?(O=zv(g,y),L=!1):(O=pt.EMPTY_NODE,L=!1);var B=Wn(new hs(O,L,!1),new hs(y,E,!1));return new Xp(h,B)}return R}function ca(d){var h,g,y=[];try{for(var E=(0,X.XA)(d.views.values()),T=E.next();!T.done;T=E.next()){var R=T.value;R.query._queryParams.loadsAllData()||y.push(R)}}catch(O){h={error:O}}finally{try{T&&!T.done&&(g=E.return)&&g.call(E)}finally{if(h)throw h.error}}return y}function la(d,h){var g,y,E=null;try{for(var T=(0,X.XA)(d.views.values()),R=T.next();!R.done;R=T.next())E=E||ou(R.value,h)}catch(L){g={error:L}}finally{try{R&&!R.done&&(y=T.return)&&y.call(T)}finally{if(g)throw g.error}}return E}function Jv(d,h){return h._queryParams.loadsAllData()?vs(d):d.views.get(h._queryIdentifier)}function Vo(d,h){return null!=Jv(d,h)}function fa(d){return null!=vs(d)}function vs(d){var h,g;try{for(var y=(0,X.XA)(d.views.values()),E=y.next();!E.done;E=y.next()){var T=E.value;if(T.query._queryParams.loadsAllData())return T}}catch(R){h={error:R}}finally{try{E&&!E.done&&(g=y.return)&&g.call(y)}finally{if(h)throw h.error}}return null}var Mn=1,vc=function(h){this.listenProvider_=h,this.syncPointTree_=new ri(null),this.pendingWriteTree_={visibleWrites:Vi.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function yc(d,h,g,y,E){return function(d,h,g,y,E){(0,M.hu)(y>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===E&&(E=!0),d.allWrites.push({path:h,snap:g,writeId:y,visible:E}),E&&(d.visibleWrites=ds(d.visibleWrites,h,g)),d.lastWriteId=y}(d.pendingWriteTree_,h,g,y,E),E?Vn(d,new oa({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},h,g)):[]}function pr(d,h,g){void 0===g&&(g=!1);var y=function(d,h){for(var g=0;g<d.allWrites.length;g++){var y=d.allWrites[g];if(y.writeId===h)return y}return null}(d.pendingWriteTree_,h);if(function(d,h){var g=d.allWrites.findIndex(function(B){return B.writeId===h});(0,M.hu)(g>=0,"removeWrite called with nonexistent writeId.");var y=d.allWrites[g];d.allWrites.splice(g,1);for(var E=y.visible,T=!1,R=d.allWrites.length-1;E&&R>=0;){var O=d.allWrites[R];O.visible&&(R>=g&&bI(O,y.path)?E=!1:xr(y.path,O.path)&&(T=!0)),R--}return!!E&&(T?(function(d){d.visibleWrites=Ui(d.allWrites,zp,et()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(y.snap?d.visibleWrites=fc(d.visibleWrites,y.path):at(y.children,function(B){d.visibleWrites=fc(d.visibleWrites,Ot(y.path,B))}),!0))}(d.pendingWriteTree_,h)){var T=new ri(null);return null!=y.snap?T=T.set(et(),!0):at(y.children,function(R){T=T.set(new xt(R),!0)}),Vn(d,new Gp(y.path,T,g))}return[]}function Uo(d,h,g){return Vn(d,new oa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h,g))}function _c(d,h,g,y){var E=h._path,T=d.syncPointTree_.get(E),R=[];if(T&&("default"===h._queryIdentifier||Vo(T,h))){var O=function(d,h,g,y){var E,T,R=h._queryIdentifier,O=[],L=[],B=fa(d);if("default"===R)try{for(var W=(0,X.XA)(d.views.entries()),se=W.next();!se.done;se=W.next()){var Ve,be=(0,X.CR)(se.value,2),Re=be[0];L=L.concat(Lo(Ve=be[1],g,y)),ko(Ve)&&(d.views.delete(Re),Ve.query._queryParams.loadsAllData()||O.push(Ve.query))}}catch(dt){E={error:dt}}finally{try{se&&!se.done&&(T=W.return)&&T.call(W)}finally{if(E)throw E.error}}else(Ve=d.views.get(R))&&(L=L.concat(Lo(Ve,g,y)),ko(Ve)&&(d.views.delete(R),Ve.query._queryParams.loadsAllData()||O.push(Ve.query)));return B&&!fa(d)&&O.push(new((0,M.hu)(rn,"Reference.ts has not been loaded"),rn)(h._repo,h._path)),{removed:O,events:L}}(T,h,g,y);(function(d){return 0===d.views.size})(T)&&(d.syncPointTree_=d.syncPointTree_.remove(E));var L=O.removed;R=O.events;var B=-1!==L.findIndex(function(xn){return xn._queryParams.loadsAllData()}),W=d.syncPointTree_.findOnPath(E,function(xn,Di){return fa(Di)});if(B&&!W){var se=d.syncPointTree_.subtree(E);if(!se.isEmpty())for(var be=function(d){return d.fold(function(h,g,y){if(g&&fa(g))return[vs(g)];var T=[];return g&&(T=ca(g)),at(y,function(R,O){T=T.concat(O)}),T})}(se),Re=0;Re<be.length;++Re){var Ve=be[Re],dt=Ve.query,rt=Jh(d,Ve);d.listenProvider_.startListening(ga(dt),Fl(d,dt),rt.hashFn,rt.onComplete)}}!W&&L.length>0&&!y&&(B?d.listenProvider_.stopListening(ga(h),null):L.forEach(function(xn){var Di=d.queryToTagMap.get(kl(xn));d.listenProvider_.stopListening(ga(xn),Di)})),function(d,h){for(var g=0;g<h.length;++g){var y=h[g];if(!y._queryParams.loadsAllData()){var E=kl(y),T=d.queryToTagMap.get(E);d.queryToTagMap.delete(E),d.tagToQueryMap.delete(T)}}}(d,L)}return R}function ng(d,h,g){var y=h._path,E=null,T=!1;d.syncPointTree_.foreachOnPath(y,function(dt,rt){var _t=En(dt,y);E=E||la(rt,_t),T=T||fa(rt)});var O,R=d.syncPointTree_.get(y);R?(T=T||fa(R),E=E||la(R,et())):(R=new eg,d.syncPointTree_=d.syncPointTree_.set(y,R)),null!=E?O=!0:(O=!1,E=pt.EMPTY_NODE,d.syncPointTree_.subtree(y).foreachChild(function(dt,rt){var _t=la(rt,et());_t&&(E=E.updateImmediateChild(dt,_t))}));var B=Vo(R,h);if(!B&&!h._queryParams.loadsAllData()){var W=kl(h);(0,M.hu)(!d.queryToTagMap.has(W),"View does not exist, but we have a tag");var se=Mn++;d.queryToTagMap.set(W,se),d.tagToQueryMap.set(se,W)}var Re=function(d,h,g,y,E,T){var R=Yv(d,h,y,E,T);return d.views.has(h._queryIdentifier)||d.views.set(h._queryIdentifier,R),function(d,h){d.eventRegistrations_.push(h)}(R,g),function(d,h){var g=d.viewCache_.eventCache,y=[];return g.getNode().isLeafNode()||g.getNode().forEachChild(un,function(T,R){y.push(fs(T,R))}),g.isFullyInitialized()&&y.push(kh(g.getNode())),ua(d,y,g.getNode(),h)}(R,g)}(R,h,g,ms(d.pendingWriteTree_,y),E,O);if(!B&&!T){var Ve=Jv(R,h);Re=Re.concat(function(d,h,g){var y=h._path,E=Fl(d,h),T=Jh(d,g),R=d.listenProvider_.startListening(ga(h),E,T.hashFn,T.onComplete),O=d.syncPointTree_.subtree(y);if(E)(0,M.hu)(!fa(O.value),"If we're adding a query, it shouldn't be shadowed");else for(var L=O.fold(function(se,be,Re){if(!Ft(se)&&be&&fa(be))return[vs(be).query];var Ve=[];return be&&(Ve=Ve.concat(ca(be).map(function(dt){return dt.query}))),at(Re,function(dt,rt){Ve=Ve.concat(rt)}),Ve}),B=0;B<L.length;++B){var W=L[B];d.listenProvider_.stopListening(ga(W),Fl(d,W))}return R}(d,h,Ve))}return Re}function bc(d,h,g){var E=d.pendingWriteTree_,T=d.syncPointTree_.findOnPath(h,function(R,O){var B=la(O,En(R,h));if(B)return B});return pc(E,h,T,g,!0)}function Vn(d,h){return da(h,d.syncPointTree_,null,ms(d.pendingWriteTree_,et()))}function da(d,h,g,y){if(Ft(d.path))return rg(d,h,g,y);var E=h.get(et());null==g&&null!=E&&(g=la(E,et()));var T=[],R=Nt(d.path),O=d.operationForChild(R),L=h.children.get(R);if(L&&O){var B=g?g.getImmediateChild(R):null,W=nu(y,R);T=T.concat(da(O,L,B,W))}return E&&(T=T.concat(Ml(E,d,y,g))),T}function rg(d,h,g,y){var E=h.get(et());null==g&&null!=E&&(g=la(E,et()));var T=[];return h.children.inorderTraversal(function(R,O){var L=g?g.getImmediateChild(R):null,B=nu(y,R),W=d.operationForChild(R);W&&(T=T.concat(rg(W,O,L,B)))}),E&&(T=T.concat(Ml(E,d,y,g))),T}function Jh(d,h){var g=h.query,y=Fl(d,g);return{hashFn:function(){return(function(d){return d.viewCache_.serverCache.getNode()}(h)||pt.EMPTY_NODE).hash()},onComplete:function(E){if("ok"===E)return y?function(d,h,g){var y=ji(d,g);if(y){var E=wc(y),T=E.path,R=E.queryId,O=En(T,h);return pa(d,T,new Vh(ia(R),O))}return[]}(d,g._path,y):function(d,h){return Vn(d,new Vh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h))}(d,g._path);var T=function(d,h){var g="Unknown Error";"too_big"===d?g="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?g="Client doesn't have permission to access the desired data.":"unavailable"===d&&(g="The service is unavailable");var y=new Error(d+" at "+h._path.toString()+": "+g);return y.code=d.toUpperCase(),y}(E,g);return _c(d,g,null,T)}}}function Fl(d,h){var g=kl(h);return d.queryToTagMap.get(g)}function kl(d){return d._path.toString()+"$"+d._queryIdentifier}function ji(d,h){return d.tagToQueryMap.get(h)}function wc(d){var h=d.indexOf("$");return(0,M.hu)(-1!==h&&h<d.length-1,"Bad queryKey."),{queryId:d.substr(h+1),path:new xt(d.substr(0,h))}}function pa(d,h,g){var y=d.syncPointTree_.get(h);return(0,M.hu)(y,"Missing sync point for query tag that we're tracking"),Ml(y,g,ms(d.pendingWriteTree_,h),null)}function ga(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new((0,M.hu)(oo,"Reference.ts has not been loaded"),oo)(d._repo,d._path):d}var Zh=function(){function d(h){this.node_=h}return d.prototype.getImmediateChild=function(h){return new d(this.node_.getImmediateChild(h))},d.prototype.node=function(){return this.node_},d}(),au=function(){function d(h,g){this.syncTree_=h,this.path_=g}return d.prototype.getImmediateChild=function(h){var g=Ot(this.path_,h);return new d(this.syncTree_,g)},d.prototype.node=function(){return bc(this.syncTree_,this.path_)},d}(),Xh=function(d,h,g){return d&&"object"==typeof d?((0,M.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?Xv(d[".sv"],h,g):"object"==typeof d[".sv"]?ed(d[".sv"],h):void(0,M.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},Xv=function(d,h,g){switch(d){case"timestamp":return g.timestamp;default:(0,M.hu)(!1,"Unexpected server value: "+d)}},ed=function(d,h,g){d.hasOwnProperty("increment")||(0,M.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));var y=d.increment;"number"!=typeof y&&(0,M.hu)(!1,"Unexpected increment value: "+y);var E=h.node();if((0,M.hu)(null!=E,"Expected ChildrenNode.EMPTY_NODE for nulls"),!E.isLeafNode())return y;var R=E.getValue();return"number"!=typeof R?y:R+y},ey=function(d,h,g,y){return _s(h,new au(g,d),y)},Cc=function(d,h,g){return _s(d,new Zh(h),g)};function _s(d,h,g){var T,y=d.getPriority().val(),E=Xh(y,h.getImmediateChild(".priority"),g);if(d.isLeafNode()){var R=d,O=Xh(R.getValue(),h,g);return O!==R.getValue()||E!==R.getPriority().val()?new ta(O,Cn(E)):d}var L=d;return T=L,E!==L.getPriority().val()&&(T=T.updatePriority(new ta(E))),L.forEachChild(un,function(B,W){var se=_s(W,h.getImmediateChild(B),g);se!==W&&(T=T.updateImmediateChild(B,se))}),T}var yt=function(h,g,y){void 0===h&&(h=""),void 0===g&&(g=null),void 0===y&&(y={children:{},childCount:0}),this.name=h,this.parent=g,this.node=y};function Vl(d,h){for(var g=h instanceof xt?h:new xt(h),y=d,E=Nt(g);null!==E;){var T=(0,M.DV)(y.node.children,E)||{children:{},childCount:0};y=new yt(E,y,T),E=Nt(g=Zt(g))}return y}function Qt(d){return d.node.value}function Dc(d,h){d.node.value=h,nd(d)}function td(d){return d.node.childCount>0}function bs(d,h){at(d.node.children,function(g,y){h(new yt(g,d,y))})}function og(d,h,g,y){g&&!y&&h(d),bs(d,function(E){og(E,h,!0,y)}),g&&y&&h(d)}function va(d){return new xt(null===d.parent?d.name:va(d.parent)+"/"+d.name)}function nd(d){null!==d.parent&&function(d,h,g){var y=function(d){return void 0===Qt(d)&&!td(d)}(g),E=(0,M.r3)(d.node.children,h);y&&E?(delete d.node.children[h],d.node.childCount--,nd(d)):!y&&!E&&(d.node.children[h]=g.node,d.node.childCount++,nd(d))}(d.parent,d.name,d)}var ws=/[\[\].#$\/\u0000-\u001F\u007F]/,Un=/[\[\].#$\u0000-\u001F\u007F]/,Kn=10485760,Ul=function(d){return"string"==typeof d&&0!==d.length&&!ws.test(d)},rd=function(d){return"string"==typeof d&&0!==d.length&&!Un.test(d)},jo=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!fe(d)||d&&"object"==typeof d&&(0,M.r3)(d,".sv")},Hi=function(d,h,g,y){y&&void 0===h||uu((0,M.gK)(d,"value"),h,g)},uu=function(d,h,g){var y=g instanceof xt?new yl(g,d):g;if(void 0===h)throw new Error(d+"contains undefined "+ea(y));if("function"==typeof h)throw new Error(d+"contains a function "+ea(y)+" with contents = "+h.toString());if(fe(h))throw new Error(d+"contains "+h.toString()+" "+ea(y));if("string"==typeof h&&h.length>Kn/3&&(0,M.ug)(h)>Kn)throw new Error(d+"contains a string greater than "+Kn+" utf8 bytes "+ea(y)+" ('"+h.substring(0,50)+"...')");if(h&&"object"==typeof h){var E=!1,T=!1;if(at(h,function(R,O){if(".value"===R)E=!0;else if(".priority"!==R&&".sv"!==R&&(T=!0,!Ul(R)))throw new Error(d+" contains an invalid key ("+R+") "+ea(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(d,h){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(h),d.byteLength_+=(0,M.ug)(h),xv(d)})(y,R),uu(d,O,y),function(d){var h=d.parts_.pop();d.byteLength_-=(0,M.ug)(h),d.parts_.length>0&&(d.byteLength_-=1)}(y)}),E&&T)throw new Error(d+' contains ".value" child '+ea(y)+" in addition to actual children.")}},Es=function(d,h,g,y){if(!y||void 0!==h){var E=(0,M.gK)(d,"values");if(!h||"object"!=typeof h||Array.isArray(h))throw new Error(E+" must be an object containing the children to replace.");var T=[];at(h,function(R,O){var L=new xt(R);if(uu(E,O,Ot(g,L)),".priority"===Xu(L)&&!jo(O))throw new Error(E+"contains an invalid value for '"+L.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");T.push(L)}),function(d,h){var g,y;for(g=0;g<h.length;g++)for(var E=eo(y=h[g]),T=0;T<E.length;T++)if((".priority"!==E[T]||T!==E.length-1)&&!Ul(E[T]))throw new Error(d+"contains an invalid key ("+E[T]+") in path "+y.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');h.sort(_i);var R=null;for(g=0;g<h.length;g++){if(y=h[g],null!==R&&xr(R,y))throw new Error(d+"contains a path "+R.toString()+" that is ancestor of another path "+y.toString());R=y}}(E,T)}},Cs=function(d,h,g){if(!g||void 0!==h){if(fe(h))throw new Error((0,M.gK)(d,"priority")+"is "+h.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jo(h))throw new Error((0,M.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Bl=function(d,h,g){if(!g||void 0!==h)switch(h){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,M.gK)(d,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},so=function(d,h,g,y){if(!(y&&void 0===g||Ul(g)))throw new Error((0,M.gK)(d,h)+'was an invalid key = "'+g+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Rt=function(d,h,g,y){if(!(y&&void 0===g||rd(g)))throw new Error((0,M.gK)(d,h)+'was an invalid path = "'+g+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Gi=function(d,h){if(".info"===Nt(h))throw new Error(d+" failed = Can't modify data under /.info/")},Ds=function(d,h){var g=h.path.toString();if("string"!=typeof h.repoInfo.host||0===h.repoInfo.host.length||!Ul(h.repoInfo.namespace)&&"localhost"!==h.repoInfo.host.split(":")[0]||0!==g.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),rd(d)}(g))throw new Error((0,M.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ny=function(d,h,g,y){if((!y||void 0!==g)&&"boolean"!=typeof g)throw new Error((0,M.gK)(d,h)+"must be a boolean.")},id=function(){this.eventLists_=[],this.recursionDepth_=0};function Is(d,h){for(var g=null,y=0;y<h.length;y++){var E=h[y],T=E.getPath();null!==g&&!ec(T,g.path)&&(d.eventLists_.push(g),g=null),null===g&&(g={events:[],path:T}),g.events.push(E)}g&&d.eventLists_.push(g)}function Tc(d,h,g){Is(d,g),cu(d,function(y){return ec(y,h)})}function jn(d,h,g){Is(d,g),cu(d,function(y){return xr(y,h)||xr(h,y)})}function cu(d,h){d.recursionDepth_++;for(var g=!0,y=0;y<d.eventLists_.length;y++){var E=d.eventLists_[y];E&&(h(E.path)?(sg(d.eventLists_[y]),d.eventLists_[y]=null):g=!1)}g&&(d.eventLists_=[]),d.recursionDepth_--}function sg(d){for(var h=0;h<d.events.length;h++){var g=d.events[h];if(null!==g){d.events[h]=null;var y=g.getEventRunner();Pe&&Ue("event: "+g.toString()),Pi(y)}}}var Hl="repo_interrupt",Sc=function(){function d(h,g,y,E){this.repoInfo_=h,this.forceRestClient_=g,this.authTokenProvider_=y,this.appCheckProvider_=E,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new id,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ra(),this.transactionQueueTree_=new yt,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return d.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},d}();function $l(d){var g=d.infoData_.getNode(new xt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+g}function _a(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:$l(d)})}function Ts(d,h,g,y,E){d.dataUpdateCount++;var T=new xt(h);g=d.interceptServerDataCallback_?d.interceptServerDataCallback_(h,g):g;var R=[];if(E)if(y){var O=(0,M.UI)(g,function(be){return Cn(be)});R=function(d,h,g,y){var E=ji(d,y);if(E){var T=wc(E),R=T.path,O=T.queryId,L=En(R,h),B=ri.fromObject(g);return pa(d,R,new Al(ia(O),L,B))}return[]}(d.serverSyncTree_,T,O,E)}else{var L=Cn(g);R=function(d,h,g,y){var E=ji(d,y);if(null!=E){var T=wc(E),R=T.path,O=T.queryId,L=En(R,h);return pa(d,R,new oa(ia(O),L,g))}return[]}(d.serverSyncTree_,T,L,E)}else if(y){var B=(0,M.UI)(g,function(be){return Cn(be)});R=function(d,h,g){var y=ri.fromObject(g);return Vn(d,new Al({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h,y))}(d.serverSyncTree_,T,B)}else{var W=Cn(g);R=Uo(d.serverSyncTree_,T,W)}var se=T;R.length>0&&(se=ba(d,T)),jn(d.eventQueue_,se,R)}function ag(d,h){od(d,"connected",h),!1===h&&function(d){Go(d,"onDisconnectEvents");var h=_a(d),g=ra();ni(d.onDisconnect_,et(),function(E,T){var R=ey(E,T,d.serverSyncTree_,h);No(g,E,R)});var y=[];ni(g,et(),function(E,T){y=y.concat(Uo(d.serverSyncTree_,E,T));var R=As(d,E);ba(d,R)}),d.onDisconnect_=ra(),jn(d.eventQueue_,et(),y)}(d)}function od(d,h,g){var y=new xt("/.info/"+h),E=Cn(g);d.infoData_.updateSnapshot(y,E);var T=Uo(d.infoSyncTree_,y,E);jn(d.eventQueue_,y,T)}function ql(d){return d.nextWriteId_++}function Ss(d,h,g,y,E){Go(d,"set",{path:h.toString(),value:g,priority:y});var T=_a(d),R=Cn(g,y),O=bc(d.serverSyncTree_,h),L=Cc(R,O,T),B=ql(d),W=yc(d.serverSyncTree_,h,L,B,!0);Is(d.eventQueue_,W),d.server_.put(h.toString(),R.val(!0),function(be,Re){var Ve="ok"===be;Ve||tn("set at "+h+" failed: "+be);var dt=pr(d.serverSyncTree_,B,!Ve);jn(d.eventQueue_,h,dt),si(0,E,be,Re)});var se=As(d,h);ba(d,se),jn(d.eventQueue_,se,[])}function sd(d,h,g){d.server_.onDisconnectCancel(h.toString(),function(y,E){"ok"===y&&Ln(d.onDisconnect_,h),si(0,g,y,E)})}function zl(d,h,g,y){var E=Cn(g);d.server_.onDisconnectPut(h.toString(),E.val(!0),function(T,R){"ok"===T&&No(d.onDisconnect_,h,E),si(0,y,T,R)})}function Kl(d,h,g){var y;y=".info"===Nt(h._path)?_c(d.infoSyncTree_,h,g):_c(d.serverSyncTree_,h,g),Tc(d.eventQueue_,h._path,y)}function lg(d){d.persistentConnection_&&d.persistentConnection_.interrupt(Hl)}function Go(d){for(var h=[],g=1;g<arguments.length;g++)h[g-1]=arguments[g];var y="";d.persistentConnection_&&(y=d.persistentConnection_.id+":"),Ue.apply(void 0,(0,X.ev)([y],(0,X.CR)(h)))}function si(d,h,g,y){h&&Pi(function(){if("ok"===g)h(null);else{var E=(g||"error").toUpperCase(),T=E;y&&(T+=": "+y);var R=new Error(T);R.code=E,h(R)}})}function ai(d,h,g){return bc(d.serverSyncTree_,h,g)||pt.EMPTY_NODE}function ao(d,h){if(void 0===h&&(h=d.transactionQueueTree_),h||fu(d,h),Qt(h)){var g=iy(d,h);(0,M.hu)(g.length>0,"Sending zero length transaction queue"),g.every(function(E){return 0===E.status})&&function(d,h,g){for(var y=g.map(function(be){return be.currentWriteId}),E=ai(d,h,y),T=E,R=E.hash(),O=0;O<g.length;O++){var L=g[O];(0,M.hu)(0===L.status,"tryToSendTransactionQueue_: items in queue should all be run."),L.status=1,L.retryCount++;var B=En(h,L.path);T=T.updateChild(B,L.currentOutputSnapshotRaw)}var W=T.val(!0),se=h;d.server_.put(se.toString(),W,function(be){Go(d,"transaction put response",{path:se.toString(),status:be});var Re=[];if("ok"===be){for(var Ve=[],dt=function(_t){g[_t].status=2,Re=Re.concat(pr(d.serverSyncTree_,g[_t].currentWriteId)),g[_t].onComplete&&Ve.push(function(){return g[_t].onComplete(null,!0,g[_t].currentOutputSnapshotResolved)}),g[_t].unwatcher()},rt=0;rt<g.length;rt++)dt(rt);for(fu(d,Vl(d.transactionQueueTree_,h)),ao(d,d.transactionQueueTree_),jn(d.eventQueue_,h,Re),rt=0;rt<Ve.length;rt++)Pi(Ve[rt])}else{if("datastale"===be)for(rt=0;rt<g.length;rt++)g[rt].status=3===g[rt].status?4:0;else for(tn("transaction at "+se.toString()+" failed: "+be),rt=0;rt<g.length;rt++)g[rt].status=4,g[rt].abortReason=be;ba(d,h)}},R)}(d,va(h),g)}else td(h)&&bs(h,function(E){ao(d,E)})}function ba(d,h){var g=hg(d,h),y=va(g);return function(d,h,g){if(0!==h.length){for(var y=[],E=[],R=h.filter(function(B){return 0===B.status}).map(function(B){return B.currentWriteId}),O=function(B){var Re,W=h[B],se=En(g,W.path),be=!1;if((0,M.hu)(null!==se,"rerunTransactionsUnderNode_: relativePath should not be null."),4===W.status)be=!0,Re=W.abortReason,E=E.concat(pr(d.serverSyncTree_,W.currentWriteId,!0));else if(0===W.status)if(W.retryCount>=25)be=!0,Re="maxretry",E=E.concat(pr(d.serverSyncTree_,W.currentWriteId,!0));else{var Ve=ai(d,W.path,R);W.currentInputSnapshot=Ve;var dt=h[B].update(Ve.val());if(void 0!==dt){uu("transaction failed: Data returned ",dt,W.path);var rt=Cn(dt);"object"==typeof dt&&null!=dt&&(0,M.r3)(dt,".priority")||(rt=rt.updatePriority(Ve.getPriority()));var xn=W.currentWriteId,Di=_a(d),_u=Cc(rt,Ve,Di);W.currentOutputSnapshotRaw=rt,W.currentOutputSnapshotResolved=_u,W.currentWriteId=ql(d),R.splice(R.indexOf(xn),1),E=(E=E.concat(yc(d.serverSyncTree_,W.path,_u,W.currentWriteId,W.applyLocally))).concat(pr(d.serverSyncTree_,xn,!0))}else be=!0,Re="nodata",E=E.concat(pr(d.serverSyncTree_,W.currentWriteId,!0))}jn(d.eventQueue_,g,E),E=[],be&&(h[B].status=2,setTimeout(h[B].unwatcher,Math.floor(0)),h[B].onComplete&&y.push("nodata"===Re?function(){return h[B].onComplete(null,!1,h[B].currentInputSnapshot)}:function(){return h[B].onComplete(new Error(Re),!1,null)}))},L=0;L<h.length;L++)O(L);for(fu(d,d.transactionQueueTree_),L=0;L<y.length;L++)Pi(y[L]);ao(d,d.transactionQueueTree_)}}(d,iy(d,g),y),y}function hg(d,h){var g,y=d.transactionQueueTree_;for(g=Nt(h);null!==g&&void 0===Qt(y);)y=Vl(y,g),g=Nt(h=Zt(h));return y}function iy(d,h){var g=[];return oy(d,h,g),g.sort(function(y,E){return y.order-E.order}),g}function oy(d,h,g){var y=Qt(h);if(y)for(var E=0;E<y.length;E++)g.push(y[E]);bs(h,function(T){oy(d,T,g)})}function fu(d,h){var g=Qt(h);if(g){for(var y=0,E=0;E<g.length;E++)2!==g[E].status&&(g[y]=g[E],y++);g.length=y,Dc(h,g.length>0?g:void 0)}bs(h,function(T){fu(d,T)})}function As(d,h){var g=va(hg(d,h)),y=Vl(d.transactionQueueTree_,h);return function(d,h,g){for(var y=d.parent;null!==y;){if(h(y))return!0;y=y.parent}}(y,function(E){$o(d,E)}),$o(d,y),og(y,function(E){$o(d,E)}),g}function $o(d,h){var g=Qt(h);if(g){for(var y=[],E=[],T=-1,R=0;R<g.length;R++)3===g[R].status||(1===g[R].status?((0,M.hu)(T===R-1,"All SENT items should be at beginning of queue."),T=R,g[R].status=3,g[R].abortReason="set"):((0,M.hu)(0===g[R].status,"Unexpected transaction status in abort"),g[R].unwatcher(),E=E.concat(pr(d.serverSyncTree_,g[R].currentWriteId,!0)),g[R].onComplete&&y.push(g[R].onComplete.bind(null,new Error("set"),!1,null))));for(-1===T?Dc(h,void 0):g.length=T+1,jn(d.eventQueue_,va(h),E),R=0;R<y.length;R++)Pi(y[R])}}var Nc=function(d,h){var g=ay(d),y=g.namespace;return"firebase.com"===g.domain&&Ht(g.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==g.domain&&Ht("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),g.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Tn(g.host,g.secure,y,h,"ws"===g.scheme||"wss"===g.scheme,"",y!==g.subdomain),path:new xt(g.pathString)}},ay=function(d){var h="",g="",y="",E="",T="",R=!0,O="https",L=443;if("string"==typeof d){var B=d.indexOf("//");B>=0&&(O=d.substring(0,B-1),d=d.substring(B+2));var W=d.indexOf("/");-1===W&&(W=d.length);var se=d.indexOf("?");-1===se&&(se=d.length),h=d.substring(0,Math.min(W,se)),W<se&&(E=function(d){for(var h="",g=d.split("/"),y=0;y<g.length;y++)if(g[y].length>0){var E=g[y];try{E=decodeURIComponent(E.replace(/\+/g," "))}catch(T){}h+="/"+E}return h}(d.substring(W,se)));var be=function(d){var h,g,y={};"?"===d.charAt(0)&&(d=d.substring(1));try{for(var E=(0,X.XA)(d.split("&")),T=E.next();!T.done;T=E.next()){var R=T.value;if(0!==R.length){var O=R.split("=");2===O.length?y[decodeURIComponent(O[0])]=decodeURIComponent(O[1]):tn("Invalid query segment '"+R+"' in query '"+d+"'")}}}catch(L){h={error:L}}finally{try{T&&!T.done&&(g=E.return)&&g.call(E)}finally{if(h)throw h.error}}return y}(d.substring(Math.min(d.length,se)));(B=h.indexOf(":"))>=0?(R="https"===O||"wss"===O,L=parseInt(h.substring(B+1),10)):B=h.length;var Re=h.slice(0,B);if("localhost"===Re.toLowerCase())g="localhost";else if(Re.split(".").length<=2)g=Re;else{var Ve=h.indexOf(".");y=h.substring(0,Ve).toLowerCase(),g=h.substring(Ve+1),T=y}"ns"in be&&(T=be.ns)}return{host:h,port:L,domain:g,subdomain:y,secure:R,scheme:O,pathString:E,namespace:T}},Jl=function(){function d(h,g,y,E){this.eventType=h,this.eventRegistration=g,this.snapshot=y,this.prevName=E}return d.prototype.getPath=function(){var h=this.snapshot.ref;return"value"===this.eventType?h._path:h.parent._path},d.prototype.getEventType=function(){return this.eventType},d.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},d.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,M.Pz)(this.snapshot.exportVal())},d}(),pg=function(){function d(h,g,y){this.eventRegistration=h,this.error=g,this.path=y}return d.prototype.getPath=function(){return this.path},d.prototype.getEventType=function(){return"cancel"},d.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},d.prototype.toString=function(){return this.path.toString()+":cancel"},d}(),gg=function(){function d(h,g){this.snapshotCallback=h,this.cancelCallback=g}return d.prototype.onValue=function(h,g){this.snapshotCallback.call(null,h,g)},d.prototype.onCancel=function(h){return(0,M.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,h)},Object.defineProperty(d.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),d.prototype.matches=function(h){return this.snapshotCallback===h.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===h.snapshotCallback.userCallback&&this.snapshotCallback.context===h.snapshotCallback.context},d}(),mg=function(){function d(h,g){this._repo=h,this._path=g}return d.prototype.cancel=function(){var h=new M.BH;return sd(this._repo,this._path,h.wrapCallback(function(){})),h.promise},d.prototype.remove=function(){Gi("OnDisconnect.remove",this._path);var h=new M.BH;return zl(this._repo,this._path,null,h.wrapCallback(function(){})),h.promise},d.prototype.set=function(h){Gi("OnDisconnect.set",this._path),Hi("OnDisconnect.set",h,this._path,!1);var g=new M.BH;return zl(this._repo,this._path,h,g.wrapCallback(function(){})),g.promise},d.prototype.setWithPriority=function(h,g){Gi("OnDisconnect.setWithPriority",this._path),Hi("OnDisconnect.setWithPriority",h,this._path,!1),Cs("OnDisconnect.setWithPriority",g,!1);var y=new M.BH;return function(d,h,g,y,E){var T=Cn(g,y);d.server_.onDisconnectPut(h.toString(),T.val(!0),function(R,O){"ok"===R&&No(d.onDisconnect_,h,T),si(0,E,R,O)})}(this._repo,this._path,h,g,y.wrapCallback(function(){})),y.promise},d.prototype.update=function(h){Gi("OnDisconnect.update",this._path),Es("OnDisconnect.update",h,this._path,!1);var g=new M.BH;return function(d,h,g,y){if((0,M.xb)(g))return Ue("onDisconnect().update() called with empty data.  Don't do anything."),void si(0,y,"ok",void 0);d.server_.onDisconnectMerge(h.toString(),g,function(E,T){"ok"===E&&at(g,function(R,O){var L=Cn(O);No(d.onDisconnect_,Ot(h,R),L)}),si(0,y,E,T)})}(this._repo,this._path,h,g.wrapCallback(function(){})),g.promise},d}(),br=function(){function d(h,g,y,E){this._repo=h,this._path=g,this._queryParams=y,this._orderByCalled=E}return Object.defineProperty(d.prototype,"key",{get:function(){return Ft(this._path)?null:Xu(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"ref",{get:function(){return new Yt(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"_queryIdentifier",{get:function(){var h=cc(this._queryParams),g=gn(h);return"{}"===g?"default":g},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"_queryObject",{get:function(){return cc(this._queryParams)},enumerable:!1,configurable:!0}),d.prototype.isEqual=function(h){if(!((h=(0,M.m9)(h))instanceof d))return!1;var g=this._repo===h._repo,y=ec(this._path,h._path);return g&&y&&this._queryIdentifier===h._queryIdentifier},d.prototype.toJSON=function(){return this.toString()},d.prototype.toString=function(){return this._repo.toString()+function(d){for(var h="",g=d.pieceNum_;g<d.pieces_.length;g++)""!==d.pieces_[g]&&(h+="/"+encodeURIComponent(String(d.pieces_[g])));return h||"/"}(this._path)},d}();function Rs(d,h){if(!0===d._orderByCalled)throw new Error(h+": You can't combine multiple orderBy calls.")}function uo(d){var h=null,g=null;if(d.hasStart()&&(h=d.getIndexStartValue()),d.hasEnd()&&(g=d.getIndexEndValue()),d.getIndex()===ro){var y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",E="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==ue)throw new Error(y);if("string"!=typeof h)throw new Error(E)}if(d.hasEnd()){if(d.getIndexEndName()!==Te)throw new Error(y);if("string"!=typeof g)throw new Error(E)}}else if(d.getIndex()===un){if(null!=h&&!jo(h)||null!=g&&!jo(g))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,M.hu)(d.getIndex()instanceof Xa||d.getIndex()===rc,"unknown index type."),null!=h&&"object"==typeof h||null!=g&&"object"==typeof g)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function hu(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Yt=function(d){function h(g,y){return d.call(this,g,y,new jp,!1)||this}return(0,X.ZT)(h,d),Object.defineProperty(h.prototype,"parent",{get:function(){var g=to(this._path);return null===g?null:new h(this._repo,g)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"root",{get:function(){for(var g=this;null!==g.parent;)g=g.parent;return g},enumerable:!1,configurable:!0}),h}(br),Pc=function(){function d(h,g,y){this._node=h,this.ref=g,this._index=y}return Object.defineProperty(d.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),d.prototype.child=function(h){var g=new xt(h),y=xs(this.ref,h);return new d(this._node.getChild(g),y,un)},d.prototype.exists=function(){return!this._node.isEmpty()},d.prototype.exportVal=function(){return this._node.val(!0)},d.prototype.forEach=function(h){var g=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(E,T){return h(new d(T,xs(g.ref,E),un))})},d.prototype.hasChild=function(h){var g=new xt(h);return!this._node.getChild(g).isEmpty()},d.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},d.prototype.toJSON=function(){return this.exportVal()},d.prototype.val=function(){return this._node.val()},d}();function ud(d,h){return(d=(0,M.m9)(d))._checkNotDeleted("ref"),void 0!==h?xs(d._root,h):d._root}function Zl(d,h){(d=(0,M.m9)(d))._checkNotDeleted("refFromURL");var g=Nc(h,d._repo.repoInfo_.nodeAdmin);Ds("refFromURL",g);var y=g.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&y.host!==d._repo.repoInfo_.host&&Ht("refFromURL: Host name does not match the current database: (found "+y.host+" but expected "+d._repo.repoInfo_.host+")"),ud(d,g.path.toString())}function xs(d,h){return null===Nt((d=(0,M.m9)(d))._path)?((g=h)&&(g=g.replace(/^\/*\.info(\/|$)/,"/")),Rt("child","path",g,!1)):Rt("child","path",h,!1),new Yt(d._repo,Ot(d._path,h));var g}function vg(d,h){d=(0,M.m9)(d),Gi("push",d._path),Hi("push",h,d._path,!0);var R,g=$l(d._repo),y=Vp(g),E=xs(d,y),T=xs(d,y);return R=null!=h?Mc(T,h).then(function(){return T}):Promise.resolve(T),E.then=R.then.bind(R),E.catch=R.then.bind(R,void 0),E}function uy(d){return Gi("remove",d._path),Mc(d,null)}function Mc(d,h){d=(0,M.m9)(d),Gi("set",d._path),Hi("set",h,d._path,!1);var g=new M.BH;return Ss(d._repo,d._path,h,null,g.wrapCallback(function(){})),g.promise}function Ns(d,h){d=(0,M.m9)(d),Gi("setPriority",d._path),Cs("setPriority",h,!1);var g=new M.BH;return Ss(d._repo,Ot(d._path,".priority"),h,null,g.wrapCallback(function(){})),g.promise}function cy(d,h,g){if(Gi("setWithPriority",d._path),Hi("setWithPriority",h,d._path,!1),Cs("setWithPriority",g,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";var y=new M.BH;return Ss(d._repo,d._path,h,g,y.wrapCallback(function(){})),y.promise}function du(d,h){Es("update",h,d._path,!1);var g=new M.BH;return function(d,h,g,y){Go(d,"update",{path:h.toString(),value:g});var E=!0,T=_a(d),R={};if(at(g,function(B,W){E=!1,R[B]=ey(Ot(h,B),Cn(W),d.serverSyncTree_,T)}),E)Ue("update() called with empty data.  Don't do anything."),si(0,y,"ok",void 0);else{var O=ql(d),L=function(d,h,g,y){!function(d,h,g,y){(0,M.hu)(y>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:h,children:g,writeId:y,visible:!0}),d.visibleWrites=ps(d.visibleWrites,h,g),d.lastWriteId=y}(d.pendingWriteTree_,h,g,y);var E=ri.fromObject(g);return Vn(d,new Al({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},h,E))}(d.serverSyncTree_,h,R,O);Is(d.eventQueue_,L),d.server_.merge(h.toString(),g,function(B,W){var se="ok"===B;se||tn("update at "+h+" failed: "+B);var be=pr(d.serverSyncTree_,O,!se),Re=be.length>0?ba(d,h):h;jn(d.eventQueue_,Re,be),si(0,y,B,W)}),at(g,function(B){var W=As(d,Ot(h,B));ba(d,W)}),jn(d.eventQueue_,h,[])}}(d._repo,d._path,h,g.wrapCallback(function(){})),g.promise}function mw(d){return function(d,h){var g=function(d,h){var g=h._path,y=null;d.syncPointTree_.foreachOnPath(g,function(B,W){var se=En(B,g);y=y||la(W,se)});var E=d.syncPointTree_.get(g);E?y=y||la(E,et()):(E=new eg,d.syncPointTree_=d.syncPointTree_.set(g,E));var T=null!=y,R=T?new hs(y,!0,!1):null;return function(d){return Uh(d.viewCache_)}(Yv(E,h,ms(d.pendingWriteTree_,h._path),T?R.getNode():pt.EMPTY_NODE,T))}(d.serverSyncTree_,h);return null!=g?Promise.resolve(g):d.server_.get(h).then(function(y){var E=Cn(y).withIndex(h._queryParams.getIndex()),T=Uo(d.serverSyncTree_,h._path,E);return Tc(d.eventQueue_,h._path,T),Promise.resolve(E)},function(y){return Go(d,"get for query "+(0,M.Pz)(h)+" failed: "+y),Promise.reject(new Error(y))})}((d=(0,M.m9)(d))._repo,d).then(function(h){return new Pc(h,new Yt(d._repo,d._path),d._queryParams.getIndex())})}var pu=function(){function d(h){this.callbackContext=h}return d.prototype.respondsTo=function(h){return"value"===h},d.prototype.createEvent=function(h,g){var y=g._queryParams.getIndex();return new Jl("value",this,new Pc(h.snapshotNode,new Yt(g._repo,g._path),y))},d.prototype.getEventRunner=function(h){var g=this;return"cancel"===h.getEventType()?function(){return g.callbackContext.onCancel(h.error)}:function(){return g.callbackContext.onValue(h.snapshot,null)}},d.prototype.createCancelEvent=function(h,g){return this.callbackContext.hasCancelCallback?new pg(this,h,g):null},d.prototype.matches=function(h){return h instanceof d&&(!h.callbackContext||!this.callbackContext||h.callbackContext.matches(this.callbackContext))},d.prototype.hasAnyCallback=function(){return null!==this.callbackContext},d}(),wr=function(){function d(h,g){this.eventType=h,this.callbackContext=g}return d.prototype.respondsTo=function(h){var g="children_added"===h?"child_added":h;return this.eventType===("children_removed"===g?"child_removed":g)},d.prototype.createCancelEvent=function(h,g){return this.callbackContext.hasCancelCallback?new pg(this,h,g):null},d.prototype.createEvent=function(h,g){(0,M.hu)(null!=h.childName,"Child events should have a childName.");var y=xs(new Yt(g._repo,g._path),h.childName),E=g._queryParams.getIndex();return new Jl(h.type,this,new Pc(h.snapshotNode,y,E),h.prevName)},d.prototype.getEventRunner=function(h){var g=this;return"cancel"===h.getEventType()?function(){return g.callbackContext.onCancel(h.error)}:function(){return g.callbackContext.onValue(h.snapshot,h.prevName)}},d.prototype.matches=function(h){return h instanceof d&&this.eventType===h.eventType&&(!this.callbackContext||!h.callbackContext||this.callbackContext.matches(h.callbackContext))},d.prototype.hasAnyCallback=function(){return!!this.callbackContext},d}();function wa(d,h,g,y,E){var T;if("object"==typeof y&&(T=void 0,E=y),"function"==typeof y&&(T=y),E&&E.onlyOnce){var R=g,O=function(W,se){Kl(d._repo,d,B),R(W,se)};O.userCallback=g.userCallback,O.context=g.context,g=O}var L=new gg(g,T||void 0),B="value"===h?new pu(L):new wr(h,L);return function(d,h,g){var y;y=".info"===Nt(h._path)?ng(d.infoSyncTree_,h,g):ng(d.serverSyncTree_,h,g),Tc(d.eventQueue_,h._path,y)}(d._repo,d,B),function(){return Kl(d._repo,d,B)}}function Ps(d,h,g,y){return wa(d,"value",h,g,y)}function Ea(d,h,g,y){return wa(d,"child_added",h,g,y)}function ir(d,h,g,y){return wa(d,"child_changed",h,g,y)}function Ca(d,h,g,y){return wa(d,"child_moved",h,g,y)}function Xl(d,h,g,y){return wa(d,"child_removed",h,g,y)}function yg(d,h,g){var y=null,E=g?new gg(g):null;"value"===h?y=new pu(E):h&&(y=new wr(h,E)),Kl(d._repo,d,y)}var ui=function(){},Gr=function(d){function h(g,y){var E=d.call(this)||this;return E._value=g,E._key=y,E}return(0,X.ZT)(h,d),h.prototype._apply=function(g){Hi("endAt",this._value,g._path,!0);var y=ac(g._queryParams,this._value,this._key);if(hu(y),uo(y),g._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new br(g._repo,g._path,y,g._orderByCalled)},h}(ui);function _g(d,h){return so("endAt","key",h,!0),new Gr(d,h)}var cd=function(d){function h(g,y){var E=d.call(this)||this;return E._value=g,E._key=y,E}return(0,X.ZT)(h,d),h.prototype._apply=function(g){Hi("endBefore",this._value,g._path,!1);var y=function(d,h,g){var E;return d.index_===ro?("string"==typeof h&&(h=ls(h)),E=ac(d,h,g)):E=ac(d,h,null==g?ue:ls(g)),E.endBeforeSet_=!0,E}(g._queryParams,this._value,this._key);if(hu(y),uo(y),g._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new br(g._repo,g._path,y,g._orderByCalled)},h}(ui);function ef(d,h){return so("endBefore","key",h,!0),new cd(d,h)}var gu=function(d){function h(g,y){var E=d.call(this)||this;return E._value=g,E._key=y,E}return(0,X.ZT)(h,d),h.prototype._apply=function(g){Hi("startAt",this._value,g._path,!0);var y=Tl(g._queryParams,this._value,this._key);if(hu(y),uo(y),g._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new br(g._repo,g._path,y,g._orderByCalled)},h}(ui);function ly(d,h){return void 0===d&&(d=null),so("startAt","key",h,!0),new gu(d,h)}var fy=function(d){function h(g,y){var E=d.call(this)||this;return E._value=g,E._key=y,E}return(0,X.ZT)(h,d),h.prototype._apply=function(g){Hi("startAfter",this._value,g._path,!1);var y=function(d,h,g){var y;return d.index_===ro?("string"==typeof h&&(h=ic(h)),y=Tl(d,h,g)):y=Tl(d,h,null==g?Te:ic(g)),y.startAfterSet_=!0,y}(g._queryParams,this._value,this._key);if(hu(y),uo(y),g._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new br(g._repo,g._path,y,g._orderByCalled)},h}(ui);function hy(d,h){return so("startAfter","key",h,!0),new fy(d,h)}var bg=function(d){function h(g){var y=d.call(this)||this;return y._limit=g,y}return(0,X.ZT)(h,d),h.prototype._apply=function(g){if(g._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new br(g._repo,g._path,function(d,h){var g=d.copy();return g.limitSet_=!0,g.limit_=h,g.viewFrom_="l",g}(g._queryParams,this._limit),g._orderByCalled)},h}(ui);function mu(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bg(d)}var ld=function(d){function h(g){var y=d.call(this)||this;return y._limit=g,y}return(0,X.ZT)(h,d),h.prototype._apply=function(g){if(g._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new br(g._repo,g._path,function(d,h){var g=d.copy();return g.limitSet_=!0,g.limit_=h,g.viewFrom_="r",g}(g._queryParams,this._limit),g._orderByCalled)},h}(ui);function wg(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ld(d)}var tf=function(d){function h(g){var y=d.call(this)||this;return y._path=g,y}return(0,X.ZT)(h,d),h.prototype._apply=function(g){Rs(g,"orderByChild");var y=new xt(this._path);if(Ft(y))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var E=new Xa(y),T=Nr(g._queryParams,E);return uo(T),new br(g._repo,g._path,T,!0)},h}(ui);function fd(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Rt("orderByChild","path",d,!1),new tf(d)}var Da=function(d){function h(){return null!==d&&d.apply(this,arguments)||this}return(0,X.ZT)(h,d),h.prototype._apply=function(g){Rs(g,"orderByKey");var y=Nr(g._queryParams,ro);return uo(y),new br(g._repo,g._path,y,!0)},h}(ui);function Eg(){return new Da}var dy=function(d){function h(){return null!==d&&d.apply(this,arguments)||this}return(0,X.ZT)(h,d),h.prototype._apply=function(g){Rs(g,"orderByPriority");var y=Nr(g._queryParams,un);return uo(y),new br(g._repo,g._path,y,!0)},h}(ui);function vu(){return new dy}var py=function(d){function h(){return null!==d&&d.apply(this,arguments)||this}return(0,X.ZT)(h,d),h.prototype._apply=function(g){Rs(g,"orderByValue");var y=Nr(g._queryParams,rc);return uo(y),new br(g._repo,g._path,y,!0)},h}(ui);function gy(){return new py}var my=function(d){function h(g,y){var E=d.call(this)||this;return E._value=g,E._key=y,E}return(0,X.ZT)(h,d),h.prototype._apply=function(g){if(Hi("equalTo",this._value,g._path,!1),g._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(g._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gr(this._value,this._key)._apply(new gu(this._value,this._key)._apply(g))},h}(ui);function hd(d,h){return so("equalTo","key",h,!0),new my(d,h)}function $i(d){for(var h,g,y=[],E=1;E<arguments.length;E++)y[E-1]=arguments[E];var T=(0,M.m9)(d);try{for(var R=(0,X.XA)(y),O=R.next();!O.done;O=R.next()){var L=O.value;T=L._apply(T)}}catch(B){h={error:B}}finally{try{O&&!O.done&&(g=R.return)&&g.call(R)}finally{if(h)throw h.error}}return T}(function(d){(0,M.hu)(!rn,"__referenceConstructor has already been defined"),rn=d})(Yt),function(d){(0,M.hu)(!oo,"__referenceConstructor has already been defined"),oo=d}(Yt);var gr={},dd=!1;function Fc(d,h,g,y,E){var T=y||d.options.databaseURL;void 0===T&&(d.options.projectId||Ht("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ue("Using default host for project ",d.options.projectId),T=d.options.projectId+"-default-rtdb.firebaseio.com");var L,R=Nc(T,E),O=R.repoInfo,B=void 0;"undefined"!=typeof process&&(B=process.env.FIREBASE_DATABASE_EMULATOR_HOST),B?(L=!0,O=(R=Nc(T="http://"+B+"?ns="+O.namespace,E)).repoInfo):L=!R.repoInfo.secure;var W=E&&L?new Mt(Mt.OWNER):new jt(d.name,d.options,h);Ds("Invalid Firebase Database URL",R),Ft(R.path)||Ht("Database URL must point to the root of a Firebase Database (not including a child path).");var se=function(d,h,g,y){var E=gr[h.name];E||(gr[h.name]=E={});var T=E[d.toURLString()];return T&&Ht("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),T=new Sc(d,dd,g,y),E[d.toURLString()]=T,T}(O,d,W,new qa(d.name,g));return new yy(se,d)}var yy=function(){function d(h,g){this._repoInternal=h,this.app=g,this.type="database",this._instanceStarted=!1}return Object.defineProperty(d.prototype,"_repo",{get:function(){return this._instanceStarted||(function(d,h,g){if(d.stats_=on(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new ow(d.repoInfo_,function(y,E,T,R){Ts(d,y,E,T,R)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(function(){return ag(d,!0)},0);else{if(null!=g){if("object"!=typeof g)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,M.Pz)(g)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}d.persistentConnection_=new Ja(d.repoInfo_,h,function(y,E,T,R){Ts(d,y,E,T,R)},function(y){ag(d,y)},function(y){!function(d,h){at(h,function(g,y){od(d,g,y)})}(d,y)},d.authTokenProvider_,d.appCheckProvider_,g),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(function(y){d.server_.refreshAuthToken(y)}),d.appCheckProvider_.addTokenChangeListener(function(y){d.server_.refreshAppCheckToken(y.token)}),d.statsReporter_=function(d,h){var g=d.toString();return vi[g]||(vi[g]=h()),vi[g]}(d.repoInfo_,function(){return new Hp(d.stats_,d.server_)}),d.infoData_=new Uv,d.infoSyncTree_=new vc({startListening:function(y,E,T,R){var O=[],L=d.infoData_.getNode(y._path);return L.isEmpty()||(O=Uo(d.infoSyncTree_,y._path,L),setTimeout(function(){R("ok")},0)),O},stopListening:function(){}}),od(d,"connected",!1),d.serverSyncTree_=new vc({startListening:function(y,E,T,R){return d.server_.listen(y,T,E,function(O,L){var B=R(O,L);jn(d.eventQueue_,y._path,B)}),[]},stopListening:function(y,E){d.server_.unlisten(y,E)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Yt(this._repo,et())),this._rootInternal},enumerable:!1,configurable:!0}),d.prototype._delete=function(){return null!==this._rootInternal&&(function(d,h){var g=gr[h];(!g||g[d.key]!==d)&&Ht("Database "+h+"("+d.repoInfo_+") has already been deleted."),lg(d),delete g[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()},d.prototype._checkNotDeleted=function(h){null===this._rootInternal&&Ht("Cannot call "+h+" on a deleted database.")},d}();function _y(d){(d=(0,M.m9)(d))._checkNotDeleted("goOffline"),lg(d._repo)}function yu(d){(d=(0,M.m9)(d))._checkNotDeleted("goOnline"),function(d){d.persistentConnection_&&d.persistentConnection_.resume(Hl)}(d._repo)}var co={".sv":"timestamp"},Ig=function(){function d(h,g){this.committed=h,this.snapshot=g}return d.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},d}();function _w(d,h,g){var y;if(d=(0,M.m9)(d),Gi("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";var E=null===(y=null==g?void 0:g.applyLocally)||void 0===y||y,T=new M.BH,O=Ps(d,function(){});return function(d,h,g,y,E,T){Go(d,"transaction on "+h);var R={path:h,update:g,onComplete:y,status:null,order:Ce(),applyLocally:T,retryCount:0,unwatcher:E,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},O=ai(d,h,void 0);R.currentInputSnapshot=O;var L=R.update(O.val());if(void 0===L)R.unwatcher(),R.currentOutputSnapshotRaw=null,R.currentOutputSnapshotResolved=null,R.onComplete&&R.onComplete(null,!1,R.currentInputSnapshot);else{uu("transaction failed: Data returned ",L,R.path),R.status=0;var B=Vl(d.transactionQueueTree_,h),W=Qt(B)||[];W.push(R),Dc(B,W);var se=void 0;"object"==typeof L&&null!==L&&(0,M.r3)(L,".priority")?(se=(0,M.DV)(L,".priority"),(0,M.hu)(jo(se),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):se=(bc(d.serverSyncTree_,h)||pt.EMPTY_NODE).getPriority().val();var Re=_a(d),Ve=Cn(L,se),dt=Cc(Ve,O,Re);R.currentOutputSnapshotRaw=Ve,R.currentOutputSnapshotResolved=dt,R.currentWriteId=ql(d);var rt=yc(d.serverSyncTree_,h,dt,R.currentWriteId,R.applyLocally);jn(d.eventQueue_,h,rt),ao(d,d.transactionQueueTree_)}}(d._repo,d._path,h,function(L,B,W){var se=null;L?T.reject(L):(se=new Pc(W,new Yt(d._repo,d._path),un),T.resolve(new Ig(B,se)))},O,E),T.promise}var lo=function(){function d(h){this._delegate=h}return d.prototype.cancel=function(h){(0,M.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,M.Wj)("OnDisconnect.cancel","onComplete",h,!0);var g=this._delegate.cancel();return h&&g.then(function(){return h(null)},function(y){return h(y)}),g},d.prototype.remove=function(h){(0,M.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,M.Wj)("OnDisconnect.remove","onComplete",h,!0);var g=this._delegate.remove();return h&&g.then(function(){return h(null)},function(y){return h(y)}),g},d.prototype.set=function(h,g){(0,M.Dv)("OnDisconnect.set",1,2,arguments.length),(0,M.Wj)("OnDisconnect.set","onComplete",g,!0);var y=this._delegate.set(h);return g&&y.then(function(){return g(null)},function(E){return g(E)}),y},d.prototype.setWithPriority=function(h,g,y){(0,M.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,M.Wj)("OnDisconnect.setWithPriority","onComplete",y,!0);var E=this._delegate.setWithPriority(h,g);return y&&E.then(function(){return y(null)},function(T){return y(T)}),E},d.prototype.update=function(h,g){if((0,M.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(h)){for(var y={},E=0;E<h.length;++E)y[""+E]=h[E];h=y,tn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,M.Wj)("OnDisconnect.update","onComplete",g,!0);var T=this._delegate.update(h);return g&&T.then(function(){return g(null)},function(R){return g(R)}),T},d}(),pd=function(){function d(h,g){this.committed=h,this.snapshot=g}return d.prototype.toJSON=function(){return(0,M.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},d}(),Ms=function(){function d(h,g){this._database=h,this._delegate=g}return d.prototype.val=function(){return(0,M.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},d.prototype.exportVal=function(){return(0,M.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},d.prototype.toJSON=function(){return(0,M.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},d.prototype.exists=function(){return(0,M.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},d.prototype.child=function(h){return(0,M.Dv)("DataSnapshot.child",0,1,arguments.length),h=String(h),Rt("DataSnapshot.child","path",h,!1),new d(this._database,this._delegate.child(h))},d.prototype.hasChild=function(h){return(0,M.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Rt("DataSnapshot.hasChild","path",h,!1),this._delegate.hasChild(h)},d.prototype.getPriority=function(){return(0,M.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},d.prototype.forEach=function(h){var g=this;return(0,M.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,M.Wj)("DataSnapshot.forEach","action",h,!1),this._delegate.forEach(function(y){return h(new d(g._database,y))})},d.prototype.hasChildren=function(){return(0,M.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(d.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),d.prototype.numChildren=function(){return(0,M.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},d.prototype.getRef=function(){return(0,M.Dv)("DataSnapshot.ref",0,0,arguments.length),new Os(this._database,this._delegate.ref)},Object.defineProperty(d.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),d}(),Tg=function(){function d(h,g){this.database=h,this._delegate=g}return d.prototype.on=function(h,g,y,E){var R,T=this;(0,M.Dv)("Query.on",2,4,arguments.length),(0,M.Wj)("Query.on","callback",g,!1);var O=d.getCancelAndContextArgs_("Query.on",y,E),L=function(W,se){g.call(O.context,new Ms(T.database,W),se)};L.userCallback=g,L.context=O.context;var B=null===(R=O.cancel)||void 0===R?void 0:R.bind(O.context);switch(h){case"value":return Ps(this._delegate,L,B),g;case"child_added":return Ea(this._delegate,L,B),g;case"child_removed":return Xl(this._delegate,L,B),g;case"child_changed":return ir(this._delegate,L,B),g;case"child_moved":return Ca(this._delegate,L,B),g;default:throw new Error((0,M.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},d.prototype.off=function(h,g,y){if((0,M.Dv)("Query.off",0,3,arguments.length),Bl("Query.off",h,!0),(0,M.Wj)("Query.off","callback",g,!0),(0,M.lb)("Query.off","context",y,!0),g){var E=function(){};E.userCallback=g,E.context=y,yg(this._delegate,h,E)}else yg(this._delegate,h)},d.prototype.get=function(){var h=this;return mw(this._delegate).then(function(g){return new Ms(h.database,g)})},d.prototype.once=function(h,g,y,E){var T=this;(0,M.Dv)("Query.once",1,4,arguments.length),(0,M.Wj)("Query.once","callback",g,!0);var R=d.getCancelAndContextArgs_("Query.once",y,E),O=new M.BH,L=function(W,se){var be=new Ms(T.database,W);g&&g.call(R.context,be,se),O.resolve(be)};L.userCallback=g,L.context=R.context;var B=function(W){R.cancel&&R.cancel.call(R.context,W),O.reject(W)};switch(h){case"value":Ps(this._delegate,L,B,{onlyOnce:!0});break;case"child_added":Ea(this._delegate,L,B,{onlyOnce:!0});break;case"child_removed":Xl(this._delegate,L,B,{onlyOnce:!0});break;case"child_changed":ir(this._delegate,L,B,{onlyOnce:!0});break;case"child_moved":Ca(this._delegate,L,B,{onlyOnce:!0});break;default:throw new Error((0,M.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return O.promise},d.prototype.limitToFirst=function(h){return(0,M.Dv)("Query.limitToFirst",1,1,arguments.length),new d(this.database,$i(this._delegate,mu(h)))},d.prototype.limitToLast=function(h){return(0,M.Dv)("Query.limitToLast",1,1,arguments.length),new d(this.database,$i(this._delegate,wg(h)))},d.prototype.orderByChild=function(h){return(0,M.Dv)("Query.orderByChild",1,1,arguments.length),new d(this.database,$i(this._delegate,fd(h)))},d.prototype.orderByKey=function(){return(0,M.Dv)("Query.orderByKey",0,0,arguments.length),new d(this.database,$i(this._delegate,Eg()))},d.prototype.orderByPriority=function(){return(0,M.Dv)("Query.orderByPriority",0,0,arguments.length),new d(this.database,$i(this._delegate,vu()))},d.prototype.orderByValue=function(){return(0,M.Dv)("Query.orderByValue",0,0,arguments.length),new d(this.database,$i(this._delegate,gy()))},d.prototype.startAt=function(h,g){return void 0===h&&(h=null),(0,M.Dv)("Query.startAt",0,2,arguments.length),new d(this.database,$i(this._delegate,ly(h,g)))},d.prototype.startAfter=function(h,g){return void 0===h&&(h=null),(0,M.Dv)("Query.startAfter",0,2,arguments.length),new d(this.database,$i(this._delegate,hy(h,g)))},d.prototype.endAt=function(h,g){return void 0===h&&(h=null),(0,M.Dv)("Query.endAt",0,2,arguments.length),new d(this.database,$i(this._delegate,_g(h,g)))},d.prototype.endBefore=function(h,g){return void 0===h&&(h=null),(0,M.Dv)("Query.endBefore",0,2,arguments.length),new d(this.database,$i(this._delegate,ef(h,g)))},d.prototype.equalTo=function(h,g){return(0,M.Dv)("Query.equalTo",1,2,arguments.length),new d(this.database,$i(this._delegate,hd(h,g)))},d.prototype.toString=function(){return(0,M.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},d.prototype.toJSON=function(){return(0,M.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},d.prototype.isEqual=function(h){if((0,M.Dv)("Query.isEqual",1,1,arguments.length),!(h instanceof d)){var g="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(g)}return this._delegate.isEqual(h._delegate)},d.getCancelAndContextArgs_=function(h,g,y){var E={cancel:void 0,context:void 0};if(g&&y)E.cancel=g,(0,M.Wj)(h,"cancel",E.cancel,!0),E.context=y,(0,M.lb)(h,"context",E.context,!0);else if(g)if("object"==typeof g&&null!==g)E.context=g;else{if("function"!=typeof g)throw new Error((0,M.gK)(h,"cancelOrContext")+" must either be a cancel callback or a context object.");E.cancel=g}return E},Object.defineProperty(d.prototype,"ref",{get:function(){return new Os(this.database,new Yt(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),d}(),Os=function(d){function h(g,y){var E=d.call(this,g,new br(y._repo,y._path,new jp,!1))||this;return E.database=g,E._delegate=y,E}return(0,X.ZT)(h,d),h.prototype.getKey=function(){return(0,M.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},h.prototype.child=function(g){return(0,M.Dv)("Reference.child",1,1,arguments.length),"number"==typeof g&&(g=String(g)),new h(this.database,xs(this._delegate,g))},h.prototype.getParent=function(){(0,M.Dv)("Reference.parent",0,0,arguments.length);var g=this._delegate.parent;return g?new h(this.database,g):null},h.prototype.getRoot=function(){return(0,M.Dv)("Reference.root",0,0,arguments.length),new h(this.database,this._delegate.root)},h.prototype.set=function(g,y){(0,M.Dv)("Reference.set",1,2,arguments.length),(0,M.Wj)("Reference.set","onComplete",y,!0);var E=Mc(this._delegate,g);return y&&E.then(function(){return y(null)},function(T){return y(T)}),E},h.prototype.update=function(g,y){if((0,M.Dv)("Reference.update",1,2,arguments.length),Array.isArray(g)){for(var E={},T=0;T<g.length;++T)E[""+T]=g[T];g=E,tn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Gi("Reference.update",this._delegate._path),(0,M.Wj)("Reference.update","onComplete",y,!0);var R=du(this._delegate,g);return y&&R.then(function(){return y(null)},function(O){return y(O)}),R},h.prototype.setWithPriority=function(g,y,E){(0,M.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,M.Wj)("Reference.setWithPriority","onComplete",E,!0);var T=cy(this._delegate,g,y);return E&&T.then(function(){return E(null)},function(R){return E(R)}),T},h.prototype.remove=function(g){(0,M.Dv)("Reference.remove",0,1,arguments.length),(0,M.Wj)("Reference.remove","onComplete",g,!0);var y=uy(this._delegate);return g&&y.then(function(){return g(null)},function(E){return g(E)}),y},h.prototype.transaction=function(g,y,E){var T=this;(0,M.Dv)("Reference.transaction",1,3,arguments.length),(0,M.Wj)("Reference.transaction","transactionUpdate",g,!1),(0,M.Wj)("Reference.transaction","onComplete",y,!0),ny("Reference.transaction","applyLocally",E,!0);var R=_w(this._delegate,g,{applyLocally:E}).then(function(O){return new pd(O.committed,new Ms(T.database,O.snapshot))});return y&&R.then(function(O){return y(null,O.committed,O.snapshot)},function(O){return y(O,!1,null)}),R},h.prototype.setPriority=function(g,y){(0,M.Dv)("Reference.setPriority",1,2,arguments.length),(0,M.Wj)("Reference.setPriority","onComplete",y,!0);var E=Ns(this._delegate,g);return y&&E.then(function(){return y(null)},function(T){return y(T)}),E},h.prototype.push=function(g,y){var E=this;(0,M.Dv)("Reference.push",0,2,arguments.length),(0,M.Wj)("Reference.push","onComplete",y,!0);var T=vg(this._delegate,g),R=T.then(function(L){return new h(E.database,L)});y&&R.then(function(){return y(null)},function(L){return y(L)});var O=new h(this.database,T);return O.then=R.then.bind(R),O.catch=R.catch.bind(R,void 0),O},h.prototype.onDisconnect=function(){return Gi("Reference.onDisconnect",this._delegate._path),new lo(new mg(this._delegate._repo,this._delegate._path))},Object.defineProperty(h.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),h}(Tg),Fs=function(){function d(h,g){var y=this;this._delegate=h,this.app=g,this.INTERNAL={delete:function(){return y._delegate._delete()}}}return d.prototype.useEmulator=function(h,g,y){void 0===y&&(y={}),function(d,h,g,y){void 0===y&&(y={}),(d=(0,M.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&Ht("Cannot call useEmulator() after instance has already been initialized.");var E=d._repoInternal,T=void 0;if(E.repoInfo_.nodeAdmin)y.mockUserToken&&Ht('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),T=new Mt(Mt.OWNER);else if(y.mockUserToken){var R="string"==typeof y.mockUserToken?y.mockUserToken:(0,M.Sg)(y.mockUserToken,d.app.options.projectId);T=new Mt(R)}!function(d,h,g,y){d.repoInfo_=new Tn(h+":"+g,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams),y&&(d.authTokenProvider_=y)}(E,h,g,T)}(this._delegate,h,g,y)},d.prototype.ref=function(h){if((0,M.Dv)("database.ref",0,1,arguments.length),h instanceof Os){var g=Zl(this._delegate,h.toString());return new Os(this,g)}return g=ud(this._delegate,h),new Os(this,g)},d.prototype.refFromURL=function(h){var g="database.refFromURL";(0,M.Dv)(g,1,1,arguments.length);var y=Zl(this._delegate,h);return new Os(this,y)},d.prototype.goOffline=function(){return(0,M.Dv)("database.goOffline",0,0,arguments.length),_y(this._delegate)},d.prototype.goOnline=function(){return(0,M.Dv)("database.goOnline",0,0,arguments.length),yu(this._delegate)},d.ServerValue={TIMESTAMP:co,increment:function(h){return function(d){return{".sv":{increment:d}}}(h)}},d}(),wy=Object.freeze({__proto__:null,forceLongPolling:function(){dr.forceDisallow(),ml.forceAllow()},forceWebSockets:function(){ml.forceDisallow()},isWebSocketsAvailable:function(){return dr.isAvailable()},setSecurityDebugCallback:function(d,h){d._delegate._repo.persistentConnection_.securityDebugCallback_=h},stats:function(d,h){!function(d,h){if(void 0===h&&(h=!1),"undefined"!=typeof console){var g;h?(d.statsListener_||(d.statsListener_=new Po(d.stats_)),g=d.statsListener_.get()):g=d.stats_.get();var y=Object.keys(g).reduce(function(E,T){return Math.max(T.length,E)},0);at(g,function(E,T){for(var R=E,O=E.length;O<y+2;O++)R+=" ";console.log(R+T)})}}(d._delegate._repo,h)},statsIncrementCounter:function(d,h){!function(d,h){d.stats_.incrementCounter(h),function(d,h){d.statsToReport_[h]=!0}(d.statsReporter_,h)}(d._delegate._repo,h)},dataUpdateCount:function(d){return d._delegate._repo.dataUpdateCount},interceptServerData:function(d,h){return function(d,h){d.interceptServerDataCallback_=h}(d._delegate._repo,h)},initStandalone:function(d){var h=d.app,g=d.url,E=d.customAuthImpl,T=d.namespace,R=d.nodeAdmin,O=void 0!==R&&R;te(d.version);var L=new de.zt("auth-internal",new de.H0("database-standalone"));return L.setComponent(new de.wA("auth-internal",function(){return E},"PRIVATE")),{instance:new Fs(Fc(h,L,void 0,g,O),h),namespace:T}}}),md=Ja;Ja.prototype.simpleListen=function(d,h){this.sendRequest("q",{p:d},h)},Ja.prototype.echo=function(d,h){this.sendRequest("echo",{d},h)};var Ty=Object.freeze({__proto__:null,DataConnection:md,RealTimeConnection:ss,hijackHash:function(d){var h=Ja.prototype.put;return Ja.prototype.put=function(g,y,E,T){void 0!==T&&(T=d()),h.call(this,g,y,E,T)},function(){Ja.prototype.put=h}},ConnectionTarget:Tn,queryIdentifier:function(d){return d._delegate._queryIdentifier},forceRestClient:function(d){!function(d){dd=d}(d)}}),sf=Fs.ServerValue;!function(d){te(d.SDK_VERSION);var h=d.INTERNAL.registerComponent(new de.wA("database",function(g,y){var E=y.instanceIdentifier,T=g.getProvider("app").getImmediate(),R=g.getProvider("auth-internal"),O=g.getProvider("app-check-internal");return new Fs(Fc(T,R,O,E),T)},"PUBLIC").setServiceProps({Reference:Os,Query:Tg,Database:Fs,DataSnapshot:Ms,enableLogging:ft,INTERNAL:wy,ServerValue:sf,TEST_ACCESS:Ty}).setMultipleInstances(!0));d.registerVersion("@firebase/database","0.11.0"),(0,M.Yr)()&&(Je.exports=h)}(I.Z)},300:(Je,Ae,G)=>{"use strict";function I(){for(var j=0,Y=0,me=arguments.length;Y<me;Y++)j+=arguments[Y].length;var De=Array(j),Ce=0;for(Y=0;Y<me;Y++)for(var $e=arguments[Y],Ne=0,Pe=$e.length;Ne<Pe;Ne++,Ce++)De[Ce]=$e[Ne];return De}G.d(Ae,{in:()=>X,Yd:()=>te,Ub:()=>$,Am:()=>Z});var de,M=[],X=(()=>{return(j=X||(X={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",X;var j})(),ye={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ee=X.INFO,we=((de={})[X.DEBUG]="log",de[X.VERBOSE]="log",de[X.INFO]="info",de[X.WARN]="warn",de[X.ERROR]="error",de),ae=function(j,Y){for(var me=[],De=2;De<arguments.length;De++)me[De-2]=arguments[De];if(!(Y<j.logLevel)){var Ce=(new Date).toISOString(),$e=we[Y];if(!$e)throw new Error("Attempted to log a message with an invalid logType (value: "+Y+")");console[$e].apply(console,I(["["+Ce+"]  "+j.name+":"],me))}},te=function(){function j(Y){this.name=Y,this._logLevel=ee,this._logHandler=ae,this._userLogHandler=null,M.push(this)}return Object.defineProperty(j.prototype,"logLevel",{get:function(){return this._logLevel},set:function(Y){if(!(Y in X))throw new TypeError('Invalid value "'+Y+'" assigned to `logLevel`');this._logLevel=Y},enumerable:!1,configurable:!0}),j.prototype.setLogLevel=function(Y){this._logLevel="string"==typeof Y?ye[Y]:Y},Object.defineProperty(j.prototype,"logHandler",{get:function(){return this._logHandler},set:function(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(Y){this._userLogHandler=Y},enumerable:!1,configurable:!0}),j.prototype.debug=function(){for(var Y=[],me=0;me<arguments.length;me++)Y[me]=arguments[me];this._userLogHandler&&this._userLogHandler.apply(this,I([this,X.DEBUG],Y)),this._logHandler.apply(this,I([this,X.DEBUG],Y))},j.prototype.log=function(){for(var Y=[],me=0;me<arguments.length;me++)Y[me]=arguments[me];this._userLogHandler&&this._userLogHandler.apply(this,I([this,X.VERBOSE],Y)),this._logHandler.apply(this,I([this,X.VERBOSE],Y))},j.prototype.info=function(){for(var Y=[],me=0;me<arguments.length;me++)Y[me]=arguments[me];this._userLogHandler&&this._userLogHandler.apply(this,I([this,X.INFO],Y)),this._logHandler.apply(this,I([this,X.INFO],Y))},j.prototype.warn=function(){for(var Y=[],me=0;me<arguments.length;me++)Y[me]=arguments[me];this._userLogHandler&&this._userLogHandler.apply(this,I([this,X.WARN],Y)),this._logHandler.apply(this,I([this,X.WARN],Y))},j.prototype.error=function(){for(var Y=[],me=0;me<arguments.length;me++)Y[me]=arguments[me];this._userLogHandler&&this._userLogHandler.apply(this,I([this,X.ERROR],Y)),this._logHandler.apply(this,I([this,X.ERROR],Y))},j}();function $(j){M.forEach(function(Y){Y.setLogLevel(j)})}function Z(j,Y){for(var me=function(Ne){var Pe=null;Y&&Y.level&&(Pe=ye[Y.level]),Ne.userLogHandler=null===j?null:function(Ge,ft){for(var Ue=[],$t=2;$t<arguments.length;$t++)Ue[$t-2]=arguments[$t];var fn=Ue.map(function(Ht){if(null==Ht)return null;if("string"==typeof Ht)return Ht;if("number"==typeof Ht||"boolean"==typeof Ht)return Ht.toString();if(Ht instanceof Error)return Ht.message;try{return JSON.stringify(Ht)}catch(tn){return null}}).filter(function(Ht){return Ht}).join(" ");ft>=(null!=Pe?Pe:Ge.logLevel)&&j({level:X[ft].toLowerCase(),message:fn,args:Ue,type:Ge.name})}},De=0,Ce=M;De<Ce.length;De++)me(Ce[De])}},4685:(Je,Ae,G)=>{"use strict";G.d(Ae,{BH:()=>me,LL:()=>st,ZR:()=>le,gQ:()=>fr,hu:()=>M,g5:()=>X,US:()=>we,h$:()=>ae,r3:()=>mi,Sg:()=>De,ne:()=>hr,p$:()=>Z,ZB:()=>j,gK:()=>Ju,m9:()=>sn,z$:()=>Ce,GJ:()=>Gt,jU:()=>Pe,ru:()=>Ge,d:()=>Ue,xb:()=>tr,w1:()=>$t,uI:()=>$e,UG:()=>Ne,Yr:()=>Ht,b$:()=>ft,G6:()=>tn,Mn:()=>fn,w9:()=>hn,cI:()=>Ze,UI:()=>Pi,xO:()=>qa,DV:()=>In,ug:()=>Qe,dS:()=>Tn,Pz:()=>at,Dv:()=>Ks,Wj:()=>Gn,lb:()=>xh});var I=G(4762),M=function(Q,q){if(!Q)throw X(q)},X=function(Q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Q)},ye=function(Q){for(var q=[],re=0,pe=0;pe<Q.length;pe++){var ie=Q.charCodeAt(pe);ie<128?q[re++]=ie:ie<2048?(q[re++]=ie>>6|192,q[re++]=63&ie|128):55296==(64512&ie)&&pe+1<Q.length&&56320==(64512&Q.charCodeAt(pe+1))?(ie=65536+((1023&ie)<<10)+(1023&Q.charCodeAt(++pe)),q[re++]=ie>>18|240,q[re++]=ie>>12&63|128,q[re++]=ie>>6&63|128,q[re++]=63&ie|128):(q[re++]=ie>>12|224,q[re++]=ie>>6&63|128,q[re++]=63&ie|128)}return q},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(Q,q){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var re=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[],ie=0;ie<Q.length;ie+=3){var je=Q[ie],it=ie+1<Q.length,Vt=it?Q[ie+1]:0,nn=ie+2<Q.length,Wt=nn?Q[ie+2]:0,Sr=(15&Vt)<<2|Wt>>6,Qs=63&Wt;nn||(Qs=64,it||(Sr=64)),pe.push(re[je>>2],re[(3&je)<<4|Vt>>4],re[Sr],re[Qs])}return pe.join("")},encodeString:function(Q,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(Q):this.encodeByteArray(ye(Q),q)},decodeString:function(Q,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(Q):function(Q){for(var q=[],re=0,pe=0;re<Q.length;){var ie=Q[re++];if(ie<128)q[pe++]=String.fromCharCode(ie);else if(ie>191&&ie<224){var je=Q[re++];q[pe++]=String.fromCharCode((31&ie)<<6|63&je)}else if(ie>239&&ie<365){var nn=((7&ie)<<18|(63&(je=Q[re++]))<<12|(63&(it=Q[re++]))<<6|63&Q[re++])-65536;q[pe++]=String.fromCharCode(55296+(nn>>10)),q[pe++]=String.fromCharCode(56320+(1023&nn))}else{je=Q[re++];var it=Q[re++];q[pe++]=String.fromCharCode((15&ie)<<12|(63&je)<<6|63&it)}}return q.join("")}(this.decodeStringToByteArray(Q,q))},decodeStringToByteArray:function(Q,q){this.init_();for(var re=q?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[],ie=0;ie<Q.length;){var je=re[Q.charAt(ie++)],Vt=ie<Q.length?re[Q.charAt(ie)]:0,Wt=++ie<Q.length?re[Q.charAt(ie)]:64,Tr=++ie<Q.length?re[Q.charAt(ie)]:64;if(++ie,null==je||null==Vt||null==Wt||null==Tr)throw Error();pe.push(je<<2|Vt>>4),64!==Wt&&(pe.push(Vt<<4&240|Wt>>2),64!==Tr&&pe.push(Wt<<6&192|Tr))}return pe},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},ae=function(Q){var q=ye(Q);return we.encodeByteArray(q,!0)},te=function(Q){return ae(Q).replace(/\./g,"")},$=function(Q){try{return we.decodeString(Q,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function Z(Q){return j(void 0,Q)}function j(Q,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return q}for(var pe in q)!q.hasOwnProperty(pe)||!Y(pe)||(Q[pe]=j(Q[pe],q[pe]));return Q}function Y(Q){return"__proto__"!==Q}var me=function(){function Q(){var q=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(re,pe){q.resolve=re,q.reject=pe})}return Q.prototype.wrapCallback=function(q){var re=this;return function(pe,ie){pe?re.reject(pe):re.resolve(ie),"function"==typeof q&&(re.promise.catch(function(){}),1===q.length?q(pe):q(pe,ie))}},Q}();function De(Q,q){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var pe=q||"demo-project",ie=Q.iat||0,je=Q.sub||Q.user_id;if(!je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var it=(0,I.pi)({iss:"https://securetoken.google.com/"+pe,aud:pe,iat:ie,exp:ie+3600,auth_time:ie,sub:je,user_id:je,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(it)),""].join(".")}function Ce(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $e(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ce())}function Ne(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Q){return!1}}function Pe(){return"object"==typeof self&&self.self===self}function Ge(){var Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function ft(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ue(){return Ce().indexOf("Electron/")>=0}function $t(){var Q=Ce();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function fn(){return Ce().indexOf("MSAppHost/")>=0}function Ht(){return!1}function tn(){return!Ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var le=function(Q){function q(re,pe,ie){var je=Q.call(this,pe)||this;return je.code=re,je.customData=ie,je.name="FirebaseError",Object.setPrototypeOf(je,q.prototype),Error.captureStackTrace&&Error.captureStackTrace(je,st.prototype.create),je}return(0,I.ZT)(q,Q),q}(Error),st=function(){function Q(q,re,pe){this.service=q,this.serviceName=re,this.errors=pe}return Q.prototype.create=function(q){for(var re=[],pe=1;pe<arguments.length;pe++)re[pe-1]=arguments[pe];var ie=re[0]||{},je=this.service+"/"+q,it=this.errors[q],Vt=it?lt(it,ie):"Error",nn=this.serviceName+": "+Vt+" ("+je+").",Wt=new le(je,nn,ie);return Wt},Q}();function lt(Q,q){return Q.replace(gn,function(re,pe){var ie=q[pe];return null!=ie?String(ie):"<"+pe+"?>"})}var gn=/\{\$([^}]+)}/g;function Ze(Q){return JSON.parse(Q)}function at(Q){return JSON.stringify(Q)}var We=function(Q){var q={},re={},pe={},ie="";try{var je=Q.split(".");q=Ze($(je[0])||""),re=Ze($(je[1])||""),ie=je[2],pe=re.d||{},delete re.d}catch(it){}return{header:q,claims:re,data:pe,signature:ie}},hn=function(Q){var re=We(Q).claims;return!!re&&"object"==typeof re&&re.hasOwnProperty("iat")},Gt=function(Q){var q=We(Q).claims;return"object"==typeof q&&!0===q.admin};function mi(Q,q){return Object.prototype.hasOwnProperty.call(Q,q)}function In(Q,q){if(Object.prototype.hasOwnProperty.call(Q,q))return Q[q]}function tr(Q){for(var q in Q)if(Object.prototype.hasOwnProperty.call(Q,q))return!1;return!0}function Pi(Q,q,re){var pe={};for(var ie in Q)Object.prototype.hasOwnProperty.call(Q,ie)&&(pe[ie]=q.call(re,Q[ie],ie,Q));return pe}function qa(Q){for(var q=[],re=function(nn,Wt){Array.isArray(Wt)?Wt.forEach(function(yr){q.push(encodeURIComponent(nn)+"="+encodeURIComponent(yr))}):q.push(encodeURIComponent(nn)+"="+encodeURIComponent(Wt))},pe=0,ie=Object.entries(Q);pe<ie.length;pe++){var je=ie[pe];re(je[0],je[1])}return q.length?"&"+q.join("&"):""}var fr=function(){function Q(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}return Q.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Q.prototype.compress_=function(q,re){re||(re=0);var pe=this.W_;if("string"==typeof q)for(var ie=0;ie<16;ie++)pe[ie]=q.charCodeAt(re)<<24|q.charCodeAt(re+1)<<16|q.charCodeAt(re+2)<<8|q.charCodeAt(re+3),re+=4;else for(ie=0;ie<16;ie++)pe[ie]=q[re]<<24|q[re+1]<<16|q[re+2]<<8|q[re+3],re+=4;for(ie=16;ie<80;ie++)pe[ie]=4294967295&((je=pe[ie-3]^pe[ie-8]^pe[ie-14]^pe[ie-16])<<1|je>>>31);var Tr,Sr,it=this.chain_[0],Vt=this.chain_[1],nn=this.chain_[2],Wt=this.chain_[3],yr=this.chain_[4];for(ie=0;ie<80;ie++){ie<40?ie<20?(Tr=Wt^Vt&(nn^Wt),Sr=1518500249):(Tr=Vt^nn^Wt,Sr=1859775393):ie<60?(Tr=Vt&nn|Wt&(Vt|nn),Sr=2400959708):(Tr=Vt^nn^Wt,Sr=3395469782);var je=(it<<5|it>>>27)+Tr+yr+Sr+pe[ie]&4294967295;yr=Wt,Wt=nn,nn=4294967295&(Vt<<30|Vt>>>2),Vt=it,it=je}this.chain_[0]=this.chain_[0]+it&4294967295,this.chain_[1]=this.chain_[1]+Vt&4294967295,this.chain_[2]=this.chain_[2]+nn&4294967295,this.chain_[3]=this.chain_[3]+Wt&4294967295,this.chain_[4]=this.chain_[4]+yr&4294967295},Q.prototype.update=function(q,re){if(null!=q){void 0===re&&(re=q.length);for(var pe=re-this.blockSize,ie=0,je=this.buf_,it=this.inbuf_;ie<re;){if(0===it)for(;ie<=pe;)this.compress_(q,ie),ie+=this.blockSize;if("string"==typeof q){for(;ie<re;)if(je[it]=q.charCodeAt(ie),++ie,++it===this.blockSize){this.compress_(je),it=0;break}}else for(;ie<re;)if(je[it]=q[ie],++ie,++it===this.blockSize){this.compress_(je),it=0;break}}this.inbuf_=it,this.total_+=re}},Q.prototype.digest=function(){var q=[],re=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var pe=this.blockSize-1;pe>=56;pe--)this.buf_[pe]=255&re,re/=256;this.compress_(this.buf_);var ie=0;for(pe=0;pe<5;pe++)for(var je=24;je>=0;je-=8)q[ie]=this.chain_[pe]>>je&255,++ie;return q},Q}();function hr(Q,q){var re=new Ke(Q,q);return re.subscribe.bind(re)}var Ke=function(){function Q(q,re){var pe=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=re,this.task.then(function(){q(pe)}).catch(function(ie){pe.error(ie)})}return Q.prototype.next=function(q){this.forEachObserver(function(re){re.next(q)})},Q.prototype.error=function(q){this.forEachObserver(function(re){re.error(q)}),this.close(q)},Q.prototype.complete=function(){this.forEachObserver(function(q){q.complete()}),this.close()},Q.prototype.subscribe=function(q,re,pe){var je,ie=this;if(void 0===q&&void 0===re&&void 0===pe)throw new Error("Missing Observer.");void 0===(je=function(Q,q){if("object"!=typeof Q||null===Q)return!1;for(var re=0,pe=["next","error","complete"];re<pe.length;re++){var ie=pe[re];if(ie in Q&&"function"==typeof Q[ie])return!0}return!1}(q)?q:{next:q,error:re,complete:pe}).next&&(je.next=wn),void 0===je.error&&(je.error=wn),void 0===je.complete&&(je.complete=wn);var it=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{ie.finalError?je.error(ie.finalError):je.complete()}catch(Vt){}}),this.observers.push(je),it},Q.prototype.unsubscribeOne=function(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Q.prototype.forEachObserver=function(q){if(!this.finalized)for(var re=0;re<this.observers.length;re++)this.sendOne(re,q)},Q.prototype.sendOne=function(q,re){var pe=this;this.task.then(function(){if(void 0!==pe.observers&&void 0!==pe.observers[q])try{re(pe.observers[q])}catch(ie){"undefined"!=typeof console&&console.error&&console.error(ie)}})},Q.prototype.close=function(q){var re=this;this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(function(){re.observers=void 0,re.onNoObservers=void 0}))},Q}();function wn(){}var Ks=function(Q,q,re,pe){var ie;if(pe<q?ie="at least "+q:pe>re&&(ie=0===re?"none":"no more than "+re),ie)throw new Error(Q+" failed: Was called with "+pe+(1===pe?" argument.":" arguments.")+" Expects "+ie+".")};function Ju(Q,q){return Q+" failed: "+q+" argument "}function Gn(Q,q,re,pe){if((!pe||re)&&"function"!=typeof re)throw new Error(Ju(Q,q)+"must be a valid function.")}function xh(Q,q,re,pe){if((!pe||re)&&("object"!=typeof re||null===re))throw new Error(Ju(Q,q)+"must be a valid context object.")}var Tn=function(Q){for(var q=[],re=0,pe=0;pe<Q.length;pe++){var ie=Q.charCodeAt(pe);if(ie>=55296&&ie<=56319){var je=ie-55296;pe++,M(pe<Q.length,"Surrogate pair missing trail surrogate."),ie=65536+(je<<10)+(Q.charCodeAt(pe)-56320)}ie<128?q[re++]=ie:ie<2048?(q[re++]=ie>>6|192,q[re++]=63&ie|128):ie<65536?(q[re++]=ie>>12|224,q[re++]=ie>>6&63|128,q[re++]=63&ie|128):(q[re++]=ie>>18|240,q[re++]=ie>>12&63|128,q[re++]=ie>>6&63|128,q[re++]=63&ie|128)}return q},Qe=function(Q){for(var q=0,re=0;re<Q.length;re++){var pe=Q.charCodeAt(re);pe<128?q++:pe<2048?q+=2:pe>=55296&&pe<=56319?(q+=4,re++):q+=3}return q};function sn(Q){return Q&&Q._delegate?Q._delegate:Q}},2329:(Je,Ae,G)=>{"use strict";G.d(Ae,{Z:()=>I.Z});var I=G(9759),M="8.10.0";I.Z.registerVersion("firebase",M,"app"),I.Z.SDK_VERSION=M},7574:(Je,Ae,G)=>{"use strict";G.d(Ae,{y:()=>Z});var I=G(7393),M=G(9181),X=G(6490),ee=G(6554),we=G(4487);var $=G(2494);let Z=(()=>{class Y{constructor(De){this._isScalar=!1,De&&(this._subscribe=De)}lift(De){const Ce=new Y;return Ce.source=this,Ce.operator=De,Ce}subscribe(De,Ce,$e){const{operator:Ne}=this,Pe=function(Y,me,De){if(Y){if(Y instanceof I.L)return Y;if(Y[M.b])return Y[M.b]()}return Y||me||De?new I.L(Y,me,De):new I.L(X.c)}(De,Ce,$e);if(Pe.add(Ne?Ne.call(Pe,this.source):this.source||$.v.useDeprecatedSynchronousErrorHandling&&!Pe.syncErrorThrowable?this._subscribe(Pe):this._trySubscribe(Pe)),$.v.useDeprecatedSynchronousErrorHandling&&Pe.syncErrorThrowable&&(Pe.syncErrorThrowable=!1,Pe.syncErrorThrown))throw Pe.syncErrorValue;return Pe}_trySubscribe(De){try{return this._subscribe(De)}catch(Ce){$.v.useDeprecatedSynchronousErrorHandling&&(De.syncErrorThrown=!0,De.syncErrorValue=Ce),function(Y){for(;Y;){const{closed:me,destination:De,isStopped:Ce}=Y;if(me||Ce)return!1;Y=De&&De instanceof I.L?De:null}return!0}(De)?De.error(Ce):console.warn(Ce)}}forEach(De,Ce){return new(Ce=j(Ce))(($e,Ne)=>{let Pe;Pe=this.subscribe(Ge=>{try{De(Ge)}catch(ft){Ne(ft),Pe&&Pe.unsubscribe()}},Ne,$e)})}_subscribe(De){const{source:Ce}=this;return Ce&&Ce.subscribe(De)}[ee.L](){return this}pipe(...De){return 0===De.length?this:function(Y){return 0===Y.length?we.y:1===Y.length?Y[0]:function(De){return Y.reduce((Ce,$e)=>$e(Ce),De)}}(De)(this)}toPromise(De){return new(De=j(De))((Ce,$e)=>{let Ne;this.subscribe(Pe=>Ne=Pe,Pe=>$e(Pe),()=>Ce(Ne))})}}return Y.create=me=>new Y(me),Y})();function j(Y){if(Y||(Y=$.v.Promise||Promise),!Y)throw new Error("no Promise impl found");return Y}},6490:(Je,Ae,G)=>{"use strict";G.d(Ae,{c:()=>M});var I=G(2494),de=G(4449);const M={closed:!0,next(X){},error(X){if(I.v.useDeprecatedSynchronousErrorHandling)throw X;(0,de.z)(X)},complete(){}}},9765:(Je,Ae,G)=>{"use strict";G.d(Ae,{Yc:()=>we,xQ:()=>ae});var I=G(7574),de=G(7393),M=G(5319),X=G(7971),ye=G(8858),ee=G(9181);class we extends de.L{constructor(Z){super(Z),this.destination=Z}}let ae=(()=>{class $ extends I.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ee.b](){return new we(this)}lift(j){const Y=new te(this,this);return Y.operator=j,Y}next(j){if(this.closed)throw new X.N;if(!this.isStopped){const{observers:Y}=this,me=Y.length,De=Y.slice();for(let Ce=0;Ce<me;Ce++)De[Ce].next(j)}}error(j){if(this.closed)throw new X.N;this.hasError=!0,this.thrownError=j,this.isStopped=!0;const{observers:Y}=this,me=Y.length,De=Y.slice();for(let Ce=0;Ce<me;Ce++)De[Ce].error(j);this.observers.length=0}complete(){if(this.closed)throw new X.N;this.isStopped=!0;const{observers:j}=this,Y=j.length,me=j.slice();for(let De=0;De<Y;De++)me[De].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(j){if(this.closed)throw new X.N;return super._trySubscribe(j)}_subscribe(j){if(this.closed)throw new X.N;return this.hasError?(j.error(this.thrownError),M.w.EMPTY):this.isStopped?(j.complete(),M.w.EMPTY):(this.observers.push(j),new ye.W(this,j))}asObservable(){const j=new I.y;return j.source=this,j}}return $.create=(Z,j)=>new te(Z,j),$})();class te extends ae{constructor(Z,j){super(),this.destination=Z,this.source=j}next(Z){const{destination:j}=this;j&&j.next&&j.next(Z)}error(Z){const{destination:j}=this;j&&j.error&&this.destination.error(Z)}complete(){const{destination:Z}=this;Z&&Z.complete&&this.destination.complete()}_subscribe(Z){const{source:j}=this;return j?this.source.subscribe(Z):M.w.EMPTY}}},8858:(Je,Ae,G)=>{"use strict";G.d(Ae,{W:()=>de});var I=G(5319);class de extends I.w{constructor(X,ye){super(),this.subject=X,this.subscriber=ye,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const X=this.subject,ye=X.observers;if(this.subject=null,!ye||0===ye.length||X.isStopped||X.closed)return;const ee=ye.indexOf(this.subscriber);-1!==ee&&ye.splice(ee,1)}}},7393:(Je,Ae,G)=>{"use strict";G.d(Ae,{L:()=>we});var I=G(9105),de=G(6490),M=G(5319),X=G(9181),ye=G(2494),ee=G(4449);class we extends M.w{constructor($,Z,j){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=de.c;break;case 1:if(!$){this.destination=de.c;break}if("object"==typeof $){$ instanceof we?(this.syncErrorThrowable=$.syncErrorThrowable,this.destination=$,$.add(this)):(this.syncErrorThrowable=!0,this.destination=new ae(this,$));break}default:this.syncErrorThrowable=!0,this.destination=new ae(this,$,Z,j)}}[X.b](){return this}static create($,Z,j){const Y=new we($,Z,j);return Y.syncErrorThrowable=!1,Y}next($){this.isStopped||this._next($)}error($){this.isStopped||(this.isStopped=!0,this._error($))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next($){this.destination.next($)}_error($){this.destination.error($),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:$}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=$,this}}class ae extends we{constructor($,Z,j,Y){super(),this._parentSubscriber=$;let me,De=this;(0,I.m)(Z)?me=Z:Z&&(me=Z.next,j=Z.error,Y=Z.complete,Z!==de.c&&(De=Object.create(Z),(0,I.m)(De.unsubscribe)&&this.add(De.unsubscribe.bind(De)),De.unsubscribe=this.unsubscribe.bind(this))),this._context=De,this._next=me,this._error=j,this._complete=Y}next($){if(!this.isStopped&&this._next){const{_parentSubscriber:Z}=this;ye.v.useDeprecatedSynchronousErrorHandling&&Z.syncErrorThrowable?this.__tryOrSetError(Z,this._next,$)&&this.unsubscribe():this.__tryOrUnsub(this._next,$)}}error($){if(!this.isStopped){const{_parentSubscriber:Z}=this,{useDeprecatedSynchronousErrorHandling:j}=ye.v;if(this._error)j&&Z.syncErrorThrowable?(this.__tryOrSetError(Z,this._error,$),this.unsubscribe()):(this.__tryOrUnsub(this._error,$),this.unsubscribe());else if(Z.syncErrorThrowable)j?(Z.syncErrorValue=$,Z.syncErrorThrown=!0):(0,ee.z)($),this.unsubscribe();else{if(this.unsubscribe(),j)throw $;(0,ee.z)($)}}}complete(){if(!this.isStopped){const{_parentSubscriber:$}=this;if(this._complete){const Z=()=>this._complete.call(this._context);ye.v.useDeprecatedSynchronousErrorHandling&&$.syncErrorThrowable?(this.__tryOrSetError($,Z),this.unsubscribe()):(this.__tryOrUnsub(Z),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub($,Z){try{$.call(this._context,Z)}catch(j){if(this.unsubscribe(),ye.v.useDeprecatedSynchronousErrorHandling)throw j;(0,ee.z)(j)}}__tryOrSetError($,Z,j){if(!ye.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Z.call(this._context,j)}catch(Y){return ye.v.useDeprecatedSynchronousErrorHandling?($.syncErrorValue=Y,$.syncErrorThrown=!0,!0):((0,ee.z)(Y),!0)}return!1}_unsubscribe(){const{_parentSubscriber:$}=this;this._context=null,this._parentSubscriber=null,$.unsubscribe()}}},5319:(Je,Ae,G)=>{"use strict";G.d(Ae,{w:()=>ee});var I=G(9796),de=G(1555),M=G(9105);const ye=(()=>{function ae(te){return Error.call(this),this.message=te?`${te.length} errors occurred during unsubscription:\n${te.map(($,Z)=>`${Z+1}) ${$.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=te,this}return ae.prototype=Object.create(Error.prototype),ae})();class ee{constructor(te){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,te&&(this._ctorUnsubscribe=!0,this._unsubscribe=te)}unsubscribe(){let te;if(this.closed)return;let{_parentOrParents:$,_ctorUnsubscribe:Z,_unsubscribe:j,_subscriptions:Y}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,$ instanceof ee)$.remove(this);else if(null!==$)for(let me=0;me<$.length;++me)$[me].remove(this);if((0,M.m)(j)){Z&&(this._unsubscribe=void 0);try{j.call(this)}catch(me){te=me instanceof ye?we(me.errors):[me]}}if((0,I.k)(Y)){let me=-1,De=Y.length;for(;++me<De;){const Ce=Y[me];if((0,de.K)(Ce))try{Ce.unsubscribe()}catch($e){te=te||[],$e instanceof ye?te=te.concat(we($e.errors)):te.push($e)}}}if(te)throw new ye(te)}add(te){let $=te;if(!te)return ee.EMPTY;switch(typeof te){case"function":$=new ee(te);case"object":if($===this||$.closed||"function"!=typeof $.unsubscribe)return $;if(this.closed)return $.unsubscribe(),$;if(!($ instanceof ee)){const Y=$;$=new ee,$._subscriptions=[Y]}break;default:throw new Error("unrecognized teardown "+te+" added to Subscription.")}let{_parentOrParents:Z}=$;if(null===Z)$._parentOrParents=this;else if(Z instanceof ee){if(Z===this)return $;$._parentOrParents=[Z,this]}else{if(-1!==Z.indexOf(this))return $;Z.push(this)}const j=this._subscriptions;return null===j?this._subscriptions=[$]:j.push($),$}remove(te){const $=this._subscriptions;if($){const Z=$.indexOf(te);-1!==Z&&$.splice(Z,1)}}}var ae;function we(ae){return ae.reduce((te,$)=>te.concat($ instanceof ye?$.errors:$),[])}ee.EMPTY=((ae=new ee).closed=!0,ae)},2494:(Je,Ae,G)=>{"use strict";G.d(Ae,{v:()=>de});let I=!1;const de={Promise:void 0,set useDeprecatedSynchronousErrorHandling(M){if(M){const X=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+X.stack)}else I&&console.log("RxJS: Back to a better error behavior. Thank you. <3");I=M},get useDeprecatedSynchronousErrorHandling(){return I}}},5345:(Je,Ae,G)=>{"use strict";G.d(Ae,{IY:()=>X,Ds:()=>ee,ft:()=>ae});var I=G(7393),de=G(7574),M=G(7444);class X extends I.L{constructor($){super(),this.parent=$}_next($){this.parent.notifyNext($)}_error($){this.parent.notifyError($),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ee extends I.L{notifyNext($){this.destination.next($)}notifyError($){this.destination.error($)}notifyComplete(){this.destination.complete()}}function ae(te,$){if($.closed)return;if(te instanceof de.y)return te.subscribe($);let Z;try{Z=(0,M.s)(te)($)}catch(j){$.error(j)}return Z}},2441:(Je,Ae,G)=>{"use strict";G.d(Ae,{c:()=>ye,N:()=>ee});var I=G(9765),de=G(7574),M=G(5319),X=G(1307);class ye extends de.y{constructor(Z,j){super(),this.source=Z,this.subjectFactory=j,this._refCount=0,this._isComplete=!1}_subscribe(Z){return this.getSubject().subscribe(Z)}getSubject(){const Z=this._subject;return(!Z||Z.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Z=this._connection;return Z||(this._isComplete=!1,Z=this._connection=new M.w,Z.add(this.source.subscribe(new we(this.getSubject(),this))),Z.closed&&(this._connection=null,Z=M.w.EMPTY)),Z}refCount(){return(0,X.x)()(this)}}const ee=(()=>{const $=ye.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:$._subscribe},_isComplete:{value:$._isComplete,writable:!0},getSubject:{value:$.getSubject},connect:{value:$.connect},refCount:{value:$.refCount}}})();class we extends I.Yc{constructor(Z,j){super(Z),this.connectable=j}_error(Z){this._unsubscribe(),super._error(Z)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Z=this.connectable;if(Z){this.connectable=null;const j=Z._connection;Z._refCount=0,Z._subject=null,Z._connection=null,j&&j.unsubscribe()}}}},9193:(Je,Ae,G)=>{"use strict";G.d(Ae,{E:()=>de,c:()=>M});var I=G(7574);const de=new I.y(ye=>ye.complete());function M(ye){return ye?function(ye){return new I.y(ee=>ye.schedule(()=>ee.complete()))}(ye):de}},4402:(Je,Ae,G)=>{"use strict";G.d(Ae,{D:()=>De});var I=G(7574),de=G(7444),M=G(5319),X=G(6554),we=G(4087),ae=G(377),Z=G(4072),j=G(9489);function De(Ce,$e){return $e?function(Ce,$e){if(null!=Ce){if(function(Ce){return Ce&&"function"==typeof Ce[X.L]}(Ce))return function(Ce,$e){return new I.y(Ne=>{const Pe=new M.w;return Pe.add($e.schedule(()=>{const Ge=Ce[X.L]();Pe.add(Ge.subscribe({next(ft){Pe.add($e.schedule(()=>Ne.next(ft)))},error(ft){Pe.add($e.schedule(()=>Ne.error(ft)))},complete(){Pe.add($e.schedule(()=>Ne.complete()))}}))})),Pe})}(Ce,$e);if((0,Z.t)(Ce))return function(Ce,$e){return new I.y(Ne=>{const Pe=new M.w;return Pe.add($e.schedule(()=>Ce.then(Ge=>{Pe.add($e.schedule(()=>{Ne.next(Ge),Pe.add($e.schedule(()=>Ne.complete()))}))},Ge=>{Pe.add($e.schedule(()=>Ne.error(Ge)))}))),Pe})}(Ce,$e);if((0,j.z)(Ce))return(0,we.r)(Ce,$e);if(function(Ce){return Ce&&"function"==typeof Ce[ae.hZ]}(Ce)||"string"==typeof Ce)return function(Ce,$e){if(!Ce)throw new Error("Iterable cannot be null");return new I.y(Ne=>{const Pe=new M.w;let Ge;return Pe.add(()=>{Ge&&"function"==typeof Ge.return&&Ge.return()}),Pe.add($e.schedule(()=>{Ge=Ce[ae.hZ](),Pe.add($e.schedule(function(){if(Ne.closed)return;let ft,Ue;try{const $t=Ge.next();ft=$t.value,Ue=$t.done}catch($t){return void Ne.error($t)}Ue?Ne.complete():(Ne.next(ft),this.schedule())}))})),Pe})}(Ce,$e)}throw new TypeError((null!==Ce&&typeof Ce||Ce)+" is not observable")}(Ce,$e):Ce instanceof I.y?Ce:new I.y((0,de.s)(Ce))}},6693:(Je,Ae,G)=>{"use strict";G.d(Ae,{n:()=>X});var I=G(7574),de=G(5015),M=G(4087);function X(ye,ee){return ee?(0,M.r)(ye,ee):new I.y((0,de.V)(ye))}},6682:(Je,Ae,G)=>{"use strict";G.d(Ae,{T:()=>ye});var I=G(7574),de=G(4869),M=G(3282),X=G(6693);function ye(...ee){let we=Number.POSITIVE_INFINITY,ae=null,te=ee[ee.length-1];return(0,de.K)(te)?(ae=ee.pop(),ee.length>1&&"number"==typeof ee[ee.length-1]&&(we=ee.pop())):"number"==typeof te&&(we=ee.pop()),null===ae&&1===ee.length&&ee[0]instanceof I.y?ee[0]:(0,M.J)(we)((0,X.n)(ee,ae))}},5917:(Je,Ae,G)=>{"use strict";G.d(Ae,{of:()=>X});var I=G(4869),de=G(6693),M=G(4087);function X(...ye){let ee=ye[ye.length-1];return(0,I.K)(ee)?(ye.pop(),(0,M.r)(ye,ee)):(0,de.n)(ye)}},205:(Je,Ae,G)=>{"use strict";G.d(Ae,{_:()=>de});var I=G(7574);function de(X,ye){return new I.y(ye?ee=>ye.schedule(M,0,{error:X,subscriber:ee}):ee=>ee.error(X))}function M({error:X,subscriber:ye}){ye.error(X)}},8002:(Je,Ae,G)=>{"use strict";G.d(Ae,{U:()=>de});var I=G(7393);function de(ye,ee){return function(ae){if("function"!=typeof ye)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ae.lift(new M(ye,ee))}}class M{constructor(ee,we){this.project=ee,this.thisArg=we}call(ee,we){return we.subscribe(new X(ee,this.project,this.thisArg))}}class X extends I.L{constructor(ee,we,ae){super(ee),this.project=we,this.count=0,this.thisArg=ae||this}_next(ee){let we;try{we=this.project.call(this.thisArg,ee,this.count++)}catch(ae){return void this.destination.error(ae)}this.destination.next(we)}}},3282:(Je,Ae,G)=>{"use strict";G.d(Ae,{J:()=>M});var I=G(9773),de=G(4487);function M(X=Number.POSITIVE_INFINITY){return(0,I.zg)(de.y,X)}},9773:(Je,Ae,G)=>{"use strict";G.d(Ae,{zg:()=>X});var I=G(8002),de=G(4402),M=G(5345);function X(ae,te,$=Number.POSITIVE_INFINITY){return"function"==typeof te?Z=>Z.pipe(X((j,Y)=>(0,de.D)(ae(j,Y)).pipe((0,I.U)((me,De)=>te(j,me,Y,De))),$)):("number"==typeof te&&($=te),Z=>Z.lift(new ye(ae,$)))}class ye{constructor(te,$=Number.POSITIVE_INFINITY){this.project=te,this.concurrent=$}call(te,$){return $.subscribe(new ee(te,this.project,this.concurrent))}}class ee extends M.Ds{constructor(te,$,Z=Number.POSITIVE_INFINITY){super(te),this.project=$,this.concurrent=Z,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(te){this.active<this.concurrent?this._tryNext(te):this.buffer.push(te)}_tryNext(te){let $;const Z=this.index++;try{$=this.project(te,Z)}catch(j){return void this.destination.error(j)}this.active++,this._innerSub($)}_innerSub(te){const $=new M.IY(this),Z=this.destination;Z.add($);const j=(0,M.ft)(te,$);j!==$&&Z.add(j)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(te){this.destination.next(te)}notifyComplete(){const te=this.buffer;this.active--,te.length>0?this._next(te.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:(Je,Ae,G)=>{"use strict";G.d(Ae,{ht:()=>te,QV:()=>we});var I=G(7393),de=G(9193),M=G(5917),X=G(205);class ee{constructor(j,Y,me){this.kind=j,this.value=Y,this.error=me,this.hasValue="N"===j}observe(j){switch(this.kind){case"N":return j.next&&j.next(this.value);case"E":return j.error&&j.error(this.error);case"C":return j.complete&&j.complete()}}do(j,Y,me){switch(this.kind){case"N":return j&&j(this.value);case"E":return Y&&Y(this.error);case"C":return me&&me()}}accept(j,Y,me){return j&&"function"==typeof j.next?this.observe(j):this.do(j,Y,me)}toObservable(){switch(this.kind){case"N":return(0,M.of)(this.value);case"E":return(0,X._)(this.error);case"C":return(0,de.c)()}throw new Error("unexpected notification kind value")}static createNext(j){return void 0!==j?new ee("N",j):ee.undefinedValueNotification}static createError(j){return new ee("E",void 0,j)}static createComplete(){return ee.completeNotification}}function we(Z,j=0){return function(me){return me.lift(new ae(Z,j))}}ee.completeNotification=new ee("C"),ee.undefinedValueNotification=new ee("N",void 0);class ae{constructor(j,Y=0){this.scheduler=j,this.delay=Y}call(j,Y){return Y.subscribe(new te(j,this.scheduler,this.delay))}}class te extends I.L{constructor(j,Y,me=0){super(j),this.scheduler=Y,this.delay=me}static dispatch(j){const{notification:Y,destination:me}=j;Y.observe(me),this.unsubscribe()}scheduleMessage(j){this.destination.add(this.scheduler.schedule(te.dispatch,this.delay,new $(j,this.destination)))}_next(j){this.scheduleMessage(ee.createNext(j))}_error(j){this.scheduleMessage(ee.createError(j)),this.unsubscribe()}_complete(){this.scheduleMessage(ee.createComplete()),this.unsubscribe()}}class ${constructor(j,Y){this.notification=j,this.destination=Y}}},1307:(Je,Ae,G)=>{"use strict";G.d(Ae,{x:()=>de});var I=G(7393);function de(){return function(ee){return ee.lift(new M(ee))}}class M{constructor(ee){this.connectable=ee}call(ee,we){const{connectable:ae}=this;ae._refCount++;const te=new X(ee,ae),$=we.subscribe(te);return te.closed||(te.connection=ae.connect()),$}}class X extends I.L{constructor(ee,we){super(ee),this.connectable=we}_unsubscribe(){const{connectable:ee}=this;if(!ee)return void(this.connection=null);this.connectable=null;const we=ee._refCount;if(we<=0)return void(this.connection=null);if(ee._refCount=we-1,we>1)return void(this.connection=null);const{connection:ae}=this,te=ee._connection;this.connection=null,te&&(!ae||te===ae)&&te.unsubscribe()}}},8819:(Je,Ae,G)=>{"use strict";G.d(Ae,{B:()=>we});var I=G(2441);var X=G(1307),ye=G(9765);function ee(){return new ye.xQ}function we(){return ae=>(0,X.x)()(function(ae,te){return function(Z){let j;j="function"==typeof ae?ae:function(){return ae};const Y=Object.create(Z,I.N);return Y.source=Z,Y.subjectFactory=j,Y}}(ee)(ae))}},3101:(Je,Ae,G)=>{"use strict";G.d(Ae,{R:()=>$e});var I=G(7574);let de=1;const M=Promise.resolve(),X={};function ye(Pe){return Pe in X&&(delete X[Pe],!0)}const ee={setImmediate(Pe){const Ge=de++;return X[Ge]=!0,M.then(()=>ye(Ge)&&Pe()),Ge},clearImmediate(Pe){ye(Pe)}};var ae=G(6465),$=G(6102);const Y=new class extends $.v{flush(Ge){this.active=!0,this.scheduled=void 0;const{actions:ft}=this;let Ue,$t=-1,fn=ft.length;Ge=Ge||ft.shift();do{if(Ue=Ge.execute(Ge.state,Ge.delay))break}while(++$t<fn&&(Ge=ft.shift()));if(this.active=!1,Ue){for(;++$t<fn&&(Ge=ft.shift());)Ge.unsubscribe();throw Ue}}}(class extends ae.o{constructor(Ge,ft){super(Ge,ft),this.scheduler=Ge,this.work=ft}requestAsyncId(Ge,ft,Ue=0){return null!==Ue&&Ue>0?super.requestAsyncId(Ge,ft,Ue):(Ge.actions.push(this),Ge.scheduled||(Ge.scheduled=ee.setImmediate(Ge.flush.bind(Ge,null))))}recycleAsyncId(Ge,ft,Ue=0){if(null!==Ue&&Ue>0||null===Ue&&this.delay>0)return super.recycleAsyncId(Ge,ft,Ue);0===Ge.actions.length&&(ee.clearImmediate(ft),Ge.scheduled=void 0)}});var me=G(9796);class Ce extends I.y{constructor(Ge,ft=0,Ue=Y){var Pe;super(),this.source=Ge,this.delayTime=ft,this.scheduler=Ue,(!(!(0,me.k)(Pe=ft)&&Pe-parseFloat(Pe)+1>=0)||ft<0)&&(this.delayTime=0),(!Ue||"function"!=typeof Ue.schedule)&&(this.scheduler=Y)}static create(Ge,ft=0,Ue=Y){return new Ce(Ge,ft,Ue)}static dispatch(Ge){const{source:ft,subscriber:Ue}=Ge;return this.add(ft.subscribe(Ue))}_subscribe(Ge){return this.scheduler.schedule(Ce.dispatch,this.delayTime,{source:this.source,subscriber:Ge})}}function $e(Pe,Ge=0){return function(Ue){return Ue.lift(new Ne(Pe,Ge))}}class Ne{constructor(Ge,ft){this.scheduler=Ge,this.delay=ft}call(Ge,ft){return new Ce(ft,this.delay,this.scheduler).subscribe(Ge)}}},3342:(Je,Ae,G)=>{"use strict";G.d(Ae,{b:()=>X});var I=G(7393);function de(){}var M=G(9105);function X(we,ae,te){return function(Z){return Z.lift(new ye(we,ae,te))}}class ye{constructor(ae,te,$){this.nextOrObserver=ae,this.error=te,this.complete=$}call(ae,te){return te.subscribe(new ee(ae,this.nextOrObserver,this.error,this.complete))}}class ee extends I.L{constructor(ae,te,$,Z){super(ae),this._tapNext=de,this._tapError=de,this._tapComplete=de,this._tapError=$||de,this._tapComplete=Z||de,(0,M.m)(te)?(this._context=this,this._tapNext=te):te&&(this._context=te,this._tapNext=te.next||de,this._tapError=te.error||de,this._tapComplete=te.complete||de)}_next(ae){try{this._tapNext.call(this._context,ae)}catch(te){return void this.destination.error(te)}this.destination.next(ae)}_error(ae){try{this._tapError.call(this._context,ae)}catch(te){return void this.destination.error(te)}this.destination.error(ae)}_complete(){try{this._tapComplete.call(this._context)}catch(ae){return void this.destination.error(ae)}return this.destination.complete()}}},4087:(Je,Ae,G)=>{"use strict";G.d(Ae,{r:()=>M});var I=G(7574),de=G(5319);function M(X,ye){return new I.y(ee=>{const we=new de.w;let ae=0;return we.add(ye.schedule(function(){ae!==X.length?(ee.next(X[ae++]),ee.closed||we.add(this.schedule())):ee.complete()})),we})}},6465:(Je,Ae,G)=>{"use strict";G.d(Ae,{o:()=>M});var I=G(5319);class de extends I.w{constructor(ye,ee){super()}schedule(ye,ee=0){return this}}class M extends de{constructor(ye,ee){super(ye,ee),this.scheduler=ye,this.work=ee,this.pending=!1}schedule(ye,ee=0){if(this.closed)return this;this.state=ye;const we=this.id,ae=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(ae,we,ee)),this.pending=!0,this.delay=ee,this.id=this.id||this.requestAsyncId(ae,this.id,ee),this}requestAsyncId(ye,ee,we=0){return setInterval(ye.flush.bind(ye,this),we)}recycleAsyncId(ye,ee,we=0){if(null!==we&&this.delay===we&&!1===this.pending)return ee;clearInterval(ee)}execute(ye,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(ye,ee);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,ee){let ae,we=!1;try{this.work(ye)}catch(te){we=!0,ae=!!te&&te||new Error(te)}if(we)return this.unsubscribe(),ae}_unsubscribe(){const ye=this.id,ee=this.scheduler,we=ee.actions,ae=we.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ae&&we.splice(ae,1),null!=ye&&(this.id=this.recycleAsyncId(ee,ye,null)),this.delay=null}}},6102:(Je,Ae,G)=>{"use strict";G.d(Ae,{v:()=>de});let I=(()=>{class M{constructor(ye,ee=M.now){this.SchedulerAction=ye,this.now=ee}schedule(ye,ee=0,we){return new this.SchedulerAction(this,ye).schedule(we,ee)}}return M.now=()=>Date.now(),M})();class de extends I{constructor(X,ye=I.now){super(X,()=>de.delegate&&de.delegate!==this?de.delegate.now():ye()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(X,ye=0,ee){return de.delegate&&de.delegate!==this?de.delegate.schedule(X,ye,ee):super.schedule(X,ye,ee)}flush(X){const{actions:ye}=this;if(this.active)return void ye.push(X);let ee;this.active=!0;do{if(ee=X.execute(X.state,X.delay))break}while(X=ye.shift());if(this.active=!1,ee){for(;X=ye.shift();)X.unsubscribe();throw ee}}}},3637:(Je,Ae,G)=>{"use strict";G.d(Ae,{z:()=>M,P:()=>X});var I=G(6465);const M=new(G(6102).v)(I.o),X=M},7771:(Je,Ae,G)=>{"use strict";G.d(Ae,{c:()=>ee,N:()=>ye});var I=G(6465),M=G(6102);const ye=new class extends M.v{}(class extends I.o{constructor(ae,te){super(ae,te),this.scheduler=ae,this.work=te}schedule(ae,te=0){return te>0?super.schedule(ae,te):(this.delay=te,this.state=ae,this.scheduler.flush(this),this)}execute(ae,te){return te>0||this.closed?super.execute(ae,te):this._execute(ae,te)}requestAsyncId(ae,te,$=0){return null!==$&&$>0||null===$&&this.delay>0?super.requestAsyncId(ae,te,$):ae.flush(this)}}),ee=ye},377:(Je,Ae,G)=>{"use strict";G.d(Ae,{hZ:()=>de});const de="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Je,Ae,G)=>{"use strict";G.d(Ae,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Je,Ae,G)=>{"use strict";G.d(Ae,{b:()=>I});const I="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Je,Ae,G)=>{"use strict";G.d(Ae,{N:()=>de});const de=(()=>{function M(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return M.prototype=Object.create(Error.prototype),M})()},4449:(Je,Ae,G)=>{"use strict";function I(de){setTimeout(()=>{throw de},0)}G.d(Ae,{z:()=>I})},4487:(Je,Ae,G)=>{"use strict";function I(de){return de}G.d(Ae,{y:()=>I})},9796:(Je,Ae,G)=>{"use strict";G.d(Ae,{k:()=>I});const I=Array.isArray||(de=>de&&"number"==typeof de.length)},9489:(Je,Ae,G)=>{"use strict";G.d(Ae,{z:()=>I});const I=de=>de&&"number"==typeof de.length&&"function"!=typeof de},9105:(Je,Ae,G)=>{"use strict";function I(de){return"function"==typeof de}G.d(Ae,{m:()=>I})},1555:(Je,Ae,G)=>{"use strict";function I(de){return null!==de&&"object"==typeof de}G.d(Ae,{K:()=>I})},4072:(Je,Ae,G)=>{"use strict";function I(de){return!!de&&"function"!=typeof de.subscribe&&"function"==typeof de.then}G.d(Ae,{t:()=>I})},4869:(Je,Ae,G)=>{"use strict";function I(de){return de&&"function"==typeof de.schedule}G.d(Ae,{K:()=>I})},7444:(Je,Ae,G)=>{"use strict";G.d(Ae,{s:()=>Z});var I=G(5015),de=G(4449),X=G(377),ee=G(6554),ae=G(9489),te=G(4072),$=G(1555);const Z=j=>{if(j&&"function"==typeof j[ee.L])return(j=>Y=>{const me=j[ee.L]();if("function"!=typeof me.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return me.subscribe(Y)})(j);if((0,ae.z)(j))return(0,I.V)(j);if((0,te.t)(j))return(j=>Y=>(j.then(me=>{Y.closed||(Y.next(me),Y.complete())},me=>Y.error(me)).then(null,de.z),Y))(j);if(j&&"function"==typeof j[X.hZ])return(j=>Y=>{const me=j[X.hZ]();for(;;){let De;try{De=me.next()}catch(Ce){return Y.error(Ce),Y}if(De.done){Y.complete();break}if(Y.next(De.value),Y.closed)break}return"function"==typeof me.return&&Y.add(()=>{me.return&&me.return()}),Y})(j);{const me=`You provided ${(0,$.K)(j)?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(me)}}},5015:(Je,Ae,G)=>{"use strict";G.d(Ae,{V:()=>I});const I=de=>M=>{for(let X=0,ye=de.length;X<ye&&!M.closed;X++)M.next(de[X]);M.complete()}},8831:(Je,Ae,G)=>{"use strict";var I=G(7716);let de=null;function M(){return de}const we=new I.OlP("DocumentToken");let ae=(()=>{class t{historyGo(i){throw new Error("Not implemented")}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=(0,I.Yz7)({factory:te,token:t,providedIn:"platform"}),t})();function te(){return(0,I.LFG)(Z)}const $=new I.OlP("Location Initialized");let Z=(()=>{class t extends ae{constructor(i){super(),this._doc=i,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return M().getBaseHref(this._doc)}onPopState(i){const a=M().getGlobalEventTarget(this._doc,"window");return a.addEventListener("popstate",i,!1),()=>a.removeEventListener("popstate",i)}onHashChange(i){const a=M().getGlobalEventTarget(this._doc,"window");return a.addEventListener("hashchange",i,!1),()=>a.removeEventListener("hashchange",i)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(i){this.location.pathname=i}pushState(i,a,c){j()?this._history.pushState(i,a,c):this.location.hash=c}replaceState(i,a,c){j()?this._history.replaceState(i,a,c):this.location.hash=c}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(we))},t.\u0275prov=(0,I.Yz7)({factory:Y,token:t,providedIn:"platform"}),t})();function j(){return!!window.history.pushState}function Y(){return new Z((0,I.LFG)(we))}function me(t,e){if(0==t.length)return e;if(0==e.length)return t;let i=0;return t.endsWith("/")&&i++,e.startsWith("/")&&i++,2==i?t+e.substring(1):1==i?t+e:t+"/"+e}function De(t){const e=t.match(/#|\?|$/),i=e&&e.index||t.length;return t.slice(0,i-("/"===t[i-1]?1:0))+t.slice(i)}function Ce(t){return t&&"?"!==t[0]?"?"+t:t}let $e=(()=>{class t{historyGo(i){throw new Error("Not implemented")}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=(0,I.Yz7)({factory:Ne,token:t,providedIn:"root"}),t})();function Ne(t){const e=(0,I.LFG)(we).location;return new Ge((0,I.LFG)(ae),e&&e.origin||"")}const Pe=new I.OlP("appBaseHref");let Ge=(()=>{class t extends $e{constructor(i,a){if(super(),this._platformLocation=i,this._removeListenerFns=[],null==a&&(a=this._platformLocation.getBaseHrefFromDOM()),null==a)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=a}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return me(this._baseHref,i)}path(i=!1){const a=this._platformLocation.pathname+Ce(this._platformLocation.search),c=this._platformLocation.hash;return c&&i?`${a}${c}`:a}pushState(i,a,c,f){const v=this.prepareExternalUrl(c+Ce(f));this._platformLocation.pushState(i,a,v)}replaceState(i,a,c,f){const v=this.prepareExternalUrl(c+Ce(f));this._platformLocation.replaceState(i,a,v)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(i=0){var a,c;null===(c=(a=this._platformLocation).historyGo)||void 0===c||c.call(a,i)}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(ae),I.LFG(Pe,8))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})(),ft=(()=>{class t extends $e{constructor(i,a){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],null!=a&&(this._baseHref=a)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let a=this._platformLocation.hash;return null==a&&(a="#"),a.length>0?a.substring(1):a}prepareExternalUrl(i){const a=me(this._baseHref,i);return a.length>0?"#"+a:a}pushState(i,a,c,f){let v=this.prepareExternalUrl(c+Ce(f));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.pushState(i,a,v)}replaceState(i,a,c,f){let v=this.prepareExternalUrl(c+Ce(f));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.replaceState(i,a,v)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(i=0){var a,c;null===(c=(a=this._platformLocation).historyGo)||void 0===c||c.call(a,i)}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(ae),I.LFG(Pe,8))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})(),Ue=(()=>{class t{constructor(i,a){this._subject=new I.vpe,this._urlChangeListeners=[],this._platformStrategy=i;const c=this._platformStrategy.getBaseHref();this._platformLocation=a,this._baseHref=De(Ht(c)),this._platformStrategy.onPopState(f=>{this._subject.emit({url:this.path(!0),pop:!0,state:f.state,type:f.type})})}path(i=!1){return this.normalize(this._platformStrategy.path(i))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(i,a=""){return this.path()==this.normalize(i+Ce(a))}normalize(i){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Ht(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._platformStrategy.prepareExternalUrl(i)}go(i,a="",c=null){this._platformStrategy.pushState(c,"",i,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ce(a)),c)}replaceState(i,a="",c=null){this._platformStrategy.replaceState(c,"",i,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ce(a)),c)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(i=0){var a,c;null===(c=(a=this._platformStrategy).historyGo)||void 0===c||c.call(a,i)}onUrlChange(i){this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(a=>{this._notifyUrlChangeListeners(a.url,a.state)}))}_notifyUrlChangeListeners(i="",a){this._urlChangeListeners.forEach(c=>c(i,a))}subscribe(i,a,c){return this._subject.subscribe({next:i,error:a,complete:c})}}return t.\u0275fac=function(i){return new(i||t)(I.LFG($e),I.LFG(ae))},t.normalizeQueryParams=Ce,t.joinWithSlash=me,t.stripTrailingSlash=De,t.\u0275prov=(0,I.Yz7)({factory:$t,token:t,providedIn:"root"}),t})();function $t(){return new Ue((0,I.LFG)($e),(0,I.LFG)(ae))}function Ht(t){return t.replace(/\/index.html$/,"")}var fe=(()=>((fe=fe||{})[fe.Zero=0]="Zero",fe[fe.One=1]="One",fe[fe.Two=2]="Two",fe[fe.Few=3]="Few",fe[fe.Many=4]="Many",fe[fe.Other=5]="Other",fe))();const jt=I.kL8;class Zs{}let vl=(()=>{class t extends Zs{constructor(i){super(),this.locale=i}getPluralCategory(i,a){switch(jt(a||this.locale)(i)){case fe.Zero:return"zero";case fe.One:return"one";case fe.Two:return"two";case fe.Few:return"few";case fe.Many:return"many";default:return"other"}}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(I.soG))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})();class xv{createSubscription(e,i){return e.subscribe({next:i,error:a=>{throw a}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class ea{createSubscription(e,i){return e.then(i,a=>{throw a})}dispose(e){}onDestroy(e){}}const Nv=new ea,_l=new xv;let xp=(()=>{class t{constructor(i){this._ref=i,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(i){return this._obj?i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue:(i&&this._subscribe(i),this._latestValue)}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,a=>this._updateLatestValue(i,a))}_selectStrategy(i){if((0,I.QGY)(i))return Nv;if((0,I.F4k)(i))return _l;throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,I.AaK)(t)}'`)}(t,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,a){i===this._obj&&(this._latestValue=a,this._ref.markForCheck())}}return t.\u0275fac=function(i){return new(i||t)(I.Y36(I.sBO,16))},t.\u0275pipe=I.Yjl({name:"async",type:t,pure:!1}),t})(),bl=(()=>{class t{transform(i){return JSON.stringify(i,null,2)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=I.Yjl({name:"json",type:t,pure:!1}),t})(),Fh=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=I.oAB({type:t}),t.\u0275inj=I.cJS({providers:[{provide:Zs,useClass:vl}]}),t})();function El(t){return"server"===t}let un=(()=>{class t{}return t.\u0275prov=(0,I.Yz7)({token:t,providedIn:"root",factory:()=>new kp((0,I.LFG)(we),window)}),t})();class kp{constructor(e,i){this.document=e,this.window=i,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const i=function(t,e){const i=t.getElementById(e)||t.getElementsByName(e)[0];if(i)return i;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const a=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let c=a.currentNode;for(;c;){const f=c.shadowRoot;if(f){const v=f.getElementById(e)||f.querySelector(`[name="${e}"]`);if(v)return v}c=a.nextNode()}}return null}(this.document,e);i&&(this.scrollToElement(i),this.attemptFocus(i))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const i=this.window.history;i&&i.scrollRestoration&&(i.scrollRestoration=e)}}scrollToElement(e){const i=e.getBoundingClientRect(),a=i.left+this.window.pageXOffset,c=i.top+this.window.pageYOffset,f=this.offset();this.window.scrollTo(a-f[0],c-f[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Cl(this.window.history)||Cl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Cl(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Za extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new Za,de||(de=t)}onAndCancel(e,i,a){return e.addEventListener(i,a,!1),()=>{e.removeEventListener(i,a,!1)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return(i=i||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return"window"===i?window:"document"===i?e:"body"===i?e.body:null}getBaseHref(e){const i=(pt=pt||document.querySelector("base"),pt?pt.getAttribute("href"):null);return null==i?null:function(t){dn=dn||document.createElement("a"),dn.setAttribute("href",t);const e=dn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(i)}resetBaseElement(){pt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(t,e){e=encodeURIComponent(e);for(const i of t.split(";")){const a=i.indexOf("="),[c,f]=-1==a?[i,""]:[i.slice(0,a),i.slice(a+1)];if(c.trim()===e)return decodeURIComponent(f)}return null}(document.cookie,e)}}let dn,pt=null;const Cn=new I.OlP("TRANSITION_ID"),bi=[{provide:I.ip1,useFactory:function(t,e,i){return()=>{i.get(I.CZH).donePromise.then(()=>{const a=M(),c=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let f=0;f<c.length;f++)a.remove(c[f])})}},deps:[Cn,we,I.zs3],multi:!0}];class rc{static init(){(0,I.VLi)(new rc)}addToWindow(e){I.dqk.getAngularTestability=(a,c=!0)=>{const f=e.findTestabilityInTree(a,c);if(null==f)throw new Error("Could not find testability for element.");return f},I.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(a=>{const c=I.dqk.getAllAngularTestabilities();let f=c.length,v=!1;const _=function(C){v=v||C,f--,0==f&&a(v)};c.forEach(function(C){C.whenStable(_)})})}findTestabilityInTree(e,i,a){if(null==i)return null;const c=e.getTestability(i);return null!=c?c:a?M().isShadowRoot(i)?this.findTestabilityInTree(e,i.host,!0):this.findTestabilityInTree(e,i.parentElement,!0):null}}let us=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})();const sc=new I.OlP("EventManagerPlugins");let Se=(()=>{class t{constructor(i,a){this._zone=a,this._eventNameToPlugin=new Map,i.forEach(c=>c.manager=this),this._plugins=i.slice().reverse()}addEventListener(i,a,c){return this._findPluginFor(a).addEventListener(i,a,c)}addGlobalEventListener(i,a,c){return this._findPluginFor(a).addGlobalEventListener(i,a,c)}getZone(){return this._zone}_findPluginFor(i){const a=this._eventNameToPlugin.get(i);if(a)return a;const c=this._plugins;for(let f=0;f<c.length;f++){const v=c[f];if(v.supports(i))return this._eventNameToPlugin.set(i,v),v}throw new Error(`No event manager plugin found for event ${i}`)}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(sc),I.LFG(I.R0b))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})();class Ut{constructor(e){this._doc=e}addGlobalEventListener(e,i,a){const c=M().getGlobalEventTarget(this._doc,e);if(!c)throw new Error(`Unsupported event target ${c} for event ${i}`);return this.addEventListener(c,i,a)}}let Tl=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(i){const a=new Set;i.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),a.add(c))}),this.onStylesAdded(a)}onStylesAdded(i){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})(),Dn=(()=>{class t extends Tl{constructor(i){super(),this._doc=i,this._hostNodes=new Map,this._hostNodes.set(i.head,[])}_addStylesToHost(i,a,c){i.forEach(f=>{const v=this._doc.createElement("style");v.textContent=f,c.push(a.appendChild(v))})}addHost(i){const a=[];this._addStylesToHost(this._stylesSet,i,a),this._hostNodes.set(i,a)}removeHost(i){const a=this._hostNodes.get(i);a&&a.forEach(ac),this._hostNodes.delete(i)}onStylesAdded(i){this._hostNodes.forEach((a,c)=>{this._addStylesToHost(i,c,a)})}ngOnDestroy(){this._hostNodes.forEach(i=>i.forEach(ac))}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(we))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})();function ac(t){M().remove(t)}const na={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Nr=/%COMP%/g;function Ln(t,e,i){for(let a=0;a<e.length;a++){let c=e[a];Array.isArray(c)?Ln(t,c,i):(c=c.replace(Nr,t),i.push(c))}return i}function ni(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Po=(()=>{class t{constructor(i,a,c){this.eventManager=i,this.sharedStylesHost=a,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new wi(i)}createRenderer(i,a){if(!i||!a)return this.defaultRenderer;switch(a.encapsulation){case I.ifc.Emulated:{let c=this.rendererByCompId.get(a.id);return c||(c=new Bv(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,c)),c.applyToHost(i),c}case 1:case I.ifc.ShadowDom:return new Br(this.eventManager,this.sharedStylesHost,i,a);default:if(!this.rendererByCompId.has(a.id)){const c=Ln(a.id,a.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(Se),I.LFG(Dn),I.LFG(I.AFp))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})();class wi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,i){return i?document.createElementNS(na[i]||i,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,i){e.appendChild(i)}insertBefore(e,i,a){e&&e.insertBefore(i,a)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let a="string"==typeof e?document.querySelector(e):e;if(!a)throw new Error(`The selector "${e}" did not match any elements`);return i||(a.textContent=""),a}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,a,c){if(c){i=c+":"+i;const f=na[c];f?e.setAttributeNS(f,i,a):e.setAttribute(i,a)}else e.setAttribute(i,a)}removeAttribute(e,i,a){if(a){const c=na[a];c?e.removeAttributeNS(c,i):e.removeAttribute(`${a}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,a,c){c&(I.JOm.DashCase|I.JOm.Important)?e.style.setProperty(i,a,c&I.JOm.Important?"important":""):e.style[i]=a}removeStyle(e,i,a){a&I.JOm.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,a){e[i]=a}setValue(e,i){e.nodeValue=i}listen(e,i,a){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,i,ni(a)):this.eventManager.addEventListener(e,i,ni(a))}}class Bv extends wi{constructor(e,i,a,c){super(e),this.component=a;const f=Ln(c+"-"+a.id,a.styles,[]);i.addStyles(f),this.contentAttr="_ngcontent-%COMP%".replace(Nr,c+"-"+a.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Nr,t)}(c+"-"+a.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,i){const a=super.createElement(e,i);return super.setAttribute(a,this.contentAttr,""),a}}class Br extends wi{constructor(e,i,a,c){super(e),this.sharedStylesHost=i,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=Ln(c.id,c.styles,[]);for(let v=0;v<f.length;v++){const _=document.createElement("style");_.textContent=f[v],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,a){return super.insertBefore(this.nodeOrShadowRoot(e),i,a)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let lc=(()=>{class t extends Ut{constructor(i){super(i)}supports(i){return!0}addEventListener(i,a,c){return i.addEventListener(a,c,!1),()=>this.removeEventListener(i,a,c)}removeEventListener(i,a,c){return i.removeEventListener(a,c)}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(we))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})();const Mo=["alt","control","meta","shift"],$v={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jh={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Wv=(()=>{class t extends Ut{constructor(i){super(i)}supports(i){return null!=t.parseEventName(i)}addEventListener(i,a,c){const f=t.parseEventName(a),v=t.eventCallback(f.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>M().onAndCancel(i,f.domEventName,v))}static parseEventName(i){const a=i.toLowerCase().split("."),c=a.shift();if(0===a.length||"keydown"!==c&&"keyup"!==c)return null;const f=t._normalizeKey(a.pop());let v="";if(Mo.forEach(C=>{const A=a.indexOf(C);A>-1&&(a.splice(A,1),v+=C+".")}),v+=f,0!=a.length||0===f.length)return null;const _={};return _.domEventName=c,_.fullKey=v,_}static getEventFullKey(i){let a="",c=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Wn.hasOwnProperty(e)&&(e=Wn[e]))}return $v[e]||e}(i);return c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),Mo.forEach(f=>{f!=c&&jh[f](i)&&(a+=f+".")}),a+=c,a}static eventCallback(i,a,c){return f=>{t.getEventFullKey(f)===i&&c.runGuarded(()=>a(f))}}static _normalizeKey(i){switch(i){case"esc":return"escape";default:return i}}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(we))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})();const ms=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:"browser"},{provide:I.g9A,useValue:function(){Za.makeCurrent(),rc.init()},multi:!0},{provide:we,useFactory:function(){return(0,I.RDi)(document),document},deps:[]}]),Bh=[[],{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function(){return new I.qLn},deps:[]},{provide:sc,useClass:lc,multi:!0,deps:[we,I.R0b,I.Lbi]},{provide:sc,useClass:Wv,multi:!0,deps:[we]},[],{provide:Po,useClass:Po,deps:[Se,Dn,I.AFp]},{provide:I.FYo,useExisting:Po},{provide:Tl,useExisting:Dn},{provide:Dn,useClass:Dn,deps:[we]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b]},{provide:Se,useClass:Se,deps:[sc,I.R0b]},{provide:class{},useClass:us,deps:[]},[]];let qv=(()=>{class t{constructor(i){if(i)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(i){return{ngModule:t,providers:[{provide:I.AFp,useValue:i.appId},{provide:Cn,useExisting:I.AFp},bi]}}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(t,12))},t.\u0275mod=I.oAB({type:t}),t.\u0275inj=I.cJS({providers:Bh,imports:[Fh,I.hGG]}),t})();"undefined"!=typeof window&&window;var yn=G(4402),tt=G(5917),Ei=G(9765),Nl=G(7971);class ii extends Ei.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const i=super._subscribe(e);return i&&!i.closed&&e.next(this._value),i}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Nl.N;return this._value}next(e){super.next(this._value=e)}}var Wh=G(4869),Jp=G(9796),Hr=G(7393);class qh extends Hr.L{notifyNext(e,i,a,c,f){this.destination.next(i)}notifyError(e,i){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Pl extends Hr.L{constructor(e,i,a){super(),this.parent=e,this.outerValue=i,this.outerIndex=a,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ru=G(7444),rr=G(7574);function Zp(t,e,i,a,c=new Pl(t,i,a)){if(!c.closed)return e instanceof rr.y?e.subscribe(c):(0,ru.s)(e)(c)}var zh=G(6693);const mc={};class Kv{constructor(e){this.resultSelector=e}call(e,i){return i.subscribe(new Kh(e,this.resultSelector))}}class Kh extends qh{constructor(e,i){super(e),this.resultSelector=i,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(mc),this.observables.push(e)}_complete(){const e=this.observables,i=e.length;if(0===i)this.destination.complete();else{this.active=i,this.toRespond=i;for(let a=0;a<i;a++)this.add(Zp(this,e[a],void 0,a))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,i,a){const c=this.values,v=this.toRespond?c[a]===mc?--this.toRespond:this.toRespond:0;c[a]=i,0===v&&(this.resultSelector?this._tryResultSelector(c):this.destination.next(c.slice()))}_tryResultSelector(e){let i;try{i=this.resultSelector.apply(this,e)}catch(a){return void this.destination.error(a)}this.destination.next(i)}}const Oo=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Fo=G(3282);function ko(...t){return(0,Fo.J)(1)((0,tt.of)(...t))}var oi=G(9193);function Lo(t){return new rr.y(e=>{let i;try{i=t()}catch(c){return void e.error(c)}return(i?(0,yn.D)(i):(0,oi.c)()).subscribe(e)})}var Qv=G(2441),Dt=G(8002),ua=G(5345);function rn(t,e){return"function"==typeof e?i=>i.pipe(rn((a,c)=>(0,yn.D)(t(a,c)).pipe((0,Dt.U)((f,v)=>e(a,f,c,v))))):i=>i.lift(new eg(t))}class eg{constructor(e){this.project=e}call(e,i){return i.subscribe(new Rn(e,this.project))}}class Rn extends ua.Ds{constructor(e,i){super(e),this.project=i,this.index=0}_next(e){let i;const a=this.index++;try{i=this.project(e,a)}catch(c){return void this.destination.error(c)}this._innerSub(i)}_innerSub(e){const i=this.innerSubscription;i&&i.unsubscribe();const a=new ua.IY(this),c=this.destination;c.add(a),this.innerSubscription=(0,ua.ft)(e,a),this.innerSubscription!==a&&c.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Qh=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Ml(t){return e=>0===t?(0,oi.c)():e.lift(new Yv(t))}class Yv{constructor(e){if(this.total=e,this.total<0)throw new Qh}call(e,i){return i.subscribe(new hw(e,this.total))}}class hw extends Hr.L{constructor(e,i){super(e),this.total=i,this.count=0}_next(e){const i=this.total,a=++this.count;a<=i&&(this.destination.next(e),a===i&&(this.destination.complete(),this.unsubscribe()))}}function Yh(...t){const e=t[t.length-1];return(0,Wh.K)(e)?(t.pop(),i=>ko(t,i,e)):i=>ko(t,i)}function ca(t,e){let i=!1;return arguments.length>=2&&(i=!0),function(c){return c.lift(new la(t,e,i))}}class la{constructor(e,i,a=!1){this.accumulator=e,this.seed=i,this.hasSeed=a}call(e,i){return i.subscribe(new Jv(e,this.accumulator,this.seed,this.hasSeed))}}class Jv extends Hr.L{constructor(e,i,a,c){super(e),this.accumulator=i,this._seed=a,this.hasSeed=c,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const i=this.index++;let a;try{a=this.accumulator(this.seed,e,i)}catch(c){this.destination.error(c)}this.seed=a,this.destination.next(a)}}function Vo(t,e){return function(a){return a.lift(new fa(t,e))}}class fa{constructor(e,i){this.predicate=e,this.thisArg=i}call(e,i){return i.subscribe(new vs(e,this.predicate,this.thisArg))}}class vs extends Hr.L{constructor(e,i,a){super(e),this.predicate=i,this.thisArg=a,this.count=0}_next(e){let i;try{i=this.predicate.call(this.thisArg,e,this.count++)}catch(a){return void this.destination.error(a)}i&&this.destination.next(e)}}function oo(t){return function(i){const a=new qn(t),c=i.lift(a);return a.caught=c}}class qn{constructor(e){this.selector=e}call(e,i){return i.subscribe(new Ol(e,this.selector,this.caught))}}class Ol extends ua.Ds{constructor(e,i,a){super(e),this.selector=i,this.caught=a}error(e){if(!this.isStopped){let i;try{i=this.selector(e,this.caught)}catch(f){return void super.error(f)}this._unsubscribeAndRecycle();const a=new ua.IY(this);this.add(a);const c=(0,ua.ft)(i,a);c!==a&&this.add(c)}}}var Mn=G(9773);function vc(t,e){return(0,Mn.zg)(t,e,1)}function yc(t){return function(i){return 0===t?(0,oi.c)():i.lift(new Ci(t))}}class Ci{constructor(e){if(this.total=e,this.total<0)throw new Qh}call(e,i){return i.subscribe(new pr(e,this.total))}}class pr extends Hr.L{constructor(e,i){super(e),this.total=i,this.ring=new Array,this.count=0}_next(e){const i=this.ring,a=this.total,c=this.count++;i.length<a?i.push(e):i[c%a]=e}_complete(){const e=this.destination;let i=this.count;if(i>0){const a=this.count>=this.total?this.total:this.count,c=this.ring;for(let f=0;f<a;f++){const v=i++%a;e.next(c[v])}}e.complete()}}function Uo(t=tg){return e=>e.lift(new ha(t))}class ha{constructor(e){this.errorFactory=e}call(e,i){return i.subscribe(new ys(e,this.errorFactory))}}class ys extends Hr.L{constructor(e,i){super(e),this.errorFactory=i,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(i){e=i}this.destination.error(e)}}}function tg(){return new Oo}function _c(t=null){return e=>e.lift(new Zv(t))}class Zv{constructor(e){this.defaultValue=e}call(e,i){return i.subscribe(new dw(e,this.defaultValue))}}class dw extends Hr.L{constructor(e,i){super(e),this.defaultValue=i,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ng=G(4487);function zn(t,e){const i=arguments.length>=2;return a=>a.pipe(t?Vo((c,f)=>t(c,f,a)):ng.y,Ml(1),i?_c(e):Uo(()=>new Oo))}var Vn=G(3342),da=G(1307),rg=G(5319);class Fl{constructor(e){this.callback=e}call(e,i){return i.subscribe(new kl(e,this.callback))}}class kl extends Hr.L{constructor(e,i){super(e),this.add(new rg.w(i))}}class ji{constructor(e,i){this.id=e,this.url=i}}class wc extends ji{constructor(e,i,a="imperative",c=null){super(e,i),this.navigationTrigger=a,this.restoredState=c}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pa extends ji{constructor(e,i,a){super(e,i),this.urlAfterRedirects=a}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class su extends ji{constructor(e,i,a){super(e,i),this.reason=a}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ga extends ji{constructor(e,i,a){super(e,i),this.error=a}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ll extends ji{constructor(e,i,a,c){super(e,i),this.urlAfterRedirects=a,this.state=c}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pw extends ji{constructor(e,i,a,c){super(e,i),this.urlAfterRedirects=a,this.state=c}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ec extends ji{constructor(e,i,a,c,f){super(e,i),this.urlAfterRedirects=a,this.state=c,this.shouldActivate=f}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Zh extends ji{constructor(e,i,a,c){super(e,i),this.urlAfterRedirects=a,this.state=c}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class au extends ji{constructor(e,i,a,c){super(e,i),this.urlAfterRedirects=a,this.state=c}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ig{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xh{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xv{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ed{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ey{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _s{constructor(e,i,a){this.routerEvent=e,this.position=i,this.anchor=a}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const yt="primary";class Vl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){const i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}}function Qt(t){return new Vl(t)}const Dc="ngNavigationCancelingError";function td(t){const e=Error("NavigationCancelingError: "+t);return e[Dc]=!0,e}function bs(t,e,i){const a=i.path.split("/");if(a.length>t.length||"full"===i.pathMatch&&(e.hasChildren()||a.length<t.length))return null;const c={};for(let f=0;f<a.length;f++){const v=a[f],_=t[f];if(v.startsWith(":"))c[v.substring(1)]=_;else if(v!==_.path)return null}return{consumed:t.slice(0,a.length),posParams:c}}function Bi(t,e){const i=t?Object.keys(t):void 0,a=e?Object.keys(e):void 0;if(!i||!a||i.length!=a.length)return!1;let c;for(let f=0;f<i.length;f++)if(c=i[f],!va(t[c],e[c]))return!1;return!0}function va(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const i=[...t].sort(),a=[...e].sort();return i.every((c,f)=>a[f]===c)}return t===e}function nd(t){return Array.prototype.concat.apply([],t)}function ya(t){return t.length>0?t[t.length-1]:null}function Un(t,e){for(const i in t)t.hasOwnProperty(i)&&e(t[i],i)}function Kn(t){return(0,I.CqO)(t)?t:(0,I.QGY)(t)?(0,yn.D)(Promise.resolve(t)):(0,tt.of)(t)}const rd={exact:function uu(t,e,i){if(!Ds(t.segments,e.segments)||!Bl(t.segments,e.segments,i)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const a in e.children)if(!t.children[a]||!uu(t.children[a],e.children[a],i))return!1;return!0},subset:Es},jl={exact:function(t,e){return Bi(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(i=>va(t[i],e[i]))},ignored:()=>!0};function jo(t,e,i){return rd[i.paths](t.root,e.root,i.matrixParams)&&jl[i.queryParams](t.queryParams,e.queryParams)&&!("exact"===i.fragment&&t.fragment!==e.fragment)}function Es(t,e,i){return Cs(t,e,e.segments,i)}function Cs(t,e,i,a){if(t.segments.length>i.length){const c=t.segments.slice(0,i.length);return!(!Ds(c,i)||e.hasChildren()||!Bl(c,i,a))}if(t.segments.length===i.length){if(!Ds(t.segments,i)||!Bl(t.segments,i,a))return!1;for(const c in e.children)if(!t.children[c]||!Es(t.children[c],e.children[c],a))return!1;return!0}{const c=i.slice(0,t.segments.length),f=i.slice(t.segments.length);return!!(Ds(t.segments,c)&&Bl(t.segments,c,a)&&t.children[yt])&&Cs(t.children[yt],e,f,a)}}function Bl(t,e,i){return e.every((a,c)=>jl[i](t[c].parameters,a.parameters))}class so{constructor(e,i,a){this.root=e,this.queryParams=i,this.fragment=a}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qt(this.queryParams)),this._queryParamMap}toString(){return Tc.serialize(this)}}class Rt{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Un(i,(a,c)=>a.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jn(this)}}class Ic{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap||(this._parameterMap=Qt(this.parameters)),this._parameterMap}toString(){return _a(this)}}function Ds(t,e){return t.length===e.length&&t.every((i,a)=>i.path===e[a].path)}class id{}class Is{parse(e){const i=new ug(e);return new so(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){var t;return`${`/${cu(e.root,!0)}`}${function(t){const e=Object.keys(t).map(i=>{const a=t[i];return Array.isArray(a)?a.map(c=>`${Hl(i)}=${Hl(c)}`).join("&"):`${Hl(i)}=${Hl(a)}`}).filter(i=>!!i);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const Tc=new Is;function jn(t){return t.segments.map(e=>_a(e)).join("/")}function cu(t,e){if(!t.hasChildren())return jn(t);if(e){const i=t.children[yt]?cu(t.children[yt],!1):"",a=[];return Un(t.children,(c,f)=>{f!==yt&&a.push(`${f}:${cu(c,!1)}`)}),a.length>0?`${i}(${a.join("//")})`:i}{const i=function(t,e){let i=[];return Un(t.children,(a,c)=>{c===yt&&(i=i.concat(e(a,c)))}),Un(t.children,(a,c)=>{c!==yt&&(i=i.concat(e(a,c)))}),i}(t,(a,c)=>c===yt?[cu(t.children[yt],!1)]:[`${c}:${cu(a,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[yt]?`${jn(t)}/${i[0]}`:`${jn(t)}/(${i.join("//")})`}}function sg(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hl(t){return sg(t).replace(/%3B/gi,";")}function Sc(t){return sg(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ac(t){return decodeURIComponent(t)}function $l(t){return Ac(t.replace(/\+/g,"%20"))}function _a(t){return`${Sc(t.path)}${function(t){return Object.keys(t).map(e=>`;${Sc(e)}=${Sc(t[e])}`).join("")}(t.parameters)}`}const ag=/^[^\/()?;=#]+/;function Wl(t){const e=t.match(ag);return e?e[0]:""}const od=/^[^=?&#]+/,Bo=/^[^?&#]+/;class ug{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(a[yt]=new Rt(e,i)),a}parseSegment(){const e=Wl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ic(Ac(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const i=Wl(this.remaining);if(!i)return;this.capture(i);let a="";if(this.consumeOptional("=")){const c=Wl(this.remaining);c&&(a=c,this.capture(a))}e[Ac(i)]=Ac(a)}parseQueryParam(e){const i=function(t){const e=t.match(od);return e?e[0]:""}(this.remaining);if(!i)return;this.capture(i);let a="";if(this.consumeOptional("=")){const v=function(t){const e=t.match(Bo);return e?e[0]:""}(this.remaining);v&&(a=v,this.capture(a))}const c=$l(i),f=$l(a);if(e.hasOwnProperty(c)){let v=e[c];Array.isArray(v)||(v=[v],e[c]=v),v.push(f)}else e[c]=f}parseParens(e){const i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const a=Wl(this.remaining),c=this.remaining[a.length];if("/"!==c&&")"!==c&&";"!==c)throw new Error(`Cannot parse url '${this.url}'`);let f;a.indexOf(":")>-1?(f=a.substr(0,a.indexOf(":")),this.capture(f),this.capture(":")):e&&(f=yt);const v=this.parseChildren();i[f]=1===Object.keys(v).length?v[yt]:new Rt([],v),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class cg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){const i=sd(e,this._root);return i?i.children.map(a=>a.value):[]}firstChild(e){const i=sd(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){const i=zl(e,this._root);return i.length<2?[]:i[i.length-2].children.map(c=>c.value).filter(c=>c!==e)}pathFromRoot(e){return zl(e,this._root).map(i=>i.value)}}function sd(t,e){if(t===e.value)return e;for(const i of e.children){const a=sd(t,i);if(a)return a}return null}function zl(t,e){if(t===e.value)return[e];for(const i of e.children){const a=zl(t,i);if(a.length)return a.unshift(e),a}return[]}class Ho{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}}function Rc(t){const e={};return t&&t.children.forEach(i=>e[i.value.outlet]=i),e}class ad extends cg{constructor(e,i){super(e),this.snapshot=i,Ql(this,e)}toString(){return this.snapshot.toString()}}function Kl(t,e){const i=function(t,e){const v=new Go([],{},{},"",{},yt,e,null,t.root,-1,{});return new si("",new Ho(v,[]))}(t,e),a=new ii([new Ic("",{})]),c=new ii({}),f=new ii({}),v=new ii({}),_=new ii(""),C=new lu(a,c,v,_,f,yt,e,i.root);return C.snapshot=i.root,new ad(new Ho(C,[]),i)}class lu{constructor(e,i,a,c,f,v,_,C){this.url=e,this.params=i,this.queryParams=a,this.fragment=c,this.data=f,this.outlet=v,this.component=_,this._futureSnapshot=C}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(e=>Qt(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(e=>Qt(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fg(t,e="emptyOnly"){const i=t.pathFromRoot;let a=0;if("always"!==e)for(a=i.length-1;a>=1;){const c=i[a],f=i[a-1];if(c.routeConfig&&""===c.routeConfig.path)a--;else{if(f.component)break;a--}}return function(t){return t.reduce((e,i)=>({params:Object.assign(Object.assign({},e.params),i.params),data:Object.assign(Object.assign({},e.data),i.data),resolve:Object.assign(Object.assign({},e.resolve),i._resolvedData)}),{params:{},data:{},resolve:{}})}(i.slice(a))}class Go{constructor(e,i,a,c,f,v,_,C,A,x,P){this.url=e,this.params=i,this.queryParams=a,this.fragment=c,this.data=f,this.outlet=v,this.component=_,this.routeConfig=C,this._urlSegment=A,this._lastPathIndex=x,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(a=>a.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class si extends cg{constructor(e,i){super(i),this.url=e,Ql(this,i)}toString(){return ai(this._root)}}function Ql(t,e){e.value._routerState=t,e.children.forEach(i=>Ql(t,i))}function ai(t){const e=t.children.length>0?` { ${t.children.map(ai).join(", ")} } `:"";return`${t.value}${e}`}function ao(t){if(t.snapshot){const e=t.snapshot,i=t._futureSnapshot;t.snapshot=i,Bi(e.queryParams,i.queryParams)||t.queryParams.next(i.queryParams),e.fragment!==i.fragment&&t.fragment.next(i.fragment),Bi(e.params,i.params)||t.params.next(i.params),function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Bi(t[i],e[i]))return!1;return!0}(e.url,i.url)||t.url.next(i.url),Bi(e.data,i.data)||t.data.next(i.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Yl(t,e){return Bi(t.params,e.params)&&function(t,e){return Ds(t,e)&&t.every((i,a)=>Bi(i.parameters,e[a].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Yl(t.parent,e.parent))}function xc(t,e,i){if(i&&t.shouldReuseRoute(e.value,i.value.snapshot)){const a=i.value;a._futureSnapshot=e.value;const c=function(t,e,i){return e.children.map(a=>{for(const c of i.children)if(t.shouldReuseRoute(a.value,c.value.snapshot))return xc(t,a,c);return xc(t,a)})}(t,e,i);return new Ho(a,c)}{if(t.shouldAttach(e.value)){const f=t.retrieve(e.value);if(null!==f){const v=f.route;return hg(e,v),v}}const a=function(t){return new lu(new ii(t.url),new ii(t.params),new ii(t.queryParams),new ii(t.fragment),new ii(t.data),t.outlet,t.component,t)}(e.value),c=e.children.map(f=>xc(t,f));return new Ho(a,c)}}function hg(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let i=0;i<t.children.length;++i)hg(t.children[i],e.children[i])}function As(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function $o(t){return"object"==typeof t&&null!=t&&t.outlets}function dg(t,e,i,a,c){let f={};return a&&Un(a,(v,_)=>{f[_]=Array.isArray(v)?v.map(C=>`${C}`):`${v}`}),new so(i.root===t?e:sy(i.root,t,e),f,c)}function sy(t,e,i){const a={};return Un(t.children,(c,f)=>{a[f]=c===e?i:sy(c,e,i)}),new Rt(t.segments,a)}class Nc{constructor(e,i,a){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=a,e&&a.length>0&&As(a[0]))throw new Error("Root segment cannot have matrix parameters");const c=a.find($o);if(c&&c!==ya(a))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jl{constructor(e,i,a){this.segmentGroup=e,this.processChildren=i,this.index=a}}function br(t,e,i){if(t||(t=new Rt([],{})),0===t.segments.length&&t.hasChildren())return Rs(t,e,i);const a=function(t,e,i){let a=0,c=e;const f={match:!1,pathIndex:0,commandIndex:0};for(;c<t.segments.length;){if(a>=i.length)return f;const v=t.segments[c],_=i[a];if($o(_))break;const C=`${_}`,A=a<i.length-1?i[a+1]:null;if(c>0&&void 0===C)break;if(C&&A&&"object"==typeof A&&void 0===A.outlets){if(!ud(C,A,v))return f;a+=2}else{if(!ud(C,{},v))return f;a++}c++}return{match:!0,pathIndex:c,commandIndex:a}}(t,e,i),c=i.slice(a.commandIndex);if(a.match&&a.pathIndex<t.segments.length){const f=new Rt(t.segments.slice(0,a.pathIndex),{});return f.children[yt]=new Rt(t.segments.slice(a.pathIndex),t.children),Rs(f,0,c)}return a.match&&0===c.length?new Rt(t.segments,{}):a.match&&!t.hasChildren()?hu(t,e,i):a.match?Rs(t,0,c):hu(t,e,i)}function Rs(t,e,i){if(0===i.length)return new Rt(t.segments,{});{const a=function(t){return $o(t[0])?t[0].outlets:{[yt]:t}}(i),c={};return Un(a,(f,v)=>{"string"==typeof f&&(f=[f]),null!==f&&(c[v]=br(t.children[v],e,f))}),Un(t.children,(f,v)=>{void 0===a[v]&&(c[v]=f)}),new Rt(t.segments,c)}}function hu(t,e,i){const a=t.segments.slice(0,e);let c=0;for(;c<i.length;){const f=i[c];if($o(f)){const C=Yt(f.outlets);return new Rt(a,C)}if(0===c&&As(i[0])){a.push(new Ic(t.segments[e].path,Pc(i[0]))),c++;continue}const v=$o(f)?f.outlets[yt]:`${f}`,_=c<i.length-1?i[c+1]:null;v&&_&&As(_)?(a.push(new Ic(v,Pc(_))),c+=2):(a.push(new Ic(v,{})),c++)}return new Rt(a,{})}function Yt(t){const e={};return Un(t,(i,a)=>{"string"==typeof i&&(i=[i]),null!==i&&(e[a]=hu(new Rt([],{}),0,i))}),e}function Pc(t){const e={};return Un(t,(i,a)=>e[a]=`${i}`),e}function ud(t,e,i){return t==i.path&&Bi(e,i.parameters)}class xs{constructor(e,i,a,c){this.routeReuseStrategy=e,this.futureState=i,this.currState=a,this.forwardEvent=c}activate(e){const i=this.futureState._root,a=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,a,e),ao(this.futureState.root),this.activateChildRoutes(i,a,e)}deactivateChildRoutes(e,i,a){const c=Rc(i);e.children.forEach(f=>{const v=f.value.outlet;this.deactivateRoutes(f,c[v],a),delete c[v]}),Un(c,(f,v)=>{this.deactivateRouteAndItsChildren(f,a)})}deactivateRoutes(e,i,a){const c=e.value,f=i?i.value:null;if(c===f)if(c.component){const v=a.getContext(c.outlet);v&&this.deactivateChildRoutes(e,i,v.children)}else this.deactivateChildRoutes(e,i,a);else f&&this.deactivateRouteAndItsChildren(i,a)}deactivateRouteAndItsChildren(e,i){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){const a=i.getContext(e.value.outlet);if(a&&a.outlet){const c=a.outlet.detach(),f=a.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,i){const a=i.getContext(e.value.outlet),c=a&&e.value.component?a.children:i,f=Rc(e);for(const v of Object.keys(f))this.deactivateRouteAndItsChildren(f[v],c);a&&a.outlet&&(a.outlet.deactivate(),a.children.onOutletDeactivated(),a.attachRef=null,a.resolver=null,a.route=null)}activateChildRoutes(e,i,a){const c=Rc(i);e.children.forEach(f=>{this.activateRoutes(f,c[f.value.outlet],a),this.forwardEvent(new Cc(f.value.snapshot))}),e.children.length&&this.forwardEvent(new ed(e.value.snapshot))}activateRoutes(e,i,a){const c=e.value,f=i?i.value:null;if(ao(c),c===f)if(c.component){const v=a.getOrCreateContext(c.outlet);this.activateChildRoutes(e,i,v.children)}else this.activateChildRoutes(e,i,a);else if(c.component){const v=a.getOrCreateContext(c.outlet);if(this.routeReuseStrategy.shouldAttach(c.snapshot)){const _=this.routeReuseStrategy.retrieve(c.snapshot);this.routeReuseStrategy.store(c.snapshot,null),v.children.onOutletReAttached(_.contexts),v.attachRef=_.componentRef,v.route=_.route.value,v.outlet&&v.outlet.attach(_.componentRef,_.route.value),vg(_.route)}else{const _=function(t){for(let e=t.parent;e;e=e.parent){const i=e.routeConfig;if(i&&i._loadedConfig)return i._loadedConfig;if(i&&i.component)return null}return null}(c.snapshot),C=_?_.module.componentFactoryResolver:null;v.attachRef=null,v.route=c,v.resolver=C,v.outlet&&v.outlet.activateWith(c,C),this.activateChildRoutes(e,null,v.children)}}else this.activateChildRoutes(e,null,a)}}function vg(t){ao(t.value),t.children.forEach(vg)}class Mc{constructor(e,i){this.routes=e,this.module=i}}function Ns(t){return"function"==typeof t}function du(t){return t instanceof so}const Ps=Symbol("INITIAL_VALUE");function Ea(){return rn(t=>function(...t){let e,i;return(0,Wh.K)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Jp.k)(t[0])&&(t=t[0]),(0,zh.n)(t,i).lift(new Kv(e))}(t.map(e=>e.pipe(Ml(1),Yh(Ps)))).pipe(ca((e,i)=>{let a=!1;return i.reduce((c,f,v)=>c!==Ps?c:(f===Ps&&(a=!0),a||!1!==f&&v!==i.length-1&&!du(f)?c:f),e)},Ps),Vo(e=>e!==Ps),(0,Dt.U)(e=>du(e)?e:!0===e),Ml(1)))}let ir=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=I.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,a){1&i&&I._UZ(0,"router-outlet")},directives:function(){return[_t]},encapsulation:2}),t})();function Ca(t,e=""){for(let i=0;i<t.length;i++){const a=t[i];Xl(a,yg(e,a))}}function Xl(t,e){t.children&&Ca(t.children,e)}function yg(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ui(t){const e=t.children&&t.children.map(ui),i=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!i.component&&(e||i.loadChildren)&&i.outlet&&i.outlet!==yt&&(i.component=ir),i}function Gr(t){return t.outlet||yt}function _g(t,e){const i=t.filter(a=>Gr(a)===e);return i.push(...t.filter(a=>Gr(a)!==e)),i}const cd={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ef(t,e,i){var a;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||i.length>0)?Object.assign({},cd):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const f=(e.matcher||bs)(i,t,e);if(!f)return Object.assign({},cd);const v={};Un(f.posParams,(C,A)=>{v[A]=C.path});const _=f.consumed.length>0?Object.assign(Object.assign({},v),f.consumed[f.consumed.length-1].parameters):v;return{matched:!0,consumedSegments:f.consumed,lastChild:f.consumed.length,parameters:_,positionalParamSegments:null!==(a=f.posParams)&&void 0!==a?a:{}}}function gu(t,e,i,a,c="corrected"){if(i.length>0&&function(t,e,i){return i.some(a=>mu(t,e,a)&&Gr(a)!==yt)}(t,i,a)){const v=new Rt(e,function(t,e,i,a){const c={};c[yt]=a,a._sourceSegment=t,a._segmentIndexShift=e.length;for(const f of i)if(""===f.path&&Gr(f)!==yt){const v=new Rt([],{});v._sourceSegment=t,v._segmentIndexShift=e.length,c[Gr(f)]=v}return c}(t,e,a,new Rt(i,t.children)));return v._sourceSegment=t,v._segmentIndexShift=e.length,{segmentGroup:v,slicedSegments:[]}}if(0===i.length&&function(t,e,i){return i.some(a=>mu(t,e,a))}(t,i,a)){const v=new Rt(t.segments,function(t,e,i,a,c,f){const v={};for(const _ of a)if(mu(t,i,_)&&!c[Gr(_)]){const C=new Rt([],{});C._sourceSegment=t,C._segmentIndexShift="legacy"===f?t.segments.length:e.length,v[Gr(_)]=C}return Object.assign(Object.assign({},c),v)}(t,e,i,a,t.children,c));return v._sourceSegment=t,v._segmentIndexShift=e.length,{segmentGroup:v,slicedSegments:i}}const f=new Rt(t.segments,t.children);return f._sourceSegment=t,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:i}}function mu(t,e,i){return(!(t.hasChildren()||e.length>0)||"full"!==i.pathMatch)&&""===i.path}function ld(t,e,i,a){return!!(Gr(t)===a||a!==yt&&mu(e,i,t))&&("**"===t.path||ef(e,t,i).matched)}function wg(t,e,i){return 0===e.length&&!t.children[i]}class tf{constructor(e){this.segmentGroup=e||null}}class fd{constructor(e){this.urlTree=e}}function Da(t){return new rr.y(e=>e.error(new tf(t)))}function Eg(t){return new rr.y(e=>e.error(new fd(t)))}function dy(t){return new rr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class gy{constructor(e,i,a,c,f){this.configLoader=i,this.urlSerializer=a,this.urlTree=c,this.config=f,this.allowRedirects=!0,this.ngModule=e.get(I.h0i)}apply(){const e=gu(this.urlTree.root,[],[],this.config).segmentGroup,i=new Rt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,i,yt).pipe((0,Dt.U)(f=>this.createUrlTree(hd(f),this.urlTree.queryParams,this.urlTree.fragment))).pipe(oo(f=>{if(f instanceof fd)return this.allowRedirects=!1,this.match(f.urlTree);throw f instanceof tf?this.noMatchError(f):f}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,yt).pipe((0,Dt.U)(c=>this.createUrlTree(hd(c),e.queryParams,e.fragment))).pipe(oo(c=>{throw c instanceof tf?this.noMatchError(c):c}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,i,a){const c=e.segments.length>0?new Rt([],{[yt]:e}):e;return new so(c,i,a)}expandSegmentGroup(e,i,a,c){return 0===a.segments.length&&a.hasChildren()?this.expandChildren(e,i,a).pipe((0,Dt.U)(f=>new Rt([],f))):this.expandSegment(e,a,i,a.segments,c,!0)}expandChildren(e,i,a){const c=[];for(const f of Object.keys(a.children))"primary"===f?c.unshift(f):c.push(f);return(0,yn.D)(c).pipe(vc(f=>{const v=a.children[f],_=_g(i,f);return this.expandSegmentGroup(e,_,v,f).pipe((0,Dt.U)(C=>({segment:C,outlet:f})))}),ca((f,v)=>(f[v.outlet]=v.segment,f),{}),function(t,e){const i=arguments.length>=2;return a=>a.pipe(t?Vo((c,f)=>t(c,f,a)):ng.y,yc(1),i?_c(e):Uo(()=>new Oo))}())}expandSegment(e,i,a,c,f,v){return(0,yn.D)(a).pipe(vc(_=>this.expandSegmentAgainstRoute(e,i,a,_,c,f,v).pipe(oo(A=>{if(A instanceof tf)return(0,tt.of)(null);throw A}))),zn(_=>!!_),oo((_,C)=>{if(_ instanceof Oo||"EmptyError"===_.name){if(wg(i,c,f))return(0,tt.of)(new Rt([],{}));throw new tf(i)}throw _}))}expandSegmentAgainstRoute(e,i,a,c,f,v,_){return ld(c,i,f,v)?void 0===c.redirectTo?this.matchSegmentAgainstRoute(e,i,c,f,v):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,a,c,f,v):Da(i):Da(i)}expandSegmentAgainstRouteUsingRedirect(e,i,a,c,f,v){return"**"===c.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,a,c,v):this.expandRegularSegmentAgainstRouteUsingRedirect(e,i,a,c,f,v)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,a,c){const f=this.applyRedirectCommands([],a.redirectTo,{});return a.redirectTo.startsWith("/")?Eg(f):this.lineralizeSegments(a,f).pipe((0,Mn.zg)(v=>{const _=new Rt(v,{});return this.expandSegment(e,_,i,v,c,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,i,a,c,f,v){const{matched:_,consumedSegments:C,lastChild:A,positionalParamSegments:x}=ef(i,c,f);if(!_)return Da(i);const P=this.applyRedirectCommands(C,c.redirectTo,x);return c.redirectTo.startsWith("/")?Eg(P):this.lineralizeSegments(c,P).pipe((0,Mn.zg)(V=>this.expandSegment(e,i,a,V.concat(f.slice(A)),v,!1)))}matchSegmentAgainstRoute(e,i,a,c,f){if("**"===a.path)return a.loadChildren?(a._loadedConfig?(0,tt.of)(a._loadedConfig):this.configLoader.load(e.injector,a)).pipe((0,Dt.U)(V=>(a._loadedConfig=V,new Rt(c,{})))):(0,tt.of)(new Rt(c,{}));const{matched:v,consumedSegments:_,lastChild:C}=ef(i,a,c);if(!v)return Da(i);const A=c.slice(C);return this.getChildConfig(e,a,c).pipe((0,Mn.zg)(P=>{const V=P.module,H=P.routes,{segmentGroup:K,slicedSegments:ne}=gu(i,_,A,H),_e=new Rt(K.segments,K.children);if(0===ne.length&&_e.hasChildren())return this.expandChildren(V,H,_e).pipe((0,Dt.U)(Xe=>new Rt(_,Xe)));if(0===H.length&&0===ne.length)return(0,tt.of)(new Rt(_,{}));const Ie=Gr(a)===f;return this.expandSegment(V,_e,H,ne,Ie?yt:f,!0).pipe((0,Dt.U)(ke=>new Rt(_.concat(ke.segments),ke.children)))}))}getChildConfig(e,i,a){return i.children?(0,tt.of)(new Mc(i.children,e)):i.loadChildren?void 0!==i._loadedConfig?(0,tt.of)(i._loadedConfig):this.runCanLoadGuards(e.injector,i,a).pipe((0,Mn.zg)(c=>{return c?this.configLoader.load(e.injector,i).pipe((0,Dt.U)(f=>(i._loadedConfig=f,f))):(t=i,new rr.y(e=>e.error(td(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`))));var t})):(0,tt.of)(new Mc([],e))}runCanLoadGuards(e,i,a){const c=i.canLoad;if(!c||0===c.length)return(0,tt.of)(!0);const f=c.map(v=>{const _=e.get(v);let C;if((t=_)&&Ns(t.canLoad))C=_.canLoad(i,a);else{if(!Ns(_))throw new Error("Invalid CanLoad guard");C=_(i,a)}var t;return Kn(C)});return(0,tt.of)(f).pipe(Ea(),(0,Vn.b)(v=>{if(!du(v))return;const _=td(`Redirecting to "${this.urlSerializer.serialize(v)}"`);throw _.url=v,_}),(0,Dt.U)(v=>!0===v))}lineralizeSegments(e,i){let a=[],c=i.root;for(;;){if(a=a.concat(c.segments),0===c.numberOfChildren)return(0,tt.of)(a);if(c.numberOfChildren>1||!c.children[yt])return dy(e.redirectTo);c=c.children[yt]}}applyRedirectCommands(e,i,a){return this.applyRedirectCreatreUrlTree(i,this.urlSerializer.parse(i),e,a)}applyRedirectCreatreUrlTree(e,i,a,c){const f=this.createSegmentGroup(e,i.root,a,c);return new so(f,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){const a={};return Un(e,(c,f)=>{if("string"==typeof c&&c.startsWith(":")){const _=c.substring(1);a[f]=i[_]}else a[f]=c}),a}createSegmentGroup(e,i,a,c){const f=this.createSegments(e,i.segments,a,c);let v={};return Un(i.children,(_,C)=>{v[C]=this.createSegmentGroup(e,_,a,c)}),new Rt(f,v)}createSegments(e,i,a,c){return i.map(f=>f.path.startsWith(":")?this.findPosParam(e,f,c):this.findOrReturn(f,a))}findPosParam(e,i,a){const c=a[i.path.substring(1)];if(!c)throw new Error(`Cannot redirect to '${e}'. Cannot find '${i.path}'.`);return c}findOrReturn(e,i){let a=0;for(const c of i){if(c.path===e.path)return i.splice(a),c;a++}return e}}function hd(t){const e={};for(const a of Object.keys(t.children)){const f=hd(t.children[a]);(f.segments.length>0||f.hasChildren())&&(e[a]=f)}return function(t){if(1===t.numberOfChildren&&t.children[yt]){const e=t.children[yt];return new Rt(t.segments.concat(e.segments),e.children)}return t}(new Rt(t.segments,e))}class Oc{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gr{constructor(e,i){this.component=e,this.route=i}}function dd(t,e,i){const a=t._root;return nf(a,e?e._root:null,i,[a.value])}function Fc(t,e,i){const a=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const i=e.routeConfig;if(i&&i._loadedConfig)return i._loadedConfig}return null}(e);return(a?a.module.injector:i).get(t)}function nf(t,e,i,a,c={canDeactivateChecks:[],canActivateChecks:[]}){const f=Rc(e);return t.children.forEach(v=>{(function(t,e,i,a,c={canDeactivateChecks:[],canActivateChecks:[]}){const f=t.value,v=e?e.value:null,_=i?i.getContext(t.value.outlet):null;if(v&&f.routeConfig===v.routeConfig){const C=function(t,e,i){if("function"==typeof i)return i(t,e);switch(i){case"pathParamsChange":return!Ds(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ds(t.url,e.url)||!Bi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yl(t,e)||!Bi(t.queryParams,e.queryParams);case"paramsChange":default:return!Yl(t,e)}}(v,f,f.routeConfig.runGuardsAndResolvers);C?c.canActivateChecks.push(new Oc(a)):(f.data=v.data,f._resolvedData=v._resolvedData),nf(t,e,f.component?_?_.children:null:i,a,c),C&&_&&_.outlet&&_.outlet.isActivated&&c.canDeactivateChecks.push(new gr(_.outlet.component,v))}else v&&kc(e,_,c),c.canActivateChecks.push(new Oc(a)),nf(t,null,f.component?_?_.children:null:i,a,c)})(v,f[v.value.outlet],i,a.concat([v.value]),c),delete f[v.value.outlet]}),Un(f,(v,_)=>kc(v,i.getContext(_),c)),c}function kc(t,e,i){const a=Rc(t),c=t.value;Un(a,(f,v)=>{kc(f,c.component?e?e.children.getContext(v):null:e,i)}),i.canDeactivateChecks.push(new gr(c.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,c))}class pd{}function Ms(t){return new rr.y(e=>e.error(t))}class Os{constructor(e,i,a,c,f,v){this.rootComponentType=e,this.config=i,this.urlTree=a,this.url=c,this.paramsInheritanceStrategy=f,this.relativeLinkResolution=v}recognize(){const e=gu(this.urlTree.root,[],[],this.config.filter(v=>void 0===v.redirectTo),this.relativeLinkResolution).segmentGroup,i=this.processSegmentGroup(this.config,e,yt);if(null===i)return null;const a=new Go([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},yt,this.rootComponentType,null,this.urlTree.root,-1,{}),c=new Ho(a,i),f=new si(this.url,c);return this.inheritParamsAndData(f._root),f}inheritParamsAndData(e){const i=e.value,a=fg(i,this.paramsInheritanceStrategy);i.params=Object.freeze(a.params),i.data=Object.freeze(a.data),e.children.forEach(c=>this.inheritParamsAndData(c))}processSegmentGroup(e,i,a){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,i):this.processSegment(e,i,i.segments,a)}processChildren(e,i){const a=[];for(const f of Object.keys(i.children)){const v=i.children[f],_=_g(e,f),C=this.processSegmentGroup(_,v,f);if(null===C)return null;a.push(...C)}const c=rf(a);return c.sort((e,i)=>e.value.outlet===yt?-1:i.value.outlet===yt?1:e.value.outlet.localeCompare(i.value.outlet)),c}processSegment(e,i,a,c){for(const f of e){const v=this.processSegmentAgainstRoute(f,i,a,c);if(null!==v)return v}return wg(i,a,c)?[]:null}processSegmentAgainstRoute(e,i,a,c){if(e.redirectTo||!ld(e,i,a,c))return null;let f,v=[],_=[];if("**"===e.path){const H=a.length>0?ya(a).parameters:{};f=new Go(a,H,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ia(e),Gr(e),e.component,e,gd(i),by(i)+a.length,of(e))}else{const H=ef(i,e,a);if(!H.matched)return null;v=H.consumedSegments,_=a.slice(H.lastChild),f=new Go(v,H.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ia(e),Gr(e),e.component,e,gd(i),by(i)+v.length,of(e))}const C=(t=e).children?t.children:t.loadChildren?t._loadedConfig.routes:[],{segmentGroup:A,slicedSegments:x}=gu(i,v,_,C.filter(H=>void 0===H.redirectTo),this.relativeLinkResolution);var t;if(0===x.length&&A.hasChildren()){const H=this.processChildren(C,A);return null===H?null:[new Ho(f,H)]}if(0===C.length&&0===x.length)return[new Ho(f,[])];const P=Gr(e)===c,V=this.processSegment(C,A,x,P?yt:c);return null===V?null:[new Ho(f,V)]}}function Ag(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function rf(t){const e=[],i=new Set;for(const a of t){if(!Ag(a)){e.push(a);continue}const c=e.find(f=>a.value.routeConfig===f.value.routeConfig);void 0!==c?(c.children.push(...a.children),i.add(c)):e.push(a)}for(const a of i){const c=rf(a.children);e.push(new Ho(a.value,c))}return e.filter(a=>!i.has(a))}function gd(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function by(t){let e=t,i=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,i+=e._segmentIndexShift?e._segmentIndexShift:0;return i-1}function Ia(t){return t.data||{}}function of(t){return t.resolve||{}}function vd(t){return rn(e=>{const i=t(e);return i?(0,yn.D)(i).pipe((0,Dt.U)(()=>e)):(0,tt.of)(e)})}class Ty extends class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}}{}const sf=new I.OlP("ROUTES");class af{constructor(e,i,a,c){this.loader=e,this.compiler=i,this.onLoadStartListener=a,this.onLoadEndListener=c}load(e,i){if(i._loader$)return i._loader$;this.onLoadStartListener&&this.onLoadStartListener(i);const c=this.loadModuleFactory(i.loadChildren).pipe((0,Dt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(i);const v=f.create(e);return new Mc(nd(v.injector.get(sf,void 0,I.XFs.Self|I.XFs.Optional)).map(ui),v)}),oo(f=>{throw i._loader$=void 0,f}));return i._loader$=new Qv.c(c,()=>new Ei.xQ).pipe((0,da.x)()),i._loader$}loadModuleFactory(e){return"string"==typeof e?(0,yn.D)(this.loader.load(e)):Kn(e()).pipe((0,Mn.zg)(i=>i instanceof I.YKP?(0,tt.of)(i):(0,yn.D)(this.compiler.compileModuleAsync(i))))}}class d{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new h,this.attachRef=null}}class h{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const a=this.getOrCreateContext(e);a.outlet=i,this.contexts.set(e,a)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new d,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}class y{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}}function E(t){throw t}function T(t,e,i){return e.parse("/")}function R(t,e){return(0,tt.of)(null)}const O={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},L={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let B=(()=>{class t{constructor(i,a,c,f,v,_,C,A){this.rootComponentType=i,this.urlSerializer=a,this.rootContexts=c,this.location=f,this.config=A,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ei.xQ,this.errorHandler=E,this.malformedUriErrorHandler=T,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:R,afterPreactivation:R},this.urlHandlingStrategy=new y,this.routeReuseStrategy=new Ty,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=v.get(I.h0i),this.console=v.get(I.c2e);const V=v.get(I.R0b);this.isNgZoneEnabled=V instanceof I.R0b&&I.R0b.isInAngularZone(),this.resetConfig(A),this.currentUrlTree=new so(new Rt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new af(_,C,H=>this.triggerEvent(new ig(H)),H=>this.triggerEvent(new Xh(H))),this.routerState=Kl(this.currentUrlTree,this.rootComponentType),this.transitions=new ii({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var i;return null===(i=this.location.getState())||void 0===i?void 0:i.\u0275routerPageId}setupNavigations(i){const a=this.events;return i.pipe(Vo(c=>0!==c.id),(0,Dt.U)(c=>Object.assign(Object.assign({},c),{extractedUrl:this.urlHandlingStrategy.extract(c.rawUrl)})),rn(c=>{let f=!1,v=!1;return(0,tt.of)(c).pipe((0,Vn.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),rn(_=>{const C=this.browserUrlTree.toString(),A=!this.navigated||_.extractedUrl.toString()!==C||C!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||A)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return se(_.source)&&(this.browserUrlTree=_.extractedUrl),(0,tt.of)(_).pipe(rn(P=>{const V=this.transitions.getValue();return a.next(new wc(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),V!==this.transitions.getValue()?oi.E:Promise.resolve(P)}),function(t,e,i,a){return rn(c=>function(t,e,i,a,c){return new gy(t,e,i,a,c).apply()}(t,e,i,c.extractedUrl,a).pipe((0,Dt.U)(f=>Object.assign(Object.assign({},c),{urlAfterRedirects:f}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Vn.b)(P=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:P.urlAfterRedirects})}),function(t,e,i,a,c){return(0,Mn.zg)(f=>function(t,e,i,a,c="emptyOnly",f="legacy"){try{const v=new Os(t,e,i,a,c,f).recognize();return null===v?Ms(new pd):(0,tt.of)(v)}catch(v){return Ms(v)}}(t,e,f.urlAfterRedirects,i(f.urlAfterRedirects),a,c).pipe((0,Dt.U)(v=>Object.assign(Object.assign({},f),{targetSnapshot:v}))))}(this.rootComponentType,this.config,P=>this.serializeUrl(P),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Vn.b)(P=>{"eager"===this.urlUpdateStrategy&&(P.extras.skipLocationChange||this.setBrowserUrl(P.urlAfterRedirects,P),this.browserUrlTree=P.urlAfterRedirects);const V=new Ll(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);a.next(V)}));if(A&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:H,source:K,restoredState:ne,extras:_e}=_,Ie=new wc(V,this.serializeUrl(H),K,ne);a.next(Ie);const Fe=Kl(H,this.rootComponentType).snapshot;return(0,tt.of)(Object.assign(Object.assign({},_),{targetSnapshot:Fe,urlAfterRedirects:H,extras:Object.assign(Object.assign({},_e),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,this.browserUrlTree=_.urlAfterRedirects,_.resolve(null),oi.E}),vd(_=>{const{targetSnapshot:C,id:A,extractedUrl:x,rawUrl:P,extras:{skipLocationChange:V,replaceUrl:H}}=_;return this.hooks.beforePreactivation(C,{navigationId:A,appliedUrlTree:x,rawUrlTree:P,skipLocationChange:!!V,replaceUrl:!!H})}),(0,Vn.b)(_=>{const C=new pw(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(C)}),(0,Dt.U)(_=>Object.assign(Object.assign({},_),{guards:dd(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(t,e){return(0,Mn.zg)(i=>{const{targetSnapshot:a,currentSnapshot:c,guards:{canActivateChecks:f,canDeactivateChecks:v}}=i;return 0===v.length&&0===f.length?(0,tt.of)(Object.assign(Object.assign({},i),{guardsResult:!0})):function(t,e,i,a){return(0,yn.D)(t).pipe((0,Mn.zg)(c=>function(t,e,i,a,c){const f=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!f||0===f.length)return(0,tt.of)(!0);const v=f.map(_=>{const C=Fc(_,e,c);let A;if(function(t){return t&&Ns(t.canDeactivate)}(C))A=Kn(C.canDeactivate(t,e,i,a));else{if(!Ns(C))throw new Error("Invalid CanDeactivate guard");A=Kn(C(t,e,i,a))}return A.pipe(zn())});return(0,tt.of)(v).pipe(Ea())}(c.component,c.route,i,e,a)),zn(c=>!0!==c,!0))}(v,a,c,t).pipe((0,Mn.zg)(_=>_&&function(t){return"boolean"==typeof t}(_)?function(t,e,i,a){return(0,yn.D)(e).pipe(vc(c=>ko(function(t,e){return null!==t&&e&&e(new Xv(t)),(0,tt.of)(!0)}(c.route.parent,a),function(t,e){return null!==t&&e&&e(new ey(t)),(0,tt.of)(!0)}(c.route,a),function(t,e,i){const a=e[e.length-1],f=e.slice(0,e.length-1).reverse().map(v=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(v)).filter(v=>null!==v).map(v=>Lo(()=>{const _=v.guards.map(C=>{const A=Fc(C,v.node,i);let x;if(function(t){return t&&Ns(t.canActivateChild)}(A))x=Kn(A.canActivateChild(a,t));else{if(!Ns(A))throw new Error("Invalid CanActivateChild guard");x=Kn(A(a,t))}return x.pipe(zn())});return(0,tt.of)(_).pipe(Ea())}));return(0,tt.of)(f).pipe(Ea())}(t,c.path,i),function(t,e,i){const a=e.routeConfig?e.routeConfig.canActivate:null;if(!a||0===a.length)return(0,tt.of)(!0);const c=a.map(f=>Lo(()=>{const v=Fc(f,e,i);let _;if(function(t){return t&&Ns(t.canActivate)}(v))_=Kn(v.canActivate(e,t));else{if(!Ns(v))throw new Error("Invalid CanActivate guard");_=Kn(v(e,t))}return _.pipe(zn())}));return(0,tt.of)(c).pipe(Ea())}(t,c.route,i))),zn(c=>!0!==c,!0))}(a,f,t,e):(0,tt.of)(_)),(0,Dt.U)(_=>Object.assign(Object.assign({},i),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,Vn.b)(_=>{if(du(_.guardsResult)){const A=td(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw A.url=_.guardsResult,A}const C=new Ec(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(C)}),Vo(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),vd(_=>{if(_.guards.canActivateChecks.length)return(0,tt.of)(_).pipe((0,Vn.b)(C=>{const A=new Zh(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(A)}),rn(C=>{let A=!1;return(0,tt.of)(C).pipe(function(t,e){return(0,Mn.zg)(i=>{const{targetSnapshot:a,guards:{canActivateChecks:c}}=i;if(!c.length)return(0,tt.of)(i);let f=0;return(0,yn.D)(c).pipe(vc(v=>function(t,e,i,a){return function(t,e,i,a){const c=Object.keys(t);if(0===c.length)return(0,tt.of)({});const f={};return(0,yn.D)(c).pipe((0,Mn.zg)(v=>function(t,e,i,a){const c=Fc(t,e,a);return Kn(c.resolve?c.resolve(e,i):c(e,i))}(t[v],e,i,a).pipe((0,Vn.b)(_=>{f[v]=_}))),yc(1),(0,Mn.zg)(()=>Object.keys(f).length===c.length?(0,tt.of)(f):oi.E))}(t._resolve,t,e,a).pipe((0,Dt.U)(f=>(t._resolvedData=f,t.data=Object.assign(Object.assign({},t.data),fg(t,i).resolve),null)))}(v.route,a,t,e)),(0,Vn.b)(()=>f++),yc(1),(0,Mn.zg)(v=>f===c.length?(0,tt.of)(i):oi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Vn.b)({next:()=>A=!0,complete:()=>{A||(this.restoreHistory(C),this.cancelNavigationTransition(C,"At least one route resolver didn't emit any value."))}}))}),(0,Vn.b)(C=>{const A=new au(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(A)}))}),vd(_=>{const{targetSnapshot:C,id:A,extractedUrl:x,rawUrl:P,extras:{skipLocationChange:V,replaceUrl:H}}=_;return this.hooks.afterPreactivation(C,{navigationId:A,appliedUrlTree:x,rawUrlTree:P,skipLocationChange:!!V,replaceUrl:!!H})}),(0,Dt.U)(_=>{const C=function(t,e,i){const a=xc(t,e._root,i?i._root:void 0);return new ad(a,e)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:C})}),(0,Vn.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((t,e,i)=>(0,Dt.U)(a=>(new xs(e,a.targetRouterState,a.currentRouterState,i).activate(t),a)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,Vn.b)({next(){f=!0},complete(){f=!0}}),function(t){return e=>e.lift(new Fl(t))}(()=>{var _;if(!f&&!v){const C=`Navigation ID ${c.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(c),this.cancelNavigationTransition(c,C)):this.cancelNavigationTransition(c,C)}(null===(_=this.currentNavigation)||void 0===_?void 0:_.id)===c.id&&(this.currentNavigation=null)}),oo(_=>{if(v=!0,function(t){return t&&t[Dc]}(_)){const C=du(_.url);C||(this.navigated=!0,this.restoreHistory(c,!0));const A=new su(c.id,this.serializeUrl(c.extractedUrl),_.message);a.next(A),C?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),P={skipLocationChange:c.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||se(c.source)};this.scheduleNavigation(x,"imperative",null,P,{resolve:c.resolve,reject:c.reject,promise:c.promise})},0):c.resolve(!1)}else{this.restoreHistory(c,!0);const C=new ga(c.id,this.serializeUrl(c.extractedUrl),_);a.next(C);try{c.resolve(this.errorHandler(_))}catch(A){c.reject(A)}}return oi.E}))}))}resetRootComponentType(i){this.rootComponentType=i,this.routerState.root.component=this.rootComponentType}getTransition(){const i=this.transitions.value;return i.urlAfterRedirects=this.browserUrlTree,i}setTransition(i){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),i))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(i=>{const a=this.extractLocationChangeInfoFromEvent(i);this.shouldScheduleNavigation(this.lastLocationChangeInfo,a)&&setTimeout(()=>{const{source:c,state:f,urlTree:v}=a,_={replaceUrl:!0};if(f){const C=Object.assign({},f);delete C.navigationId,delete C.\u0275routerPageId,0!==Object.keys(C).length&&(_.state=C)}this.scheduleNavigation(v,c,f,_)},0),this.lastLocationChangeInfo=a}))}extractLocationChangeInfoFromEvent(i){var a;return{source:"popstate"===i.type?"popstate":"hashchange",urlTree:this.parseUrl(i.url),state:(null===(a=i.state)||void 0===a?void 0:a.navigationId)?i.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(i,a){if(!i)return!0;const c=a.urlTree.toString()===i.urlTree.toString();return a.transitionId!==i.transitionId||!c||!("hashchange"===a.source&&"popstate"===i.source||"popstate"===a.source&&"hashchange"===i.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(i){this.events.next(i)}resetConfig(i){Ca(i),this.config=i.map(ui),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(i,a={}){const{relativeTo:c,queryParams:f,fragment:v,queryParamsHandling:_,preserveFragment:C}=a,A=c||this.routerState.root,x=C?this.currentUrlTree.fragment:v;let P=null;switch(_){case"merge":P=Object.assign(Object.assign({},this.currentUrlTree.queryParams),f);break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=f||null}return null!==P&&(P=this.removeEmptyProps(P)),function(t,e,i,a,c){if(0===i.length)return dg(e.root,e.root,e,a,c);const f=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Nc(!0,0,t);let e=0,i=!1;const a=t.reduce((c,f,v)=>{if("object"==typeof f&&null!=f){if(f.outlets){const _={};return Un(f.outlets,(C,A)=>{_[A]="string"==typeof C?C.split("/"):C}),[...c,{outlets:_}]}if(f.segmentPath)return[...c,f.segmentPath]}return"string"!=typeof f?[...c,f]:0===v?(f.split("/").forEach((_,C)=>{0==C&&"."===_||(0==C&&""===_?i=!0:".."===_?e++:""!=_&&c.push(_))}),c):[...c,f]},[]);return new Nc(i,e,a)}(i);if(f.toRoot())return dg(e.root,new Rt([],{}),e,a,c);const v=function(t,e,i){if(t.isAbsolute)return new Jl(e.root,!0,0);if(-1===i.snapshot._lastPathIndex){const f=i.snapshot._urlSegment;return new Jl(f,f===e.root,0)}const a=As(t.commands[0])?0:1;return function(t,e,i){let a=t,c=e,f=i;for(;f>c;){if(f-=c,a=a.parent,!a)throw new Error("Invalid number of '../'");c=a.segments.length}return new Jl(a,!1,c-f)}(i.snapshot._urlSegment,i.snapshot._lastPathIndex+a,t.numberOfDoubleDots)}(f,e,t),_=v.processChildren?Rs(v.segmentGroup,v.index,f.commands):br(v.segmentGroup,v.index,f.commands);return dg(v.segmentGroup,_,e,a,c)}(A,this.currentUrlTree,i,P,null!=x?x:null)}navigateByUrl(i,a={skipLocationChange:!1}){const c=du(i)?i:this.parseUrl(i),f=this.urlHandlingStrategy.merge(c,this.rawUrlTree);return this.scheduleNavigation(f,"imperative",null,a)}navigate(i,a={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const i=t[e];if(null==i)throw new Error(`The requested path contains ${i} segment at index ${e}`)}}(i),this.navigateByUrl(this.createUrlTree(i,a),a)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){let a;try{a=this.urlSerializer.parse(i)}catch(c){a=this.malformedUriErrorHandler(c,this.urlSerializer,i)}return a}isActive(i,a){let c;if(c=!0===a?Object.assign({},O):!1===a?Object.assign({},L):a,du(i))return jo(this.currentUrlTree,i,c);const f=this.parseUrl(i);return jo(this.currentUrlTree,f,c)}removeEmptyProps(i){return Object.keys(i).reduce((a,c)=>{const f=i[c];return null!=f&&(a[c]=f),a},{})}processNavigations(){this.navigations.subscribe(i=>{this.navigated=!0,this.lastSuccessfulId=i.id,this.currentPageId=i.targetPageId,this.events.next(new pa(i.id,this.serializeUrl(i.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,i.resolve(!0)},i=>{this.console.warn(`Unhandled Navigation Error: ${i}`)})}scheduleNavigation(i,a,c,f,v){var _,C;if(this.disposed)return Promise.resolve(!1);const A=this.getTransition(),x=se(a)&&A&&!se(A.source),H=(this.lastSuccessfulId===A.id||this.currentNavigation?A.rawUrl:A.urlAfterRedirects).toString()===i.toString();if(x&&H)return Promise.resolve(!0);let K,ne,_e;v?(K=v.resolve,ne=v.reject,_e=v.promise):_e=new Promise((ke,Xe)=>{K=ke,ne=Xe});const Ie=++this.navigationId;let Fe;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(c=this.location.getState()),Fe=c&&c.\u0275routerPageId?c.\u0275routerPageId:f.replaceUrl||f.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(C=this.browserPageId)&&void 0!==C?C:0)+1):Fe=0,this.setTransition({id:Ie,targetPageId:Fe,source:a,restoredState:c,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:i,extras:f,resolve:K,reject:ne,promise:_e,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_e.catch(ke=>Promise.reject(ke))}setBrowserUrl(i,a){const c=this.urlSerializer.serialize(i),f=Object.assign(Object.assign({},a.extras.state),this.generateNgRouterState(a.id,a.targetPageId));this.location.isCurrentPathEqualTo(c)||a.extras.replaceUrl?this.location.replaceState(c,"",f):this.location.go(c,"",f)}restoreHistory(i,a=!1){var c,f;if("computed"===this.canceledNavigationResolution){const v=this.currentPageId-i.targetPageId;"popstate"!==i.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)||0===v?this.currentUrlTree===(null===(f=this.currentNavigation)||void 0===f?void 0:f.finalUrl)&&0===v&&(this.resetState(i),this.browserUrlTree=i.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(v)}else"replace"===this.canceledNavigationResolution&&(a&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=i.currentRouterState,this.currentUrlTree=i.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(i,a){const c=new su(i.id,this.serializeUrl(i.extractedUrl),a);this.triggerEvent(c),i.resolve(!1)}generateNgRouterState(i,a){return"computed"===this.canceledNavigationResolution?{navigationId:i,\u0275routerPageId:a}:{navigationId:i}}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(I.DyG),I.LFG(id),I.LFG(h),I.LFG(Ue),I.LFG(I.zs3),I.LFG(I.v3s),I.LFG(I.Sil),I.LFG(void 0))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})();function se(t){return"imperative"!==t}let _t=(()=>{class t{constructor(i,a,c,f,v){this.parentContexts=i,this.location=a,this.resolver=c,this.changeDetector=v,this.activated=null,this._activatedRoute=null,this.activateEvents=new I.vpe,this.deactivateEvents=new I.vpe,this.name=f||yt,i.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const i=this.parentContexts.getContext(this.name);i&&i.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const i=this.activated;return this.activated=null,this._activatedRoute=null,i}attach(i,a){this.activated=i,this._activatedRoute=a,this.location.insert(i.hostView)}deactivate(){if(this.activated){const i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,a){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=i;const v=(a=a||this.resolver).resolveComponentFactory(i._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,C=new xn(i,_,this.location.injector);this.activated=this.location.createComponent(v,this.location.length,C),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(i){return new(i||t)(I.Y36(h),I.Y36(I.s_b),I.Y36(I._Vd),I.$8M("name"),I.Y36(I.sBO))},t.\u0275dir=I.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class xn{constructor(e,i,a){this.route=e,this.childContexts=i,this.parent=a}get(e,i){return e===lu?this.route:e===h?this.childContexts:this.parent.get(e,i)}}class Di{}class Lc{preload(e,i){return(0,tt.of)(null)}}let bu=(()=>{class t{constructor(i,a,c,f,v){this.router=i,this.injector=f,this.preloadingStrategy=v,this.loader=new af(a,c,A=>i.triggerEvent(new ig(A)),A=>i.triggerEvent(new Xh(A)))}setUpPreloading(){this.subscription=this.router.events.pipe(Vo(i=>i instanceof pa),vc(()=>this.preload())).subscribe(()=>{})}preload(){const i=this.injector.get(I.h0i);return this.processRoutes(i,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,a){const c=[];for(const f of a)if(f.loadChildren&&!f.canLoad&&f._loadedConfig){const v=f._loadedConfig;c.push(this.processRoutes(v.module,v.routes))}else f.loadChildren&&!f.canLoad?c.push(this.preloadConfig(i,f)):f.children&&c.push(this.processRoutes(i,f.children));return(0,yn.D)(c).pipe((0,Fo.J)(),(0,Dt.U)(f=>{}))}preloadConfig(i,a){return this.preloadingStrategy.preload(a,()=>(a._loadedConfig?(0,tt.of)(a._loadedConfig):this.loader.load(i.injector,a)).pipe((0,Mn.zg)(f=>(a._loadedConfig=f,this.processRoutes(f.module,f.routes)))))}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(B),I.LFG(I.v3s),I.LFG(I.Sil),I.LFG(I.zs3),I.LFG(Di))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})(),Ta=(()=>{class t{constructor(i,a,c={}){this.router=i,this.viewportScroller=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(i=>{i instanceof wc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof pa&&(this.lastId=i.id,this.scheduleScrollEvent(i,this.router.parseUrl(i.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(i=>{i instanceof _s&&(i.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(i.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,a){this.router.triggerEvent(new _s(i,"popstate"===this.lastSource?this.store[this.restoredId]:null,a))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(B),I.LFG(un),I.LFG(void 0))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})();const wu=new I.OlP("ROUTER_CONFIGURATION"),bw=new I.OlP("ROUTER_FORROOT_GUARD"),ww=[Ue,{provide:id,useClass:Is},{provide:B,useFactory:function(t,e,i,a,c,f,v,_={},C,A){const x=new B(null,t,e,i,a,c,f,nd(v));return C&&(x.urlHandlingStrategy=C),A&&(x.routeReuseStrategy=A),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(_,x),_.enableTracing&&x.events.subscribe(P=>{var V,H;null===(V=console.group)||void 0===V||V.call(console,`Router Event: ${P.constructor.name}`),console.log(P.toString()),console.log(P),null===(H=console.groupEnd)||void 0===H||H.call(console)}),x},deps:[id,h,Ue,I.zs3,I.v3s,I.Sil,sf,wu,[class{},new I.FiY],[class{},new I.FiY]]},h,{provide:lu,useFactory:function(t){return t.routerState.root},deps:[B]},{provide:I.v3s,useClass:I.EAV},bu,Lc,class{preload(e,i){return i().pipe(oo(()=>(0,tt.of)(null)))}},{provide:wu,useValue:{enableTracing:!1}}];function Sy(){return new I.PXZ("Router",B)}let Ay=(()=>{class t{constructor(i,a){}static forRoot(i,a){return{ngModule:t,providers:[ww,Ry(i),{provide:bw,useFactory:EI,deps:[[B,new I.FiY,new I.tp0]]},{provide:wu,useValue:a||{}},{provide:$e,useFactory:Ew,deps:[ae,[new I.tBr(Pe),new I.FiY],wu]},{provide:Ta,useFactory:QA,deps:[B,un,wu]},{provide:Di,useExisting:a&&a.preloadingStrategy?a.preloadingStrategy:Lc},{provide:I.PXZ,multi:!0,useFactory:Sy},[xy,{provide:I.ip1,multi:!0,useFactory:Cw,deps:[xy]},{provide:Dw,useFactory:II,deps:[xy]},{provide:I.tb,multi:!0,useExisting:Dw}]]}}static forChild(i){return{ngModule:t,providers:[Ry(i)]}}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(bw,8),I.LFG(B,8))},t.\u0275mod=I.oAB({type:t}),t.\u0275inj=I.cJS({}),t})();function QA(t,e,i){return i.scrollOffset&&e.setOffset(i.scrollOffset),new Ta(t,e,i)}function Ew(t,e,i={}){return i.useHash?new ft(t,e):new Ge(t,e)}function EI(t){return"guarded"}function Ry(t){return[{provide:I.deG,multi:!0,useValue:t},{provide:sf,multi:!0,useValue:t}]}let xy=(()=>{class t{constructor(i){this.injector=i,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ei.xQ}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let a=null;const c=new Promise(_=>a=_),f=this.injector.get(B),v=this.injector.get(wu);return"disabled"===v.initialNavigation?(f.setUpLocationChangeListener(),a(!0)):"enabled"===v.initialNavigation||"enabledBlocking"===v.initialNavigation?(f.hooks.afterPreactivation=()=>this.initNavigation?(0,tt.of)(null):(this.initNavigation=!0,a(!0),this.resultOfPreactivationDone),f.initialNavigation()):a(!0),c})}bootstrapListener(i){const a=this.injector.get(wu),c=this.injector.get(bu),f=this.injector.get(Ta),v=this.injector.get(B),_=this.injector.get(I.z2F);i===_.components[0]&&(("enabledNonBlocking"===a.initialNavigation||void 0===a.initialNavigation)&&v.initialNavigation(),c.setUpPreloading(),f.init(),v.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(I.zs3))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac}),t})();function Cw(t){return t.appInitializer.bind(t)}function II(t){return t.bootstrapListener.bind(t)}const Dw=new I.OlP("Router Initializer"),Iw=[];let SI=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=I.oAB({type:t}),t.\u0275inj=I.cJS({imports:[[Ay.forRoot(Iw)],Ay]}),t})();var Ny=G(3637),bt=G(6682),Tw=G(8819);function Py(t,e){return i=>i.lift(new Ng(t,e))}class Ng{constructor(e,i){this.compare=e,this.keySelector=i}call(e,i){return i.subscribe(new qo(e,this.compare,this.keySelector))}}class qo extends Hr.L{constructor(e,i,a){super(e),this.keySelector=a,this.hasKey=!1,"function"==typeof i&&(this.compare=i)}compare(e,i){return e===i}_next(e){let i;try{const{keySelector:c}=this;i=c?c(e):e}catch(c){return this.destination.error(c)}let a=!1;if(this.hasKey)try{const{compare:c}=this;a=c(this.key,i)}catch(c){return this.destination.error(c)}else this.hasKey=!0;a||(this.key=i,this.destination.next(e))}}class RI{constructor(e,i){this.observables=e,this.project=i}call(e,i){return i.subscribe(new My(e,this.observables,this.project))}}class My extends qh{constructor(e,i,a){super(e),this.observables=i,this.project=a,this.toRespond=[];const c=i.length;this.values=new Array(c);for(let f=0;f<c;f++)this.toRespond.push(f);for(let f=0;f<c;f++)this.add(Zp(this,i[f],void 0,f))}notifyNext(e,i,a){this.values[a]=i;const c=this.toRespond;if(c.length>0){const f=c.indexOf(a);-1!==f&&c.splice(f,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const i=[e,...this.values];this.project?this._tryProject(i):this.destination.next(i)}}_tryProject(e){let i;try{i=this.project.apply(this,e)}catch(a){return void this.destination.error(a)}this.destination.next(i)}}class Oy{constructor(e){this.predicate=e}call(e,i){return i.subscribe(new Aw(e,this.predicate))}}class Aw extends Hr.L{constructor(e,i){super(e),this.predicate=i,this.skipping=!0,this.index=0}_next(e){const i=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||i.next(e)}tryCallPredicate(e){try{const i=this.predicate(e,this.index++);this.skipping=Boolean(i)}catch(i){this.destination.error(i)}}}var mt=G(57),mr=(G(9192),G(6136)),JA=G(7771),Aa=G(8858);class Pg extends Ei.xQ{constructor(e=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,a){super(),this.scheduler=a,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const i=this._events;i.push(e),i.length>this._bufferSize&&i.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Mg(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const i=this._infiniteTimeWindow,a=i?this._events:this._trimBufferThenGetEvents(),c=this.scheduler,f=a.length;let v;if(this.closed)throw new Nl.N;if(this.isStopped||this.hasError?v=rg.w.EMPTY:(this.observers.push(e),v=new Aa.W(this,e)),c&&e.add(e=new mr.ht(e,c)),i)for(let _=0;_<f&&!e.closed;_++)e.next(a[_]);else for(let _=0;_<f&&!e.closed;_++)e.next(a[_].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),v}_getNow(){return(this.scheduler||JA.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),i=this._bufferSize,a=this._windowTime,c=this._events,f=c.length;let v=0;for(;v<f&&!(e-c[v].time<a);)v++;return f>i&&(v=Math.max(v,f-i)),v>0&&c.splice(0,v),c}}class Mg{constructor(e,i){this.time=e,this.value=i}}function yd(t,e,i){let a;return a=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:i},c=>c.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:i,scheduler:a}){let c,v,f=0,_=!1,C=!1;return function(x){let P;f++,!c||_?(_=!1,c=new Pg(t,e,a),P=c.subscribe(this),v=x.subscribe({next(V){c.next(V)},error(V){_=!0,c.error(V)},complete(){C=!0,v=void 0,c.complete()}}),C&&(v=void 0)):P=c.subscribe(this),this.add(()=>{f--,P.unsubscribe(),P=void 0,v&&!C&&i&&0===f&&(v.unsubscribe(),v=void 0,c=void 0)})}}(a))}function Og(t,e){return e?rn(()=>t,e):rn(()=>t)}var fo=G(3101);const uf=new I.OlP("angularfire2.auth.use-emulator"),xI=new I.OlP("angularfire2.auth.settings"),Fy=new I.OlP("angularfire2.auth.tenant-id"),ky=new I.OlP("angularfire2.auth.langugage-code"),Rw=new I.OlP("angularfire2.auth.use-device-language"),Fg=new I.OlP("angularfire.auth.persistence");let NI=(()=>{class t{constructor(i,a,c,f,v,_,C,A,x,P){const V=new mt.HU(f),H=(0,mt.ss)(V),K=new Ei.xQ,ne=(0,tt.of)(void 0).pipe((0,mr.QV)(V.outsideAngular),rn(()=>f.runOutsideAngular(()=>G.e(336).then(G.bind(G,1336)))),(0,Dt.U)(()=>(0,mt.on)(i,f,a)),(0,Dt.U)(_e=>f.runOutsideAngular(()=>{const Ie=v,Fe=_;return(0,mt.sI)(`${_e.name}.auth`,"AngularFireAuth",_e,()=>{const ke=f.runOutsideAngular(()=>_e.auth());if(Ie&&ke.useEmulator(`http://${Ie.join(":")}`),C&&(ke.tenantId=C),ke.languageCode=A,x&&ke.useDeviceLanguage(),Fe)for(const[Xe,ze]of Object.entries(Fe))ke.settings[Xe]=ze;return P&&ke.setPersistence(P),ke},[Ie,C,A,x,Fe,P])})),yd({bufferSize:1,refCount:!1}));if(El(c))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,tt.of)(null);else{ne.pipe(zn()).subscribe();const Ie=ne.pipe(rn(ze=>ze.getRedirectResult().then(St=>St,()=>null)),H,yd({bufferSize:1,refCount:!1})),Fe=ze=>new rr.y(St=>({unsubscribe:f.runOutsideAngular(()=>ze(St))})),ke=ne.pipe(rn(ze=>Fe(ze.onAuthStateChanged.bind(ze)))),Xe=ne.pipe(rn(ze=>Fe(ze.onIdTokenChanged.bind(ze))));this.authState=Ie.pipe(Og(ke),(0,fo.R)(V.outsideAngular),(0,mr.QV)(V.insideAngular)),this.user=Ie.pipe(Og(Xe),(0,fo.R)(V.outsideAngular),(0,mr.QV)(V.insideAngular)),this.idToken=this.user.pipe(rn(ze=>ze?(0,yn.D)(ze.getIdToken()):(0,tt.of)(null))),this.idTokenResult=this.user.pipe(rn(ze=>ze?(0,yn.D)(ze.getIdTokenResult()):(0,tt.of)(null))),this.credential=(0,bt.T)(Ie,K,this.authState.pipe(Vo(ze=>!ze))).pipe((0,Dt.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,fo.R)(V.outsideAngular),(0,mr.QV)(V.insideAngular))}return(0,mt.pX)(this,ne,f,{spy:{apply:(_e,Ie,Fe)=>{(_e.startsWith("signIn")||_e.startsWith("createUser"))&&Fe.then(ke=>K.next(ke))}}})}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(mt.Dh),I.LFG(mt.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(uf,8),I.LFG(xI,8),I.LFG(Fy,8),I.LFG(ky,8),I.LFG(Rw,8),I.LFG(Fg,8))},t.\u0275prov=I.Yz7({factory:function(){return new t(I.LFG(mt.Dh),I.LFG(mt.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(uf,8),I.LFG(xI,8),I.LFG(Fy,8),I.LFG(ky,8),I.LFG(Rw,8),I.LFG(Fg,8))},token:t,providedIn:"any"}),t})();var cf=G(2329);function PI(t){return null==t}function MI(t){return"function"==typeof t.set}function OI(t,e){return MI(e)?e:t.ref(e)}function FI(t,e){if(function(t){return"string"==typeof t}(t))return e.stringCase();if(MI(t))return e.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function kg(t,e,i="on",a=Ny.z){return new rr.y(c=>{let f=null;return f=t[i](e,(v,_)=>{a.schedule(()=>{c.next({snapshot:v,prevKey:_})}),"once"===i&&a.schedule(()=>c.complete())},v=>{a.schedule(()=>c.error(v))}),"on"===i?{unsubscribe(){null!=f&&t.off(e,f)}}:{unsubscribe(){}}}).pipe((0,Dt.U)(c=>{const{snapshot:f,prevKey:v}=c;let _=null;return f.exists()&&(_=f.key),{type:e,payload:f,prevKey:v,key:_}}),(0,Tw.B)())}function Ra(t,e){const i=t.length;for(let a=0;a<i;a++)if(t[a].payload.key===e)return a;return-1}function kI(t,e){const{payload:i,prevKey:a,key:c}=e,f=Ra(t,c),v=function(t,e){if(PI(e))return 0;{const i=Ra(t,e);return-1===i?t.length:i+1}}(t,a);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let _=null;e.payload.forEach(C=>{const A={payload:C,type:"value",prevKey:_,key:C.key};return _=C.key,t=[...t,A],!1})}return t;case"child_added":if(f>-1){const _=t[f-1];(_&&_.key||null)!==a&&(t=t.filter(C=>C.payload.key!==i.key)).splice(v,0,e)}else{if(null==a)return[e,...t];(t=t.slice()).splice(v,0,e)}return t;case"child_removed":return t.filter(_=>_.payload.key!==i.key);case"child_changed":return t.map(_=>_.payload.key===c?e:_);case"child_moved":if(f>-1){const _=t.splice(f,1)[0];return(t=t.slice()).splice(v,0,_),t}return t;default:return t}}function Vy(t){return(PI(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Lg(t,e,i){return function(t,e,i){return kg(t,"value","once",i).pipe(rn(a=>{const c=[(0,tt.of)(a)];return e.forEach(f=>c.push(kg(t,f,"on",i))),(0,bt.T)(...c).pipe(ca(kI,[]))}),Py())}(t,e=Vy(e),i)}function Uy(t,e,i){const a=(e=Vy(e)).map(c=>kg(t,c,"on",i));return(0,bt.T)(...a)}function By(t,e){return function(a,c){return FI(a,{stringCase:()=>t.child(a)[e](c),firebaseCase:()=>a[e](c),snapshotCase:()=>a.ref[e](c)})}}function VI(t){return function(i){return i?FI(i,{stringCase:()=>t.child(i).remove(),firebaseCase:()=>i.remove(),snapshotCase:()=>i.ref.remove()}):t.remove()}}function Vg(t,e){return function(){return kg(t,"value","on",e)}}const Hy=new I.OlP("angularfire2.realtimeDatabaseURL"),xw=new I.OlP("angularfire2.database.use-emulator");let jI=(()=>{class t{constructor(i,a,c,f,v,_,C){this.schedulers=new mt.HU(v),this.keepUnstableUntilFirst=(0,mt.ss)(this.schedulers);const A=_,x=(0,mt.on)(i,v,a);!cf.Z.auth&&C&&(0,mt.yq)(),this.database=(0,mt.sI)(`${x.name}.database.${c}`,"AngularFireDatabase",x,()=>{const P=v.runOutsideAngular(()=>x.database(c||void 0));return A&&P.useEmulator(...A),P},[A])}list(i,a){const c=this.schedulers.ngZone.runOutsideAngular(()=>OI(this.database,i));let f=c;return a&&(f=a(c)),function(t,e){const i=e.schedulers.outsideAngular,a=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:By(a,"update"),set:By(a,"set"),push:c=>a.push(c),remove:VI(a),snapshotChanges:c=>Lg(t,c,i).pipe(e.keepUnstableUntilFirst),stateChanges:c=>Uy(t,c,i).pipe(e.keepUnstableUntilFirst),auditTrail:c=>function(t,e,i){return function(t,e,i){return function(t,e){return kg(t,"value","on",e).pipe((0,Dt.U)(i=>{let a;return i.payload.forEach(c=>(a=c.key,!1)),{data:i,lastKeyToLoad:a}}))}(t,i).pipe(function(...t){return e=>{let i;return"function"==typeof t[t.length-1]&&(i=t.pop()),e.lift(new RI(t,i))}}(e),(0,Dt.U)(([c,f])=>{const v=c.lastKeyToLoad,_=f.map(C=>C.key);return{actions:f,lastKeyToLoad:v,loadedKeys:_}}),function(t){return e=>e.lift(new Oy(t))}(c=>-1===c.loadedKeys.indexOf(c.lastKeyToLoad)),(0,Dt.U)(c=>c.actions))}(t,Uy(t,e).pipe(ca((c,f)=>[...c,f],[])),i)}(t,c,i).pipe(e.keepUnstableUntilFirst),valueChanges:(c,f)=>Lg(t,c,i).pipe((0,Dt.U)(_=>_.map(C=>f&&f.idField?Object.assign(Object.assign({},C.payload.val()),{[f.idField]:C.key}):C.payload.val())),e.keepUnstableUntilFirst)}}(f,this)}object(i){return function(t,e){return{query:t,snapshotChanges:()=>Vg(t,e.schedulers.outsideAngular)().pipe(e.keepUnstableUntilFirst),update:i=>t.ref.update(i),set:i=>t.ref.set(i),remove:()=>t.ref.remove(),valueChanges:()=>Vg(t,e.schedulers.outsideAngular)().pipe(e.keepUnstableUntilFirst,(0,Dt.U)(a=>a.payload.exists()?a.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>OI(this.database,i)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(mt.Dh),I.LFG(mt.xv,8),I.LFG(Hy,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(xw,8),I.LFG(uf,8))},t.\u0275prov=I.Yz7({factory:function(){return new t(I.LFG(mt.Dh),I.LFG(mt.xv,8),I.LFG(Hy,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(xw,8),I.LFG(uf,8))},token:t,providedIn:"any"}),t})();var k=G(4762),Gy=G(205);const ff=new I.OlP("angularfire2.messaging.vapid-key"),Vc=new I.OlP("angularfire2.messaging.service-worker-registeration"),Nw=parseInt(cf.Z.SDK_VERSION,10)<8;let $y=(()=>{class t{constructor(i,a,c,f,v,_){const C=new mt.HU(f),A=_,x=(0,tt.of)(void 0).pipe((0,fo.R)(C.outsideAngular),(0,mr.QV)(C.insideAngular),rn(()=>El(c)?oi.E:G.e(353).then(G.bind(G,9353))),(0,Dt.U)(()=>(0,mt.on)(i,f,a)),rn(H=>(0,mt.sI)(`${H.name}.messaging`,"AngularFireMessaging",H,()=>(0,k.mG)(this,void 0,void 0,function*(){const K=H.messaging();return Nw&&(v&&K.usePublicVapidKey(v),A&&K.useServiceWorker(yield A)),K}),[v,A])),yd({bufferSize:1,refCount:!1}));this.requestPermission=x.pipe((0,fo.R)(C.outsideAngular),(0,mr.QV)(C.insideAngular),rn(H=>cf.Z.messaging.isSupported()?H.requestPermission():(0,Gy._)("Not supported."))),this.getToken=x.pipe((0,fo.R)(C.outsideAngular),(0,mr.QV)(C.insideAngular),rn(H=>(0,k.mG)(this,void 0,void 0,function*(){if(cf.Z.messaging.isSupported()&&"granted"===Notification.permission){if(Nw)return yield H.getToken();{const K=A?yield A:null;return yield H.getToken({vapidKey:v,serviceWorkerRegistration:K})}}return null})));const P=new rr.y(H=>{navigator.permissions.query({name:"notifications"}).then(K=>{K.onchange=()=>H.next()})}),V=x.pipe((0,fo.R)(C.outsideAngular),(0,mr.QV)(C.insideAngular),Og(P),Og(this.getToken));return this.tokenChanges=x.pipe((0,fo.R)(C.outsideAngular),(0,mr.QV)(C.insideAngular),rn(()=>cf.Z.messaging.isSupported()?ko(this.getToken,V):oi.E)),this.messages=x.pipe((0,fo.R)(C.outsideAngular),(0,mr.QV)(C.insideAngular),rn(H=>cf.Z.messaging.isSupported()?new rr.y(K=>H.onMessage(ne=>K.next(ne),ne=>K.error(ne),()=>K.complete())):oi.E)),this.requestToken=(0,tt.of)(void 0).pipe((0,fo.R)(C.outsideAngular),(0,mr.QV)(C.insideAngular),rn(()=>this.requestPermission),oo(()=>(0,tt.of)(null)),(0,Mn.zg)(()=>this.tokenChanges)),this.deleteToken=H=>x.pipe((0,fo.R)(C.outsideAngular),(0,mr.QV)(C.insideAngular),rn(K=>K.deleteToken(H||void 0)),_c(!1)),(0,mt.pX)(this,x,f)}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(mt.Dh),I.LFG(mt.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(ff,8),I.LFG(Vc,8))},t.\u0275prov=I.Yz7({factory:function(){return new t(I.LFG(mt.Dh),I.LFG(mt.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(ff,8),I.LFG(Vc,8))},token:t,providedIn:"any"}),t})(),Wy=(()=>{class t{constructor(i,a,c){this.angularFireDB=i,this.angularFireAuth=a,this.angularFireMessaging=c,this.currentMessage=new ii(null)}requestPermission(){console.log("entrando"),this.angularFireMessaging.requestPermission.pipe(function(t,e,i=Number.POSITIVE_INFINITY){return"function"==typeof e?(0,Mn.zg)(()=>t,e,i):("number"==typeof e&&(i=e),(0,Mn.zg)(()=>t,i))}(this.angularFireMessaging.tokenChanges)).subscribe(i=>{console.log("Permission granted! Save to the server!",i)},i=>{console.error(i)})}receiveMessage(){this.angularFireMessaging.messages.subscribe(i=>{console.log("new message received. ",i.notification.body),this.currentMessage.next(i.notification.body)})}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(jI),I.LFG(NI),I.LFG($y))},t.\u0275prov=I.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),qy=(()=>{class t{constructor(i){this.afMessaging=i,this.title="notifications2",this.afMessaging.receiveMessage(),this.message=this.afMessaging.currentMessage,console.log(this.message)}requestPermission(){this.afMessaging.requestPermission()}}return t.\u0275fac=function(i){return new(i||t)(I.Y36(Wy))},t.\u0275cmp=I.Xpm({type:t,selectors:[["app-root"]],decls:5,vars:5,consts:[[3,"click"]],template:function(i,a){1&i&&(I.TgZ(0,"button",0),I.NdJ("click",function(){return a.requestPermission()}),I._uU(1," Permisos\n"),I.qZA(),I._uU(2),I.ALo(3,"json"),I.ALo(4,"async")),2&i&&(I.xp6(2),I.hij(" ",I.lcZ(3,1,I.lcZ(4,3,a.message)),""))},pipes:[bl,xp],styles:[""]}),t})();const zy_firebaseConfig={apiKey:"AIzaSyAmHJ8ILY4IZ7v7m2sF_cNpH_DUtBUffnQ",authDomain:"notifications-ac315.firebaseapp.com",projectId:"notifications-ac315",storageBucket:"notifications-ac315.appspot.com",messagingSenderId:"969945503461",appId:"1:969945503461:web:0efc0f5c85f37fff10660c",measurementId:"G-89YK7ZYQ9M"};function hf(){return t=>t.lift(new HI)}class HI{call(e,i){return i.subscribe(new Pw(e))}}class Pw extends Hr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let i;this.hasPrev?i=[this.prev,e]:this.hasPrev=!0,this.prev=e,i&&this.destination.next(i)}}var Mw=G(9759),Pt=G(4685),Cu=G(300),Ky=function(t,e){return(Ky=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])})(t,e)};function Fw(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],a=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Be,GI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Qy=Qy||{},It=GI||self;function Yy(){}function kw(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function df(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Jy="closure_uid_"+(1e9*Math.random()>>>0),Zy=0;function Lw(t,e,i){return t.call.apply(t.bind,arguments)}function $I(t,e,i){if(!t)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,a),t.apply(e,c)}}return function(){return t.apply(e,arguments)}}function Mr(t,e,i){return(Mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lw:$I).apply(null,arguments)}function jg(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var a=i.slice();return a.push.apply(a,arguments),t.apply(this,a)}}function Er(t,e){function i(){}i.prototype=e.prototype,t.Z=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.Vb=function(a,c,f){for(var v=Array(arguments.length-2),_=2;_<arguments.length;_++)v[_-2]=arguments[_];return e.prototype[c].apply(a,v)}}function Du(){this.s=this.s,this.o=this.o}var WI={};Du.prototype.s=!1,Du.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Jy)&&t[Jy]||(t[Jy]=++Zy)}(this);delete WI[t]}},Du.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Uw=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var i=0;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1},Xy=Array.prototype.forEach?function(t,e,i){Array.prototype.forEach.call(t,e,i)}:function(t,e,i){for(var a=t.length,c="string"==typeof t?t.split(""):t,f=0;f<a;f++)f in c&&e.call(i,c[f],f,t)};function Bw(t){return Array.prototype.concat.apply([],arguments)}function ho(t){var e=t.length;if(0<e){for(var i=Array(e),a=0;a<e;a++)i[a]=t[a];return i}return[]}function pf(t){return/^[\s\xa0]*$/.test(t)}var $r,Hw=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ci(t,e){return-1!=t.indexOf(e)}function Gw(t,e){return t<e?-1:t>e?1:0}e:{var $w=It.navigator;if($w){var Ww=$w.userAgent;if(Ww){$r=Ww;break e}}$r=""}function e_(t,e,i){for(var a in t)e.call(i,t[a],a,t)}function Bg(t){var e={};for(var i in t)e[i]=t[i];return e}var qw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zw(t,e){for(var i,a,c=1;c<arguments.length;c++){for(i in a=arguments[c])t[i]=a[i];for(var f=0;f<qw.length;f++)i=qw[f],Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}}function gf(t){return gf[" "](t),t}gf[" "]=Yy;var n_,t,qI=ci($r,"Opera"),Iu=ci($r,"Trident")||ci($r,"MSIE"),Hg=ci($r,"Edge"),Gg=Hg||Iu,Kw=ci($r,"Gecko")&&!(ci($r.toLowerCase(),"webkit")&&!ci($r,"Edge"))&&!(ci($r,"Trident")||ci($r,"MSIE"))&&!ci($r,"Edge"),zI=ci($r.toLowerCase(),"webkit")&&!ci($r,"Edge");function $g(){var t=It.document;return t?t.documentMode:void 0}e:{var r_="",Wg=(t=$r,Kw?/rv:([^\);]+)(\)|;)/.exec(t):Hg?/Edge\/([\d\.]+)/.exec(t):Iu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):zI?/WebKit\/(\S+)/.exec(t):qI?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(Wg&&(r_=Wg?Wg[1]:""),Iu){var qg=$g();if(null!=qg&&qg>parseFloat(r_)){n_=String(qg);break e}}n_=r_}var Qw={};function Yw(){return e=Qw,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var t=0,e=Hw(String(n_)).split("."),i=Hw("9").split("."),a=Math.max(e.length,i.length),c=0;0==t&&c<a;c++){var f=e[c]||"",v=i[c]||"";do{if(f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],0==f[0].length&&0==v[0].length)break;t=Gw(0==f[1].length?0:parseInt(f[1],10),0==v[1].length?0:parseInt(v[1],10))||Gw(0==f[2].length,0==v[2].length)||Gw(f[2],v[2]),f=f[3],v=v[3]}while(0==t)}return 0<=t}();var e}var Kg=It.document&&Iu&&($g()||parseInt(n_,10))||void 0,KI=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{It.addEventListener("test",Yy,e),It.removeEventListener("test",Yy,e)}catch(i){}return t}();function Wr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Qg(t,e){if(Wr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,a=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Kw){e:{try{gf(e.nodeName);var c=!0;break e}catch(f){}c=!1}c||(e=null)}}else"mouseover"==i?e=t.fromElement:"mouseout"==i&&(e=t.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:mf[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Qg.Z.h.call(this)}}Wr.prototype.h=function(){this.defaultPrevented=!0},Er(Qg,Wr);var mf={2:"touch",3:"pen",4:"mouse"};Qg.prototype.h=function(){Qg.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var vf="closure_listenable_"+(1e6*Math.random()|0),_d=0;function bd(t,e,i,a,c){this.listener=t,this.proxy=null,this.src=e,this.type=i,this.capture=!!a,this.ia=c,this.key=++_d,this.ca=this.fa=!1}function Yg(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function yf(t){this.src=t,this.g={},this.h=0}function Jg(t,e){var i=e.type;if(i in t.g){var f,a=t.g[i],c=Uw(a,e);(f=0<=c)&&Array.prototype.splice.call(a,c,1),f&&(Yg(e),0==t.g[i].length&&(delete t.g[i],t.h--))}}function i_(t,e,i,a){for(var c=0;c<t.length;++c){var f=t[c];if(!f.ca&&f.listener==e&&f.capture==!!i&&f.ia==a)return c}return-1}yf.prototype.add=function(t,e,i,a,c){var f=t.toString();(t=this.g[f])||(t=this.g[f]=[],this.h++);var v=i_(t,e,a,c);return-1<v?(e=t[v],i||(e.fa=!1)):((e=new bd(e,this.src,f,!!a,c)).fa=i,t.push(e)),e};var Zg="closure_lm_"+(1e6*Math.random()|0),o_={};function Xg(t,e,i,a,c){if(a&&a.once)return s_(t,e,i,a,c);if(Array.isArray(e)){for(var f=0;f<e.length;f++)Xg(t,e[f],i,a,c);return null}return i=u_(i),t&&t[vf]?t.N(e,i,df(a)?!!a.capture:!!a,c):Jw(t,e,i,!1,a,c)}function Jw(t,e,i,a,c,f){if(!e)throw Error("Invalid event type");var v=df(c)?!!c.capture:!!c,_=Tu(t);if(_||(t[Zg]=_=new yf(t)),(i=_.add(e,i,a,v,f)).proxy)return i;if(a=function(){var e=YI;return function t(i){return e.call(t.src,t.listener,i)}}(),i.proxy=a,a.src=t,a.listener=i,t.addEventListener)KI||(c=v),void 0===c&&(c=!1),t.addEventListener(e.toString(),a,c);else if(t.attachEvent)t.attachEvent(Zw(e.toString()),a);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(a)}return i}function s_(t,e,i,a,c){if(Array.isArray(e)){for(var f=0;f<e.length;f++)s_(t,e[f],i,a,c);return null}return i=u_(i),t&&t[vf]?t.O(e,i,df(a)?!!a.capture:!!a,c):Jw(t,e,i,!0,a,c)}function Uc(t,e,i,a,c){if(Array.isArray(e))for(var f=0;f<e.length;f++)Uc(t,e[f],i,a,c);else a=df(a)?!!a.capture:!!a,i=u_(i),t&&t[vf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(i=i_(f=t.g[e],i,a,c))&&(Yg(f[i]),Array.prototype.splice.call(f,i,1),0==f.length&&(delete t.g[e],t.h--))):t&&(t=Tu(t))&&(e=t.g[e.toString()],t=-1,e&&(t=i_(e,i,a,c)),(i=-1<t?e[t]:null)&&em(i))}function em(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[vf])Jg(e.i,t);else{var i=t.type,a=t.proxy;e.removeEventListener?e.removeEventListener(i,a,t.capture):e.detachEvent?e.detachEvent(Zw(i),a):e.addListener&&e.removeListener&&e.removeListener(a),(i=Tu(e))?(Jg(i,t),0==i.h&&(i.src=null,e[Zg]=null)):Yg(t)}}}function Zw(t){return t in o_?o_[t]:o_[t]="on"+t}function YI(t,e){if(t.ca)t=!0;else{e=new Qg(e,this);var i=t.listener,a=t.ia||t.src;t.fa&&em(t),t=i.call(a,e)}return t}function Tu(t){return(t=t[Zg])instanceof yf?t:null}var a_="__closure_events_fn_"+(1e9*Math.random()>>>0);function u_(t){return"function"==typeof t?t:(t[a_]||(t[a_]=function(e){return t.handleEvent(e)}),t[a_])}function Cr(){Du.call(this),this.i=new yf(this),this.P=this,this.I=null}function Or(t,e){var i,a=t.I;if(a)for(i=[];a;a=a.I)i.push(a);if(t=t.P,a=e.type||e,"string"==typeof e)e=new Wr(e,t);else if(e instanceof Wr)e.target=e.target||t;else{var c=e;zw(e=new Wr(a,t),c)}if(c=!0,i)for(var f=i.length-1;0<=f;f--){var v=e.g=i[f];c=c_(v,a,!0,e)&&c}if(c=c_(v=e.g=t,a,!0,e)&&c,c=c_(v,a,!1,e)&&c,i)for(f=0;f<i.length;f++)c=c_(v=e.g=i[f],a,!1,e)&&c}function c_(t,e,i,a){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,f=0;f<e.length;++f){var v=e[f];if(v&&!v.ca&&v.capture==i){var _=v.listener,C=v.ia||v.src;v.fa&&Jg(t.i,v),c=!1!==_.call(C,a)&&c}}return c&&!a.defaultPrevented}Er(Cr,Du),Cr.prototype[vf]=!0,Cr.prototype.removeEventListener=function(t,e,i,a){Uc(this,t,e,i,a)},Cr.prototype.M=function(){if(Cr.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var i=t.g[e],a=0;a<i.length;a++)Yg(i[a]);delete t.g[e],t.h--}}this.I=null},Cr.prototype.N=function(t,e,i,a){return this.i.add(String(t),e,!1,i,a)},Cr.prototype.O=function(t,e,i,a){return this.i.add(String(t),e,!0,i,a)};var l_=It.JSON.stringify;function Xw(){var t=eE,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ed,Nn=function(){function t(){this.h=this.g=null}return t.prototype.add=function(e,i){var a=tm.get();a.set(e,i),this.h?this.h.next=a:this.g=a,this.h=a},t}(),tm=new(function(){function t(e,i){this.i=e,this.j=i,this.h=0,this.g=null}return t.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},t}())(function(){return new oR},function(t){return t.reset()}),oR=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(e,i){this.h=e,this.g=i,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function xa(t){It.setTimeout(function(){throw t},0)}function wd(t,e){Ed||function(){var t=It.Promise.resolve(void 0);Ed=function(){t.then(tE)}}(),f_||(Ed(),f_=!0),eE.add(t,e)}var f_=!1,eE=new Nn;function tE(){for(var t;t=Xw();){try{t.h.call(t.g)}catch(i){xa(i)}var e=tm;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}f_=!1}function Cd(t,e){Cr.call(this),this.h=t||1,this.g=e||It,this.j=Mr(this.kb,this),this.l=Date.now()}function nm(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function rm(t,e,i){if("function"==typeof t)i&&(t=Mr(t,i));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Mr(t.handleEvent,t)}return 2147483647<Number(e)?-1:It.setTimeout(t,e||0)}function nE(t){t.g=rm(function(){t.g=null,t.i&&(t.i=!1,nE(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Er(Cd,Cr),(Be=Cd.prototype).da=!1,Be.S=null,Be.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Or(this,"tick"),this.da&&(nm(this),this.start()))}},Be.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Be.M=function(){Cd.Z.M.call(this),nm(this),delete this.g};var JI=function(t){function e(i,a){var c=t.call(this)||this;return c.m=i,c.j=a,c.h=null,c.i=!1,c.g=null,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Ky(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.l=function(i){this.h=arguments,this.g?this.i=!0:nE(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Du);function Na(t){Du.call(this),this.h=t,this.g={}}Er(Na,Du);var im=[];function h_(t,e,i,a){Array.isArray(i)||(i&&(im[0]=i.toString()),i=im);for(var c=0;c<i.length;c++){var f=Xg(e,i[c],a||t.handleEvent,!1,t.h||t);if(!f)break;t.g[f.key]=f}}function d_(t){e_(t.g,function(e,i){this.g.hasOwnProperty(i)&&em(e)},t),t.g={}}function Dd(){this.g=!0}function _f(t,e,i,a){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var a=i[t];if(!(2>a.length)){var c=a[1];if(Array.isArray(c)&&!(1>c.length)){var f=c[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var v=1;v<c.length;v++)c[v]=""}}}return l_(i)}catch(_){return e}}(t,i)+(a?" "+a:"")})}Na.prototype.M=function(){Na.Z.M.call(this),d_(this)},Na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dd.prototype.Aa=function(){this.g=!1},Dd.prototype.info=function(){};var Su={},tT=null;function Id(){return tT=tT||new Cr}function iE(t){Wr.call(this,Su.Ma,t)}function Td(t){var e=Id();Or(e,new iE(e,t))}function nT(t,e){Wr.call(this,Su.STAT_EVENT,t),this.stat=e}function Ii(t){var e=Id();Or(e,new nT(e,t))}function om(t,e){Wr.call(this,Su.Na,t),this.size=e}function Sd(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){t()},e)}Su.Ma="serverreachability",Er(iE,Wr),Su.STAT_EVENT="statevent",Er(nT,Wr),Su.Na="timingevent",Er(om,Wr);var Ad={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},p_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function oE(){}function rT(){}oE.prototype.h=null;var um,sm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function sE(){Wr.call(this,"d")}function am(){Wr.call(this,"c")}function Rd(){}function xd(t,e,i,a){this.l=t,this.j=e,this.m=i,this.X=a||1,this.V=new Na(this),this.P=aE,this.W=new Cd(t=Gg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new iT}function iT(){this.i=null,this.g="",this.h=!1}Er(sE,Wr),Er(am,Wr),Er(Rd,oE),Rd.prototype.g=function(){return new XMLHttpRequest},Rd.prototype.i=function(){return{}},um=new Rd;var aE=45e3,cm={},lm={};function Nd(t,e,i){t.K=1,t.v=Ma(go(e)),t.s=i,t.U=!0,uE(t,null)}function uE(t,e){t.F=Date.now(),Pd(t),t.A=go(t.v);var i=t.A,a=t.X;Array.isArray(a)||(a=[String(a)]),mE(i.h,"t",a),t.C=0,i=t.l.H,t.h=new iT,t.g=vm(t.l,i?e:null,!t.s),0<t.O&&(t.L=new JI(Mr(t.Ia,t,t.g),t.O)),h_(t.V,t.g,"readystatechange",t.gb),e=t.H?Bg(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Td(1),function(t,e,i,a,c,f){t.info(function(){if(t.g)if(f)for(var v="",_=f.split("&"),C=0;C<_.length;C++){var A=_[C].split("=");if(1<A.length){var x=A[0];A=A[1];var P=x.split("_");v=2<=P.length&&"type"==P[1]?v+(x+"=")+A+"&":v+(x+"=redacted&")}}else v=null;else v=f;return"XMLHTTP REQ ("+a+") [attempt "+c+"]: "+e+"\n"+i+"\n"+v})}(t.j,t.u,t.A,t.m,t.X,t.s)}function cE(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function lE(t,e,i){for(var c,a=!0;!t.I&&t.C<i.length;){if((c=oT(t,i))==lm){4==e&&(t.o=4,Ii(14),a=!1),_f(t.j,t.m,null,"[Incomplete Response]");break}if(c==cm){t.o=4,Ii(15),_f(t.j,t.m,i,"[Invalid Chunk]"),a=!1;break}_f(t.j,t.m,c,null),Wi(t,c)}cE(t)&&c!=lm&&c!=cm&&(t.h.g="",t.C=0),4!=e||0!=i.length||t.h.h||(t.o=1,Ii(16),a=!1),t.i=t.i&&a,a?0<i.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+i.length),Vd(e),e.L=!0,Ii(11))):(_f(t.j,t.m,i,"[Invalid Chunked Response]"),Au(t),Ls(t))}function oT(t,e){var i=t.C,a=e.indexOf("\n",i);return-1==a?lm:(i=Number(e.substring(i,a)),isNaN(i)?cm:(a+=1)+i>e.length?lm:(e=e.substr(a,i),t.C=a+i,e))}function Pd(t){t.Y=Date.now()+t.P,fE(t,t.P)}function fE(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Sd(Mr(t.eb,t),e)}function jc(t){t.B&&(It.clearTimeout(t.B),t.B=null)}function Ls(t){0==t.l.G||t.I||xf(t.l,t)}function Au(t){jc(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,nm(t.W),d_(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Wi(t,e){try{var i=t.l;if(0!=i.G&&(i.g==t||fm(i.i,t)))if(i.I=t.N,!t.J&&fm(i.i,t)&&3==i.G){try{var a=i.Ca.g.parse(e)}catch(_e){a=null}if(Array.isArray(a)&&3==a.length){var c=a;if(0==c[0])e:if(i.u)i.ta=c[1],0<i.ta-i.U&&37500>c[2]&&i.N&&0==i.A&&!i.v&&(i.v=Sd(Mr(i.ab,i),6e3));else{if(i.g){if(!(i.g.F+3e3<t.F))break e;P_(i),dm(i)}AE(i),Ii(18)}if(1>=vE(i.i)&&i.ka){try{i.ka()}catch(_e){}i.ka=void 0}}else Ru(i,11)}else if((t.J||i.g==t)&&P_(i),!pf(e))for(c=i.Ca.g.parse(e),e=0;e<c.length;e++){var f=c[e];if(i.U=f[0],f=f[1],2==i.G)if("c"==f[0]){i.J=f[1],i.la=f[2];var v=f[3];null!=v&&(i.ma=v,i.h.info("VER="+i.ma));var _=f[4];null!=_&&(i.za=_,i.h.info("SVER="+i.za));var C=f[5];null!=C&&"number"==typeof C&&0<C&&(i.K=a=1.5*C,i.h.info("backChannelRequestTimeoutMs_="+a)),a=i;var A=t.g;if(A){var x=A.g?A.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(x){var P=a.i;!P.g&&(ci(x,"spdy")||ci(x,"quic")||ci(x,"h2"))&&(P.j=P.l,P.g=new Set,P.h&&(b_(P,P.h),P.h=null))}if(a.D){var V=A.g?A.g.getResponseHeader("X-HTTP-Session-Id"):null;V&&(a.sa=V,pn(a.F,a.D,V))}}i.G=3,i.j&&i.j.xa(),i.$&&(i.O=Date.now()-t.F,i.h.info("Handshake RTT: "+i.O+"ms"));var H=t;if((a=i).oa=NE(a,a.H?a.la:null,a.W),H.J){w_(a.i,H);var K=H,ne=a.K;ne&&K.setTimeout(ne),K.B&&(jc(K),Pd(K)),a.g=H}else gm(a);0<i.l.length&&pm(i)}else"stop"!=f[0]&&"close"!=f[0]||Ru(i,7);else 3==i.G&&("stop"==f[0]||"close"==f[0]?"stop"==f[0]?Ru(i,7):R_(i):"noop"!=f[0]&&i.j&&i.j.wa(f),i.A=0)}Td(4)}catch(_e){}}function g_(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(kw(t)||"string"==typeof t)Xy(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var i=t.T();else if(t.R&&"function"==typeof t.R)i=void 0;else if(kw(t)||"string"==typeof t){i=[];for(var a=t.length,c=0;c<a;c++)i.push(c)}else for(c in i=[],a=0,t)i[a++]=c;c=(a=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(kw(t)){for(var e=[],i=t.length,a=0;a<i;a++)e.push(t[a]);return e}for(a in e=[],i=0,t)e[i++]=t[a];return e}(t)).length;for(var f=0;f<c;f++)e.call(void 0,a[f],i&&i[f],t)}}function bf(t,e){this.h={},this.g=[],this.i=0;var i=arguments.length;if(1<i){if(i%2)throw Error("Uneven number of arguments");for(var a=0;a<i;a+=2)this.set(arguments[a],arguments[a+1])}else if(t)if(t instanceof bf)for(i=t.T(),a=0;a<i.length;a++)this.set(i[a],t.get(i[a]));else for(a in t)this.set(a,t[a])}function Od(t){if(t.i!=t.g.length){for(var e=0,i=0;e<t.g.length;){var a=t.g[e];qr(t.h,a)&&(t.g[i++]=a),e++}t.g.length=i}if(t.i!=t.g.length){var c={};for(i=e=0;e<t.g.length;)qr(c,a=t.g[e])||(t.g[i++]=a,c[a]=1),e++;t.g.length=i}}function qr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Be=xd.prototype).setTimeout=function(t){this.P=t},Be.gb=function(t){t=t.target;var e=this.L;e&&3==js(t)?e.l():this.Ia(t)},Be.Ia=function(t){try{if(t==this.g)e:{var e=js(this.g),i=this.g.Da(),a=this.g.ba();if(!(3>e)&&(3!=e||Gg||this.g&&(this.h.h||this.g.ga()||CE(this.g)))){this.I||4!=e||7==i||Td(8==i||0>=a?3:2),jc(this);var c=this.g.ba();this.N=c;t:if(cE(this)){var f=CE(this.g);t="";var v=f.length,_=4==js(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Au(this),Ls(this);var C="";break t}this.h.i=new It.TextDecoder}for(i=0;i<v;i++)this.h.h=!0,t+=this.h.i.decode(f[i],{stream:_&&i==v-1});f.splice(0,v),this.h.g+=t,this.C=0,C=this.h.g}else C=this.g.ga();if(this.i=200==c,function(t,e,i,a,c,f,v){t.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+c+"]: "+e+"\n"+i+"\n"+f+" "+v})}(this.j,this.u,this.A,this.m,this.X,e,c),this.i){if(this.$&&!this.J){t:{if(this.g){var A,x=this.g;if((A=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pf(A)){var P=A;break t}}P=null}if(!(c=P)){this.i=!1,this.o=3,Ii(12),Au(this),Ls(this);break e}_f(this.j,this.m,c,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wi(this,c)}this.U?(lE(this,e,C),Gg&&this.i&&3==e&&(h_(this.V,this.W,"tick",this.fb),this.W.start())):(_f(this.j,this.m,C,null),Wi(this,C)),4==e&&Au(this),this.i&&!this.I&&(4==e?xf(this.l,this):(this.i=!1,Pd(this)))}else 400==c&&0<C.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Au(this),Ls(this)}}}catch(V){}},Be.fb=function(){if(this.g){var t=js(this.g),e=this.g.ga();this.C<e.length&&(jc(this),lE(this,t,e),this.i&&4!=t&&Pd(this))}},Be.cancel=function(){this.I=!0,Au(this)},Be.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Td(3),Ii(17)),Au(this),this.o=2,Ls(this)):fE(this,this.Y-t)},(Be=bf.prototype).R=function(){Od(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Be.T=function(){return Od(this),this.g.concat()},Be.get=function(t,e){return qr(this.h,t)?this.h[t]:e},Be.set=function(t,e){qr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Be.forEach=function(t,e){for(var i=this.T(),a=0;a<i.length;a++){var c=i[a],f=this.get(c);t.call(e,f,c,this)}};var wf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qi(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof qi){this.g=void 0!==e?e:t.g,li(this,t.j),this.s=t.s,Ef(this,t.i),Pa(this,t.m),this.l=t.l,e=t.h;var i=new Tf;i.i=e.i,e.g&&(i.g=new bf(e.g),i.h=e.h),Bc(this,i),this.o=t.o}else t&&(i=String(t).match(wf))?(this.g=!!e,li(this,i[1]||"",!0),this.s=Vs(i[2]||""),Ef(this,i[3]||"",!0),Pa(this,i[4]),this.l=Vs(i[5]||"",!0),Bc(this,i[6]||"",!0),this.o=Vs(i[7]||"")):(this.g=!!e,this.h=new Tf(null,this.g))}function go(t){return new qi(t)}function li(t,e,i){t.j=i?Vs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ef(t,e,i){t.i=i?Vs(e,!0):e}function Pa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Bc(t,e,i){e instanceof Tf?(t.h=e,function(t,e){e&&!t.j&&(Oa(t),t.i=null,t.g.forEach(function(i,a){var c=a.toLowerCase();a!=c&&(v_(this,a),mE(this,c,i))},t)),t.j=e}(t.h,t.g)):(i||(e=Us(e,pE)),t.h=new Tf(e,t.g))}function pn(t,e,i){t.h.set(e,i)}function Ma(t){return pn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Vs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Us(t,e,i){return"string"==typeof t?(t=encodeURI(t).replace(e,If),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function If(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}qi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Us(e,m_,!0),":");var i=this.i;return(i||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Us(e,m_,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&t.push(":",String(i))),(i=this.l)&&(this.i&&"/"!=i.charAt(0)&&t.push("/"),t.push(Us(i,"/"==i.charAt(0)?dE:hE,!0))),(i=this.h.toString())&&t.push("?",i),(i=this.o)&&t.push("#",Us(i,gE)),t.join("")};var m_=/[#\/\?@]/g,hE=/[#\?:]/g,dE=/[#\?]/g,pE=/[#\?@]/g,gE=/#/g;function Tf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Oa(t){t.g||(t.g=new bf,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var a=t[i].indexOf("="),c=null;if(0<=a){var f=t[i].substring(0,a);c=t[i].substring(a+1)}else f=t[i];e(f,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(t.i,function(e,i){t.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}function v_(t,e){Oa(t),e=Sf(t,e),qr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,qr((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Od(t)))}function y_(t,e){return Oa(t),e=Sf(t,e),qr(t.g.h,e)}function mE(t,e,i){v_(t,e),0<i.length&&(t.i=null,t.g.set(Sf(t,e),ho(i)),t.h+=i.length)}function Sf(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Be=Tf.prototype).add=function(t,e){Oa(this),this.i=null,t=Sf(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(e),this.h+=1,this},Be.forEach=function(t,e){Oa(this),this.g.forEach(function(i,a){Xy(i,function(c){t.call(e,c,a,this)},this)},this)},Be.T=function(){Oa(this);for(var t=this.g.R(),e=this.g.T(),i=[],a=0;a<e.length;a++)for(var c=t[a],f=0;f<c.length;f++)i.push(e[a]);return i},Be.R=function(t){Oa(this);var e=[];if("string"==typeof t)y_(this,t)&&(e=Bw(e,this.g.get(Sf(this,t))));else{t=this.g.R();for(var i=0;i<t.length;i++)e=Bw(e,t[i])}return e},Be.set=function(t,e){return Oa(this),this.i=null,y_(this,t=Sf(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Be.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Be.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),i=0;i<e.length;i++){var a=e[i],c=encodeURIComponent(String(a));a=this.R(a);for(var f=0;f<a.length;f++){var v=c;""!==a[f]&&(v+="="+encodeURIComponent(String(a[f]))),t.push(v)}}return this.i=t.join("&")};var aT=function(e,i){this.h=e,this.g=i};function __(t){this.l=t||uT,t=It.PerformanceNavigationTiming?0<(t=It.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var uT=10;function cT(t){return!!t.h||!!t.g&&t.g.size>=t.j}function vE(t){return t.h?1:t.g?t.g.size:0}function fm(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function b_(t,e){t.g?t.g.add(e):t.h=e}function w_(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function yE(t){var e,i;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var a=t.i;try{for(var c=Fw(t.g.values()),f=c.next();!f.done;f=c.next())a=a.concat(f.value.D)}catch(_){e={error:_}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(e)throw e.error}}return a}return ho(t.i)}function E_(){}function aR(){this.g=new E_}function lT(t,e,i){var a=i||"";try{g_(t,function(c,f){var v=c;df(c)&&(v=l_(c)),e.push(a+f+"="+encodeURIComponent(v))})}catch(c){throw e.push(a+"type="+encodeURIComponent("_badmap")),c}}function C_(t,e,i,a,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(a)}catch(f){}}function hm(t){this.l=t.$b||null,this.j=t.ib||!1}function D_(t,e){Cr.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=I_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}__.prototype.cancel=function(){var t,e;if(this.i=yE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var i=Fw(this.g.values()),a=i.next();!a.done;a=i.next())a.value.cancel()}catch(f){t={error:f}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.g.clear()}},E_.prototype.stringify=function(t){return It.JSON.stringify(t,void 0)},E_.prototype.parse=function(t){return It.JSON.parse(t,void 0)},Er(hm,oE),hm.prototype.g=function(){return new D_(this.l,this.j)},hm.prototype.i=function(t){return function(){return t}}({}),Er(D_,Cr);var I_=0;function fT(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Fd(t){t.readyState=4,t.l=null,t.j=null,t.A=null,kd(t)}function kd(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Be=D_.prototype).open=function(t,e){if(this.readyState!=I_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,kd(this)},Be.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Be.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fd(this)),this.readyState=I_},Be.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,kd(this)),this.g&&(this.readyState=3,kd(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fT(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Be.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Fd(this):kd(this),3==this.readyState&&fT(this)}},Be.Ua=function(t){this.g&&(this.response=this.responseText=t,Fd(this))},Be.Ta=function(t){this.g&&(this.response=t,Fd(this))},Be.ha=function(){this.g&&Fd(this)},Be.setRequestHeader=function(t,e){this.v.append(t,e)},Be.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Be.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),i=e.next();!i.done;)t.push((i=i.value)[0]+": "+i[1]),i=e.next();return t.join("\r\n")},Object.defineProperty(D_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var T_=It.JSON.parse;function Bn(t){Cr.call(this),this.headers=new bf,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bE,this.K=this.L=!1}Er(Bn,Cr);var bE="",uR=/^https?$/i,cR=["POST","PUT"];function hT(t){return"content-type"==t.toLowerCase()}function S_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,dT(t),Fa(t)}function dT(t){t.D||(t.D=!0,Or(t,"complete"),Or(t,"error"))}function wE(t){if(t.h&&void 0!==Qy&&(!t.C[1]||4!=js(t)||2!=t.ba()))if(t.v&&4==js(t))rm(t.Fa,0,t);else if(Or(t,"readystatechange"),4==js(t)){t.h=!1;try{var a,e=t.ba();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break e;default:i=!1}if(!(a=i)){var c;if(c=0===e){var f=String(t.H).match(wf)[1]||null;if(!f&&It.self&&It.self.location){var v=It.self.location.protocol;f=v.substr(0,v.length-1)}c=!uR.test(f?f.toLowerCase():"")}a=c}if(a)Or(t,"complete"),Or(t,"success");else{t.m=6;try{var _=2<js(t)?t.g.statusText:""}catch(C){_=""}t.j=_+" ["+t.ba()+"]",dT(t)}}finally{Fa(t)}}}function Fa(t,e){if(t.g){EE(t);var i=t.g,a=t.C[0]?Yy:null;t.g=null,t.C=null,e||Or(t,"ready");try{i.onreadystatechange=a}catch(c){}}}function EE(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(It.clearTimeout(t.A),t.A=null)}function js(t){return t.g?t.g.readyState:0}function CE(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case bE:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Af(t,e,i){e:{for(a in i){var a=!1;break e}a=!0}a||(i=function(t){var e="";return e_(t,function(i,a){e+=a,e+=":",e+=i,e+="\r\n"}),e}(i),"string"==typeof t?null!=i&&encodeURIComponent(String(i)):pn(t,e,i))}function Ld(t,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||e}function A_(t){this.za=0,this.l=[],this.h=new Dd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ld("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ld("baseRetryDelayMs",5e3,t),this.$a=Ld("retryDelaySeedMs",1e4,t),this.Ya=Ld("forwardChannelMaxRetries",2,t),this.ra=Ld("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new __(t&&t.concurrentRequestLimit),this.Ca=new aR,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function R_(t){if(IE(t),3==t.G){var e=t.V++,i=go(t.F);pn(i,"SID",t.J),pn(i,"RID",e),pn(i,"TYPE","terminate"),Rf(t,i),(e=new xd(t,t.h,e,void 0)).K=2,e.v=Ma(go(i)),i=!1,It.navigator&&It.navigator.sendBeacon&&(i=It.navigator.sendBeacon(e.v.toString(),"")),!i&&It.Image&&((new Image).src=e.v,i=!0),i||(e.g=vm(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Pd(e)}mm(t)}function dm(t){t.g&&(Vd(t),t.g.cancel(),t.g=null)}function IE(t){dm(t),t.u&&(It.clearTimeout(t.u),t.u=null),P_(t),t.i.cancel(),t.m&&("number"==typeof t.m&&It.clearTimeout(t.m),t.m=null)}function x_(t,e){t.l.push(new aT(t.Za++,e)),3==t.G&&pm(t)}function pm(t){cT(t.i)||t.m||(t.m=!0,wd(t.Ha,t),t.C=0)}function SE(t,e){var i;i=e?e.m:t.V++;var a=go(t.F);pn(a,"SID",t.J),pn(a,"RID",i),pn(a,"AID",t.U),Rf(t,a),t.o&&t.s&&Af(a,t.o,t.s),i=new xd(t,t.h,i,t.C+1),null===t.o&&(i.H=t.s),e&&(t.l=e.D.concat(t.l)),e=N_(t,i,1e3),i.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),b_(t.i,i),Nd(i,a,e)}function Rf(t,e){t.j&&g_({},function(i,a){pn(e,a,i)})}function N_(t,e,i){i=Math.min(t.l.length,i);var a=t.j?Mr(t.j.Oa,t.j,t):null;e:for(var c=t.l,f=-1;;){var v=["count="+i];-1==f?0<i?v.push("ofs="+(f=c[0].h)):f=0:v.push("ofs="+f);for(var _=!0,C=0;C<i;C++){var A=c[C].h,x=c[C].g;if(0>(A-=f))f=Math.max(0,c[C].h-100),_=!1;else try{lT(x,v,"req"+A+"_")}catch(P){a&&a(x)}}if(_){a=v.join("&");break e}}return t=t.l.splice(0,i),e.D=t,a}function gm(t){t.g||t.u||(t.Y=1,wd(t.Ga,t),t.A=0)}function AE(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Sd(Mr(t.Ga,t),xE(t,t.A)),t.A++,0))}function Vd(t){null!=t.B&&(It.clearTimeout(t.B),t.B=null)}function RE(t){t.g=new xd(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=go(t.oa);pn(e,"RID","rpc"),pn(e,"SID",t.J),pn(e,"CI",t.N?"0":"1"),pn(e,"AID",t.U),Rf(t,e),pn(e,"TYPE","xmlhttp"),t.o&&t.s&&Af(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var i=t.g;t=t.la,i.K=1,i.v=Ma(go(e)),i.s=null,i.U=!0,uE(i,t)}function P_(t){null!=t.v&&(It.clearTimeout(t.v),t.v=null)}function xf(t,e){var i=null;if(t.g==e){P_(t),Vd(t),t.g=null;var a=2}else{if(!fm(t.i,e))return;i=e.D,w_(t.i,e),a=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==a){i=e.s?e.s.length:0,e=Date.now()-e.F;var c=t.C;Or(a=Id(),new om(a,i,e,c)),pm(t)}else gm(t);else if(3==(c=e.o)||0==c&&0<t.I||!(1==a&&function(t,e){return!(vE(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Sd(Mr(t.Ha,t,e),xE(t,t.C)),t.C++,0)))}(t,e)||2==a&&AE(t)))switch(i&&0<i.length&&(e=t.i,e.i=e.i.concat(i)),c){case 1:Ru(t,5);break;case 4:Ru(t,10);break;case 3:Ru(t,6);break;default:Ru(t,2)}}function xE(t,e){var i=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(i*=2),i*e}function Ru(t,e){if(t.h.info("Error code "+e),2==e){var i=null;t.j&&(i=null);var a=Mr(t.jb,t);i||(i=new qi("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||li(i,"https"),Ma(i)),function(t,e){var i=new Dd;if(It.Image){var a=new Image;a.onload=jg(C_,i,a,"TestLoadImage: loaded",!0,e),a.onerror=jg(C_,i,a,"TestLoadImage: error",!1,e),a.onabort=jg(C_,i,a,"TestLoadImage: abort",!1,e),a.ontimeout=jg(C_,i,a,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=t}else e(!1)}(i.toString(),a)}else Ii(2);t.G=0,t.j&&t.j.va(e),mm(t),IE(t)}function mm(t){t.G=0,t.I=-1,t.j&&((0!=yE(t.i).length||0!=t.l.length)&&(t.i.i.length=0,ho(t.l),t.l.length=0),t.j.ua())}function NE(t,e,i){var a=function(t){return t instanceof qi?go(t):new qi(t,void 0)}(i);if(""!=a.i)e&&Ef(a,e+"."+a.i),Pa(a,a.m);else{var c=It.location;a=function(t,e,i,a){var c=new qi(null,void 0);return t&&li(c,t),e&&Ef(c,e),i&&Pa(c,i),a&&(c.l=a),c}(c.protocol,e?e+"."+c.hostname:c.hostname,+c.port,i)}return t.aa&&e_(t.aa,function(f,v){pn(a,v,f)}),i=t.sa,(e=t.D)&&i&&pn(a,e,i),pn(a,"VER",t.ma),Rf(t,a),a}function vm(t,e,i){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Bn(i&&t.Ba&&!t.qa?new hm({ib:!0}):t.qa)).L=t.H,e}function ym(){}function Ud(){if(Iu&&!(10<=Number(Kg)))throw Error("Environmental error: no available transport.")}function mo(t,e){Cr.call(this),this.g=new A_(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!pf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pf(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Hc(this)}function PE(t){sE.call(this);var e=t.__sm__;if(e){e:{for(var i in e){t=i;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function M_(){am.call(this),this.status=1}function Hc(t){this.g=t}(Be=Bn.prototype).ea=function(t,e,i,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():um.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:um),this.g.onreadystatechange=Mr(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(f){return void S_(this,f)}t=i||"";var c=new bf(this.headers);a&&g_(a,function(f,v){c.set(v,f)}),a=function(t){e:{for(var e=hT,i=t.length,a="string"==typeof t?t.split(""):t,c=0;c<i;c++)if(c in a&&e.call(void 0,a[c],c,t)){e=c;break e}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(c.T()),i=It.FormData&&t instanceof It.FormData,!(0<=Uw(cR,e))||a||i||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c.forEach(function(f,v){this.g.setRequestHeader(v,f)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{EE(this),0<this.B&&((this.K=function(t){return Iu&&Yw()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mr(this.pa,this)):this.A=rm(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(f){S_(this,f)}},Be.pa=function(){void 0!==Qy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Or(this,"timeout"),this.abort(8))},Be.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Or(this,"complete"),Or(this,"abort"),Fa(this))},Be.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fa(this,!0)),Bn.Z.M.call(this)},Be.Fa=function(){this.s||(this.F||this.v||this.l?wE(this):this.cb())},Be.cb=function(){wE(this)},Be.ba=function(){try{return 2<js(this)?this.g.status:-1}catch(t){return-1}},Be.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Be.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),T_(e)}},Be.Da=function(){return this.m},Be.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Be=A_.prototype).ma=8,Be.G=1,Be.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Be.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new xd(this,this.h,t,void 0),i=this.s;if(this.P&&(i?zw(i=Bg(i),this.P):i=this.P),null===this.o&&(e.H=i),this.ja)e:{for(var a=0,c=0;c<this.l.length;c++){var f=this.l[c];if(void 0===(f="__data__"in f.g&&"string"==typeof(f=f.g.__data__)?f.length:void 0))break;if(4096<(a+=f)){a=c;break e}if(4096===a||c===this.l.length-1){a=c+1;break e}}a=1e3}else a=1e3;a=N_(this,e,a),pn(c=go(this.F),"RID",t),pn(c,"CVER",22),this.D&&pn(c,"X-HTTP-Session-Id",this.D),Rf(this,c),this.o&&i&&Af(c,this.o,i),b_(this.i,e),this.Ra&&pn(c,"TYPE","init"),this.ja?(pn(c,"$req",a),pn(c,"SID","null"),e.$=!0,Nd(e,c,null)):Nd(e,c,a),this.G=2}}else 3==this.G&&(t?SE(this,t):0==this.l.length||cT(this.i)||SE(this))},Be.Ga=function(){if(this.u=null,RE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Sd(Mr(this.bb,this),t)}},Be.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ii(10),dm(this),RE(this))},Be.ab=function(){null!=this.v&&(this.v=null,dm(this),AE(this),Ii(19))},Be.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Ii(2)):(this.h.info("Failed to ping google.com"),Ii(1))},(Be=ym.prototype).xa=function(){},Be.wa=function(){},Be.va=function(){},Be.ua=function(){},Be.Oa=function(){},Ud.prototype.g=function(t,e){return new mo(t,e)},Er(mo,Cr),mo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,i=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),wd(Mr(t.hb,t,e))),Ii(0),t.W=e,t.aa=i||{},t.N=t.X,t.F=NE(t,null,t.W),pm(t)},mo.prototype.close=function(){R_(this.g)},mo.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,x_(this.g,e)}else this.v?((e={}).__data__=l_(t),x_(this.g,e)):x_(this.g,t)},mo.prototype.M=function(){this.g.j=null,delete this.j,R_(this.g),delete this.g,mo.Z.M.call(this)},Er(PE,sE),Er(M_,am),Er(Hc,ym),Hc.prototype.xa=function(){Or(this.g,"a")},Hc.prototype.wa=function(t){Or(this.g,new PE(t))},Hc.prototype.va=function(t){Or(this.g,new M_(t))},Hc.prototype.ua=function(){Or(this.g,"b")},Ud.prototype.createWebChannel=Ud.prototype.g,mo.prototype.send=mo.prototype.u,mo.prototype.open=mo.prototype.m,mo.prototype.close=mo.prototype.close,Ad.NO_ERROR=0,Ad.TIMEOUT=8,Ad.HTTP_ERROR=6,p_.COMPLETE="complete",rT.EventType=sm,sm.OPEN="a",sm.CLOSE="b",sm.ERROR="c",sm.MESSAGE="d",Cr.prototype.listen=Cr.prototype.N,Bn.prototype.listenOnce=Bn.prototype.O,Bn.prototype.getLastError=Bn.prototype.La,Bn.prototype.getLastErrorCode=Bn.prototype.Da,Bn.prototype.getStatus=Bn.prototype.ba,Bn.prototype.getResponseJson=Bn.prototype.Qa,Bn.prototype.getResponseText=Bn.prototype.ga,Bn.prototype.send=Bn.prototype.ea;var Nf=Ad,O_=p_,_m=Su,jd_PROXY=10,jd_NOPROXY=11,F_=hm,Bd=rT,k_=Bn,zi=function(){function t(e,i){var a=this;this.previousValue=e,i&&(i.sequenceNumberHandler=function(c){return a.t(c)},this.i=function(c){return i.writeSequenceNumber(c)})}return t.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},t.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},t}();zi.o=-1;var ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xe=function(t){function e(i,a){var c=this;return(c=t.call(this,a)||this).code=i,c.message=a,c.name="FirebaseError",c.toString=function(){return c.name+": [code="+c.code+"]: "+c.message},c}return(0,k.ZT)(e,t),e}(Error),zo=new Cu.Yd("@firebase/firestore");function bm(){return zo.logLevel}function Le(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(zo.logLevel<=Cu.in.DEBUG){var a=e.map(wm);zo.debug.apply(zo,(0,k.ev)(["Firestore (8.10.0): "+t],a))}}function Qn(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(zo.logLevel<=Cu.in.ERROR){var a=e.map(wm);zo.error.apply(zo,(0,k.ev)(["Firestore (8.10.0): "+t],a))}}function Pf(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(zo.logLevel<=Cu.in.WARN){var a=e.map(wm);zo.warn.apply(zo,(0,k.ev)(["Firestore (8.10.0): "+t],a))}}function wm(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(i){return t}}function nt(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw Qn(e),new Error(e)}function gt(t,e){t||nt()}function He(t,e){return t}function kE(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(i);else for(var a=0;a<t;a++)i[a]=Math.floor(256*Math.random());return i}var L_=function(){function t(){}return t.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length,a="";a.length<20;)for(var c=kE(40),f=0;f<c.length;++f)a.length<20&&c[f]<i&&(a+=e.charAt(c[f]%e.length));return a},t}();function qt(t,e){return t<e?-1:t>e?1:0}function Mf(t,e,i){return t.length===e.length&&t.every(function(a,c){return i(a,e[c])})}function LE(t){return t+"\0"}var fi=function(){function t(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new xe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new xe(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new xe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var i=Math.floor(e/1e3);return new t(i,Math.floor(1e6*(e-1e3*i)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)},t.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Lt=function(){function t(e){this.timestamp=e}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new fi(0,0))},t.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},t.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function or(t){var e=0;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e++;return e}function xu(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(i,t[i])}function VE(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var UE=function(){function t(e,i,a){void 0===i?i=0:i>e.length&&nt(),void 0===a?a=e.length-i:a>e.length-i&&nt(),this.segments=e,this.offset=i,this.len=a}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var i=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(a){i.push(a)}):i.push(e),this.construct(i)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(e){return this.segments[this.offset+e]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0},t.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0},t.prototype.forEach=function(e){for(var i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(e,i){for(var a=Math.min(e.length,i.length),c=0;c<a;c++){var f=e.get(c),v=i.get(c);if(f<v)return-1;if(f>v)return 1}return e.length<i.length?-1:e.length>i.length?1:0},t}(),Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,k.ZT)(e,t),e.prototype.construct=function(i,a,c){return new e(i,a,c)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];for(var c=[],f=0,v=i;f<v.length;f++){var _=v[f];if(_.indexOf("//")>=0)throw new xe(ve.INVALID_ARGUMENT,"Invalid segment ("+_+"). Paths must not contain // in them.");c.push.apply(c,_.split("/").filter(function(C){return C.length>0}))}return new e(c)},e.emptyPath=function(){return new e([])},e}(UE),gT=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,k.ZT)(e,t),e.prototype.construct=function(i,a,c){return new e(i,a,c)},e.isValidIdentifier=function(i){return gT.test(i)},e.prototype.canonicalString=function(){return this.toArray().map(function(i){return i=i.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(i)||(i="`"+i+"`"),i}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(i){for(var a=[],c="",f=0,v=function(){if(0===c.length)throw new xe(ve.INVALID_ARGUMENT,"Invalid field path ("+i+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");a.push(c),c=""},_=!1;f<i.length;){var C=i[f];if("\\"===C){if(f+1===i.length)throw new xe(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+i);var A=i[f+1];if("\\"!==A&&"."!==A&&"`"!==A)throw new xe(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+i);c+=A,f+=2}else"`"===C?(_=!_,f++):"."!==C||_?(c+=C,f++):(v(),f++)}if(v(),_)throw new xe(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+i);return new e(a)},e.emptyPath=function(){return new e([])},e}(UE),Gc=function(){function t(e){this.fields=e,e.sort(vo.comparator)}return t.prototype.covers=function(e){for(var i=0,a=this.fields;i<a.length;i++)if(a[i].isPrefixOf(e))return!0;return!1},t.prototype.isEqual=function(e){return Mf(this.fields,e.fields,function(i,a){return i.isEqual(a)})},t}(),sr=function(){function t(e){this.binaryString=e}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(i){for(var a="",c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(e){for(var i=new Uint8Array(e.length),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(e){return qt(this.binaryString,e.binaryString)},t.prototype.isEqual=function(e){return this.binaryString===e.binaryString},t}();sr.EMPTY_BYTE_STRING=new sr("");var mT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nu(t){if(gt(!!t),"string"==typeof t){var e=0,i=mT.exec(t);if(gt(!!i),i[1]){var a=i[1];a=(a+"000000000").substr(0,9),e=Number(a)}var c=new Date(t);return{seconds:Math.floor(c.getTime()/1e3),nanos:e}}return{seconds:Yn(t.seconds),nanos:Yn(t.nanos)}}function Yn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Of(t){return"string"==typeof t?sr.fromBase64String(t):sr.fromUint8Array(t)}function Em(t){var e,i;return"server_timestamp"===(null===(i=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function vT(t){var e=t.mapValue.fields.__previous_value__;return Em(e)?vT(e):e}function Ff(t){var e=Nu(t.mapValue.fields.__local_write_time__.timestampValue);return new fi(e.seconds,e.nanos)}function Pu(t){return null==t}function Ki(t){return 0===t&&1/t==-1/0}function jE(t){return"number"==typeof t&&Number.isInteger(t)&&!Ki(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ut=function(){function t(e){this.path=e}return t.fromPath=function(e){return new t(Jt.fromString(e))},t.fromName=function(e){return new t(Jt.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},t.prototype.isEqual=function(e){return null!==e&&0===Jt.comparator(this.path,e.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(e,i){return Jt.comparator(e.path,i.path)},t.isDocumentKey=function(e){return e.length%2==0},t.fromSegments=function(e){return new t(new Jt(e.slice()))},t}();function Kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Em(t)?4:10:nt()}function ar(t,e){var c,i=Kr(t);if(i!==Kr(e))return!1;switch(i){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ff(t).isEqual(Ff(e));case 3:return function(a,c){if("string"==typeof a.timestampValue&&"string"==typeof c.timestampValue&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;var f=Nu(a.timestampValue),v=Nu(c.timestampValue);return f.seconds===v.seconds&&f.nanos===v.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return c=e,Of(t.bytesValue).isEqual(Of(c.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,c){return Yn(a.geoPointValue.latitude)===Yn(c.geoPointValue.latitude)&&Yn(a.geoPointValue.longitude)===Yn(c.geoPointValue.longitude)}(t,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return Yn(a.integerValue)===Yn(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){var f=Yn(a.doubleValue),v=Yn(c.doubleValue);return f===v?Ki(f)===Ki(v):isNaN(f)&&isNaN(v)}return!1}(t,e);case 9:return Mf(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:return function(a,c){var f=a.mapValue.fields||{},v=c.mapValue.fields||{};if(or(f)!==or(v))return!1;for(var _ in f)if(f.hasOwnProperty(_)&&(void 0===v[_]||!ar(f[_],v[_])))return!1;return!0}(t,e);default:return nt()}}function hi(t,e){return void 0!==(t.values||[]).find(function(i){return ar(i,e)})}function $c(t,e){var c,f,v,_,i=Kr(t),a=Kr(e);if(i!==a)return qt(i,a);switch(i){case 0:return 0;case 1:return qt(t.booleanValue,e.booleanValue);case 2:return f=e,(v=Yn((c=t).integerValue||c.doubleValue))<(_=Yn(f.integerValue||f.doubleValue))?-1:v>_?1:v===_?0:isNaN(v)?isNaN(_)?0:-1:1;case 3:return V_(t.timestampValue,e.timestampValue);case 4:return V_(Ff(t),Ff(e));case 5:return qt(t.stringValue,e.stringValue);case 6:return function(c,f){var v=Of(c),_=Of(f);return v.compareTo(_)}(t.bytesValue,e.bytesValue);case 7:return function(c,f){for(var v=c.split("/"),_=f.split("/"),C=0;C<v.length&&C<_.length;C++){var A=qt(v[C],_[C]);if(0!==A)return A}return qt(v.length,_.length)}(t.referenceValue,e.referenceValue);case 8:return function(c,f){var v=qt(Yn(c.latitude),Yn(f.latitude));return 0!==v?v:qt(Yn(c.longitude),Yn(f.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(c,f){for(var v=c.values||[],_=f.values||[],C=0;C<v.length&&C<_.length;++C){var A=$c(v[C],_[C]);if(A)return A}return qt(v.length,_.length)}(t.arrayValue,e.arrayValue);case 10:return function(c,f){var v=c.fields||{},_=Object.keys(v),C=f.fields||{},A=Object.keys(C);_.sort(),A.sort();for(var x=0;x<_.length&&x<A.length;++x){var P=qt(_[x],A[x]);if(0!==P)return P;var V=$c(v[_[x]],C[A[x]]);if(0!==V)return V}return qt(_.length,A.length)}(t.mapValue,e.mapValue);default:throw nt()}}function V_(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return qt(t,e);var i=Nu(t),a=Nu(e),c=qt(i.seconds,a.seconds);return 0!==c?c:qt(i.nanos,a.nanos)}function U_(t){return j_(t)}function j_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?"time("+(c=Nu(t.timestampValue)).seconds+","+c.nanos+")":"stringValue"in t?t.stringValue:"bytesValue"in t?Of(t.bytesValue).toBase64():"referenceValue"in t?ut.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(a){for(var c="[",f=!0,v=0,_=a.values||[];v<_.length;v++)f?f=!1:c+=",",c+=j_(_[v]);return c+"]"}(t.arrayValue):"mapValue"in t?function(a){for(var c="{",f=!0,v=0,_=Object.keys(a.fields||{}).sort();v<_.length;v++){var C=_[v];f?f=!1:c+=",",c+=C+":"+j_(a.fields[C])}return c+"}"}(t.mapValue):nt();var c,e}function Cm(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function B_(t){return!!t&&"integerValue"in t}function Hd(t){return!!t&&"arrayValue"in t}function kf(t){return!!t&&"nullValue"in t}function BE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gd(t){return!!t&&"mapValue"in t}function $d(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return xu(t.mapValue.fields,function(c,f){return e.mapValue.fields[c]=$d(f)}),e}if(t.arrayValue){for(var i={arrayValue:{values:[]}},a=0;a<(t.arrayValue.values||[]).length;++a)i.arrayValue.values[a]=$d(t.arrayValue.values[a]);return i}return Object.assign({},t)}var Ti=function(){function t(e){this.value=e}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){if(e.isEmpty())return this.value;for(var i=this.value,a=0;a<e.length-1;++a)if(!Gd(i=(i.mapValue.fields||{})[e.get(a)]))return null;return(i=(i.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.set=function(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=$d(i)},t.prototype.setAll=function(e){var i=this,a=vo.emptyPath(),c={},f=[];e.forEach(function(_,C){if(!a.isImmediateParentOf(C)){var A=i.getFieldsMap(a);i.applyChanges(A,c,f),c={},f=[],a=C.popLast()}_?c[C.lastSegment()]=$d(_):f.push(C.lastSegment())});var v=this.getFieldsMap(a);this.applyChanges(v,c,f)},t.prototype.delete=function(e){var i=this.field(e.popLast());Gd(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]},t.prototype.isEqual=function(e){return ar(this.value,e.value)},t.prototype.getFieldsMap=function(e){var i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(var a=0;a<e.length;++a){var c=i.mapValue.fields[e.get(a)];Gd(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=c),i=c}return i.mapValue.fields},t.prototype.applyChanges=function(e,i,a){xu(i,function(_,C){return e[_]=C});for(var c=0,f=a;c<f.length;c++)delete e[f[c]]},t.prototype.clone=function(){return new t($d(this.value))},t}();function H_(t){var e=[];return xu(t.fields,function(i,a){var c=new vo([i]);if(Gd(a)){var f=H_(a.mapValue).fields;if(0===f.length)e.push(c);else for(var v=0,_=f;v<_.length;v++)e.push(c.child(_[v]))}else e.push(c)}),new Gc(e)}var ur=function(){function t(e,i,a,c,f){this.key=e,this.documentType=i,this.version=a,this.data=c,this.documentState=f}return t.newInvalidDocument=function(e){return new t(e,0,Lt.min(),Ti.empty(),0)},t.newFoundDocument=function(e,i,a){return new t(e,1,i,a,0)},t.newNoDocument=function(e,i){return new t(e,2,i,Ti.empty(),0)},t.newUnknownDocument=function(e,i){return new t(e,3,i,Ti.empty(),2)},t.prototype.convertToFoundDocument=function(e,i){return this.version=e,this.documentType=1,this.data=i,this.documentState=0,this},t.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),yT=function(t,e,i,a,c,f,v){void 0===e&&(e=null),void 0===i&&(i=[]),void 0===a&&(a=[]),void 0===c&&(c=null),void 0===f&&(f=null),void 0===v&&(v=null),this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=f,this.endAt=v,this.h=null};function G_(t,e,i,a,c,f,v){return void 0===e&&(e=null),void 0===i&&(i=[]),void 0===a&&(a=[]),void 0===c&&(c=null),void 0===f&&(f=null),void 0===v&&(v=null),new yT(t,e,i,a,c,f,v)}function Lf(t){var e=He(t);if(null===e.h){var i=e.path.canonicalString();null!==e.collectionGroup&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(function(a){return(c=a).field.canonicalString()+c.op.toString()+U_(c.value);var c}).join(","),i+="|ob:",i+=e.orderBy.map(function(a){return(c=a).field.canonicalString()+c.dir;var c}).join(","),Pu(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=Dm(e.startAt)),e.endAt&&(i+="|ub:",i+=Dm(e.endAt)),e.h=i}return e.h}function Wd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(var i=0;i<t.orderBy.length;i++)if(!bT(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var a=0;a<t.filters.length;a++)if((c=t.filters[a]).op!==(f=e.filters[a]).op||!c.field.isEqual(f.field)||!ar(c.value,f.value))return!1;var c,f;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QE(t.startAt,e.startAt)&&QE(t.endAt,e.endAt)}function Wc(t){return ut.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Si=function(t){function e(i,a,c){var f=this;return(f=t.call(this)||this).field=i,f.op=a,f.value=c,f}return(0,k.ZT)(e,t),e.create=function(i,a,c){return i.isKeyField()?"in"===a||"not-in"===a?this.l(i,a,c):new HE(i,a,c):"array-contains"===a?new WE(i,c):"in"===a?new qE(i,c):"not-in"===a?new zE(i,c):"array-contains-any"===a?new _T(i,c):new e(i,a,c)},e.l=function(i,a,c){return"in"===a?new GE(i,c):new $E(i,c)},e.prototype.matches=function(i){var a=i.data.field(this.field);return"!="===this.op?null!==a&&this.m($c(a,this.value)):null!==a&&Kr(this.value)===Kr(a)&&this.m($c(a,this.value))},e.prototype.m=function(i){switch(this.op){case"<":return i<0;case"<=":return i<=0;case"==":return 0===i;case"!=":return 0!==i;case">":return i>0;case">=":return i>=0;default:return nt()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),HE=function(t){function e(i,a,c){var f=this;return(f=t.call(this,i,a,c)||this).key=ut.fromName(c.referenceValue),f}return(0,k.ZT)(e,t),e.prototype.matches=function(i){var a=ut.comparator(i.key,this.key);return this.m(a)},e}(Si),GE=function(t){function e(i,a){var c=this;return(c=t.call(this,i,"in",a)||this).keys=$_(0,a),c}return(0,k.ZT)(e,t),e.prototype.matches=function(i){return this.keys.some(function(a){return a.isEqual(i.key)})},e}(Si),$E=function(t){function e(i,a){var c=this;return(c=t.call(this,i,"not-in",a)||this).keys=$_(0,a),c}return(0,k.ZT)(e,t),e.prototype.matches=function(i){return!this.keys.some(function(a){return a.isEqual(i.key)})},e}(Si);function $_(t,e){var i;return((null===(i=e.arrayValue)||void 0===i?void 0:i.values)||[]).map(function(a){return ut.fromName(a.referenceValue)})}var WE=function(t){function e(i,a){return t.call(this,i,"array-contains",a)||this}return(0,k.ZT)(e,t),e.prototype.matches=function(i){var a=i.data.field(this.field);return Hd(a)&&hi(a.arrayValue,this.value)},e}(Si),qE=function(t){function e(i,a){return t.call(this,i,"in",a)||this}return(0,k.ZT)(e,t),e.prototype.matches=function(i){var a=i.data.field(this.field);return null!==a&&hi(this.value.arrayValue,a)},e}(Si),zE=function(t){function e(i,a){return t.call(this,i,"not-in",a)||this}return(0,k.ZT)(e,t),e.prototype.matches=function(i){if(hi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var a=i.data.field(this.field);return null!==a&&!hi(this.value.arrayValue,a)},e}(Si),_T=function(t){function e(i,a){return t.call(this,i,"array-contains-any",a)||this}return(0,k.ZT)(e,t),e.prototype.matches=function(i){var a=this,c=i.data.field(this.field);return!(!Hd(c)||!c.arrayValue.values)&&c.arrayValue.values.some(function(f){return hi(a.value.arrayValue,f)})},e}(Si),qd=function(t,e){this.position=t,this.before=e};function Dm(t){return(t.before?"b":"a")+":"+t.position.map(function(e){return U_(e)}).join(",")}var Vf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function bT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function KE(t,e,i){for(var a=0,c=0;c<t.position.length;c++){var f=e[c],v=t.position[c];if(a=f.field.isKeyField()?ut.comparator(ut.fromName(v.referenceValue),i.key):$c(v,i.data.field(f.field)),"desc"===f.dir&&(a*=-1),0!==a)break}return t.before?a<=0:a<0}function QE(t,e){if(null===t)return null===e;if(null===e||t.before!==e.before||t.position.length!==e.position.length)return!1;for(var i=0;i<t.position.length;i++)if(!ar(t.position[i],e.position[i]))return!1;return!0}var ka=function(t,e,i,a,c,f,v,_){void 0===e&&(e=null),void 0===i&&(i=[]),void 0===a&&(a=[]),void 0===c&&(c=null),void 0===f&&(f="F"),void 0===v&&(v=null),void 0===_&&(_=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=f,this.startAt=v,this.endAt=_,this.p=null,this.T=null};function YE(t,e,i,a,c,f,v,_){return new ka(t,e,i,a,c,f,v,_)}function Uf(t){return new ka(t)}function Im(t){return!Pu(t.limit)&&"F"===t.limitType}function Tm(t){return!Pu(t.limit)&&"L"===t.limitType}function W_(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function q_(t){for(var e=0,i=t.filters;e<i.length;e++){var a=i[e];if(a.g())return a.field}return null}function z_(t){return null!==t.collectionGroup}function jf(t){var e=He(t);if(null===e.p){e.p=[];var i=q_(e),a=W_(e);if(null!==i&&null===a)i.isKeyField()||e.p.push(new Vf(i)),e.p.push(new Vf(vo.keyField(),"asc"));else{for(var c=!1,f=0,v=e.explicitOrderBy;f<v.length;f++){var _=v[f];e.p.push(_),_.field.isKeyField()&&(c=!0)}if(!c){var C=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Vf(vo.keyField(),C))}}}return e.p}function yo(t){var e=He(t);if(!e.T)if("F"===e.limitType)e.T=G_(e.path,e.collectionGroup,jf(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var i=[],a=0,c=jf(e);a<c.length;a++){var f=c[a];i.push(new Vf(f.field,"desc"===f.dir?"asc":"desc"))}var _=e.endAt?new qd(e.endAt.position,!e.endAt.before):null,C=e.startAt?new qd(e.startAt.position,!e.startAt.before):null;e.T=G_(e.path,e.collectionGroup,i,e.filters,e.limit,_,C)}return e.T}function JE(t,e,i){return new ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,i,t.startAt,t.endAt)}function Bf(t,e){return Wd(yo(t),yo(e))&&t.limitType===e.limitType}function K_(t){return Lf(yo(t))+"|lt:"+t.limitType}function Sm(t){return"Query(target="+(i=(e=yo(t)).path.canonicalString(),null!==e.collectionGroup&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=", filters: ["+e.filters.map(function(a){return(c=a).field.canonicalString()+" "+c.op+" "+U_(c.value);var c}).join(", ")+"]"),Pu(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=", orderBy: ["+e.orderBy.map(function(a){return(c=a).field.canonicalString()+" ("+c.dir+")";var c}).join(", ")+"]"),e.startAt&&(i+=", startAt: "+Dm(e.startAt)),e.endAt&&(i+=", endAt: "+Dm(e.endAt)),"Target("+i+"); limitType=")+t.limitType+")";var e,i}function Hf(t,e){return e.isFoundDocument()&&(c=(a=e).key.path,null!==(i=t).collectionGroup?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):ut.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c))&&function(i,a){for(var c=0,f=i.explicitOrderBy;c<f.length;c++){var v=f[c];if(!v.field.isKeyField()&&null===a.data.field(v.field))return!1}return!0}(t,e)&&function(i,a){for(var c=0,f=i.filters;c<f.length;c++)if(!f[c].matches(a))return!1;return!0}(t,e)&&function(i,a){return!(i.startAt&&!KE(i.startAt,jf(i),a)||i.endAt&&KE(i.endAt,jf(i),a))}(t,e);var i,a,c}function Q_(t){return function(e,i){for(var a=!1,c=0,f=jf(t);c<f.length;c++){var v=f[c],_=ZE(v,e,i);if(0!==_)return _;a=a||v.field.isKeyField()}return 0}}function ZE(t,e,i){var c,v,_,C,a=t.field.isKeyField()?ut.comparator(e.key,i.key):(v=i,_=e.data.field(c=t.field),C=v.data.field(c),null!==_&&null!==C?$c(_,C):nt());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return nt()}}function Y_(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ki(e)?"-0":e}}function J_(t){return{integerValue:""+t}}function Z_(t,e){return jE(e)?J_(e):Y_(t,e)}var Gf=function(){this._=void 0};function XE(t,e,i){return t instanceof $f?(f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(a=i).seconds,nanos:a.nanoseconds}}}},(c=e)&&(f.fields.__previous_value__=c),{mapValue:f}):t instanceof _o?wT(t,e):t instanceof La?ET(t,e):function(a,c){var f=eC(a,c),v=X_(f)+X_(a.A);return B_(f)&&B_(a.A)?J_(v):Y_(a.R,v)}(t,e);var a,c,f}function qc(t,e,i){return t instanceof _o?wT(t,e):t instanceof La?ET(t,e):i}function eC(t,e){return t instanceof zc?B_(i=e)||(a=i)&&"doubleValue"in a?e:{integerValue:0}:null;var a,i}var $f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,k.ZT)(e,t),e}(Gf),_o=function(t){function e(i){var a=this;return(a=t.call(this)||this).elements=i,a}return(0,k.ZT)(e,t),e}(Gf);function wT(t,e){for(var i=CT(e),a=function(v){i.some(function(_){return ar(_,v)})||i.push(v)},c=0,f=t.elements;c<f.length;c++)a(f[c]);return{arrayValue:{values:i}}}var La=function(t){function e(i){var a=this;return(a=t.call(this)||this).elements=i,a}return(0,k.ZT)(e,t),e}(Gf);function ET(t,e){for(var i=CT(e),a=function(v){i=i.filter(function(_){return!ar(_,v)})},c=0,f=t.elements;c<f.length;c++)a(f[c]);return{arrayValue:{values:i}}}var zc=function(t){function e(i,a){var c=this;return(c=t.call(this)||this).R=i,c.A=a,c}return(0,k.ZT)(e,t),e}(Gf);function X_(t){return Yn(t.integerValue||t.doubleValue)}function CT(t){return Hd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ct=function(t,e){this.field=t,this.transform=e},DT=function(t,e){this.version=t,this.transformResults=e},Qr=function(){function t(e,i){this.updateTime=e,this.exists=i}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},t}();function Am(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Kc=function(){};function IT(t,e,i){var a,c,f,v,_;t instanceof qf?(c=e,f=i,v=(a=t).value.clone(),_=e0(a.fieldTransforms,c,f.transformResults),v.setAll(_),c.convertToFoundDocument(f.version,v).setHasCommittedMutations()):t instanceof Bs?function(a,c,f){if(Am(a.precondition,c)){var v=e0(a.fieldTransforms,c,f.transformResults),_=c.data;_.setAll(tC(a)),_.setAll(v),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()}else c.convertToUnknownDocument(f.version)}(t,e,i):function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,i)}function Wf(t,e,i){var c;t instanceof qf?function(a,c,f){if(Am(a.precondition,c)){var v=a.value.clone(),_=t0(a.fieldTransforms,f,c);v.setAll(_),c.convertToFoundDocument(TT(c),v).setHasLocalMutations()}}(t,e,i):t instanceof Bs?function(a,c,f){if(Am(a.precondition,c)){var v=t0(a.fieldTransforms,f,c),_=c.data;_.setAll(tC(a)),_.setAll(v),c.convertToFoundDocument(TT(c),_).setHasLocalMutations()}}(t,e,i):Am(t.precondition,c=e)&&c.convertToNoDocument(Lt.min())}function Rm(t,e){for(var i=null,a=0,c=t.fieldTransforms;a<c.length;a++){var f=c[a],v=e.data.field(f.field),_=eC(f.transform,v||null);null!=_&&(null==i&&(i=Ti.empty()),i.set(f.field,_))}return i||null}function On(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(i=t.fieldTransforms)&&void 0===a||i&&a&&Mf(i,a,function(c,f){return(v=c).field.isEqual((_=f).field)&&(A=_.transform,(C=v.transform)instanceof _o&&A instanceof _o||C instanceof La&&A instanceof La?Mf(C.elements,A.elements,ar):C instanceof zc&&A instanceof zc?ar(C.A,A.A):C instanceof $f&&A instanceof $f);var v,_,C,A})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var i,a}function TT(t){return t.isFoundDocument()?t.version:Lt.min()}var qf=function(t){function e(i,a,c,f){void 0===f&&(f=[]);var v=this;return(v=t.call(this)||this).key=i,v.value=a,v.precondition=c,v.fieldTransforms=f,v.type=0,v}return(0,k.ZT)(e,t),e}(Kc),Bs=function(t){function e(i,a,c,f,v){void 0===v&&(v=[]);var _=this;return(_=t.call(this)||this).key=i,_.data=a,_.fieldMask=c,_.precondition=f,_.fieldTransforms=v,_.type=1,_}return(0,k.ZT)(e,t),e}(Kc);function tC(t){var e=new Map;return t.fieldMask.fields.forEach(function(i){if(!i.isEmpty()){var a=t.data.field(i);e.set(i,a)}}),e}function e0(t,e,i){var a=new Map;gt(t.length===i.length);for(var c=0;c<i.length;c++){var f=t[c],v=f.transform,_=e.data.field(f.field);a.set(f.field,qc(v,_,i[c]))}return a}function t0(t,e,i){for(var a=new Map,c=0,f=t;c<f.length;c++){var v=f[c],_=v.transform,C=i.data.field(v.field);a.set(v.field,XE(_,C,e))}return a}var Jn,zt,zd=function(t){function e(i,a){var c=this;return(c=t.call(this)||this).key=i,c.precondition=a,c.type=2,c.fieldTransforms=[],c}return(0,k.ZT)(e,t),e}(Kc),n0=function(t){function e(i,a){var c=this;return(c=t.call(this)||this).key=i,c.precondition=a,c.type=3,c.fieldTransforms=[],c}return(0,k.ZT)(e,t),e}(Kc),ST=function(t){this.count=t};function zf(t){switch(t){case ve.OK:return nt();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return nt()}}function nC(t){if(void 0===t)return Qn("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Jn.OK:return ve.OK;case Jn.CANCELLED:return ve.CANCELLED;case Jn.UNKNOWN:return ve.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return ve.INTERNAL;case Jn.UNAVAILABLE:return ve.UNAVAILABLE;case Jn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Jn.NOT_FOUND:return ve.NOT_FOUND;case Jn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Jn.ABORTED:return ve.ABORTED;case Jn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Jn.DATA_LOSS:return ve.DATA_LOSS;default:return nt()}}(zt=Jn||(Jn={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";var Yr=function(){function t(e,i){this.comparator=e,this.root=i||Ko.EMPTY}return t.prototype.insert=function(e,i){return new t(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Ko.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ko.BLACK,null,null))},t.prototype.get=function(e){for(var i=this.root;!i.isEmpty();){var a=this.comparator(e,i.key);if(0===a)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null},t.prototype.indexOf=function(e){for(var i=0,a=this.root;!a.isEmpty();){var c=this.comparator(e,a.key);if(0===c)return i+a.left.size;c<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},t.prototype.forEach=function(e){this.inorderTraversal(function(i,a){return e(i,a),!1})},t.prototype.toString=function(){var e=[];return this.inorderTraversal(function(i,a){return e.push(i+":"+a),!1}),"{"+e.join(", ")+"}"},t.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},t.prototype.getIterator=function(){return new xm(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(e){return new xm(this.root,e,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new xm(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(e){return new xm(this.root,e,this.comparator,!0)},t}(),xm=function(){function t(e,i,a,c){this.isReverse=c,this.nodeStack=[];for(var f=1;!e.isEmpty();)if(f=i?a(e.key,i):1,c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return t.prototype.getNext=function(){var e=this.nodeStack.pop(),i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},t}(),Ko=function(){function t(e,i,a,c,f){this.key=e,this.value=i,this.color=null!=a?a:t.RED,this.left=null!=c?c:t.EMPTY,this.right=null!=f?f:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,i,a,c,f){return new t(null!=e?e:this.key,null!=i?i:this.value,null!=a?a:this.color,null!=c?c:this.left,null!=f?f:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},t.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(e,i,a){var c=this,f=a(e,c.key);return(c=f<0?c.copy(null,null,null,c.left.insert(e,i,a),null):0===f?c.copy(null,i,null,null,null):c.copy(null,null,null,null,c.right.insert(e,i,a))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,i){var a,c=this;if(i(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,i),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===i(e,c.key)){if(c.right.isEmpty())return t.EMPTY;a=c.right.min(),c=c.copy(a.key,a.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,i))}return c.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},t.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},t.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)},t.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();var e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)},t}();Ko.EMPTY=null,Ko.RED=!0,Ko.BLACK=!1,Ko.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw nt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw nt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw nt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw nt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw nt()},enumerable:!1,configurable:!0}),t.prototype.copy=function(e,i,a,c,f){return this},t.prototype.insert=function(e,i,a){return new Ko(e,i)},t.prototype.remove=function(e,i){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(e){return!1},t.prototype.reverseTraversal=function(e){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var cr=function(){function t(e){this.comparator=e,this.data=new Yr(this.comparator)}return t.prototype.has=function(e){return null!==this.data.get(e)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return this.data.indexOf(e)},t.prototype.forEach=function(e){this.data.inorderTraversal(function(i,a){return e(i),!1})},t.prototype.forEachInRange=function(e,i){for(var a=this.data.getIteratorFrom(e[0]);a.hasNext();){var c=a.getNext();if(this.comparator(c.key,e[1])>=0)return;i(c.key)}},t.prototype.forEachWhile=function(e,i){var a;for(a=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return},t.prototype.firstAfterOrEqual=function(e){var i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null},t.prototype.getIterator=function(){return new r0(this.data.getIterator())},t.prototype.getIteratorFrom=function(e){return new r0(this.data.getIteratorFrom(e))},t.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},t.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(e){var i=this;return i.size<e.size&&(i=e,e=this),e.forEach(function(a){i=i.add(a)}),i},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var i=this.data.getIterator(),a=e.data.getIterator();i.hasNext();){var c=i.getNext().key,f=a.getNext().key;if(0!==this.comparator(c,f))return!1}return!0},t.prototype.toArray=function(){var e=[];return this.forEach(function(i){e.push(i)}),e},t.prototype.toString=function(){var e=[];return this.forEach(function(i){return e.push(i)}),"SortedSet("+e.toString()+")"},t.prototype.copy=function(e){var i=new t(this.comparator);return i.data=e,i},t}(),r0=function(){function t(e){this.iter=e}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),rC=new Yr(ut.comparator);function bo(){return rC}var Kd=new Yr(ut.comparator);function Qc(){return Kd}var AT=new Yr(ut.comparator);function iC(){return AT}var RT=new cr(ut.comparator);function cn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=RT,a=0,c=t;a<c.length;a++){var f=c[a];i=i.add(f)}return i}var oC=new cr(qt);function Qd(){return oC}var i0=function(){function t(e,i,a,c,f){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=c,this.resolvedLimboDocuments=f}return t.createSynthesizedRemoteEventForCurrentChange=function(e,i){var a=new Map;return a.set(e,Nm.createSynthesizedTargetChangeForCurrentChange(e,i)),new t(Lt.min(),a,Qd(),bo(),cn())},t}(),Nm=function(){function t(e,i,a,c,f){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=c,this.removedDocuments=f}return t.createSynthesizedTargetChangeForCurrentChange=function(e,i){return new t(sr.EMPTY_BYTE_STRING,i,cn(),cn(),cn())},t}(),Pm=function(t,e,i,a){this.v=t,this.removedTargetIds=e,this.key=i,this.P=a},sC=function(t,e){this.targetId=t,this.V=e},xT=function(t,e,i,a){void 0===i&&(i=sr.EMPTY_BYTE_STRING),void 0===a&&(a=null),this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a},NT=function(){function t(){this.S=0,this.D=o0(),this.C=sr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},t.prototype.M=function(){var e=cn(),i=cn(),a=cn();return this.D.forEach(function(c,f){switch(f){case 0:e=e.add(c);break;case 2:i=i.add(c);break;case 1:a=a.add(c);break;default:nt()}}),new Nm(this.C,this.N,e,i,a)},t.prototype.L=function(){this.k=!1,this.D=o0()},t.prototype.B=function(e,i){this.k=!0,this.D=this.D.insert(e,i)},t.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),fR=function(){function t(e){this.W=e,this.G=new Map,this.H=bo(),this.J=PT(),this.Y=new cr(qt)}return t.prototype.X=function(e){for(var i=0,a=e.v;i<a.length;i++){var c=a[i];e.P&&e.P.isFoundDocument()?this.Z(c,e.P):this.tt(c,e.key,e.P)}for(var f=0,v=e.removedTargetIds;f<v.length;f++)this.tt(c=v[f],e.key,e.P)},t.prototype.et=function(e){var i=this;this.forEachTarget(e,function(a){var c=i.nt(a);switch(e.state){case 0:i.st(a)&&c.O(e.resumeToken);break;case 1:c.K(),c.F||c.L(),c.O(e.resumeToken);break;case 2:c.K(),c.F||i.removeTarget(a);break;case 3:i.st(a)&&(c.j(),c.O(e.resumeToken));break;case 4:i.st(a)&&(i.it(a),c.O(e.resumeToken));break;default:nt()}})},t.prototype.forEachTarget=function(e,i){var a=this;e.targetIds.length>0?e.targetIds.forEach(i):this.G.forEach(function(c,f){a.st(f)&&i(f)})},t.prototype.rt=function(e){var i=e.targetId,a=e.V.count,c=this.ot(i);if(c){var f=c.target;if(Wc(f))if(0===a){var v=new ut(f.path);this.tt(i,v,ur.newNoDocument(v,Lt.min()))}else gt(1===a);else this.ct(i)!==a&&(this.it(i),this.Y=this.Y.add(i))}},t.prototype.ut=function(e){var i=this,a=new Map;this.G.forEach(function(v,_){var C=i.ot(_);if(C){if(v.current&&Wc(C.target)){var A=new ut(C.target.path);null!==i.H.get(A)||i.at(_,A)||i.tt(_,A,ur.newNoDocument(A,e))}v.$&&(a.set(_,v.M()),v.L())}});var c=cn();this.J.forEach(function(v,_){var C=!0;_.forEachWhile(function(A){var x=i.ot(A);return!x||2===x.purpose||(C=!1,!1)}),C&&(c=c.add(v))});var f=new i0(e,a,this.Y,this.H,c);return this.H=bo(),this.J=PT(),this.Y=new cr(qt),f},t.prototype.Z=function(e,i){if(this.st(e)){var a=this.at(e,i.key)?2:0;this.nt(e).B(i.key,a),this.H=this.H.insert(i.key,i),this.J=this.J.insert(i.key,this.ht(i.key).add(e))}},t.prototype.tt=function(e,i,a){if(this.st(e)){var c=this.nt(e);this.at(e,i)?c.B(i,1):c.q(i),this.J=this.J.insert(i,this.ht(i).delete(e)),a&&(this.H=this.H.insert(i,a))}},t.prototype.removeTarget=function(e){this.G.delete(e)},t.prototype.ct=function(e){var i=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size},t.prototype.U=function(e){this.nt(e).U()},t.prototype.nt=function(e){var i=this.G.get(e);return i||(i=new NT,this.G.set(e,i)),i},t.prototype.ht=function(e){var i=this.J.get(e);return i||(i=new cr(qt),this.J=this.J.insert(e,i)),i},t.prototype.st=function(e){var i=null!==this.ot(e);return i||Le("WatchChangeAggregator","Detected inactive target",e),i},t.prototype.ot=function(e){var i=this.G.get(e);return i&&i.F?null:this.W.lt(e)},t.prototype.it=function(e){var i=this;this.G.set(e,new NT),this.W.getRemoteKeysForTarget(e).forEach(function(a){i.tt(e,a,null)})},t.prototype.at=function(e,i){return this.W.getRemoteKeysForTarget(e).has(i)},t}();function PT(){return new Yr(ut.comparator)}function o0(){return new Yr(ut.comparator)}var Mm={asc:"ASCENDING",desc:"DESCENDING"},MT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OT=function(t,e){this.databaseId=t,this.I=e};function Kf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qf(t,e){return t.I?e.toBase64():e.toUint8Array()}function FT(t,e){return Kf(t,e.toTimestamp())}function Dr(t){return gt(!!t),Lt.fromTimestamp((i=Nu(t),new fi(i.seconds,i.nanos)));var i}function s0(t,e){return(i=t,new Jt(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function aC(t){var e=Jt.fromString(t);return gt(gC(e)),e}function Yd(t,e){return s0(t.databaseId,e.path)}function Qo(t,e){var i=aC(e);if(i.get(1)!==t.databaseId.projectId)throw new xe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+t.databaseId.projectId);if(i.get(3)!==t.databaseId.database)throw new xe(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+t.databaseId.database);return new ut(cC(i))}function a0(t,e){return s0(t.databaseId,e)}function uC(t){var e=aC(t);return 4===e.length?Jt.emptyPath():cC(e)}function Hs(t){return new Jt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cC(t){return gt(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function u0(t,e,i){return{name:Yd(t,e),fields:i.value.mapValue.fields}}function lC(t,e,i){var a=Qo(t,e.name),c=Dr(e.updateTime),f=new Ti({mapValue:{fields:e.fields}}),v=ur.newFoundDocument(a,c,f);return i&&v.setHasCommittedMutations(),i?v.setHasCommittedMutations():v}function Jd(t,e){var i,c;if(e instanceof qf)i={update:u0(t,e.key,e.value)};else if(e instanceof zd)i={delete:Yd(t,e.key)};else if(e instanceof Bs)i={update:u0(t,e.key,e.data),updateMask:UT(e.fieldMask)};else{if(!(e instanceof n0))return nt();i={verify:Yd(t,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(function(a){return function(c,f){var v=f.transform;if(v instanceof $f)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof _o)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof La)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof zc)return{fieldPath:f.field.canonicalString(),increment:v.A};throw nt()}(0,a)})),e.precondition.isNone||(i.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:FT(t,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:nt()),i}function fC(t,e){var A,i=e.currentDocument?void 0!==(A=e.currentDocument).updateTime?Qr.updateTime(Dr(A.updateTime)):void 0!==A.exists?Qr.exists(A.exists):Qr.none():Qr.none(),a=e.updateTransforms?e.updateTransforms.map(function(A){return function(x,P){var V=null;"setToServerValue"in P?(gt("REQUEST_TIME"===P.setToServerValue),V=new $f):"appendMissingElements"in P?V=new _o(P.appendMissingElements.values||[]):"removeAllFromArray"in P?V=new La(P.removeAllFromArray.values||[]):"increment"in P?V=new zc(x,P.increment):nt();var ne=vo.fromServerFormat(P.fieldPath);return new ct(ne,V)}(t,A)}):[];if(e.update){var c=Qo(t,e.update.name),f=new Ti({mapValue:{fields:e.update.fields}});if(e.updateMask){var v=function(A){return new Gc((A.fieldPaths||[]).map(function(P){return vo.fromServerFormat(P)}))}(e.updateMask);return new Bs(c,f,v,i,a)}return new qf(c,f,i,a)}if(e.delete){var _=Qo(t,e.delete);return new zd(_,i)}if(e.verify){var C=Qo(t,e.verify);return new n0(C,i)}return nt()}function c0(t,e){return{documents:[a0(t,e.path)]}}function hC(t,e){var i={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(i.parent=a0(t,a),i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i.parent=a0(t,a.popLast()),i.structuredQuery.from=[{collectionId:a.lastSegment()}]);var c=function(_){if(0!==_.length){var C=_.map(function(A){return function(x){if("=="===x.op){if(BE(x.value))return{unaryFilter:{field:Yf(x.field),op:"IS_NAN"}};if(kf(x.value))return{unaryFilter:{field:Yf(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(BE(x.value))return{unaryFilter:{field:Yf(x.field),op:"IS_NOT_NAN"}};if(kf(x.value))return{unaryFilter:{field:Yf(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yf(x.field),op:LT(x.op),value:x.value}}}(A)});return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}}(e.filters);c&&(i.structuredQuery.where=c);var f=function(_){if(0!==_.length)return _.map(function(C){return{field:Yf((A=C).field),direction:kT(A.dir)};var A})}(e.orderBy);f&&(i.structuredQuery.orderBy=f);var C,v=(C=e.limit,t.I||Pu(C)?C:{value:C});return null!==v&&(i.structuredQuery.limit=v),e.startAt&&(i.structuredQuery.startAt=l0(e.startAt)),e.endAt&&(i.structuredQuery.endAt=l0(e.endAt)),i}function Om(t){var e=uC(t.parent),i=t.structuredQuery,a=i.from?i.from.length:0,c=null;if(a>0){gt(1===a);var f=i.from[0];f.allDescendants?c=f.collectionId:e=e.child(f.collectionId)}var v=[];i.where&&(v=dC(i.where));var _=[];i.orderBy&&(_=i.orderBy.map(function(P){return new Vf(Mu((V=P).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction));var V}));var P,V,C=null;i.limit&&(C=Pu(V="object"==typeof(P=i.limit)?P.value:P)?null:V);var A=null;i.startAt&&(A=f0(i.startAt));var x=null;return i.endAt&&(x=f0(i.endAt)),YE(e,c,_,v,C,"F",A,x)}function dC(t){return t?void 0!==t.unaryFilter?[pC(t)]:void 0!==t.fieldFilter?[VT(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(e){return dC(e)}).reduce(function(e,i){return e.concat(i)}):nt():[]}function l0(t){return{before:t.before,values:t.position}}function f0(t){return new qd(t.values||[],!!t.before)}function kT(t){return Mm[t]}function LT(t){return MT[t]}function Yf(t){return{fieldPath:t.canonicalString()}}function Mu(t){return vo.fromServerFormat(t.fieldPath)}function VT(t){return Si.create(Mu(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return nt()}}(t.fieldFilter.op),t.fieldFilter.value)}function pC(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Mu(t.unaryFilter.field);return Si.create(e,"==",{doubleValue:NaN});case"IS_NULL":var i=Mu(t.unaryFilter.field);return Si.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var a=Mu(t.unaryFilter.field);return Si.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var c=Mu(t.unaryFilter.field);return Si.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return nt()}}function UT(t){var e=[];return t.fields.forEach(function(i){return e.push(i.canonicalString())}),{fieldPaths:e}}function gC(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Yo(t){for(var e="",i=0;i<t.length;i++)e.length>0&&(e=mC(e)),e=jT(t.get(i),e);return mC(e)}function jT(t,e){for(var i=e,a=t.length,c=0;c<a;c++){var f=t.charAt(c);switch(f){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=f}}return i}function mC(t){return t+"\x01\x01"}function Va(t){var e=t.length;if(gt(e>=2),2===e)return gt("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Jt.emptyPath();for(var i=e-2,a=[],c="",f=0;f<e;){var v=t.indexOf("\x01",f);switch((v<0||v>i)&&nt(),t.charAt(v+1)){case"\x01":var _=t.substring(f,v),C=void 0;0===c.length?C=_:(C=c+=_,c=""),a.push(C);break;case"\x10":c+=t.substring(f,v),c+="\0";break;case"\x11":c+=t.substring(f,v+1);break;default:nt()}f=v+2}return new Jt(a)}var BT=function(t,e){this.seconds=t,this.nanoseconds=e},Qi=function(t,e,i){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=i};Qi.store="owner",Qi.key="owner";var Ua=function(t,e,i){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=i};Ua.store="mutationQueues",Ua.keyPath="userId";var _n=function(t,e,i,a,c){this.userId=t,this.batchId=e,this.localWriteTimeMs=i,this.baseMutations=a,this.mutations=c};_n.store="mutations",_n.keyPath="batchId",_n.userMutationsIndex="userMutationsIndex",_n.userMutationsKeyPath=["userId","batchId"];var Jr=function(){function t(){}return t.prefixForUser=function(e){return[e]},t.prefixForPath=function(e,i){return[e,Yo(i)]},t.key=function(e,i,a){return[e,Yo(i),a]},t}();Jr.store="documentMutations",Jr.PLACEHOLDER=new Jr;var HT=function(t,e){this.path=t,this.readTime=e},vC=function(t,e){this.path=t,this.version=e},Hn=function(t,e,i,a,c,f){this.unknownDocument=t,this.noDocument=e,this.document=i,this.hasCommittedMutations=a,this.readTime=c,this.parentPath=f};Hn.store="remoteDocuments",Hn.readTimeIndex="readTimeIndex",Hn.readTimeIndexPath="readTime",Hn.collectionReadTimeIndex="collectionReadTimeIndex",Hn.collectionReadTimeIndexPath=["parentPath","readTime"];var Gs=function(t){this.byteSize=t};Gs.store="remoteDocumentGlobal",Gs.key="remoteDocumentGlobalKey";var Ai=function(t,e,i,a,c,f,v){this.targetId=t,this.canonicalId=e,this.readTime=i,this.resumeToken=a,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=f,this.query=v};Ai.store="targets",Ai.keyPath="targetId",Ai.queryTargetsIndexName="queryTargetsIndex",Ai.queryTargetsKeyPath=["canonicalId","targetId"];var vr=function(t,e,i){this.targetId=t,this.path=e,this.sequenceNumber=i};vr.store="targetDocuments",vr.keyPath=["targetId","path"],vr.documentTargetsIndex="documentTargetsIndex",vr.documentTargetsKeyPath=["path","targetId"];var di=function(t,e,i,a){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=i,this.targetCount=a};di.key="targetGlobalKey",di.store="targetGlobal";var Ou=function(t,e){this.collectionId=t,this.parent=e};Ou.store="collectionParents",Ou.keyPath=["collectionId","parent"];var Jo=function(t,e,i,a){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=i,this.inForeground=a};Jo.store="clientMetadata",Jo.keyPath="clientId";var Jf=function(t,e,i){this.bundleId=t,this.createTime=e,this.version=i};Jf.store="bundles",Jf.keyPath="bundleId";var Zf=function(t,e,i){this.name=t,this.readTime=e,this.bundledQuery=i};Zf.store="namedQueries",Zf.keyPath="name";var h0=(0,k.ev)((0,k.ev)([],(0,k.ev)((0,k.ev)([],(0,k.ev)((0,k.ev)([],(0,k.ev)((0,k.ev)([],[Ua.store,_n.store,Jr.store,Hn.store,Ai.store,Qi.store,di.store,vr.store]),[Jo.store])),[Gs.store])),[Ou.store])),[Jf.store,Zf.store]),yC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_C=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},t}(),Zr=function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i})},Oe=function(){function t(e){var i=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(a){i.isDone=!0,i.result=a,i.nextCallback&&i.nextCallback(a)},function(a){i.isDone=!0,i.error=a,i.catchCallback&&i.catchCallback(a)})}return t.prototype.catch=function(e){return this.next(void 0,e)},t.prototype.next=function(e,i){var a=this;return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new t(function(c,f){a.nextCallback=function(v){a.wrapSuccess(e,v).next(c,f)},a.catchCallback=function(v){a.wrapFailure(i,v).next(c,f)}})},t.prototype.toPromise=function(){var e=this;return new Promise(function(i,a){e.next(i,a)})},t.prototype.wrapUserFunction=function(e){try{var i=e();return i instanceof t?i:t.resolve(i)}catch(a){return t.reject(a)}},t.prototype.wrapSuccess=function(e,i){return e?this.wrapUserFunction(function(){return e(i)}):t.resolve(i)},t.prototype.wrapFailure=function(e,i){return e?this.wrapUserFunction(function(){return e(i)}):t.reject(i)},t.resolve=function(e){return new t(function(i,a){i(e)})},t.reject=function(e){return new t(function(i,a){a(e)})},t.waitFor=function(e){return new t(function(i,a){var c=0,f=0,v=!1;e.forEach(function(_){++c,_.next(function(){++f,v&&f===c&&i()},function(C){return a(C)})}),v=!0,f===c&&i()})},t.or=function(e){for(var i=t.resolve(!1),a=function(v){i=i.next(function(_){return _?t.resolve(_):v()})},c=0,f=e;c<f.length;c++)a(f[c]);return i},t.forEach=function(e,i){var a=this,c=[];return e.forEach(function(f,v){c.push(i.call(a,f,v))}),this.waitFor(c)},t}(),d0=function(){function t(e,i){var a=this;this.action=e,this.transaction=i,this.aborted=!1,this.ft=new Zr,this.transaction.oncomplete=function(){a.ft.resolve()},this.transaction.onabort=function(){i.error?a.ft.reject(new Zd(e,i.error)):a.ft.resolve()},this.transaction.onerror=function(c){var f=p0(c.target.error);a.ft.reject(new Zd(e,f))}}return t.open=function(e,i,a,c){try{return new t(i,e.transaction(c,a))}catch(f){throw new Zd(i,f)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(e){var i=this.transaction.objectStore(e);return new dR(i)},t}(),Yc=function(){function t(e,i,a){this.name=e,this.version=i,this.wt=a,12.2===t._t((0,Pt.z$)())&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return Le("SimpleDb","Removing database:",e),ja(window.indexedDB.deleteDatabase(e)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,Pt.z$)(),i=t._t(e),a=0<i&&i<10,c=t.Et(e),f=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||f)},t.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)},t.It=function(e,i){return e.store(i)},t._t=function(e){var i=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(a)},t.Et=function(e){var i=e.match(/Android ([\d.]+)/i),a=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(a)},t.prototype.At=function(e){return(0,k.mG)(this,void 0,void 0,function(){var i,a=this;return(0,k.Jh)(this,function(c){switch(c.label){case 0:return this.db?[3,2]:(Le("SimpleDb","Opening database:",this.name),i=this,[4,new Promise(function(f,v){var _=indexedDB.open(a.name,a.version);_.onsuccess=function(C){f(C.target.result)},_.onblocked=function(){v(new Zd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=function(C){var A=C.target.error;v("VersionError"===A.name?new xe(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Zd(e,A))},_.onupgradeneeded=function(C){Le("SimpleDb",'Database "'+a.name+'" requires upgrade from version:',C.oldVersion),a.wt.Rt(C.target.result,_.transaction,C.oldVersion,a.version).next(function(){Le("SimpleDb","Database upgrade to version "+a.version+" complete")})}})]);case 1:i.db=c.sent(),c.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(f){return a.bt(f)}),this.db)]}})})},t.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(i){return e(i)})},t.prototype.runTransaction=function(e,i,a,c){return(0,k.mG)(this,void 0,void 0,function(){var f,v,_,C,A;return(0,k.Jh)(this,function(x){switch(x.label){case 0:f="readonly"===i,v=0,_=function(){var P,V,H,K,ne;return(0,k.Jh)(this,function(_e){switch(_e.label){case 0:++v,_e.label=1;case 1:return _e.trys.push([1,4,,5]),[4,C.At(e)];case 2:return C.db=_e.sent(),P=d0.open(C.db,e,f?"readonly":"readwrite",a),V=c(P).catch(function(Ie){return P.abort(Ie),Oe.reject(Ie)}).toPromise(),H={},V.catch(function(){}),[4,P.dt];case 3:return[2,(H.value=(_e.sent(),V),H)];case 4:return Le("SimpleDb","Transaction failed with error:",(K=_e.sent()).message,"Retrying:",ne="FirebaseError"!==K.name&&v<3),C.close(),ne?[3,5]:[2,{value:Promise.reject(K)}];case 5:return[2]}})},C=this,x.label=1;case 1:return[5,_()];case 2:if("object"==typeof(A=x.sent()))return[2,A.value];x.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),hR=function(){function t(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(e){this.St=e},t.prototype.delete=function(){return ja(this.Pt.delete())},t}(),Zd=function(t){function e(i,a){var c=this;return(c=t.call(this,ve.UNAVAILABLE,"IndexedDB transaction '"+i+"' failed: "+a)||this).name="IndexedDbTransactionError",c}return(0,k.ZT)(e,t),e}(xe);function wo(t){return"IndexedDbTransactionError"===t.name}var dR=function(){function t(e){this.store=e}return t.prototype.put=function(e,i){var a;return void 0!==i?(Le("SimpleDb","PUT",this.store.name,e,i),a=this.store.put(i,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),ja(a)},t.prototype.add=function(e){return Le("SimpleDb","ADD",this.store.name,e,e),ja(this.store.add(e))},t.prototype.get=function(e){var i=this;return ja(this.store.get(e)).next(function(a){return void 0===a&&(a=null),Le("SimpleDb","GET",i.store.name,e,a),a})},t.prototype.delete=function(e){return Le("SimpleDb","DELETE",this.store.name,e),ja(this.store.delete(e))},t.prototype.count=function(){return Le("SimpleDb","COUNT",this.store.name),ja(this.store.count())},t.prototype.Nt=function(e,i){var a=this.cursor(this.options(e,i)),c=[];return this.xt(a,function(f,v){c.push(v)}).next(function(){return c})},t.prototype.kt=function(e,i){Le("SimpleDb","DELETE ALL",this.store.name);var a=this.options(e,i);a.Ft=!1;var c=this.cursor(a);return this.xt(c,function(f,v,_){return _.delete()})},t.prototype.$t=function(e,i){var a;i?a=e:(a={},i=e);var c=this.cursor(a);return this.xt(c,i)},t.prototype.Ot=function(e){var i=this.cursor({});return new Oe(function(a,c){i.onerror=function(f){var v=p0(f.target.error);c(v)},i.onsuccess=function(f){var v=f.target.result;v?e(v.primaryKey,v.value).next(function(_){_?v.continue():a()}):a()}})},t.prototype.xt=function(e,i){var a=[];return new Oe(function(c,f){e.onerror=function(v){f(v.target.error)},e.onsuccess=function(v){var _=v.target.result;if(_){var C=new hR(_),A=i(_.primaryKey,_.value,C);if(A instanceof Oe){var x=A.catch(function(P){return C.done(),Oe.reject(P)});a.push(x)}C.isDone?c():null===C.Dt?_.continue():_.continue(C.Dt)}else c()}}).next(function(){return Oe.waitFor(a)})},t.prototype.options=function(e,i){var a;return void 0!==e&&("string"==typeof e?a=e:i=e),{index:a,range:i}},t.prototype.cursor=function(e){var i="next";if(e.reverse&&(i="prev"),e.index){var a=this.store.index(e.index);return e.Ft?a.openKeyCursor(e.range,i):a.openCursor(e.range,i)}return this.store.openCursor(e.range,i)},t}();function ja(t){return new Oe(function(e,i){t.onsuccess=function(a){e(a.target.result)},t.onerror=function(a){var c=p0(a.target.error);i(c)}})}var Xd=!1;function p0(t){var e=Yc._t((0,Pt.z$)());if(e>=12.2&&e<13){var i="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(i)>=0){var a=new xe("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+i+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Xd||(Xd=!0,setTimeout(function(){throw a},0)),a}}return t}var Jc=function(t){function e(i,a){var c=this;return(c=t.call(this)||this).Mt=i,c.currentSequenceNumber=a,c}return(0,k.ZT)(e,t),e}(_C);function Ri(t,e){var i=He(t);return Yc.It(i.Mt,e)}var bC=function(){function t(e,i,a,c){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=c}return t.prototype.applyToRemoteDocument=function(e,i){for(var a=i.mutationResults,c=0;c<this.mutations.length;c++){var f=this.mutations[c];f.key.isEqual(e.key)&&IT(f,e,a[c])}},t.prototype.applyToLocalView=function(e){for(var i=0,a=this.baseMutations;i<a.length;i++)(v=a[i]).key.isEqual(e.key)&&Wf(v,e,this.localWriteTime);for(var c=0,f=this.mutations;c<f.length;c++){var v;(v=f[c]).key.isEqual(e.key)&&Wf(v,e,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(e){var i=this;this.mutations.forEach(function(a){var c=e.get(a.key),f=c;i.applyToLocalView(f),c.isValidDocument()||f.convertToNoDocument(Lt.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(e,i){return e.add(i.key)},cn())},t.prototype.isEqual=function(e){return this.batchId===e.batchId&&Mf(this.mutations,e.mutations,function(i,a){return On(i,a)})&&Mf(this.baseMutations,e.baseMutations,function(i,a){return On(i,a)})},t}(),GT=function(){function t(e,i,a,c){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=c}return t.from=function(e,i,a){gt(e.mutations.length===a.length);for(var c=iC(),f=e.mutations,v=0;v<f.length;v++)c=c.insert(f[v].key,a[v].version);return new t(e,i,a,c)},t}(),Yi=function(){function t(e,i,a,c,f,v,_){void 0===f&&(f=Lt.min()),void 0===v&&(v=Lt.min()),void 0===_&&(_=sr.EMPTY_BYTE_STRING),this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=_}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,i){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),g0=function(t){this.Lt=t};function wC(t,e){if(e.document)return lC(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var i=ut.fromSegments(e.noDocument.path),a=Xf(e.noDocument.readTime),c=ur.newNoDocument(i,a);return e.hasCommittedMutations?c.setHasCommittedMutations():c}if(e.unknownDocument){var f=ut.fromSegments(e.unknownDocument.path);return a=Xf(e.unknownDocument.version),ur.newUnknownDocument(f,a)}return nt()}function ep(t,e,i){var P,V,a=m0(i),c=e.key.path.popLast().toArray();if(e.isFoundDocument()){var f={name:Yd(P=t.Lt,(V=e).key),fields:V.data.value.mapValue.fields,updateTime:Kf(P,V.version.toTimestamp())},v=e.hasCommittedMutations;return new Hn(null,null,f,v,a,c)}if(e.isNoDocument()){var _=e.key.path.toArray(),C=tp(e.version);return v=e.hasCommittedMutations,new Hn(null,new HT(_,C),null,v,a,c)}if(e.isUnknownDocument()){var A=e.key.path.toArray(),x=tp(e.version);return new Hn(new vC(A,x),null,null,!0,a,c)}return nt()}function m0(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function EC(t){var e=new fi(t[0],t[1]);return Lt.fromTimestamp(e)}function tp(t){var e=t.toTimestamp();return new BT(e.seconds,e.nanoseconds)}function Xf(t){var e=new fi(t.seconds,t.nanoseconds);return Lt.fromTimestamp(e)}function eh(t,e){for(var i=(e.baseMutations||[]).map(function(C){return fC(t.Lt,C)}),a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);var v=e.mutations.map(function(C){return fC(t.Lt,C)}),_=fi.fromMillis(e.localWriteTimeMs);return new bC(e.batchId,_,i,v)}function np(t){var e,i,a=Xf(t.readTime),c=void 0!==t.lastLimboFreeSnapshotVersion?Xf(t.lastLimboFreeSnapshotVersion):Lt.min();return void 0!==t.query.documents?(gt(1===(i=t.query).documents.length),e=yo(Uf(uC(i.documents[0])))):e=yo(Om(t.query)),new Yi(e,t.targetId,0,t.lastListenSequenceNumber,a,c,sr.fromBase64String(t.resumeToken))}function Fm(t,e){var i,a=tp(e.snapshotVersion),c=tp(e.lastLimboFreeSnapshotVersion);i=Wc(e.target)?c0(t.Lt,e.target):hC(t.Lt,e.target);var f=e.resumeToken.toBase64();return new Ai(e.targetId,Lf(e.target),a,f,e.sequenceNumber,c,i)}function km(t){var e=Om({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?JE(e,e.limit,"L"):e}var v0=function(){function t(){}return t.prototype.getBundleMetadata=function(e,i){return y0(e).get(i).next(function(a){if(a)return{id:(c=a).bundleId,createTime:Xf(c.createTime),version:c.version};var c})},t.prototype.saveBundleMetadata=function(e,i){return y0(e).put({bundleId:(a=i).id,createTime:tp(Dr(a.createTime)),version:a.version});var a},t.prototype.getNamedQuery=function(e,i){return CC(e).get(i).next(function(a){if(a)return{name:(c=a).name,query:km(c.bundledQuery),readTime:Xf(c.readTime)};var c})},t.prototype.saveNamedQuery=function(e,i){return CC(e).put({name:(a=i).name,readTime:tp(Dr(a.readTime)),bundledQuery:a.bundledQuery});var a},t}();function y0(t){return Ri(t,Jf.store)}function CC(t){return Ri(t,Zf.store)}var pR=function(){function t(){this.Bt=new _0}return t.prototype.addToCollectionParentIndex=function(e,i){return this.Bt.add(i),Oe.resolve()},t.prototype.getCollectionParents=function(e,i){return Oe.resolve(this.Bt.getEntries(i))},t}(),_0=function(){function t(){this.index={}}return t.prototype.add=function(e){var i=e.lastSegment(),a=e.popLast(),c=this.index[i]||new cr(Jt.comparator),f=!c.has(a);return this.index[i]=c.add(a),f},t.prototype.has=function(e){var i=e.lastSegment(),a=e.popLast(),c=this.index[i];return c&&c.has(a)},t.prototype.getEntries=function(e){return(this.index[e]||new cr(Jt.comparator)).toArray()},t}(),$T=function(){function t(){this.qt=new _0}return t.prototype.addToCollectionParentIndex=function(e,i){var a=this;if(!this.qt.has(i)){var c=i.lastSegment(),f=i.popLast();e.addOnCommittedListener(function(){a.qt.add(i)});var v={collectionId:c,parent:Yo(f)};return DC(e).put(v)}return Oe.resolve()},t.prototype.getCollectionParents=function(e,i){var a=[],c=IDBKeyRange.bound([i,""],[LE(i),""],!1,!0);return DC(e).Nt(c).next(function(f){for(var v=0,_=f;v<_.length;v++){var C=_[v];if(C.collectionId!==i)break;a.push(Va(C.parent))}return a})},t}();function DC(t){return Ri(t,Ou.store)}var b0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zo=function(){function t(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function w0(t,e,i){var a=t.store(_n.store),c=t.store(Jr.store),f=[],v=IDBKeyRange.only(i.batchId),_=0,C=a.$t({range:v},function(K,ne,_e){return _++,_e.delete()});f.push(C.next(function(){gt(1===_)}));for(var A=[],x=0,P=i.mutations;x<P.length;x++){var V=P[x],H=Jr.key(e,V.key.path,i.batchId);f.push(c.delete(H)),A.push(V.key)}return Oe.waitFor(f).next(function(){return A})}function Lm(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw nt();e=t.noDocument}return JSON.stringify(e).length}Zo.DEFAULT_COLLECTION_PERCENTILE=10,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zo.DEFAULT=new Zo(41943040,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zo.DISABLED=new Zo(-1,0,0);var WT=function(){function t(e,i,a,c){this.userId=e,this.R=i,this.Ut=a,this.referenceDelegate=c,this.Kt={}}return t.Qt=function(e,i,a,c){return gt(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",i,a,c)},t.prototype.checkEmpty=function(e){var i=!0,a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xo(e).$t({index:_n.userMutationsIndex,range:a},function(c,f,v){i=!1,v.done()}).next(function(){return i})},t.prototype.addMutationBatch=function(e,i,a,c){var f=this,v=th(e),_=Xo(e);return _.add({}).next(function(C){gt("number"==typeof C);for(var A=new bC(C,i,a,c),x=function(Ie,Fe,ke){var Xe=ke.baseMutations.map(function(St){return Jd(Ie.Lt,St)}),ze=ke.mutations.map(function(St){return Jd(Ie.Lt,St)});return new _n(Fe,ke.batchId,ke.localWriteTime.toMillis(),Xe,ze)}(f.R,f.userId,A),P=[],V=new cr(function(Ie,Fe){return qt(Ie.canonicalString(),Fe.canonicalString())}),H=0,K=c;H<K.length;H++){var ne=K[H],_e=Jr.key(f.userId,ne.key.path,C);V=V.add(ne.key.path.popLast()),P.push(_.put(x)),P.push(v.put(_e,Jr.PLACEHOLDER))}return V.forEach(function(Ie){P.push(f.Ut.addToCollectionParentIndex(e,Ie))}),e.addOnCommittedListener(function(){f.Kt[C]=A.keys()}),Oe.waitFor(P).next(function(){return A})})},t.prototype.lookupMutationBatch=function(e,i){var a=this;return Xo(e).get(i).next(function(c){return c?(gt(c.userId===a.userId),eh(a.R,c)):null})},t.prototype.jt=function(e,i){var a=this;return this.Kt[i]?Oe.resolve(this.Kt[i]):this.lookupMutationBatch(e,i).next(function(c){if(c){var f=c.keys();return a.Kt[i]=f,f}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(e,i){var a=this,c=i+1,f=IDBKeyRange.lowerBound([this.userId,c]),v=null;return Xo(e).$t({index:_n.userMutationsIndex,range:f},function(_,C,A){C.userId===a.userId&&(gt(C.batchId>=c),v=eh(a.R,C)),A.done()}).next(function(){return v})},t.prototype.getHighestUnacknowledgedBatchId=function(e){var i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),a=-1;return Xo(e).$t({index:_n.userMutationsIndex,range:i,reverse:!0},function(c,f,v){a=f.batchId,v.done()}).next(function(){return a})},t.prototype.getAllMutationBatches=function(e){var i=this,a=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xo(e).Nt(_n.userMutationsIndex,a).next(function(c){return c.map(function(f){return eh(i.R,f)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,i){var a=this,c=Jr.prefixForPath(this.userId,i.path),f=IDBKeyRange.lowerBound(c),v=[];return th(e).$t({range:f},function(_,C,A){var x=_[0],V=_[2],H=Va(_[1]);if(x===a.userId&&i.path.isEqual(H))return Xo(e).get(V).next(function(K){if(!K)throw nt();gt(K.userId===a.userId),v.push(eh(a.R,K))});A.done()}).next(function(){return v})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,i){var a=this,c=new cr(qt),f=[];return i.forEach(function(v){var _=Jr.prefixForPath(a.userId,v.path),C=IDBKeyRange.lowerBound(_),A=th(e).$t({range:C},function(x,P,V){var H=x[0],ne=x[2],_e=Va(x[1]);H===a.userId&&v.path.isEqual(_e)?c=c.add(ne):V.done()});f.push(A)}),Oe.waitFor(f).next(function(){return a.Wt(e,c)})},t.prototype.getAllMutationBatchesAffectingQuery=function(e,i){var a=this,c=i.path,f=c.length+1,v=Jr.prefixForPath(this.userId,c),_=IDBKeyRange.lowerBound(v),C=new cr(qt);return th(e).$t({range:_},function(A,x,P){var V=A[0],K=A[2],ne=Va(A[1]);V===a.userId&&c.isPrefixOf(ne)?ne.length===f&&(C=C.add(K)):P.done()}).next(function(){return a.Wt(e,C)})},t.prototype.Wt=function(e,i){var a=this,c=[],f=[];return i.forEach(function(v){f.push(Xo(e).get(v).next(function(_){if(null===_)throw nt();gt(_.userId===a.userId),c.push(eh(a.R,_))}))}),Oe.waitFor(f).next(function(){return c})},t.prototype.removeMutationBatch=function(e,i){var a=this;return w0(e.Mt,this.userId,i).next(function(c){return e.addOnCommittedListener(function(){a.Gt(i.batchId)}),Oe.forEach(c,function(f){return a.referenceDelegate.markPotentiallyOrphaned(e,f)})})},t.prototype.Gt=function(e){delete this.Kt[e]},t.prototype.performConsistencyCheck=function(e){var i=this;return this.checkEmpty(e).next(function(a){if(!a)return Oe.resolve();var c=IDBKeyRange.lowerBound(Jr.prefixForUser(i.userId)),f=[];return th(e).$t({range:c},function(v,_,C){if(v[0]===i.userId){var A=Va(v[1]);f.push(A)}else C.done()}).next(function(){gt(0===f.length)})})},t.prototype.containsKey=function(e,i){return E0(e,this.userId,i)},t.prototype.zt=function(e){var i=this;return C0(e).get(this.userId).next(function(a){return a||new Ua(i.userId,-1,"")})},t}();function E0(t,e,i){var a=Jr.prefixForPath(e,i.path),c=a[1],f=IDBKeyRange.lowerBound(a),v=!1;return th(t).$t({range:f,Ft:!0},function(_,C,A){_[0]===e&&_[1]===c&&(v=!0),A.done()}).next(function(){return v})}function Xo(t){return Ri(t,_n.store)}function th(t){return Ri(t,Jr.store)}function C0(t){return Ri(t,Ua.store)}var Zc=function(){function t(e){this.Ht=e}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Vm=function(){function t(e,i){this.referenceDelegate=e,this.R=i}return t.prototype.allocateTargetId=function(e){var i=this;return this.Xt(e).next(function(a){var c=new Zc(a.highestTargetId);return a.highestTargetId=c.next(),i.Zt(e,a).next(function(){return a.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(i){return Lt.fromTimestamp(new fi(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(i){return i.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(e,i,a){var c=this;return this.Xt(e).next(function(f){return f.highestListenSequenceNumber=i,a&&(f.lastRemoteSnapshotVersion=a.toTimestamp()),i>f.highestListenSequenceNumber&&(f.highestListenSequenceNumber=i),c.Zt(e,f)})},t.prototype.addTargetData=function(e,i){var a=this;return this.te(e,i).next(function(){return a.Xt(e).next(function(c){return c.targetCount+=1,a.ee(i,c),a.Zt(e,c)})})},t.prototype.updateTargetData=function(e,i){return this.te(e,i)},t.prototype.removeTargetData=function(e,i){var a=this;return this.removeMatchingKeysForTargetId(e,i.targetId).next(function(){return $s(e).delete(i.targetId)}).next(function(){return a.Xt(e)}).next(function(c){return gt(c.targetCount>0),c.targetCount-=1,a.Zt(e,c)})},t.prototype.removeTargets=function(e,i,a){var c=this,f=0,v=[];return $s(e).$t(function(_,C){var A=np(C);A.sequenceNumber<=i&&null===a.get(A.targetId)&&(f++,v.push(c.removeTargetData(e,A)))}).next(function(){return Oe.waitFor(v)}).next(function(){return f})},t.prototype.forEachTarget=function(e,i){return $s(e).$t(function(a,c){var f=np(c);i(f)})},t.prototype.Xt=function(e){return IC(e).get(di.key).next(function(i){return gt(null!==i),i})},t.prototype.Zt=function(e,i){return IC(e).put(di.key,i)},t.prototype.te=function(e,i){return $s(e).put(Fm(this.R,i))},t.prototype.ee=function(e,i){var a=!1;return e.targetId>i.highestTargetId&&(i.highestTargetId=e.targetId,a=!0),e.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e.sequenceNumber,a=!0),a},t.prototype.getTargetCount=function(e){return this.Xt(e).next(function(i){return i.targetCount})},t.prototype.getTargetData=function(e,i){var a=Lf(i),c=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]),f=null;return $s(e).$t({range:c,index:Ai.queryTargetsIndexName},function(v,_,C){var A=np(_);Wd(i,A.target)&&(f=A,C.done())}).next(function(){return f})},t.prototype.addMatchingKeys=function(e,i,a){var c=this,f=[],v=Fu(e);return i.forEach(function(_){var C=Yo(_.path);f.push(v.put(new vr(a,C))),f.push(c.referenceDelegate.addReference(e,a,_))}),Oe.waitFor(f)},t.prototype.removeMatchingKeys=function(e,i,a){var c=this,f=Fu(e);return Oe.forEach(i,function(v){var _=Yo(v.path);return Oe.waitFor([f.delete([a,_]),c.referenceDelegate.removeReference(e,a,v)])})},t.prototype.removeMatchingKeysForTargetId=function(e,i){var a=Fu(e),c=IDBKeyRange.bound([i],[i+1],!1,!0);return a.delete(c)},t.prototype.getMatchingKeysForTargetId=function(e,i){var a=IDBKeyRange.bound([i],[i+1],!1,!0),c=Fu(e),f=cn();return c.$t({range:a,Ft:!0},function(v,_,C){var A=Va(v[1]),x=new ut(A);f=f.add(x)}).next(function(){return f})},t.prototype.containsKey=function(e,i){var a=Yo(i.path),c=IDBKeyRange.bound([a],[LE(a)],!1,!0),f=0;return Fu(e).$t({index:vr.documentTargetsIndex,Ft:!0,range:c},function(v,_,C){0!==v[0]&&(f++,C.done())}).next(function(){return f>0})},t.prototype.lt=function(e,i){return $s(e).get(i).next(function(a){return a?np(a):null})},t}();function $s(t){return Ri(t,Ai.store)}function IC(t){return Ri(t,di.store)}function Fu(t){return Ri(t,vr.store)}function nh(t){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){if(t.code!==ve.FAILED_PRECONDITION||t.message!==yC)throw t;return Le("LocalStore","Unexpectedly lost primary lease"),[2]})})}function TC(t,e){var a=t[1],f=e[1],v=qt(t[0],e[0]);return 0===v?qt(a,f):v}var qT=function(){function t(e){this.ne=e,this.buffer=new cr(TC),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(e){var i=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(i);else{var a=this.buffer.last();TC(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),zT=function(){function t(e,i){this.garbageCollector=e,this.asyncQueue=i,this.oe=!1,this.ce=null}return t.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(e){var i=this,a=this.oe?3e5:6e4;Le("LruGarbageCollector","Garbage collection scheduled in "+a+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,function(){return(0,k.mG)(i,void 0,void 0,function(){var c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:this.ce=null,this.oe=!0,f.label=1;case 1:return f.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return f.sent(),[3,7];case 3:return wo(c=f.sent())?(Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c),[3,6]):[3,4];case 4:return[4,nh(c)];case 5:f.sent(),f.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return f.sent(),[2]}})})})},t}(),KT=function(){function t(e,i){this.ae=e,this.params=i}return t.prototype.calculateTargetCount=function(e,i){return this.ae.he(e).next(function(a){return Math.floor(i/100*a)})},t.prototype.nthSequenceNumber=function(e,i){var a=this;if(0===i)return Oe.resolve(zi.o);var c=new qT(i);return this.ae.forEachTarget(e,function(f){return c.re(f.sequenceNumber)}).next(function(){return a.ae.le(e,function(f){return c.re(f)})}).next(function(){return c.maxValue})},t.prototype.removeTargets=function(e,i,a){return this.ae.removeTargets(e,i,a)},t.prototype.removeOrphanedDocuments=function(e,i){return this.ae.removeOrphanedDocuments(e,i)},t.prototype.collect=function(e,i){var a=this;return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),Oe.resolve(b0)):this.getCacheSize(e).next(function(c){return c<a.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; Cache size "+c+" is lower than threshold "+a.params.cacheSizeCollectionThreshold),b0):a.fe(e,i)})},t.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},t.prototype.fe=function(e,i){var a,c,f,v,_,C,A,x=this,P=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(V){return V>x.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+x.params.maximumSequenceNumbersToCollect+" from "+V),c=x.params.maximumSequenceNumbersToCollect):c=V,v=Date.now(),x.nthSequenceNumber(e,c)}).next(function(V){return a=V,_=Date.now(),x.removeTargets(e,a,i)}).next(function(V){return f=V,C=Date.now(),x.removeOrphanedDocuments(e,a)}).next(function(V){return A=Date.now(),bm()<=Cu.in.DEBUG&&Le("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(v-P)+"ms\n\tDetermined least recently used "+c+" in "+(_-v)+"ms\n\tRemoved "+f+" targets in "+(C-_)+"ms\n\tRemoved "+V+" documents in "+(A-C)+"ms\nTotal Duration: "+(A-P)+"ms"),Oe.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:V})})},t}(),QT=function(){function t(e,i){this.db=e,this.garbageCollector=new KT(this,i)}return t.prototype.he=function(e){var i=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(a){return i.next(function(c){return a+c})})},t.prototype.de=function(e){var i=0;return this.le(e,function(a){i++}).next(function(){return i})},t.prototype.forEachTarget=function(e,i){return this.db.getTargetCache().forEachTarget(e,i)},t.prototype.le=function(e,i){return this.we(e,function(a,c){return i(c)})},t.prototype.addReference=function(e,i,a){return Um(e,a)},t.prototype.removeReference=function(e,i,a){return Um(e,a)},t.prototype.removeTargets=function(e,i,a){return this.db.getTargetCache().removeTargets(e,i,a)},t.prototype.markPotentiallyOrphaned=function(e,i){return Um(e,i)},t.prototype._e=function(e,i){return c=i,f=!1,C0(a=e).Ot(function(v){return E0(a,v,c).next(function(_){return _&&(f=!0),Oe.resolve(!_)})}).next(function(){return f});var a,c,f},t.prototype.removeOrphanedDocuments=function(e,i){var a=this,c=this.db.getRemoteDocumentCache().newChangeBuffer(),f=[],v=0;return this.we(e,function(_,C){if(C<=i){var A=a._e(e,_).next(function(x){if(!x)return v++,c.getEntry(e,_).next(function(){return c.removeEntry(_),Fu(e).delete([0,Yo(_.path)])})});f.push(A)}}).next(function(){return Oe.waitFor(f)}).next(function(){return c.apply(e)}).next(function(){return v})},t.prototype.removeTarget=function(e,i){var a=i.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)},t.prototype.updateLimboDocument=function(e,i){return Um(e,i)},t.prototype.we=function(e,i){var a,c=Fu(e),f=zi.o;return c.$t({index:vr.documentTargetsIndex},function(v,_){var A=_.path,x=_.sequenceNumber;0===v[0]?(f!==zi.o&&i(new ut(Va(a)),f),f=x,a=A):f=zi.o}).next(function(){f!==zi.o&&i(new ut(Va(a)),f)})},t.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},t}();function Um(t,e){return Fu(t).put((a=t.currentSequenceNumber,new vr(0,Yo(e.path),a)));var a}var rh=function(){function t(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={}}return t.prototype.get=function(e){var i=this.mapKeyFn(e),a=this.inner[i];if(void 0!==a)for(var c=0,f=a;c<f.length;c++){var v=f[c],C=v[1];if(this.equalsFn(v[0],e))return C}},t.prototype.has=function(e){return void 0!==this.get(e)},t.prototype.set=function(e,i){var a=this.mapKeyFn(e),c=this.inner[a];if(void 0!==c){for(var f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,i]);c.push([e,i])}else this.inner[a]=[[e,i]]},t.prototype.delete=function(e){var i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return!1;for(var c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return 1===a.length?delete this.inner[i]:a.splice(c,1),!0;return!1},t.prototype.forEach=function(e){xu(this.inner,function(i,a){for(var c=0,f=a;c<f.length;c++){var v=f[c];e(v[0],v[1])}})},t.prototype.isEmpty=function(){return VE(this.inner)},t}(),SC=function(){function t(){this.changes=new rh(function(e){return e.toString()},function(e,i){return e.isEqual(i)}),this.changesApplied=!1}return t.prototype.getReadTime=function(e){var i=this.changes.get(e);return i?i.readTime:Lt.min()},t.prototype.addEntry=function(e,i){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:i})},t.prototype.removeEntry=function(e,i){void 0===i&&(i=null),this.assertNotApplied(),this.changes.set(e,{document:ur.newInvalidDocument(e),readTime:i})},t.prototype.getEntry=function(e,i){this.assertNotApplied();var a=this.changes.get(i);return void 0!==a?Oe.resolve(a.document):this.getFromCache(e,i)},t.prototype.getEntries=function(e,i){return this.getAllFromCache(e,i)},t.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},t.prototype.assertNotApplied=function(){},t}(),YT=function(){function t(e,i){this.R=e,this.Ut=i}return t.prototype.addEntry=function(e,i,a){return Eo(e).put(jm(i),a)},t.prototype.removeEntry=function(e,i){var a=Eo(e),c=jm(i);return a.delete(c)},t.prototype.updateMetadata=function(e,i){var a=this;return this.getMetadata(e).next(function(c){return c.byteSize+=i,a.me(e,c)})},t.prototype.getEntry=function(e,i){var a=this;return Eo(e).get(jm(i)).next(function(c){return a.ye(i,c)})},t.prototype.ge=function(e,i){var a=this;return Eo(e).get(jm(i)).next(function(c){return{document:a.ye(i,c),size:Lm(c)}})},t.prototype.getEntries=function(e,i){var a=this,c=bo();return this.pe(e,i,function(f,v){var _=a.ye(f,v);c=c.insert(f,_)}).next(function(){return c})},t.prototype.Ee=function(e,i){var a=this,c=bo(),f=new Yr(ut.comparator);return this.pe(e,i,function(v,_){var C=a.ye(v,_);c=c.insert(v,C),f=f.insert(v,Lm(_))}).next(function(){return{documents:c,Te:f}})},t.prototype.pe=function(e,i,a){if(i.isEmpty())return Oe.resolve();var c=IDBKeyRange.bound(i.first().path.toArray(),i.last().path.toArray()),f=i.getIterator(),v=f.getNext();return Eo(e).$t({range:c},function(_,C,A){for(var x=ut.fromSegments(_);v&&ut.comparator(v,x)<0;)a(v,null),v=f.getNext();v&&v.isEqual(x)&&(a(v,C),v=f.hasNext()?f.getNext():null),v?A.Ct(v.path.toArray()):A.done()}).next(function(){for(;v;)a(v,null),v=f.hasNext()?f.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(e,i,a){var c=this,f=bo(),v=i.path.length+1,_={};if(a.isEqual(Lt.min())){var C=i.path.toArray();_.range=IDBKeyRange.lowerBound(C)}else{var A=i.path.toArray(),x=m0(a);_.range=IDBKeyRange.lowerBound([A,x],!0),_.index=Hn.collectionReadTimeIndex}return Eo(e).$t(_,function(P,V,H){if(P.length===v){var K=wC(c.R,V);i.path.isPrefixOf(K.key.path)?Hf(i,K)&&(f=f.insert(K.key,K)):H.done()}}).next(function(){return f})},t.prototype.newChangeBuffer=function(e){return new gR(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(e){return this.getMetadata(e).next(function(i){return i.byteSize})},t.prototype.getMetadata=function(e){return AC(e).get(Gs.key).next(function(i){return gt(!!i),i})},t.prototype.me=function(e,i){return AC(e).put(Gs.key,i)},t.prototype.ye=function(e,i){if(i){var a=wC(this.R,i);if(!a.isNoDocument()||!a.version.isEqual(Lt.min()))return a}return ur.newInvalidDocument(e)},t}(),gR=function(t){function e(i,a){var c=this;return(c=t.call(this)||this).Ie=i,c.trackRemovals=a,c.Ae=new rh(function(f){return f.toString()},function(f,v){return f.isEqual(v)}),c}return(0,k.ZT)(e,t),e.prototype.applyChanges=function(i){var a=this,c=[],f=0,v=new cr(function(_,C){return qt(_.canonicalString(),C.canonicalString())});return this.changes.forEach(function(_,C){var A=a.Ae.get(_);if(C.document.isValidDocument()){var x=ep(a.Ie.R,C.document,a.getReadTime(_));v=v.add(_.path.popLast());var P=Lm(x);f+=P-A,c.push(a.Ie.addEntry(i,_,x))}else if(f-=A,a.trackRemovals){var V=ep(a.Ie.R,ur.newNoDocument(_,Lt.min()),a.getReadTime(_));c.push(a.Ie.addEntry(i,_,V))}else c.push(a.Ie.removeEntry(i,_))}),v.forEach(function(_){c.push(a.Ie.Ut.addToCollectionParentIndex(i,_))}),c.push(this.Ie.updateMetadata(i,f)),Oe.waitFor(c)},e.prototype.getFromCache=function(i,a){var c=this;return this.Ie.ge(i,a).next(function(f){return c.Ae.set(a,f.size),f.document})},e.prototype.getAllFromCache=function(i,a){var c=this;return this.Ie.Ee(i,a).next(function(f){var v=f.documents;return f.Te.forEach(function(_,C){c.Ae.set(_,C)}),v})},e}(SC);function AC(t){return Ri(t,Gs.store)}function Eo(t){return Ri(t,Hn.store)}function jm(t){return t.path.toArray()}var JT=function(){function t(e){this.R=e}return t.prototype.Rt=function(e,i,a,c){var f=this;gt(a<c&&a>=0&&c<=11);var C,v=new d0("createOrUpgrade",i);a<1&&c>=1&&(e.createObjectStore(Qi.store),(C=e).createObjectStore(Ua.store,{keyPath:Ua.keyPath}),C.createObjectStore(_n.store,{keyPath:_n.keyPath,autoIncrement:!0}).createIndex(_n.userMutationsIndex,_n.userMutationsKeyPath,{unique:!0}),C.createObjectStore(Jr.store),RC(e),function(C){C.createObjectStore(Hn.store)}(e));var _=Oe.resolve();return a<3&&c>=3&&(0!==a&&(function(C){C.deleteObjectStore(vr.store),C.deleteObjectStore(Ai.store),C.deleteObjectStore(di.store)}(e),RC(e)),_=_.next(function(){return function(C){var A=C.store(di.store),x=new di(0,0,Lt.min().toTimestamp(),0);return A.put(di.key,x)}(v)})),a<4&&c>=4&&(0!==a&&(_=_.next(function(){return function(C,A){return A.store(_n.store).Nt().next(function(x){C.deleteObjectStore(_n.store),C.createObjectStore(_n.store,{keyPath:_n.keyPath,autoIncrement:!0}).createIndex(_n.userMutationsIndex,_n.userMutationsKeyPath,{unique:!0});var P=A.store(_n.store),V=x.map(function(H){return P.put(H)});return Oe.waitFor(V)})}(e,v)})),_=_.next(function(){!function(C){C.createObjectStore(Jo.store,{keyPath:Jo.keyPath})}(e)})),a<5&&c>=5&&(_=_.next(function(){return f.Re(v)})),a<6&&c>=6&&(_=_.next(function(){return function(C){C.createObjectStore(Gs.store)}(e),f.be(v)})),a<7&&c>=7&&(_=_.next(function(){return f.ve(v)})),a<8&&c>=8&&(_=_.next(function(){return f.Pe(e,v)})),a<9&&c>=9&&(_=_.next(function(){(function(C){C.objectStoreNames.contains("remoteDocumentChanges")&&C.deleteObjectStore("remoteDocumentChanges")})(e),function(C){var A=C.objectStore(Hn.store);A.createIndex(Hn.readTimeIndex,Hn.readTimeIndexPath,{unique:!1}),A.createIndex(Hn.collectionReadTimeIndex,Hn.collectionReadTimeIndexPath,{unique:!1})}(i)})),a<10&&c>=10&&(_=_.next(function(){return f.Ve(v)})),a<11&&c>=11&&(_=_.next(function(){(function(C){C.createObjectStore(Jf.store,{keyPath:Jf.keyPath})})(e),function(C){C.createObjectStore(Zf.store,{keyPath:Zf.keyPath})}(e)})),_},t.prototype.be=function(e){var i=0;return e.store(Hn.store).$t(function(a,c){i+=Lm(c)}).next(function(){var a=new Gs(i);return e.store(Gs.store).put(Gs.key,a)})},t.prototype.Re=function(e){var i=this,a=e.store(Ua.store),c=e.store(_n.store);return a.Nt().next(function(f){return Oe.forEach(f,function(v){var _=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return c.Nt(_n.userMutationsIndex,_).next(function(C){return Oe.forEach(C,function(A){gt(A.userId===v.userId);var x=eh(i.R,A);return w0(e,v.userId,x).next(function(){})})})})})},t.prototype.ve=function(e){var i=e.store(vr.store),a=e.store(Hn.store);return e.store(di.store).get(di.key).next(function(c){var f=[];return a.$t(function(v,_){var C=new Jt(v),A=[0,Yo(C)];f.push(i.get(A).next(function(x){return x?Oe.resolve():i.put(new vr(0,Yo(C),c.highestListenSequenceNumber))}))}).next(function(){return Oe.waitFor(f)})})},t.prototype.Pe=function(e,i){e.createObjectStore(Ou.store,{keyPath:Ou.keyPath});var a=i.store(Ou.store),c=new _0,f=function(v){if(c.add(v)){var _=v.lastSegment(),C=v.popLast();return a.put({collectionId:_,parent:Yo(C)})}};return i.store(Hn.store).$t({Ft:!0},function(v,_){var C=new Jt(v);return f(C.popLast())}).next(function(){return i.store(Jr.store).$t({Ft:!0},function(v,_){var A=Va(v[1]);return f(A.popLast())})})},t.prototype.Ve=function(e){var i=this,a=e.store(Ai.store);return a.$t(function(c,f){var v=np(f),_=Fm(i.R,v);return a.put(_)})},t}();function RC(t){t.createObjectStore(vr.store,{keyPath:vr.keyPath}).createIndex(vr.documentTargetsIndex,vr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ai.store,{keyPath:Ai.keyPath}).createIndex(Ai.queryTargetsIndexName,Ai.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(di.store)}var ih="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xc=function(){function t(e,i,a,c,f,v,_,C,A,x){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=a,this.Se=f,this.window=v,this.document=_,this.De=A,this.Ce=x,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(P){return Promise.resolve()},!t.yt())throw new xe(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QT(this,c),this.Le=i+"main",this.R=new g0(C),this.Be=new Yc(this.Le,11,new JT(this.R)),this.qe=new Vm(this.referenceDelegate,this.R),this.Ut=new $T,this.Ue=new YT(this.R,this.Ut),this.Ke=new v0,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===x&&Qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new xe(ve.FAILED_PRECONDITION,ih);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(i){return e.qe.getHighestSequenceNumber(i)})}).then(function(i){e.Ne=new zi(i,e.De)}).then(function(){e.xe=!0}).catch(function(i){return e.Be&&e.Be.close(),Promise.reject(i)})},t.prototype.He=function(e){var i=this;return this.Me=function(a){return(0,k.mG)(i,void 0,void 0,function(){return(0,k.Jh)(this,function(c){return this.started?[2,e(a)]:[2]})})},e(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(e){var i=this;this.Be.vt(function(a){return(0,k.mG)(i,void 0,void 0,function(){return(0,k.Jh)(this,function(c){switch(c.label){case 0:return null===a.newVersion?[4,e()]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(e){var i=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return(0,k.mG)(i,void 0,void 0,function(){return(0,k.Jh)(this,function(a){switch(a.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(i){return Bm(i).put(new Jo(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(i).next(function(a){a||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(i)}).next(function(a){return e.isPrimary&&!a?e.Xe(i).next(function(){return!1}):!!a&&e.Ze(i).next(function(){return!0})})}).catch(function(i){if(wo(i))return Le("IndexedDbPersistence","Failed to extend owner lease: ",i),e.isPrimary;if(!e.allowTabSynchronization)throw i;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",i),!1}).then(function(i){e.isPrimary!==i&&e.Se.enqueueRetryable(function(){return e.Me(i)}),e.isPrimary=i})},t.prototype.Je=function(e){var i=this;return oh(e).get(Qi.key).next(function(a){return Oe.resolve(i.tn(a))})},t.prototype.en=function(e){return Bm(e).delete(this.clientId)},t.prototype.nn=function(){return(0,k.mG)(this,void 0,void 0,function(){var e,i,a,f=this;return(0,k.Jh)(this,function(v){switch(v.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(_){var C=Ri(_,Jo.store);return C.Nt().next(function(A){var x=f.rn(A,18e5),P=A.filter(function(V){return-1===x.indexOf(V)});return Oe.forEach(P,function(V){return C.delete(V.clientId)}).next(function(){return P})})}).catch(function(){return[]})]);case 1:if(e=v.sent(),this.Qe)for(i=0,a=e;i<a.length;i++)this.Qe.removeItem(this.on(a[i].clientId));v.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},t.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},t.prototype.Ye=function(e){var i=this;return this.Ce?Oe.resolve(!0):oh(e).get(Qi.key).next(function(a){if(null!==a&&i.sn(a.leaseTimestampMs,5e3)&&!i.cn(a.ownerId)){if(i.tn(a)&&i.networkEnabled)return!0;if(!i.tn(a)){if(!a.allowTabSynchronization)throw new xe(ve.FAILED_PRECONDITION,ih);return!1}}return!(!i.networkEnabled||!i.inForeground)||Bm(e).Nt().next(function(c){return void 0===i.rn(c,5e3).find(function(f){return!(i.clientId===f.clientId||!(!i.networkEnabled&&f.networkEnabled||!i.inForeground&&f.inForeground&&i.networkEnabled===f.networkEnabled))})})}).next(function(a){return i.isPrimary!==a&&Le("IndexedDbPersistence","Client "+(a?"is":"is not")+" eligible for a primary lease."),a})},t.prototype.shutdown=function(){return(0,k.mG)(this,void 0,void 0,function(){var e=this;return(0,k.Jh)(this,function(i){switch(i.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Qi.store,Jo.store],function(a){var c=new Jc(a,zi.o);return e.Xe(c).next(function(){return e.en(c)})})];case 1:return i.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(e,i){var a=this;return e.filter(function(c){return a.sn(c.updateTimeMs,i)&&!a.cn(c.clientId)})},t.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(i){return Bm(i).Nt().next(function(a){return e.rn(a,18e5).map(function(c){return c.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(e){return WT.Qt(e,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,i,a){var f,c=this;return Le("IndexedDbPersistence","Starting transaction:",e),this.Be.runTransaction(e,"readonly"===i?"readonly":"readwrite",h0,function(_){return f=new Jc(_,c.Ne?c.Ne.next():zi.o),"readwrite-primary"===i?c.Je(f).next(function(C){return!!C||c.Ye(f)}).next(function(C){if(!C)throw Qn("Failed to obtain primary lease for action '"+e+"'."),c.isPrimary=!1,c.Se.enqueueRetryable(function(){return c.Me(!1)}),new xe(ve.FAILED_PRECONDITION,yC);return a(f)}).next(function(C){return c.Ze(f).next(function(){return C})}):c.dn(f).next(function(){return a(f)})}).then(function(_){return f.raiseOnCommittedEvent(),_})},t.prototype.dn=function(e){var i=this;return oh(e).get(Qi.key).next(function(a){if(null!==a&&i.sn(a.leaseTimestampMs,5e3)&&!i.cn(a.ownerId)&&!i.tn(a)&&!(i.Ce||i.allowTabSynchronization&&a.allowTabSynchronization))throw new xe(ve.FAILED_PRECONDITION,ih)})},t.prototype.Ze=function(e){var i=new Qi(this.clientId,this.allowTabSynchronization,Date.now());return oh(e).put(Qi.key,i)},t.yt=function(){return Yc.yt()},t.prototype.Xe=function(e){var i=this,a=oh(e);return a.get(Qi.key).next(function(c){return i.tn(c)?(Le("IndexedDbPersistence","Releasing primary lease."),a.delete(Qi.key)):Oe.resolve()})},t.prototype.sn=function(e,i){var a=Date.now();return!(e<a-i||e>a&&(Qn("Detected an update time that is in the future: "+e+" > "+a),1))},t.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var e,i=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){i.un(),(0,Pt.G6)()&&navigator.appVersion.match("Version/14")&&i.Se.enterRestrictedMode(!0),i.Se.enqueueAndForget(function(){return i.shutdown()})},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(e){var i;try{var a=null!==(null===(i=this.Qe)||void 0===i?void 0:i.getItem(this.on(e)));return Le("IndexedDbPersistence","Client '"+e+"' "+(a?"is":"is not")+" zombied in LocalStorage"),a}catch(c){return Qn("IndexedDbPersistence","Failed to get zombied client id.",c),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},t.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},t}();function oh(t){return Ri(t,Qi.store)}function Bm(t){return Ri(t,Jo.store)}function xC(t,e){var i=t.projectId;return t.isDefaultDatabase||(i+="."+t.database),"firestore/"+e+"/"+i+"/"}var ZT=function(t,e){this.progress=t,this.wn=e},rp=function(){function t(e,i,a){this.Ue=e,this._n=i,this.Ut=a}return t.prototype.mn=function(e,i){var a=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,i).next(function(c){return a.yn(e,i,c)})},t.prototype.yn=function(e,i,a){return this.Ue.getEntry(e,i).next(function(c){for(var f=0,v=a;f<v.length;f++)v[f].applyToLocalView(c);return c})},t.prototype.gn=function(e,i){e.forEach(function(a,c){for(var f=0,v=i;f<v.length;f++)v[f].applyToLocalView(c)})},t.prototype.pn=function(e,i){var a=this;return this.Ue.getEntries(e,i).next(function(c){return a.En(e,c).next(function(){return c})})},t.prototype.En=function(e,i){var a=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,i).next(function(c){return a.gn(i,c)})},t.prototype.getDocumentsMatchingQuery=function(e,i,a){return ut.isDocumentKey((c=i).path)&&null===c.collectionGroup&&0===c.filters.length?this.Tn(e,i.path):z_(i)?this.In(e,i,a):this.An(e,i,a);var c},t.prototype.Tn=function(e,i){return this.mn(e,new ut(i)).next(function(a){var c=Qc();return a.isFoundDocument()&&(c=c.insert(a.key,a)),c})},t.prototype.In=function(e,i,a){var c=this,f=i.collectionGroup,v=Qc();return this.Ut.getCollectionParents(e,f).next(function(_){return Oe.forEach(_,function(C){var x,P,A=(x=i,P=C.child(f),new ka(P,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt));return c.An(e,A,a).next(function(x){x.forEach(function(P,V){v=v.insert(P,V)})})}).next(function(){return v})})},t.prototype.An=function(e,i,a){var c,f,v=this;return this.Ue.getDocumentsMatchingQuery(e,i,a).next(function(_){return c=_,v._n.getAllMutationBatchesAffectingQuery(e,i)}).next(function(_){return v.Rn(e,f=_,c).next(function(C){c=C;for(var A=0,x=f;A<x.length;A++)for(var P=x[A],V=0,H=P.mutations;V<H.length;V++){var K=H[V],ne=K.key,_e=c.get(ne);null==_e&&(_e=ur.newInvalidDocument(ne),c=c.insert(ne,_e)),Wf(K,_e,P.localWriteTime),_e.isFoundDocument()||(c=c.remove(ne))}})}).next(function(){return c.forEach(function(_,C){Hf(i,C)||(c=c.remove(_))}),c})},t.prototype.Rn=function(e,i,a){for(var c=cn(),f=0,v=i;f<v.length;f++)for(var _=0,C=v[f].mutations;_<C.length;_++){var A=C[_];A instanceof Bs&&null===a.get(A.key)&&(c=c.add(A.key))}var x=a;return this.Ue.getEntries(e,c).next(function(P){return P.forEach(function(V,H){H.isFoundDocument()&&(x=x.insert(V,H))}),x})},t}(),XT=function(){function t(e,i,a,c){this.targetId=e,this.fromCache=i,this.bn=a,this.vn=c}return t.Pn=function(e,i){for(var a=cn(),c=cn(),f=0,v=i.docChanges;f<v.length;f++){var _=v[f];switch(_.type){case 0:a=a.add(_.doc.key);break;case 1:c=c.add(_.doc.key)}}return new t(e,i.fromCache,a,c)},t}(),NC=function(){function t(){}return t.prototype.Vn=function(e){this.Sn=e},t.prototype.getDocumentsMatchingQuery=function(e,i,a,c){var v,f=this;return 0===(v=i).filters.length&&null===v.limit&&null==v.startAt&&null==v.endAt&&(0===v.explicitOrderBy.length||1===v.explicitOrderBy.length&&v.explicitOrderBy[0].field.isKeyField())||a.isEqual(Lt.min())?this.Dn(e,i):this.Sn.pn(e,c).next(function(v){var _=f.Cn(i,v);return(Im(i)||Tm(i))&&f.Nn(i.limitType,_,c,a)?f.Dn(e,i):(bm()<=Cu.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Sm(i)),f.Sn.getDocumentsMatchingQuery(e,i,a).next(function(C){return _.forEach(function(A){C=C.insert(A.key,A)}),C}))})},t.prototype.Cn=function(e,i){var a=new cr(Q_(e));return i.forEach(function(c,f){Hf(e,f)&&(a=a.add(f))}),a},t.prototype.Nn=function(e,i,a,c){if(a.size!==i.size)return!0;var f="F"===e?i.last():i.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)},t.prototype.Dn=function(e,i){return bm()<=Cu.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Sm(i)),this.Sn.getDocumentsMatchingQuery(e,i,Lt.min())},t}(),PC=function(){function t(e,i,a,c){this.persistence=e,this.xn=i,this.R=c,this.kn=new Yr(qt),this.Fn=new rh(function(f){return Lf(f)},Wd),this.$n=Lt.min(),this._n=e.getMutationQueue(a),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new rp(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(e){var i=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(a){return e.collect(a,i.kn)})},t}();function D0(t,e,i,a){return new PC(t,e,i,a)}function Hm(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a,c,f;return(0,k.Jh)(this,function(v){switch(v.label){case 0:return i=He(t),a=i._n,c=i.Mn,[4,i.persistence.runTransaction("Handle user change","readonly",function(_){var C;return i._n.getAllMutationBatches(_).next(function(A){return C=A,a=i.persistence.getMutationQueue(e),c=new rp(i.On,a,i.persistence.getIndexManager()),a.getAllMutationBatches(_)}).next(function(A){for(var x=[],P=[],V=cn(),H=0,K=C;H<K.length;H++){var ne=K[H];x.push(ne.batchId);for(var _e=0,Ie=ne.mutations;_e<Ie.length;_e++)V=V.add(Ie[_e].key)}for(var ke=0,Xe=A;ke<Xe.length;ke++){var ze=Xe[ke];P.push(ze.batchId);for(var St=0,kn=ze.mutations;St<kn.length;St++)V=V.add(kn[St].key)}return c.pn(_,V).next(function(kr){return{Ln:kr,removedBatchIds:x,addedBatchIds:P}})})})];case 1:return f=v.sent(),[2,(i._n=a,i.Mn=c,i.xn.Vn(i.Mn),f)]}})})}function MC(t,e){var i=He(t);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(a){var v,_,C,A,x,P,V,c=e.batch.keys(),f=i.On.newChangeBuffer({trackRemovals:!0});return(v=i,_=a,C=e,A=f,x=C.batch,P=x.keys(),V=Oe.resolve(),P.forEach(function(H){V=V.next(function(){return A.getEntry(_,H)}).next(function(K){var ne=C.docVersions.get(H);gt(null!==ne),K.version.compareTo(ne)<0&&(x.applyToRemoteDocument(K,C),K.isValidDocument()&&A.addEntry(K,C.commitVersion))})}),V.next(function(){return v._n.removeMutationBatch(_,x)})).next(function(){return f.apply(a)}).next(function(){return i._n.performConsistencyCheck(a)}).next(function(){return i.Mn.pn(a,c)})})}function I0(t){var e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(i){return e.qe.getLastRemoteSnapshotVersion(i)})}function eS(t,e){var i=He(t),a=e.snapshotVersion,c=i.kn;return i.persistence.runTransaction("Apply remote event","readwrite-primary",function(f){var v=i.On.newChangeBuffer({trackRemovals:!0});c=i.kn;var _=[];e.targetChanges.forEach(function(x,P){var ne,_e,Ie,V=c.get(P);if(V){_.push(i.qe.removeMatchingKeys(f,x.removedDocuments,P).next(function(){return i.qe.addMatchingKeys(f,x.addedDocuments,P)}));var H=x.resumeToken;if(H.approximateByteSize()>0){var K=V.withResumeToken(H,a).withSequenceNumber(f.currentSequenceNumber);c=c.insert(P,K),ne=V,Ie=x,gt((_e=K).resumeToken.approximateByteSize()>0),(0===ne.resumeToken.approximateByteSize()||_e.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&_.push(i.qe.updateTargetData(f,K))}}});var C=bo();if(e.documentUpdates.forEach(function(x,P){e.resolvedLimboDocuments.has(x)&&_.push(i.persistence.referenceDelegate.updateLimboDocument(f,x))}),_.push(OC(f,v,e.documentUpdates,a,void 0).next(function(x){C=x})),!a.isEqual(Lt.min())){var A=i.qe.getLastRemoteSnapshotVersion(f).next(function(x){return i.qe.setTargetsMetadata(f,f.currentSequenceNumber,a)});_.push(A)}return Oe.waitFor(_).next(function(){return v.apply(f)}).next(function(){return i.Mn.En(f,C)}).next(function(){return C})}).then(function(f){return i.kn=c,f})}function OC(t,e,i,a,c){var f=cn();return i.forEach(function(v){return f=f.add(v)}),e.getEntries(t,f).next(function(v){var _=bo();return i.forEach(function(C,A){var x=v.get(C),P=(null==c?void 0:c.get(C))||a;A.isNoDocument()&&A.version.isEqual(Lt.min())?(e.removeEntry(C,P),_=_.insert(C,A)):!x.isValidDocument()||A.version.compareTo(x.version)>0||0===A.version.compareTo(x.version)&&x.hasPendingWrites?(e.addEntry(A,P),_=_.insert(C,A)):Le("LocalStore","Ignoring outdated watch update for ",C,". Current version:",x.version," Watch version:",A.version)}),_})}function FC(t,e){var i=He(t);return i.persistence.runTransaction("Get next mutation batch","readonly",function(a){return void 0===e&&(e=-1),i._n.getNextMutationBatchAfterBatchId(a,e)})}function sh(t,e){var i=He(t);return i.persistence.runTransaction("Allocate target","readwrite",function(a){var c;return i.qe.getTargetData(a,e).next(function(f){return f?Oe.resolve(c=f):i.qe.allocateTargetId(a).next(function(v){return c=new Yi(e,v,0,a.currentSequenceNumber),i.qe.addTargetData(a,c).next(function(){return c})})})}).then(function(a){var c=i.kn.get(a.targetId);return(null===c||a.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(i.kn=i.kn.insert(a.targetId,a),i.Fn.set(e,a.targetId)),a})}function el(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var a,c,f,v;return(0,k.Jh)(this,function(_){switch(_.label){case 0:a=He(t),c=a.kn.get(e),f=i?"readwrite":"readwrite-primary",_.label=1;case 1:return _.trys.push([1,4,,5]),i?[3,3]:[4,a.persistence.runTransaction("Release target",f,function(C){return a.persistence.referenceDelegate.removeTarget(C,c)})];case 2:_.sent(),_.label=3;case 3:return[3,5];case 4:if(!wo(v=_.sent()))throw v;return Le("LocalStore","Failed to update sequence numbers for target "+e+": "+v),[3,5];case 5:return a.kn=a.kn.remove(e),a.Fn.delete(c.target),[2]}})})}function tl(t,e,i){var a=He(t),c=Lt.min(),f=cn();return a.persistence.runTransaction("Execute query","readonly",function(v){return(_=a,C=v,A=yo(e),x=He(_),P=x.Fn.get(A),void 0!==P?Oe.resolve(x.kn.get(P)):x.qe.getTargetData(C,A)).next(function(_){if(_)return c=_.lastLimboFreeSnapshotVersion,a.qe.getMatchingKeysForTargetId(v,_.targetId).next(function(C){f=C})}).next(function(){return a.xn.getDocumentsMatchingQuery(v,e,i?c:Lt.min(),i?f:cn())}).next(function(_){return{documents:_,Bn:f}});var _,C,A,x,P})}function ip(t,e){var i=He(t),a=He(i.qe),c=i.kn.get(e);return c?Promise.resolve(c.target):i.persistence.runTransaction("Get target data","readonly",function(f){return a.lt(f,e).next(function(v){return v?v.target:null})})}function tS(t){var e=He(t);return e.persistence.runTransaction("Get new document changes","readonly",function(i){return c=i,f=e.$n,v=He(e.On),_=bo(),C=m0(f),A=Eo(c),x=IDBKeyRange.lowerBound(C,!0),A.$t({index:Hn.readTimeIndex,range:x},function(P,V){var H=wC(v.R,V);_=_.insert(H.key,H),C=V.readTime}).next(function(){return{wn:_,readTime:EC(C)}});var c,f,v,_,C,A,x}).then(function(i){var a=i.wn;return e.$n=i.readTime,a})}function op(t){return(0,k.mG)(this,void 0,void 0,function(){var e;return(0,k.Jh)(this,function(i){return[2,(e=He(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(a){return f=Eo(a),v=Lt.min(),f.$t({index:Hn.readTimeIndex,reverse:!0},function(_,C,A){C.readTime&&(v=EC(C.readTime)),A.done()}).next(function(){return v});var f,v}).then(function(a){e.$n=a})]})})}function ln(t,e,i,a){return(0,k.mG)(this,void 0,void 0,function(){var c,f,v,_,C,A,x,P,V,H;return(0,k.Jh)(this,function(K){switch(K.label){case 0:for(c=He(t),f=cn(),v=bo(),_=iC(),C=0,A=i;C<A.length;C++)P=e.qn((x=A[C]).metadata.name),x.document&&(f=f.add(P)),v=v.insert(P,e.Un(x)),_=_.insert(P,e.Kn(x.metadata.readTime));return V=c.On.newChangeBuffer({trackRemovals:!0}),[4,sh(c,(ne=a,yo(Uf(Jt.fromString("__bundle__/docs/"+ne)))))];case 1:return H=K.sent(),[2,c.persistence.runTransaction("Apply bundle documents","readwrite",function(ne){return OC(ne,V,v,Lt.min(),_).next(function(_e){return V.apply(ne),_e}).next(function(_e){return c.qe.removeMatchingKeysForTargetId(ne,H.targetId).next(function(){return c.qe.addMatchingKeys(ne,f,H.targetId)}).next(function(){return c.Mn.En(ne,_e)}).next(function(){return _e})})})]}var ne})})}function ku(t,e,i){return void 0===i&&(i=cn()),(0,k.mG)(this,void 0,void 0,function(){var a,c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return[4,sh(t,yo(km(e.bundledQuery)))];case 1:return a=f.sent(),[2,(c=He(t)).persistence.runTransaction("Save named query","readwrite",function(v){var _=Dr(e.readTime);if(a.snapshotVersion.compareTo(_)>=0)return c.Ke.saveNamedQuery(v,e);var C=a.withResumeToken(sr.EMPTY_BYTE_STRING,_);return c.kn=c.kn.insert(C.targetId,C),c.qe.updateTargetData(v,C).next(function(){return c.qe.removeMatchingKeysForTargetId(v,a.targetId)}).next(function(){return c.qe.addMatchingKeys(v,i,a.targetId)}).next(function(){return c.Ke.saveNamedQuery(v,e)})})]}})})}var ah=function(){function t(e){this.R=e,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(e,i){return Oe.resolve(this.Qn.get(i))},t.prototype.saveBundleMetadata=function(e,i){var a;return this.Qn.set(i.id,{id:(a=i).id,version:a.version,createTime:Dr(a.createTime)}),Oe.resolve()},t.prototype.getNamedQuery=function(e,i){return Oe.resolve(this.jn.get(i))},t.prototype.saveNamedQuery=function(e,i){return this.jn.set(i.name,{name:(a=i).name,query:km(a.bundledQuery),readTime:Dr(a.readTime)}),Oe.resolve();var a},t}(),nl=function(){function t(){this.Wn=new cr(Fr.Gn),this.zn=new cr(Fr.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(e,i){var a=new Fr(e,i);this.Wn=this.Wn.add(a),this.zn=this.zn.add(a)},t.prototype.Jn=function(e,i){var a=this;e.forEach(function(c){return a.addReference(c,i)})},t.prototype.removeReference=function(e,i){this.Yn(new Fr(e,i))},t.prototype.Xn=function(e,i){var a=this;e.forEach(function(c){return a.removeReference(c,i)})},t.prototype.Zn=function(e){var i=this,a=new ut(new Jt([])),c=new Fr(a,e),f=new Fr(a,e+1),v=[];return this.zn.forEachInRange([c,f],function(_){i.Yn(_),v.push(_.key)}),v},t.prototype.ts=function(){var e=this;this.Wn.forEach(function(i){return e.Yn(i)})},t.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},t.prototype.es=function(e){var i=new ut(new Jt([])),a=new Fr(i,e),c=new Fr(i,e+1),f=cn();return this.zn.forEachInRange([a,c],function(v){f=f.add(v.key)}),f},t.prototype.containsKey=function(e){var i=new Fr(e,0),a=this.Wn.firstAfterOrEqual(i);return null!==a&&e.isEqual(a.key)},t}(),Fr=function(){function t(e,i){this.key=e,this.ns=i}return t.Gn=function(e,i){return ut.comparator(e.key,i.key)||qt(e.ns,i.ns)},t.Hn=function(e,i){return qt(e.ns,i.ns)||ut.comparator(e.key,i.key)},t}(),Tt=function(){function t(e,i){this.Ut=e,this.referenceDelegate=i,this._n=[],this.ss=1,this.rs=new cr(Fr.Gn)}return t.prototype.checkEmpty=function(e){return Oe.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(e,i,a,c){var f=this.ss;this.ss++;var v=new bC(f,i,a,c);this._n.push(v);for(var _=0,C=c;_<C.length;_++){var A=C[_];this.rs=this.rs.add(new Fr(A.key,f)),this.Ut.addToCollectionParentIndex(e,A.key.path.popLast())}return Oe.resolve(v)},t.prototype.lookupMutationBatch=function(e,i){return Oe.resolve(this.os(i))},t.prototype.getNextMutationBatchAfterBatchId=function(e,i){var c=this.cs(i+1),f=c<0?0:c;return Oe.resolve(this._n.length>f?this._n[f]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Oe.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(e){return Oe.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,i){var a=this,c=new Fr(i,0),f=new Fr(i,Number.POSITIVE_INFINITY),v=[];return this.rs.forEachInRange([c,f],function(_){var C=a.os(_.ns);v.push(C)}),Oe.resolve(v)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,i){var a=this,c=new cr(qt);return i.forEach(function(f){var v=new Fr(f,0),_=new Fr(f,Number.POSITIVE_INFINITY);a.rs.forEachInRange([v,_],function(C){c=c.add(C.ns)})}),Oe.resolve(this.us(c))},t.prototype.getAllMutationBatchesAffectingQuery=function(e,i){var a=i.path,c=a.length+1,f=a;ut.isDocumentKey(f)||(f=f.child(""));var v=new Fr(new ut(f),0),_=new cr(qt);return this.rs.forEachWhile(function(C){var A=C.key.path;return!!a.isPrefixOf(A)&&(A.length===c&&(_=_.add(C.ns)),!0)},v),Oe.resolve(this.us(_))},t.prototype.us=function(e){var i=this,a=[];return e.forEach(function(c){var f=i.os(c);null!==f&&a.push(f)}),a},t.prototype.removeMutationBatch=function(e,i){var a=this;gt(0===this.hs(i.batchId,"removed")),this._n.shift();var c=this.rs;return Oe.forEach(i.mutations,function(f){var v=new Fr(f.key,i.batchId);return c=c.delete(v),a.referenceDelegate.markPotentiallyOrphaned(e,f.key)}).next(function(){a.rs=c})},t.prototype.Gt=function(e){},t.prototype.containsKey=function(e,i){var a=new Fr(i,0),c=this.rs.firstAfterOrEqual(a);return Oe.resolve(i.isEqual(c&&c.key))},t.prototype.performConsistencyCheck=function(e){return Oe.resolve()},t.prototype.hs=function(e,i){return this.cs(e)},t.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},t.prototype.os=function(e){var i=this.cs(e);return i<0||i>=this._n.length?null:this._n[i]},t}(),Co=function(){function t(e,i){this.Ut=e,this.ls=i,this.docs=new Yr(ut.comparator),this.size=0}return t.prototype.addEntry=function(e,i,a){var c=i.key,f=this.docs.get(c),v=f?f.size:0,_=this.ls(i);return this.docs=this.docs.insert(c,{document:i.clone(),size:_,readTime:a}),this.size+=_-v,this.Ut.addToCollectionParentIndex(e,c.path.popLast())},t.prototype.removeEntry=function(e){var i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)},t.prototype.getEntry=function(e,i){var a=this.docs.get(i);return Oe.resolve(a?a.document.clone():ur.newInvalidDocument(i))},t.prototype.getEntries=function(e,i){var a=this,c=bo();return i.forEach(function(f){var v=a.docs.get(f);c=c.insert(f,v?v.document.clone():ur.newInvalidDocument(f))}),Oe.resolve(c)},t.prototype.getDocumentsMatchingQuery=function(e,i,a){for(var c=bo(),f=new ut(i.path.child("")),v=this.docs.getIteratorFrom(f);v.hasNext();){var _=v.getNext(),A=_.value,x=A.document,P=A.readTime;if(!i.path.isPrefixOf(_.key.path))break;P.compareTo(a)<=0||Hf(i,x)&&(c=c.insert(x.key,x.clone()))}return Oe.resolve(c)},t.prototype.fs=function(e,i){return Oe.forEach(this.docs,function(a){return i(a)})},t.prototype.newChangeBuffer=function(e){return new T0(this)},t.prototype.getSize=function(e){return Oe.resolve(this.size)},t}(),T0=function(t){function e(i){var a=this;return(a=t.call(this)||this).Ie=i,a}return(0,k.ZT)(e,t),e.prototype.applyChanges=function(i){var a=this,c=[];return this.changes.forEach(function(f,v){v.document.isValidDocument()?c.push(a.Ie.addEntry(i,v.document,a.getReadTime(f))):a.Ie.removeEntry(f)}),Oe.waitFor(c)},e.prototype.getFromCache=function(i,a){return this.Ie.getEntry(i,a)},e.prototype.getAllFromCache=function(i,a){return this.Ie.getEntries(i,a)},e}(SC),rl=function(){function t(e){this.persistence=e,this.ds=new rh(function(i){return Lf(i)},Wd),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.ws=0,this._s=new nl,this.targetCount=0,this.ys=Zc.Jt()}return t.prototype.forEachTarget=function(e,i){return this.ds.forEach(function(a,c){return i(c)}),Oe.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(e){return Oe.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(e){return Oe.resolve(this.ws)},t.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),Oe.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.ws&&(this.ws=i),Oe.resolve()},t.prototype.te=function(e){this.ds.set(e.target,e);var i=e.targetId;i>this.highestTargetId&&(this.ys=new Zc(i),this.highestTargetId=i),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},t.prototype.addTargetData=function(e,i){return this.te(i),this.targetCount+=1,Oe.resolve()},t.prototype.updateTargetData=function(e,i){return this.te(i),Oe.resolve()},t.prototype.removeTargetData=function(e,i){return this.ds.delete(i.target),this._s.Zn(i.targetId),this.targetCount-=1,Oe.resolve()},t.prototype.removeTargets=function(e,i,a){var c=this,f=0,v=[];return this.ds.forEach(function(_,C){C.sequenceNumber<=i&&null===a.get(C.targetId)&&(c.ds.delete(_),v.push(c.removeMatchingKeysForTargetId(e,C.targetId)),f++)}),Oe.waitFor(v).next(function(){return f})},t.prototype.getTargetCount=function(e){return Oe.resolve(this.targetCount)},t.prototype.getTargetData=function(e,i){var a=this.ds.get(i)||null;return Oe.resolve(a)},t.prototype.addMatchingKeys=function(e,i,a){return this._s.Jn(i,a),Oe.resolve()},t.prototype.removeMatchingKeys=function(e,i,a){this._s.Xn(i,a);var c=this.persistence.referenceDelegate,f=[];return c&&i.forEach(function(v){f.push(c.markPotentiallyOrphaned(e,v))}),Oe.waitFor(f)},t.prototype.removeMatchingKeysForTargetId=function(e,i){return this._s.Zn(i),Oe.resolve()},t.prototype.getMatchingKeysForTargetId=function(e,i){var a=this._s.es(i);return Oe.resolve(a)},t.prototype.containsKey=function(e,i){return Oe.resolve(this._s.containsKey(i))},t}(),mR=function(){function t(e,i){var a=this;this.gs={},this.Ne=new zi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new rl(this),this.Ut=new pR,this.Ue=new Co(this.Ut,function(v){return a.referenceDelegate.ps(v)}),this.R=new g0(i),this.Ke=new ah(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(e){var i=this.gs[e.toKey()];return i||(i=new Tt(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=i),i},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,i,a){var c=this;Le("MemoryPersistence","Starting transaction:",e);var f=new kC(this.Ne.next());return this.referenceDelegate.Es(),a(f).next(function(v){return c.referenceDelegate.Ts(f).next(function(){return v})}).toPromise().then(function(v){return f.raiseOnCommittedEvent(),v})},t.prototype.Is=function(e,i){return Oe.or(Object.values(this.gs).map(function(a){return function(){return a.containsKey(e,i)}}))},t}(),kC=function(t){function e(i){var a=this;return(a=t.call(this)||this).currentSequenceNumber=i,a}return(0,k.ZT)(e,t),e}(_C),LC=function(){function t(e){this.persistence=e,this.As=new nl,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw nt()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(e,i,a){return this.As.addReference(a,i),this.vs.delete(a.toString()),Oe.resolve()},t.prototype.removeReference=function(e,i,a){return this.As.removeReference(a,i),this.vs.add(a.toString()),Oe.resolve()},t.prototype.markPotentiallyOrphaned=function(e,i){return this.vs.add(i.toString()),Oe.resolve()},t.prototype.removeTarget=function(e,i){var a=this;this.As.Zn(i.targetId).forEach(function(f){return a.vs.add(f.toString())});var c=this.persistence.getTargetCache();return c.getMatchingKeysForTargetId(e,i.targetId).next(function(f){f.forEach(function(v){return a.vs.add(v.toString())})}).next(function(){return c.removeTargetData(e,i)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(e){var i=this,a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.vs,function(c){var f=ut.fromPath(c);return i.Ps(e,f).next(function(v){v||a.removeEntry(f)})}).next(function(){return i.Rs=null,a.apply(e)})},t.prototype.updateLimboDocument=function(e,i){var a=this;return this.Ps(e,i).next(function(c){c?a.vs.delete(i.toString()):a.vs.add(i.toString())})},t.prototype.ps=function(e){return 0},t.prototype.Ps=function(e,i){var a=this;return Oe.or([function(){return Oe.resolve(a.As.containsKey(i))},function(){return a.persistence.getTargetCache().containsKey(e,i)},function(){return a.persistence.Is(e,i)}])},t}(),Xr=function(){function t(e){this.uid=e}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(e){return e.uid===this.uid},t}();function VC(t,e){return"firestore_clients_"+t+"_"+e}function UC(t,e,i){var a="firestore_mutations_"+t+"_"+i;return e.isAuthenticated()&&(a+="_"+e.uid),a}function xi(t,e){return"firestore_targets_"+t+"_"+e}Xr.UNAUTHENTICATED=new Xr(null),Xr.GOOGLE_CREDENTIALS=new Xr("google-credentials-uid"),Xr.FIRST_PARTY=new Xr("first-party-uid"),Xr.MOCK_USER=new Xr("mock-user");var Pn=function(){function t(e,i,a,c){this.user=e,this.batchId=i,this.state=a,this.error=c}return t.Vs=function(e,i,a){var c,f=JSON.parse(a),v="object"==typeof f&&-1!==["pending","acknowledged","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error);return v&&f.error&&(v="string"==typeof f.error.message&&"string"==typeof f.error.code)&&(c=new xe(f.error.code,f.error.message)),v?new t(e,i,f.state,c):(Qn("SharedClientState","Failed to parse mutation state for ID '"+i+"': "+a),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),Ji=function(){function t(e,i,a){this.targetId=e,this.state=i,this.error=a}return t.Vs=function(e,i){var a,c=JSON.parse(i),f="object"==typeof c&&-1!==["not-current","current","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return f&&c.error&&(f="string"==typeof c.error.message&&"string"==typeof c.error.code)&&(a=new xe(c.error.code,c.error.message)),f?new t(e,c.state,a):(Qn("SharedClientState","Failed to parse target state for ID '"+e+"': "+i),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),S0=function(){function t(e,i){this.clientId=e,this.activeTargetIds=i}return t.Vs=function(e,i){for(var a=JSON.parse(i),c="object"==typeof a&&a.activeTargetIds instanceof Array,f=Qd(),v=0;c&&v<a.activeTargetIds.length;++v)c=jE(a.activeTargetIds[v]),f=f.add(a.activeTargetIds[v]);return c?new t(e,f):(Qn("SharedClientState","Failed to parse client data for instance '"+e+"': "+i),null)},t}(),nS=function(){function t(e,i){this.clientId=e,this.onlineState=i}return t.Vs=function(e){var i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new t(i.clientId,i.onlineState):(Qn("SharedClientState","Failed to parse online state: "+e),null)},t}(),Gm=function(){function t(){this.activeTargetIds=Qd()}return t.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},t.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},t.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},t}(),sp=function(){function t(e,i,a,c,f){this.window=e,this.Se=i,this.persistenceKey=a,this.Ns=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Yr(qt),this.started=!1,this.$s=[];var v=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.Os=VC(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new Gm),this.Ls=new RegExp("^firestore_clients_"+v+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+v+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+v+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks=function(_){return"firestore_bundle_loaded_"+_}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(e){return!(!e||!e.localStorage)},t.prototype.start=function(){return(0,k.mG)(this,void 0,void 0,function(){var e,i,a,c,f,v,_,C,A,x,V=this;return(0,k.Jh)(this,function(H){switch(H.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=H.sent(),i=0,a=e;i<a.length;i++)(c=a[i])!==this.Ns&&(f=this.getItem(VC(this.persistenceKey,c)))&&(v=S0.Vs(c,f))&&(this.Fs=this.Fs.insert(v.clientId,v));for(this.Qs(),(_=this.storage.getItem(this.Us))&&(C=this.js(_))&&this.Ws(C),A=0,x=this.$s;A<x.length;A++)this.ks(x[A]);return this.$s=[],this.window.addEventListener("pagehide",function(){return V.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(e){var i=!1;return this.Fs.forEach(function(a,c){c.activeTargetIds.has(e)&&(i=!0)}),i},t.prototype.addPendingMutation=function(e){this.zs(e,"pending")},t.prototype.updateMutationState=function(e,i,a){this.zs(e,i,a),this.Hs(e)},t.prototype.addLocalQueryTarget=function(e){var i="not-current";if(this.isActiveQueryTarget(e)){var a=this.storage.getItem(xi(this.persistenceKey,e));if(a){var c=Ji.Vs(e,a);c&&(i=c.state)}}return this.Js.Ds(e),this.Qs(),i},t.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},t.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){this.removeItem(xi(this.persistenceKey,e))},t.prototype.updateQueryState=function(e,i,a){this.Ys(e,i,a)},t.prototype.handleUserChange=function(e,i,a){var c=this;i.forEach(function(f){c.Hs(f)}),this.currentUser=e,a.forEach(function(f){c.addPendingMutation(f)})},t.prototype.setOnlineState=function(e){this.Xs(e)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(e){var i=this.storage.getItem(e);return Le("SharedClientState","READ",e,i),i},t.prototype.setItem=function(e,i){Le("SharedClientState","SET",e,i),this.storage.setItem(e,i)},t.prototype.removeItem=function(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)},t.prototype.ks=function(e){var i=this,a=e;if(a.storageArea===this.storage){if(Le("SharedClientState","EVENT",a.key,a.newValue),a.key===this.Os)return void Qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,k.mG)(i,void 0,void 0,function(){var c,f,v,_,C,A;return(0,k.Jh)(this,function(x){if(this.started){if(null!==a.key)if(this.Ls.test(a.key)){if(null==a.newValue)return c=this.ti(a.key),[2,this.ei(c,null)];if(f=this.ni(a.key,a.newValue))return[2,this.ei(f.clientId,f)]}else if(this.Bs.test(a.key)){if(null!==a.newValue&&(v=this.si(a.key,a.newValue)))return[2,this.ii(v)]}else if(this.qs.test(a.key)){if(null!==a.newValue&&(_=this.ri(a.key,a.newValue)))return[2,this.oi(_)]}else if(a.key===this.Us){if(null!==a.newValue&&(C=this.js(a.newValue)))return[2,this.Ws(C)]}else if(a.key===this.Ms)(A=function(P){var V=zi.o;if(null!=P)try{var H=JSON.parse(P);gt("number"==typeof H),V=H}catch(K){Qn("SharedClientState","Failed to read sequence number from WebStorage",K)}return V}(a.newValue))!==zi.o&&this.sequenceNumberHandler(A);else if(a.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(a);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(e,i,a){var c=new Pn(this.currentUser,e,i,a),f=UC(this.persistenceKey,this.currentUser,e);this.setItem(f,c.Ss())},t.prototype.Hs=function(e){var i=UC(this.persistenceKey,this.currentUser,e);this.removeItem(i)},t.prototype.Xs=function(e){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:e}))},t.prototype.Ys=function(e,i,a){var c=xi(this.persistenceKey,e),f=new Ji(e,i,a);this.setItem(c,f.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(e){var i=this.Ls.exec(e);return i?i[1]:null},t.prototype.ni=function(e,i){var a=this.ti(e);return S0.Vs(a,i)},t.prototype.si=function(e,i){var a=this.Bs.exec(e),c=Number(a[1]);return Pn.Vs(new Xr(void 0!==a[2]?a[2]:null),c,i)},t.prototype.ri=function(e,i){var a=this.qs.exec(e),c=Number(a[1]);return Ji.Vs(c,i)},t.prototype.js=function(e){return nS.Vs(e)},t.prototype.ii=function(e){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(i){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(Le("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},t.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},t.prototype.ei=function(e,i){var a=this,c=i?this.Fs.insert(e,i):this.Fs.remove(e),f=this.Gs(this.Fs),v=this.Gs(c),_=[],C=[];return v.forEach(function(A){f.has(A)||_.push(A)}),f.forEach(function(A){v.has(A)||C.push(A)}),this.syncEngine.hi(_,C).then(function(){a.Fs=c})},t.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},t.prototype.Gs=function(e){var i=Qd();return e.forEach(function(a,c){i=i.unionWith(c.activeTargetIds)}),i},t}(),il=function(){function t(){this.li=new Gm,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(e){},t.prototype.updateMutationState=function(e,i,a){},t.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},t.prototype.updateQueryState=function(e,i,a){this.fi[e]=i},t.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},t.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){delete this.fi[e]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.start=function(){return this.li=new Gm,Promise.resolve()},t.prototype.handleUserChange=function(e,i,a){},t.prototype.setOnlineState=function(e){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(e){},t.prototype.notifyBundleLoaded=function(){},t}(),ap=function(){function t(){}return t.prototype.di=function(e){},t.prototype.shutdown=function(){},t}(),jC=function(){function t(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return t.prototype.di=function(e){this.gi.push(e)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,i=this.gi;e<i.length;e++)(0,i[e])(0)},t.prototype.yi=function(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,i=this.gi;e<i.length;e++)(0,i[e])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ol={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},rS=function(){function t(e){this.Ei=e.Ei,this.Ti=e.Ti}return t.prototype.Ii=function(e){this.Ai=e},t.prototype.Ri=function(e){this.bi=e},t.prototype.onMessage=function(e){this.vi=e},t.prototype.close=function(){this.Ti()},t.prototype.send=function(e){this.Ei(e)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(e){this.bi(e)},t.prototype.Si=function(e){this.vi(e)},t}(),BC=function(t){function e(i){var a=this;return(a=t.call(this,i)||this).forceLongPolling=i.forceLongPolling,a.autoDetectLongPolling=i.autoDetectLongPolling,a.useFetchStreams=i.useFetchStreams,a}return(0,k.ZT)(e,t),e.prototype.Fi=function(i,a,c,f){return new Promise(function(v,_){var C=new k_;C.listenOnce(O_.COMPLETE,function(){try{switch(C.getLastErrorCode()){case Nf.NO_ERROR:var x=C.getResponseJson();Le("Connection","XHR received:",JSON.stringify(x)),v(x);break;case Nf.TIMEOUT:Le("Connection",'RPC "'+i+'" timed out'),_(new xe(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Nf.HTTP_ERROR:var P=C.getStatus();if(Le("Connection",'RPC "'+i+'" failed with status:',P,"response text:",C.getResponseText()),P>0){var V=C.getResponseJson().error;if(V&&V.status&&V.message){var H=(ne=V.status.toLowerCase().replace(/_/g,"-"),Object.values(ve).indexOf(ne)>=0?ne:ve.UNKNOWN);_(new xe(H,V.message))}else _(new xe(ve.UNKNOWN,"Server responded with status "+C.getStatus()))}else _(new xe(ve.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Le("Connection",'RPC "'+i+'" completed.')}var ne});var A=JSON.stringify(f);C.send(a,"POST",A,c,15)})},e.prototype.Oi=function(i,a){var c=[this.Di,"/","google.firestore.v1.Firestore","/",i,"/channel"],f=new Ud,v=Id(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new F_({})),this.ki(_.initMessageHeaders,a),(0,Pt.uI)()||(0,Pt.b$)()||(0,Pt.d)()||(0,Pt.w1)()||(0,Pt.Mn)()||(0,Pt.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");var C=c.join("");Le("Connection","Creating WebChannel: "+C,_);var A=f.createWebChannel(C,_),x=!1,P=!1,V=new rS({Ei:function(K){P?Le("Connection","Not sending because WebChannel is closed:",K):(x||(Le("Connection","Opening WebChannel transport."),A.open(),x=!0),Le("Connection","WebChannel sending:",K),A.send(K))},Ti:function(){return A.close()}}),H=function(K,ne,_e){K.listen(ne,function(Ie){try{_e(Ie)}catch(Fe){setTimeout(function(){throw Fe},0)}})};return H(A,Bd.EventType.OPEN,function(){P||Le("Connection","WebChannel transport opened.")}),H(A,Bd.EventType.CLOSE,function(){P||(P=!0,Le("Connection","WebChannel transport closed"),V.Vi())}),H(A,Bd.EventType.ERROR,function(K){P||(P=!0,Pf("Connection","WebChannel transport errored:",K),V.Vi(new xe(ve.UNAVAILABLE,"The operation could not be completed")))}),H(A,Bd.EventType.MESSAGE,function(K){var ne;if(!P){var _e=K.data[0];gt(!!_e);var Fe=_e.error||(null===(ne=_e[0])||void 0===ne?void 0:ne.error);if(Fe){Le("Connection","WebChannel received error:",Fe);var ke=Fe.status,Xe=function(St){var kn=Jn[St];if(void 0!==kn)return nC(kn)}(ke),ze=Fe.message;void 0===Xe&&(Xe=ve.INTERNAL,ze="Unknown error status: "+ke+" with message "+Fe.message),P=!0,V.Vi(new xe(Xe,ze)),A.close()}else Le("Connection","WebChannel received:",_e),V.Si(_e)}}),H(v,_m.STAT_EVENT,function(K){K.stat===jd_PROXY?Le("Connection","Detected buffering proxy"):K.stat===jd_NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(function(){V.Pi()},0),V},e}(function(){function t(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Di=(e.ssl?"https":"http")+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(e,i,a,c){var f=this.xi(e,i);Le("RestConnection","Sending: ",f,a);var v={};return this.ki(v,c),this.Fi(e,f,v,a).then(function(_){return Le("RestConnection","Received: ",_),_},function(_){throw Pf("RestConnection",e+" failed with error: ",_,"url: ",f,"request:",a),_})},t.prototype.$i=function(e,i,a,c){return this.Ni(e,i,a,c)},t.prototype.ki=function(e,i){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i)for(var a in i.authHeaders)i.authHeaders.hasOwnProperty(a)&&(e[a]=i.authHeaders[a])},t.prototype.xi=function(e,i){return this.Di+"/v1/"+i+":"+ol[e]},t}());function $m(){return"undefined"!=typeof window?window:null}function Lu(){return"undefined"!=typeof document?document:null}function sl(t){return new OT(t,!0)}var Wm=function(){function t(e,i,a,c,f){void 0===a&&(a=1e3),void 0===c&&(c=1.5),void 0===f&&(f=6e4),this.Se=e,this.timerId=i,this.Mi=a,this.Li=c,this.Bi=f,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(e){var i=this;this.cancel();var a=Math.floor(this.qi+this.Wi()),c=Math.max(0,Date.now()-this.Ki),f=Math.max(0,a-c);f>0&&Le("ExponentialBackoff","Backing off for "+f+" ms (base delay: "+this.qi+" ms, delay with jitter: "+a+" ms, last attempt: "+c+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,f,function(){return i.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),al=function(){function t(e,i,a,c,f,v){this.Se=e,this.zi=a,this.Hi=c,this.Ji=f,this.listener=v,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Wm(e,i)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},t.prototype.cr=function(e){this.ur(),this.stream.send(e)},t.prototype.rr=function(){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(e,i){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(a){switch(a.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():i&&i.code===ve.RESOURCE_EXHAUSTED?(Qn(i.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):i&&i.code===ve.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(i)];case 1:return a.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var e=this;this.state=1;var i=this.hr(this.Yi),a=this.Yi;this.Ji.getToken().then(function(c){e.Yi===a&&e.lr(c)},function(c){i(function(){var f=new xe(ve.UNKNOWN,"Fetching auth token failed: "+c.message);return e.dr(f)})})},t.prototype.lr=function(e){var i=this,a=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){a(function(){return i.state=2,i.listener.Ii()})}),this.stream.Ri(function(c){a(function(){return i.dr(c)})}),this.stream.onMessage(function(c){a(function(){return i.onMessage(c)})})},t.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return(0,k.mG)(e,void 0,void 0,function(){return(0,k.Jh)(this,function(i){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(e){return Le("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},t.prototype.hr=function(e){var i=this;return function(a){i.Se.enqueueAndForget(function(){return i.Yi===e?a():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),iS=function(t){function e(i,a,c,f,v){var _=this;return(_=t.call(this,i,"listen_stream_connection_backoff","listen_stream_idle",a,c,v)||this).R=f,_}return(0,k.ZT)(e,t),e.prototype.wr=function(i){return this.Hi.Oi("Listen",i)},e.prototype.onMessage=function(i){this.Zi.reset();var a=function(f,v){var _,_e;if("targetChange"in v){var C="NO_CHANGE"===(_e=v.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_e?1:"REMOVE"===_e?2:"CURRENT"===_e?3:"RESET"===_e?4:nt(),A=v.targetChange.targetIds||[],x=function(_e,Ie){return _e.I?(gt(void 0===Ie||"string"==typeof Ie),sr.fromBase64String(Ie||"")):(gt(void 0===Ie||Ie instanceof Uint8Array),sr.fromUint8Array(Ie||new Uint8Array))}(f,v.targetChange.resumeToken),P=(V=v.targetChange.cause)&&function(_e){var Ie=void 0===_e.code?ve.UNKNOWN:nC(_e.code);return new xe(Ie,_e.message||"")}(V);_=new xT(C,A,x,P||null)}else if("documentChange"in v){A=Qo(f,(C=v.documentChange).document.name),x=Dr(C.document.updateTime);var V=new Ti({mapValue:{fields:C.document.fields}}),H=(P=ur.newFoundDocument(A,x,V),C.targetIds||[]);_=new Pm(H,C.removedTargetIds||[],P.key,P)}else if("documentDelete"in v)A=Qo(f,(C=v.documentDelete).document),x=C.readTime?Dr(C.readTime):Lt.min(),V=ur.newNoDocument(A,x),_=new Pm([],P=C.removedTargetIds||[],V.key,V);else if("documentRemove"in v)A=Qo(f,(C=v.documentRemove).document),_=new Pm([],x=C.removedTargetIds||[],A,null);else{if(!("filter"in v))return nt();var ne=v.filter;A=new ST(C=ne.count||0),_=new sC(x=ne.targetId,A)}return _}(this.R,i),c=function(f){if(!("targetChange"in f))return Lt.min();var v=f.targetChange;return v.targetIds&&v.targetIds.length?Lt.min():v.readTime?Dr(v.readTime):Lt.min()}(i);return this.listener._r(a,c)},e.prototype.mr=function(i){var f,v,_,C,a={};a.database=Hs(this.R),a.addTarget=(f=this.R,(_=Wc(C=(v=i).target)?{documents:c0(f,C)}:{query:hC(f,C)}).targetId=v.targetId,v.resumeToken.approximateByteSize()>0?_.resumeToken=Qf(f,v.resumeToken):v.snapshotVersion.compareTo(Lt.min())>0&&(_.readTime=Kf(f,v.snapshotVersion.toTimestamp())),_);var c=function(f,v){var _=function(C,A){switch(A){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,v.purpose);return null==_?null:{"goog-listen-tags":_}}(0,i);c&&(a.labels=c),this.cr(a)},e.prototype.yr=function(i){var a={};a.database=Hs(this.R),a.removeTarget=i,this.cr(a)},e}(al),qm=function(t){function e(i,a,c,f,v){var _=this;return(_=t.call(this,i,"write_stream_connection_backoff","write_stream_idle",a,c,v)||this).R=f,_.gr=!1,_}return(0,k.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(i){return this.Hi.Oi("Write",i)},e.prototype.onMessage=function(i){if(gt(!!i.streamToken),this.lastStreamToken=i.streamToken,this.gr){this.Zi.reset();var a=(v=i.commitTime,(f=i.writeResults)&&f.length>0?(gt(void 0!==v),f.map(function(_){return A=v,(x=Dr((C=_).updateTime?C.updateTime:A)).isEqual(Lt.min())&&(x=Dr(A)),new DT(x,C.transformResults||[]);var C,A,x})):[]),c=Dr(i.commitTime);return this.listener.Tr(c,a)}var f,v;return gt(!i.writeResults||0===i.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var i={};i.database=Hs(this.R),this.cr(i)},e.prototype.Er=function(i){var a=this,c={streamToken:this.lastStreamToken,writes:i.map(function(f){return Jd(a.R,f)})};this.cr(c)},e}(al),HC=function(t){function e(i,a,c){var f=this;return(f=t.call(this)||this).credentials=i,f.Hi=a,f.R=c,f.Rr=!1,f}return(0,k.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new xe(ve.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(i,a,c){var f=this;return this.br(),this.credentials.getToken().then(function(v){return f.Hi.Ni(i,a,c,v)}).catch(function(v){throw"FirebaseError"===v.name?(v.code===ve.UNAUTHENTICATED&&f.credentials.invalidateToken(),v):new xe(ve.UNKNOWN,v.toString())})},e.prototype.$i=function(i,a,c){var f=this;return this.br(),this.credentials.getToken().then(function(v){return f.Hi.$i(i,a,c,v)}).catch(function(v){throw"FirebaseError"===v.name?(v.code===ve.UNAUTHENTICATED&&f.credentials.invalidateToken(),v):new xe(ve.UNKNOWN,v.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),GC=function(){function t(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},t.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},t.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},t.prototype.Cr=function(e){var i="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Qn(i),this.Vr=!1):Le("OnlineStateTracker",i)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),$C=function(t,e,i,a,c){var f=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=c,this.Lr.di(function(v){i.enqueueAndForget(function(){return(0,k.mG)(f,void 0,void 0,function(){return(0,k.Jh)(this,function(_){switch(_.label){case 0:return Do(this)?(Le("RemoteStore","Restarting streams for network reachability change."),[4,function(C){return(0,k.mG)(this,void 0,void 0,function(){var A;return(0,k.Jh)(this,function(x){switch(x.label){case 0:return(A=He(C)).Or.add(4),[4,uh(A)];case 1:return x.sent(),A.Br.set("Unknown"),A.Or.delete(4),[4,Vu(A)];case 2:return x.sent(),[2]}})})}(this)]):[3,2];case 1:_.sent(),_.label=2;case 2:return[2]}})})})}),this.Br=new GC(i,a)};function Vu(t){return(0,k.mG)(this,void 0,void 0,function(){var e,i;return(0,k.Jh)(this,function(a){switch(a.label){case 0:if(!Do(t))return[3,4];e=0,i=t.Mr,a.label=1;case 1:return e<i.length?[4,(0,i[e])(!0)]:[3,4];case 2:a.sent(),a.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function uh(t){return(0,k.mG)(this,void 0,void 0,function(){var e,i;return(0,k.Jh)(this,function(a){switch(a.label){case 0:e=0,i=t.Mr,a.label=1;case 1:return e<i.length?[4,(0,i[e])(!1)]:[3,4];case 2:a.sent(),a.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ch(t,e){var i=He(t);i.$r.has(e.targetId)||(i.$r.set(e.targetId,e),qC(i)?vt(i):lh(i).er()&&WC(i,e))}function ul(t,e){var i=He(t),a=lh(i);i.$r.delete(e),a.er()&&oS(i,e),0===i.$r.size&&(a.er()?a.ir():Do(i)&&i.Br.set("Unknown"))}function WC(t,e){t.qr.U(e.targetId),lh(t).mr(e)}function oS(t,e){t.qr.U(e),lh(t).yr(e)}function vt(t){t.qr=new fR({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),lh(t).start(),t.Br.Sr()}function qC(t){return Do(t)&&!lh(t).tr()&&t.$r.size>0}function Do(t){return 0===He(t).Or.size}function zC(t){t.qr=void 0}function sS(t){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){return t.$r.forEach(function(i,a){WC(t,i)}),[2]})})}function aS(t,e){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(i){return zC(t),qC(t)?(t.Br.Nr(e),vt(t)):t.Br.set("Unknown"),[2]})})}function vR(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var a,c,f;return(0,k.Jh)(this,function(v){switch(v.label){case 0:if(t.Br.set("Online"),!(e instanceof xT&&2===e.state&&e.cause))return[3,6];v.label=1;case 1:return v.trys.push([1,3,,5]),[4,function(_,C){return(0,k.mG)(this,void 0,void 0,function(){var A,x,P,V;return(0,k.Jh)(this,function(H){switch(H.label){case 0:A=C.cause,x=0,P=C.targetIds,H.label=1;case 1:return x<P.length?_.$r.has(V=P[x])?[4,_.remoteSyncer.rejectListen(V,A)]:[3,3]:[3,5];case 2:H.sent(),_.$r.delete(V),_.qr.removeTarget(V),H.label=3;case 3:H.label=4;case 4:return x++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return v.sent(),[3,5];case 3:return a=v.sent(),Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),[4,A0(t,a)];case 4:return v.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Pm?t.qr.X(e):e instanceof sC?t.qr.rt(e):t.qr.et(e),i.isEqual(Lt.min()))return[3,13];v.label=7;case 7:return v.trys.push([7,11,,13]),[4,I0(t.localStore)];case 8:return c=v.sent(),i.compareTo(c)>=0?[4,(_=t,C=i,A=_.qr.ut(C),A.targetChanges.forEach(function(x,P){if(x.resumeToken.approximateByteSize()>0){var V=_.$r.get(P);V&&_.$r.set(P,V.withResumeToken(x.resumeToken,C))}}),A.targetMismatches.forEach(function(x){var P=_.$r.get(x);if(P){_.$r.set(x,P.withResumeToken(sr.EMPTY_BYTE_STRING,P.snapshotVersion)),oS(_,x);var V=new Yi(P.target,x,1,P.sequenceNumber);WC(_,V)}}),_.remoteSyncer.applyRemoteEvent(A))]:[3,10];case 9:v.sent(),v.label=10;case 10:return[3,13];case 11:return Le("RemoteStore","Failed to raise snapshot:",f=v.sent()),[4,A0(t,f)];case 12:return v.sent(),[3,13];case 13:return[2]}var _,C,A})})}function A0(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var a=this;return(0,k.Jh)(this,function(c){switch(c.label){case 0:if(!wo(e))throw e;return t.Or.add(1),[4,uh(t)];case 1:return c.sent(),t.Br.set("Offline"),i||(i=function(){return I0(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,k.mG)(a,void 0,void 0,function(){return(0,k.Jh)(this,function(f){switch(f.label){case 0:return Le("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return f.sent(),t.Or.delete(1),[4,Vu(t)];case 2:return f.sent(),[2]}})})}),[2]}})})}function KC(t,e){return e().catch(function(i){return A0(t,i,e)})}function Zn(t){return(0,k.mG)(this,void 0,void 0,function(){var e,i,a,c,f;return(0,k.Jh)(this,function(v){switch(v.label){case 0:e=He(t),i=Uu(e),a=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,v.label=1;case 1:if(!(Do(_=e)&&_.Fr.length<10))return[3,7];v.label=2;case 2:return v.trys.push([2,4,,6]),[4,FC(e.localStore,a)];case 3:return null===(c=v.sent())?(0===e.Fr.length&&i.ir(),[3,7]):(a=c.batchId,function(_,C){_.Fr.push(C);var A=Uu(_);A.er()&&A.pr&&A.Er(C.mutations)}(e,c),[3,6]);case 4:return f=v.sent(),[4,A0(e,f)];case 5:return v.sent(),[3,6];case 6:return[3,1];case 7:return QC(e)&&YC(e),[2]}var _})})}function QC(t){return Do(t)&&!Uu(t).tr()&&t.Fr.length>0}function YC(t){Uu(t).start()}function R0(t){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){return Uu(t).Ar(),[2]})})}function uS(t){return(0,k.mG)(this,void 0,void 0,function(){var e,i,a;return(0,k.Jh)(this,function(f){for(e=Uu(t),i=0,a=t.Fr;i<a.length;i++)e.Er(a[i].mutations);return[2]})})}function cS(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var a,c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return a=t.Fr.shift(),c=GT.from(a,e,i),[4,KC(t,function(){return t.remoteSyncer.applySuccessfulWrite(c)})];case 1:return f.sent(),[4,Zn(t)];case 2:return f.sent(),[2]}})})}function lS(t,e){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(i){switch(i.label){case 0:return e&&Uu(t).pr?[4,function(a,c){return(0,k.mG)(this,void 0,void 0,function(){var f,v;return(0,k.Jh)(this,function(_){switch(_.label){case 0:return zf(v=c.code)&&v!==ve.ABORTED?(f=a.Fr.shift(),Uu(a).sr(),[4,KC(a,function(){return a.remoteSyncer.rejectFailedWrite(f.batchId,c)})]):[3,3];case 1:return _.sent(),[4,Zn(a)];case 2:_.sent(),_.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return QC(t)&&YC(t),[2]}})})}function x0(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return i=He(t),e?(i.Or.delete(2),[4,Vu(i)]):[3,2];case 1:return a.sent(),[3,5];case 2:return e?[3,4]:(i.Or.add(2),[4,uh(i)]);case 3:a.sent(),i.Br.set("Unknown"),a.label=4;case 4:a.label=5;case 5:return[2]}})})}function lh(t){var i,a,c,f,e=this;return t.Ur||(t.Ur=(i=t.datastore,a=t.asyncQueue,c={Ii:sS.bind(null,t),Ri:aS.bind(null,t),_r:vR.bind(null,t)},(f=He(i)).br(),new iS(a,f.Hi,f.credentials,f.R,c)),t.Mr.push(function(i){return(0,k.mG)(e,void 0,void 0,function(){return(0,k.Jh)(this,function(a){switch(a.label){case 0:return i?(t.Ur.sr(),qC(t)?vt(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:a.sent(),zC(t),a.label=3;case 3:return[2]}})})})),t.Ur}function Uu(t){var i,a,c,f,e=this;return t.Kr||(t.Kr=(i=t.datastore,a=t.asyncQueue,c={Ii:R0.bind(null,t),Ri:lS.bind(null,t),Ir:uS.bind(null,t),Tr:cS.bind(null,t)},(f=He(i)).br(),new qm(a,f.Hi,f.credentials,f.R,c)),t.Mr.push(function(i){return(0,k.mG)(e,void 0,void 0,function(){return(0,k.Jh)(this,function(a){switch(a.label){case 0:return i?(t.Kr.sr(),[4,Zn(t)]):[3,2];case 1:return a.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:a.sent(),t.Fr.length>0&&(Le("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),a.label=4;case 4:return[2]}})})})),t.Kr}var N0=function(){function t(e,i,a,c,f){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=c,this.removalCallback=f,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(v){})}return t.createAndSchedule=function(e,i,a,c,f){var v=new t(e,i,Date.now()+a,c,f);return v.start(a),v},t.prototype.start=function(e){var i=this;this.timerHandle=setTimeout(function(){return i.handleDelayElapsed()},e)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},t.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(i){return e.deferred.resolve(i)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function fh(t,e){if(Qn("AsyncQueue",e+": "+t),wo(t))return new xe(ve.UNAVAILABLE,e+": "+t);throw t}var JC=function(){function t(e){this.comparator=e?function(i,a){return e(i,a)||ut.comparator(i.key,a.key)}:function(i,a){return ut.comparator(i.key,a.key)},this.keyedMap=Qc(),this.sortedSet=new Yr(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(e){return null!=this.keyedMap.get(e)},t.prototype.get=function(e){return this.keyedMap.get(e)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(e){var i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(i,a){return e(i),!1})},t.prototype.add=function(e){var i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))},t.prototype.delete=function(e){var i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();i.hasNext();){var c=i.getNext().key,f=a.getNext().key;if(!c.isEqual(f))return!1}return!0},t.prototype.toString=function(){var e=[];return this.forEach(function(i){e.push(i.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},t.prototype.copy=function(e,i){var a=new t;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a},t}(),P0=function(){function t(){this.Qr=new Yr(ut.comparator)}return t.prototype.track=function(e){var i=e.doc.key,a=this.Qr.get(i);a?0!==e.type&&3===a.type?this.Qr=this.Qr.insert(i,e):3===e.type&&1!==a.type?this.Qr=this.Qr.insert(i,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Qr=this.Qr.insert(i,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Qr=this.Qr.insert(i,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Qr=this.Qr.remove(i):1===e.type&&2===a.type?this.Qr=this.Qr.insert(i,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Qr=this.Qr.insert(i,{type:2,doc:e.doc}):nt():this.Qr=this.Qr.insert(i,e)},t.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(i,a){e.push(a)}),e},t}(),hh=function(){function t(e,i,a,c,f,v,_,C){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=c,this.mutatedKeys=f,this.fromCache=v,this.syncStateChanged=_,this.excludesMetadataChanges=C}return t.fromInitialDocuments=function(e,i,a,c){var f=[];return i.forEach(function(v){f.push({type:0,doc:v})}),new t(e,i,JC.emptySet(i),f,a,c,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(var c=0;c<i.length;c++)if(i[c].type!==a[c].type||!i[c].doc.isEqual(a[c].doc))return!1;return!0},t}(),fS=function(){this.Wr=void 0,this.listeners=[]},yR=function(){this.queries=new rh(function(t){return K_(t)},Bf),this.onlineState="Unknown",this.Gr=new Set};function M0(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a,c,f,v,_,C;return(0,k.Jh)(this,function(A){switch(A.label){case 0:if(i=He(t),c=!1,(f=i.queries.get(a=e.query))||(c=!0,f=new fS),!c)return[3,4];A.label=1;case 1:return A.trys.push([1,3,,4]),v=f,[4,i.onListen(a)];case 2:return v.Wr=A.sent(),[3,4];case 3:return _=A.sent(),C=fh(_,"Initialization of query '"+Sm(e.query)+"' failed"),[2,void e.onError(C)];case 4:return i.queries.set(a,f),f.listeners.push(e),e.zr(i.onlineState),f.Wr&&e.Hr(f.Wr)&&F0(i),[2]}})})}function O0(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a,c,f,v;return(0,k.Jh)(this,function(_){return i=He(t),c=!1,(f=i.queries.get(a=e.query))&&(v=f.listeners.indexOf(e))>=0&&(f.listeners.splice(v,1),c=0===f.listeners.length),c?[2,(i.queries.delete(a),i.onUnlisten(a))]:[2]})})}function hS(t,e){for(var i=He(t),a=!1,c=0,f=e;c<f.length;c++){var v=f[c],C=i.queries.get(v.query);if(C){for(var A=0,x=C.listeners;A<x.length;A++)x[A].Hr(v)&&(a=!0);C.Wr=v}}a&&F0(i)}function dS(t,e,i){var a=He(t),c=a.queries.get(e);if(c)for(var f=0,v=c.listeners;f<v.length;f++)v[f].onError(i);a.queries.delete(e)}function F0(t){t.Gr.forEach(function(e){e.next()})}var k0=function(){function t(e,i,a){this.query=e,this.Jr=i,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=a||{}}return t.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var i=[],a=0,c=e.docChanges;a<c.length;a++){var f=c[a];3!==f.type&&i.push(f)}e=new hh(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var v=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),v=!0):this.eo(e,this.onlineState)&&(this.no(e),v=!0),this.Xr=e,v},t.prototype.onError=function(e){this.Jr.error(e)},t.prototype.zr=function(e){this.onlineState=e;var i=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),i=!0),i},t.prototype.eo=function(e,i){return!e.fromCache||!(this.options.so&&"Offline"!==i||e.docs.isEmpty()&&"Offline"!==i)},t.prototype.Zr=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(e){e=hh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},t}(),up=function(){function t(e,i){this.payload=e,this.byteLength=i}return t.prototype.io=function(){return"metadata"in this.payload},t}(),ZC=function(){function t(e){this.R=e}return t.prototype.qn=function(e){return Qo(this.R,e)},t.prototype.Un=function(e){return e.metadata.exists?lC(this.R,e.document,!1):ur.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},t.prototype.Kn=function(e){return Dr(e)},t}();!function(){function t(e,i,a){this.ro=e,this.localStore=i,this.R=a,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(e)}t.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var i=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++i):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++i),i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null},t.prototype.co=function(e){for(var i=new Map,a=new ZC(this.R),c=0,f=e;c<f.length;c++){var v=f[c];if(v.metadata.queries)for(var _=a.qn(v.metadata.name),C=0,A=v.metadata.queries;C<A.length;C++){var x=A[C],P=(i.get(x)||cn()).add(_);i.set(x,P)}}return i},t.prototype.complete=function(){return(0,k.mG)(this,void 0,void 0,function(){var e,i,a,c,f;return(0,k.Jh)(this,function(v){switch(v.label){case 0:return[4,ln(this.localStore,new ZC(this.R),this.documents,this.ro.id)];case 1:e=v.sent(),i=this.co(this.documents),a=0,c=this.queries,v.label=2;case 2:return a<c.length?[4,ku(this.localStore,f=c[a],i.get(f.name))]:[3,5];case 3:v.sent(),v.label=4;case 4:return a++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ZT(Object.assign({},this.progress),e))]}})})}}();var dh=function(t){this.key=t},gS=function(t){this.key=t},V0=function(){function t(e,i){this.query=e,this.uo=i,this.ao=null,this.current=!1,this.ho=cn(),this.mutatedKeys=cn(),this.lo=Q_(e),this.fo=new JC(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(e,i){var a=this,c=i?i.mo:new P0,f=i?i.fo:this.fo,v=i?i.mutatedKeys:this.mutatedKeys,_=f,C=!1,A=Im(this.query)&&f.size===this.query.limit?f.last():null,x=Tm(this.query)&&f.size===this.query.limit?f.first():null;if(e.inorderTraversal(function(V,H){var K=f.get(V),ne=Hf(a.query,H)?H:null,_e=!!K&&a.mutatedKeys.has(K.key),Ie=!!ne&&(ne.hasLocalMutations||a.mutatedKeys.has(ne.key)&&ne.hasCommittedMutations),Fe=!1;K&&ne?K.data.isEqual(ne.data)?_e!==Ie&&(c.track({type:3,doc:ne}),Fe=!0):a.yo(K,ne)||(c.track({type:2,doc:ne}),Fe=!0,(A&&a.lo(ne,A)>0||x&&a.lo(ne,x)<0)&&(C=!0)):!K&&ne?(c.track({type:0,doc:ne}),Fe=!0):K&&!ne&&(c.track({type:1,doc:K}),Fe=!0,(A||x)&&(C=!0)),Fe&&(ne?(_=_.add(ne),v=Ie?v.add(V):v.delete(V)):(_=_.delete(V),v=v.delete(V)))}),Im(this.query)||Tm(this.query))for(;_.size>this.query.limit;){var P=Im(this.query)?_.last():_.first();_=_.delete(P.key),v=v.delete(P.key),c.track({type:1,doc:P})}return{fo:_,mo:c,Nn:C,mutatedKeys:v}},t.prototype.yo=function(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations},t.prototype.applyChanges=function(e,i,a){var c=this,f=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var v=e.mo.jr();v.sort(function(x,P){return H=P.type,(K=function(ne){switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}})(x.type)-K(H)||c.lo(x.doc,P.doc);var H,K}),this.po(a);var _=i?this.Eo():[],C=0===this.ho.size&&this.current?1:0,A=C!==this.ao;return this.ao=C,0!==v.length||A?{snapshot:new hh(this.query,e.fo,f,v,e.mutatedKeys,0===C,A,!1),To:_}:{To:_}},t.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new P0,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},t.prototype.po=function(e){var i=this;e&&(e.addedDocuments.forEach(function(a){return i.uo=i.uo.add(a)}),e.modifiedDocuments.forEach(function(a){}),e.removedDocuments.forEach(function(a){return i.uo=i.uo.delete(a)}),this.current=e.current)},t.prototype.Eo=function(){var e=this;if(!this.current)return[];var i=this.ho;this.ho=cn(),this.fo.forEach(function(c){e.Io(c.key)&&(e.ho=e.ho.add(c.key))});var a=[];return i.forEach(function(c){e.ho.has(c)||a.push(new gS(c))}),this.ho.forEach(function(c){i.has(c)||a.push(new dh(c))}),a},t.prototype.Ao=function(e){this.uo=e.Bn,this.ho=cn();var i=this._o(e.documents);return this.applyChanges(i,!0)},t.prototype.Ro=function(){return hh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),mS=function(t,e,i){this.query=t,this.targetId=e,this.view=i},vS=function(t){this.key=t,this.bo=!1},yS=function(){function t(e,i,a,c,f,v){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=v,this.vo={},this.Po=new rh(function(_){return K_(_)},Bf),this.Vo=new Map,this.So=new Set,this.Do=new Yr(ut.comparator),this.Co=new Map,this.No=new nl,this.xo={},this.ko=new Map,this.Fo=Zc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function _S(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,c,f,v,_;return(0,k.Jh)(this,function(C){switch(C.label){case 0:return i=z0(t),(f=i.Po.get(e))?(i.sharedClientState.addLocalQueryTarget(f.targetId),c=f.view.Ro(),[3,4]):[3,1];case 1:return[4,sh(i.localStore,yo(e))];case 2:return v=C.sent(),_=i.sharedClientState.addLocalQueryTarget(v.targetId),[4,U0(i,e,v.targetId,"current"===_)];case 3:c=C.sent(),i.isPrimaryClient&&ch(i.remoteStore,v),C.label=4;case 4:return[2,c]}})})}function U0(t,e,i,a){return(0,k.mG)(this,void 0,void 0,function(){var c,f,v,_,C,A;return(0,k.Jh)(this,function(x){switch(x.label){case 0:return t.Oo=function(P,V,H){return function(K,ne,_e,Ie){return(0,k.mG)(this,void 0,void 0,function(){var Fe,ke,Xe;return(0,k.Jh)(this,function(ze){switch(ze.label){case 0:return(Fe=ne.view._o(_e)).Nn?[4,tl(K.localStore,ne.query,!1).then(function(St){return ne.view._o(St.documents,Fe)})]:[3,2];case 1:Fe=ze.sent(),ze.label=2;case 2:return ke=Ie&&Ie.targetChanges.get(ne.targetId),Xe=ne.view.applyChanges(Fe,K.isPrimaryClient,ke),[2,(G0(K,ne.targetId,Xe.To),Xe.snapshot)]}})})}(t,P,V,H)},[4,tl(t.localStore,e,!0)];case 1:return c=x.sent(),f=new V0(e,c.Bn),v=f._o(c.documents),_=Nm.createSynthesizedTargetChangeForCurrentChange(i,a&&"Offline"!==t.onlineState),C=f.applyChanges(v,t.isPrimaryClient,_),G0(t,i,C.To),A=new mS(e,i,f),[2,(t.Po.set(e,A),t.Vo.has(i)?t.Vo.get(i).push(e):t.Vo.set(i,[e]),C.snapshot)]}})})}function XC(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a,c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return i=He(t),a=i.Po.get(e),(c=i.Vo.get(a.targetId)).length>1?[2,(i.Vo.set(a.targetId,c.filter(function(v){return!Bf(v,e)})),void i.Po.delete(e))]:i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)?[3,2]:[4,el(i.localStore,a.targetId,!1).then(function(){i.sharedClientState.clearQueryState(a.targetId),ul(i.remoteStore,a.targetId),ph(i,a.targetId)}).catch(nh)]):[3,3];case 1:f.sent(),f.label=2;case 2:return[3,5];case 3:return ph(i,a.targetId),[4,el(i.localStore,a.targetId,!0)];case 4:f.sent(),f.label=5;case 5:return[2]}})})}function bS(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var a,c,f,v;return(0,k.Jh)(this,function(_){switch(_.label){case 0:a=zm(t),_.label=1;case 1:return _.trys.push([1,5,,6]),[4,(C=a.localStore,A=e,P=He(C),V=fi.now(),H=A.reduce(function(K,ne){return K.add(ne.key)},cn()),P.persistence.runTransaction("Locally write mutations","readwrite",function(K){return P.Mn.pn(K,H).next(function(ne){x=ne;for(var _e=[],Ie=0,Fe=A;Ie<Fe.length;Ie++){var ke=Fe[Ie],Xe=Rm(ke,x.get(ke.key));null!=Xe&&_e.push(new Bs(ke.key,Xe,H_(Xe.value.mapValue),Qr.exists(!0)))}return P._n.addMutationBatch(K,V,_e,A)})}).then(function(K){return K.applyToLocalDocumentSet(x),{batchId:K.batchId,changes:x}}))];case 2:return c=_.sent(),a.sharedClientState.addPendingMutation(c.batchId),function(C,A,x){var P=C.xo[C.currentUser.toKey()];P||(P=new Yr(qt)),P=P.insert(A,x),C.xo[C.currentUser.toKey()]=P}(a,c.batchId,i),[4,Ba(a,c.changes)];case 3:return _.sent(),[4,Zn(a.remoteStore)];case 4:return _.sent(),[3,6];case 5:return f=_.sent(),v=fh(f,"Failed to persist write"),i.reject(v),[3,6];case 6:return[2]}var C,A,x,P,V,H})})}function eD(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a;return(0,k.Jh)(this,function(c){switch(c.label){case 0:i=He(t),c.label=1;case 1:return c.trys.push([1,4,,6]),[4,eS(i.localStore,e)];case 2:return a=c.sent(),e.targetChanges.forEach(function(f,v){var _=i.Co.get(v);_&&(gt(f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size<=1),f.addedDocuments.size>0?_.bo=!0:f.modifiedDocuments.size>0?gt(_.bo):f.removedDocuments.size>0&&(gt(_.bo),_.bo=!1))}),[4,Ba(i,a,e)];case 3:return c.sent(),[3,6];case 4:return[4,nh(c.sent())];case 5:return c.sent(),[3,6];case 6:return[2]}})})}function wS(t,e,i){var a=He(t);if(a.isPrimaryClient&&0===i||!a.isPrimaryClient&&1===i){var c=[];a.Po.forEach(function(f,v){var _=v.view.zr(e);_.snapshot&&c.push(_.snapshot)}),function(f,v){var _=He(f);_.onlineState=v;var C=!1;_.queries.forEach(function(A,x){for(var P=0,V=x.listeners;P<V.length;P++)V[P].zr(v)&&(C=!0)}),C&&F0(_)}(a.eventManager,e),c.length&&a.vo._r(c),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function _R(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var a,c,f,v,_,C;return(0,k.Jh)(this,function(A){switch(A.label){case 0:return(a=He(t)).sharedClientState.updateQueryState(e,"rejected",i),c=a.Co.get(e),(f=c&&c.key)?(v=(v=new Yr(ut.comparator)).insert(f,ur.newNoDocument(f,Lt.min())),_=cn().add(f),C=new i0(Lt.min(),new Map,new cr(qt),v,_),[4,eD(a,C)]):[3,2];case 1:return A.sent(),a.Do=a.Do.remove(f),a.Co.delete(e),cp(a),[3,4];case 2:return[4,el(a.localStore,e,!1).then(function(){return ph(a,e,i)}).catch(nh)];case 3:A.sent(),A.label=4;case 4:return[2]}})})}function bR(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a,c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:i=He(t),a=e.batch.batchId,f.label=1;case 1:return f.trys.push([1,4,,6]),[4,MC(i.localStore,e)];case 2:return c=f.sent(),H0(i,a,null),B0(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),[4,Ba(i,c)];case 3:return f.sent(),[3,6];case 4:return[4,nh(f.sent())];case 5:return f.sent(),[3,6];case 6:return[2]}})})}function j0(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var a,c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:a=He(t),f.label=1;case 1:return f.trys.push([1,4,,6]),[4,(v=a.localStore,_=e,C=He(v),C.persistence.runTransaction("Reject batch","readwrite-primary",function(A){var x;return C._n.lookupMutationBatch(A,_).next(function(P){return gt(null!==P),x=P.keys(),C._n.removeMutationBatch(A,P)}).next(function(){return C._n.performConsistencyCheck(A)}).next(function(){return C.Mn.pn(A,x)})}))];case 2:return c=f.sent(),H0(a,e,i),B0(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),[4,Ba(a,c)];case 3:return f.sent(),[3,6];case 4:return[4,nh(f.sent())];case 5:return f.sent(),[3,6];case 6:return[2]}var v,_,C})})}function ES(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a,c,f,v;return(0,k.Jh)(this,function(_){switch(_.label){case 0:Do((i=He(t)).remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),_.label=1;case 1:return _.trys.push([1,3,,4]),[4,(C=i.localStore,A=He(C),A.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(x){return A._n.getHighestUnacknowledgedBatchId(x)}))];case 2:return-1===(a=_.sent())?[2,void e.resolve()]:((c=i.ko.get(a)||[]).push(e),i.ko.set(a,c),[3,4]);case 3:return f=_.sent(),v=fh(f,"Initialization of waitForPendingWrites() operation failed"),e.reject(v),[3,4];case 4:return[2]}var C,A})})}function B0(t,e){(t.ko.get(e)||[]).forEach(function(i){i.resolve()}),t.ko.delete(e)}function H0(t,e,i){var a=He(t),c=a.xo[a.currentUser.toKey()];if(c){var f=c.get(e);f&&(i?f.reject(i):f.resolve(),c=c.remove(e)),a.xo[a.currentUser.toKey()]=c}}function ph(t,e,i){void 0===i&&(i=null),t.sharedClientState.removeLocalQueryTarget(e);for(var a=0,c=t.Vo.get(e);a<c.length;a++){var f=c[a];t.Po.delete(f),i&&t.vo.Mo(f,i)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(v){t.No.containsKey(v)||tD(t,v)})}function tD(t,e){t.So.delete(e.path.canonicalString());var i=t.Do.get(e);null!==i&&(ul(t.remoteStore,i),t.Do=t.Do.remove(e),t.Co.delete(i),cp(t))}function G0(t,e,i){for(var a=0,c=i;a<c.length;a++){var f=c[a];f instanceof dh?(t.No.addReference(f.key,e),nD(t,f)):f instanceof gS?(Le("SyncEngine","Document no longer in limbo: "+f.key),t.No.removeReference(f.key,e),t.No.containsKey(f.key)||tD(t,f.key)):nt()}}function nD(t,e){var i=e.key,a=i.path.canonicalString();t.Do.get(i)||t.So.has(a)||(Le("SyncEngine","New document in limbo: "+i),t.So.add(a),cp(t))}function cp(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var i=new ut(Jt.fromString(e)),a=t.Fo.next();t.Co.set(a,new vS(i)),t.Do=t.Do.insert(i,a),ch(t.remoteStore,new Yi(yo(Uf(i.path)),a,2,zi.o))}}function Ba(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var a,c,f,v;return(0,k.Jh)(this,function(_){switch(_.label){case 0:return a=He(t),c=[],f=[],v=[],a.Po.isEmpty()?[3,3]:(a.Po.forEach(function(C,A){v.push(a.Oo(A,e,i).then(function(x){if(x){a.isPrimaryClient&&a.sharedClientState.updateQueryState(A.targetId,x.fromCache?"not-current":"current"),c.push(x);var P=XT.Pn(A.targetId,x);f.push(P)}}))}),[4,Promise.all(v)]);case 1:return _.sent(),a.vo._r(c),[4,function(C,A){return(0,k.mG)(this,void 0,void 0,function(){var x,P,V,H,K,ne,_e,Fe;return(0,k.Jh)(this,function(ke){switch(ke.label){case 0:x=He(C),ke.label=1;case 1:return ke.trys.push([1,3,,4]),[4,x.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(Xe){return Oe.forEach(A,function(ze){return Oe.forEach(ze.bn,function(St){return x.persistence.referenceDelegate.addReference(Xe,ze.targetId,St)}).next(function(){return Oe.forEach(ze.vn,function(St){return x.persistence.referenceDelegate.removeReference(Xe,ze.targetId,St)})})})})];case 2:return ke.sent(),[3,4];case 3:if(!wo(P=ke.sent()))throw P;return Le("LocalStore","Failed to update sequence numbers: "+P),[3,4];case 4:for(V=0,H=A;V<H.length;V++)ne=(K=H[V]).targetId,K.fromCache||(_e=x.kn.get(ne),Fe=_e.withLastLimboFreeSnapshotVersion(_e.snapshotVersion),x.kn=x.kn.insert(ne,Fe));return[2]}})})}(a.localStore,f)];case 2:_.sent(),_.label=3;case 3:return[2]}})})}function gh(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a;return(0,k.Jh)(this,function(c){switch(c.label){case 0:return(i=He(t)).currentUser.isEqual(e)?[3,3]:(Le("SyncEngine","User change. New user:",e.toKey()),[4,Hm(i.localStore,e)]);case 1:return a=c.sent(),i.currentUser=e,(f=i).ko.forEach(function(_){_.forEach(function(C){C.reject(new xe(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),f.ko.clear(),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),[4,Ba(i,a.Ln)];case 2:c.sent(),c.label=3;case 3:return[2]}var f})})}function ei(t,e){var i=He(t),a=i.Co.get(e);if(a&&a.bo)return cn().add(a.key);var c=cn(),f=i.Vo.get(e);if(!f)return c;for(var v=0,_=f;v<_.length;v++){var A=i.Po.get(_[v]);c=c.unionWith(A.view.wo)}return c}function rD(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a,c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return[4,tl((i=He(t)).localStore,e.query,!0)];case 1:return a=f.sent(),c=e.view.Ao(a),[2,(i.isPrimaryClient&&G0(i,e.targetId,c.To),c)]}})})}function es(t){return(0,k.mG)(this,void 0,void 0,function(){var e;return(0,k.Jh)(this,function(i){return[2,tS((e=He(t)).localStore).then(function(a){return Ba(e,a)})]})})}function $0(t,e,i,a){return(0,k.mG)(this,void 0,void 0,function(){var c,f;return(0,k.Jh)(this,function(v){switch(v.label){case 0:return[4,(_=(c=He(t)).localStore,C=e,A=He(_),x=He(A._n),A.persistence.runTransaction("Lookup mutation documents","readonly",function(P){return x.jt(P,C).next(function(V){return V?A.Mn.pn(P,V):Oe.resolve(null)})}))];case 1:return null===(f=v.sent())?[3,6]:"pending"!==i?[3,3]:[4,Zn(c.remoteStore)];case 2:return v.sent(),[3,4];case 3:"acknowledged"===i||"rejected"===i?(H0(c,e,a||null),B0(c,e),function(_,C){He(He(_)._n).Gt(C)}(c.localStore,e)):nt(),v.label=4;case 4:return[4,Ba(c,f)];case 5:return v.sent(),[3,7];case 6:Le("SyncEngine","Cannot apply mutation batch with id: "+e),v.label=7;case 7:return[2]}var _,C,A,x})})}function CS(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a,c,f,v,C,A;return(0,k.Jh)(this,function(x){switch(x.label){case 0:return z0(i=He(t)),zm(i),!0!==e||!0===i.$o?[3,3]:(a=i.sharedClientState.getAllActiveQueryTargets(),[4,W0(i,a.toArray())]);case 1:return c=x.sent(),i.$o=!0,[4,x0(i.remoteStore,!0)];case 2:for(x.sent(),f=0,v=c;f<v.length;f++)ch(i.remoteStore,v[f]);return[3,7];case 3:return!1!==e||!1===i.$o?[3,7]:(C=[],A=Promise.resolve(),i.Vo.forEach(function(P,V){i.sharedClientState.isLocalQueryTarget(V)?C.push(V):A=A.then(function(){return ph(i,V),el(i.localStore,V,!0)}),ul(i.remoteStore,V)}),[4,A]);case 4:return x.sent(),[4,W0(i,C)];case 5:return x.sent(),(V=He(i)).Co.forEach(function(H,K){ul(V.remoteStore,K)}),V.No.ts(),V.Co=new Map,V.Do=new Yr(ut.comparator),i.$o=!1,[4,x0(i.remoteStore,!1)];case 6:x.sent(),x.label=7;case 7:return[2]}var V})})}function W0(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var a,c,f,v,_,C,A,x,P,V,K,ne,_e;return(0,k.Jh)(this,function(Ie){switch(Ie.label){case 0:a=He(t),c=[],f=[],v=0,_=e,Ie.label=1;case 1:return v<_.length?(A=void 0,(x=a.Vo.get(C=_[v]))&&0!==x.length?[4,sh(a.localStore,yo(x[0]))]:[3,7]):[3,13];case 2:A=Ie.sent(),P=0,V=x,Ie.label=3;case 3:return P<V.length?(K=a.Po.get(V[P]),[4,rD(a,K)]):[3,6];case 4:(ne=Ie.sent()).snapshot&&f.push(ne.snapshot),Ie.label=5;case 5:return P++,[3,3];case 6:return[3,11];case 7:return[4,ip(a.localStore,C)];case 8:return _e=Ie.sent(),[4,sh(a.localStore,_e)];case 9:return A=Ie.sent(),[4,U0(a,q0(_e),C,!1)];case 10:Ie.sent(),Ie.label=11;case 11:c.push(A),Ie.label=12;case 12:return v++,[3,1];case 13:return[2,(a.vo._r(f),c)]}})})}function q0(t){return YE(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function iD(t){var e=He(t);return He(He(e.localStore).persistence).fn()}function DS(t,e,i,a){return(0,k.mG)(this,void 0,void 0,function(){var c,f,v;return(0,k.Jh)(this,function(_){switch(_.label){case 0:return(c=He(t)).$o?(Le("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!c.Vo.has(e))return[3,8];switch(i){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,tS(c.localStore)];case 3:return f=_.sent(),v=i0.createSynthesizedRemoteEventForCurrentChange(e,"current"===i),[4,Ba(c,f,v)];case 4:return _.sent(),[3,8];case 5:return[4,el(c.localStore,e,!0)];case 6:return _.sent(),ph(c,e,a),[3,8];case 7:nt(),_.label=8;case 8:return[2]}})})}function IS(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var a,c,f,v,_,C,A,x,P;return(0,k.Jh)(this,function(H){switch(H.label){case 0:if(!(a=z0(t)).$o)return[3,10];c=0,f=e,H.label=1;case 1:return c<f.length?a.Vo.has(v=f[c])?(Le("SyncEngine","Adding an already active target "+v),[3,5]):[4,ip(a.localStore,v)]:[3,6];case 2:return _=H.sent(),[4,sh(a.localStore,_)];case 3:return C=H.sent(),[4,U0(a,q0(_),C.targetId,!1)];case 4:H.sent(),ch(a.remoteStore,C),H.label=5;case 5:return c++,[3,1];case 6:A=function(K){return(0,k.Jh)(this,function(ne){switch(ne.label){case 0:return a.Vo.has(K)?[4,el(a.localStore,K,!1).then(function(){ul(a.remoteStore,K),ph(a,K)}).catch(nh)]:[3,2];case 1:ne.sent(),ne.label=2;case 2:return[2]}})},x=0,P=i,H.label=7;case 7:return x<P.length?[5,A(P[x])]:[3,10];case 8:H.sent(),H.label=9;case 9:return x++,[3,7];case 10:return[2]}})})}function z0(t){var e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ei.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_R.bind(null,e),e.vo._r=hS.bind(null,e.eventManager),e.vo.Mo=dS.bind(null,e.eventManager),e}function zm(t){var e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=j0.bind(null,e),e}var SS=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(e){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(i){switch(i.label){case 0:return this.R=sl(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return i.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},t.prototype.Uo=function(e){return null},t.prototype.Ko=function(e){return D0(this.persistence,new NC,e.initialUser,this.R)},t.prototype.qo=function(e){return new mR(LC.bs,this.R)},t.prototype.Bo=function(e){return new il},t.prototype.terminate=function(){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},t}(),oD=function(t){function e(i,a,c){var f=this;return(f=t.call(this)||this).Qo=i,f.cacheSizeBytes=a,f.forceOwnership=c,f.synchronizeTabs=!1,f}return(0,k.ZT)(e,t),e.prototype.initialize=function(i){return(0,k.mG)(this,void 0,void 0,function(){var a=this;return(0,k.Jh)(this,function(c){switch(c.label){case 0:return[4,t.prototype.initialize.call(this,i)];case 1:return c.sent(),[4,op(this.localStore)];case 2:return c.sent(),[4,this.Qo.initialize(this,i)];case 3:return c.sent(),[4,zm(this.Qo.syncEngine)];case 4:return c.sent(),[4,Zn(this.Qo.remoteStore)];case 5:return c.sent(),[4,this.persistence.He(function(){return a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(a.localStore),Promise.resolve()})];case 6:return c.sent(),[2]}})})},e.prototype.Ko=function(i){return D0(this.persistence,new NC,i.initialUser,this.R)},e.prototype.Uo=function(i){return new zT(this.persistence.referenceDelegate.garbageCollector,i.asyncQueue)},e.prototype.qo=function(i){var a=xC(i.databaseInfo.databaseId,i.databaseInfo.persistenceKey),c=void 0!==this.cacheSizeBytes?Zo.withCacheSize(this.cacheSizeBytes):Zo.DEFAULT;return new Xc(this.synchronizeTabs,a,i.clientId,c,i.asyncQueue,$m(),Lu(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(i){return new il},e}(SS),AS=function(t){function e(i,a){var c=this;return(c=t.call(this,i,a,!1)||this).Qo=i,c.cacheSizeBytes=a,c.synchronizeTabs=!0,c}return(0,k.ZT)(e,t),e.prototype.initialize=function(i){return(0,k.mG)(this,void 0,void 0,function(){var a,c=this;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return[4,t.prototype.initialize.call(this,i)];case 1:return f.sent(),a=this.Qo.syncEngine,this.sharedClientState instanceof sp?(this.sharedClientState.syncEngine={ui:$0.bind(null,a),ai:DS.bind(null,a),hi:IS.bind(null,a),fn:iD.bind(null,a),ci:es.bind(null,a)},[4,this.sharedClientState.start()]):[3,3];case 2:f.sent(),f.label=3;case 3:return[4,this.persistence.He(function(v){return(0,k.mG)(c,void 0,void 0,function(){return(0,k.Jh)(this,function(_){switch(_.label){case 0:return[4,CS(this.Qo.syncEngine,v)];case 1:return _.sent(),this.gcScheduler&&(v&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):v||this.gcScheduler.stop()),[2]}})})})];case 4:return f.sent(),[2]}})})},e.prototype.Bo=function(i){var a=$m();if(!sp.yt(a))throw new xe(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var c=xC(i.databaseInfo.databaseId,i.databaseInfo.persistenceKey);return new sp(a,i.asyncQueue,c,i.clientId,i.initialUser)},e}(oD),ju=function(){function t(){}return t.prototype.initialize=function(e,i){return(0,k.mG)(this,void 0,void 0,function(){var a=this;return(0,k.Jh)(this,function(c){switch(c.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(f){return wS(a.syncEngine,f,1)},this.remoteStore.remoteSyncer.handleCredentialChange=gh.bind(null,this.syncEngine),[4,x0(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:c.sent(),c.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(e){return new yR},t.prototype.createDatastore=function(e){var a=sl(e.databaseInfo.databaseId),c=new BC(e.databaseInfo);return new HC(e.credentials,c,a)},t.prototype.createRemoteStore=function(e){var i,a,c,f,v,_=this;return i=this.localStore,a=this.datastore,c=e.asyncQueue,f=function(C){return wS(_.syncEngine,C,0)},v=jC.yt()?new jC:new ap,new $C(i,a,c,f,v)},t.prototype.createSyncEngine=function(e,i){return A=i,x=new yS(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions),A&&(x.$o=!0),x;var A,x},t.prototype.terminate=function(){return function(e){return(0,k.mG)(this,void 0,void 0,function(){var i;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return i=He(e),Le("RemoteStore","RemoteStore shutting down."),i.Or.add(5),[4,uh(i)];case 1:return a.sent(),i.Lr.shutdown(),i.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),lp=function(){function t(e){this.observer=e,this.muted=!1}return t.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},t.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(e,i){var a=this;this.muted||setTimeout(function(){a.muted||e(i)},0)},t}(),wR=(function(){function t(e,i){var a=this;this.Go=e,this.R=i,this.metadata=new Zr,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(c){c&&c.io()?a.metadata.resolve(c.payload.metadata):a.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==c?void 0:c.payload)))},function(c){return a.metadata.reject(c)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,k.mG)(this,void 0,void 0,function(){var e,i,a,c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return[4,this.Jo()];case 1:return null===(e=f.sent())?[2,null]:(i=this.zo.decode(e),a=Number(i),isNaN(a)&&this.Yo("length string ("+i+") is not valid number"),[4,this.Xo(a)]);case 2:return c=f.sent(),[2,new up(JSON.parse(c),e.length+a)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,k.mG)(this,void 0,void 0,function(){var e,i;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(a.sent())return[3,3];a.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),i=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),i)])}})})},t.prototype.Xo=function(e){return(0,k.mG)(this,void 0,void 0,function(){var i;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:a.sent()&&this.Yo("Reached the end of bundle when more is expected."),a.label=2;case 2:return[3,0];case 3:return i=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),i)]}})})},t.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},t.prototype.tc=function(){return(0,k.mG)(this,void 0,void 0,function(){var e,i;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return[4,this.Go.read()];case 1:return(e=a.sent()).done||((i=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),i.set(e.value,this.buffer.length),this.buffer=i),[2,e.done]}})})}}(),function(){function t(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(e){return(0,k.mG)(this,void 0,void 0,function(){var i,a=this;return(0,k.Jh)(this,function(c){switch(c.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new xe(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(f,v){return(0,k.mG)(this,void 0,void 0,function(){var _,C,A,x,P,V;return(0,k.Jh)(this,function(H){switch(H.label){case 0:return _=He(f),C=Hs(_.R)+"/documents",A={documents:v.map(function(K){return Yd(_.R,K)})},[4,_.$i("BatchGetDocuments",C,A)];case 1:return x=H.sent(),P=new Map,x.forEach(function(K){var _e,Ie,ne=(_e=_.R,"found"in(Ie=K)?function(Fe,ke){gt(!!ke.found);var Xe=Qo(Fe,ke.found.name),ze=Dr(ke.found.updateTime),St=new Ti({mapValue:{fields:ke.found.fields}});return ur.newFoundDocument(Xe,ze,St)}(_e,Ie):"missing"in Ie?function(Fe,ke){gt(!!ke.missing),gt(!!ke.readTime);var Xe=Qo(Fe,ke.missing),ze=Dr(ke.readTime);return ur.newNoDocument(Xe,ze)}(_e,Ie):nt());P.set(ne.key.toString(),ne)}),V=[],[2,(v.forEach(function(K){var ne=P.get(K.toString());gt(!!ne),V.push(ne)}),V)]}})})}(this.datastore,e)];case 1:return[2,((i=c.sent()).forEach(function(f){return a.recordVersion(f)}),i)]}})})},t.prototype.set=function(e,i){this.write(i.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.update=function(e,i){try{this.write(i.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())},t.prototype.delete=function(e){this.write(new zd(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.commit=function(){return(0,k.mG)(this,void 0,void 0,function(){var e,i=this;return(0,k.Jh)(this,function(a){switch(a.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(c){e.delete(c.key.toString())}),e.forEach(function(c,f){var v=ut.fromPath(f);i.mutations.push(new n0(v,i.precondition(v)))}),[4,function(c,f){return(0,k.mG)(this,void 0,void 0,function(){var v,_,C;return(0,k.Jh)(this,function(A){switch(A.label){case 0:return v=He(c),_=Hs(v.R)+"/documents",C={writes:f.map(function(x){return Jd(v.R,x)})},[4,v.Ni("Commit",_,C)];case 1:return A.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return a.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(e){var i;if(e.isFoundDocument())i=e.version;else{if(!e.isNoDocument())throw nt();i=Lt.min()}var a=this.readVersions.get(e.key.toString());if(a){if(!i.isEqual(a))throw new xe(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),i)},t.prototype.precondition=function(e){var i=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&i?Qr.updateTime(i):Qr.none()},t.prototype.preconditionForUpdate=function(e){var i=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&i){if(i.isEqual(Lt.min()))throw new xe(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qr.updateTime(i)}return Qr.exists(!0)},t.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},t.prototype.ensureCommitNotCalled=function(){},t}()),sD=function(){function t(e,i,a,c){this.asyncQueue=e,this.datastore=i,this.updateFunction=a,this.deferred=c,this.ec=5,this.Zi=new Wm(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var e=this;this.Zi.ji(function(){return(0,k.mG)(e,void 0,void 0,function(){var i,a,c=this;return(0,k.Jh)(this,function(f){return i=new wR(this.datastore),(a=this.sc(i))&&a.then(function(v){c.asyncQueue.enqueueAndForget(function(){return i.commit().then(function(){c.deferred.resolve(v)}).catch(function(_){c.ic(_)})})}).catch(function(v){c.ic(v)}),[2]})})})},t.prototype.sc=function(e){try{var i=this.updateFunction(e);return!Pu(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(a){return this.deferred.reject(a),null}},t.prototype.ic=function(e){var i=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return i.nc(),Promise.resolve()})):this.deferred.reject(e)},t.prototype.rc=function(e){if("FirebaseError"===e.name){var i=e.code;return"aborted"===i||"failed-precondition"===i||!zf(i)}return!1},t}(),NS=function(){function t(e,i,a){var c=this;this.credentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=Xr.UNAUTHENTICATED,this.clientId=L_.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(i,function(f){return(0,k.mG)(c,void 0,void 0,function(){return(0,k.Jh)(this,function(v){switch(v.label){case 0:return Le("FirestoreClient","Received user=",f.uid),[4,this.credentialListener(f)];case 1:return v.sent(),this.user=f,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new xe(ve.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var i=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,k.mG)(e,void 0,void 0,function(){var a,c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return f.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:f.sent(),f.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:f.sent(),f.label=4;case 4:return this.credentials.removeChangeListener(),i.resolve(),[3,6];case 5:return a=f.sent(),c=fh(a,"Failed to shutdown persistence"),i.reject(c),[3,6];case 6:return[2]}})})}),i.promise},t}();function Km(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a,c=this;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return i=f.sent(),[4,e.initialize(i)];case 2:return f.sent(),a=i.initialUser,t.setCredentialChangeListener(function(v){return(0,k.mG)(c,void 0,void 0,function(){return(0,k.Jh)(this,function(_){switch(_.label){case 0:return a.isEqual(v)?[3,2]:[4,Hm(e.localStore,v)];case 1:_.sent(),a=v,_.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function aD(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a;return(0,k.Jh)(this,function(c){switch(c.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,K0(t)];case 1:return i=c.sent(),Le("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return a=c.sent(),[4,e.initialize(i,a)];case 3:return c.sent(),t.setCredentialChangeListener(function(f){return function(v,_){return(0,k.mG)(this,void 0,void 0,function(){var C,A;return(0,k.Jh)(this,function(x){switch(x.label){case 0:return(C=He(v)).asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials"),A=Do(C),C.Or.add(3),[4,uh(C)];case 1:return x.sent(),A&&C.Br.set("Unknown"),[4,C.remoteSyncer.handleCredentialChange(_)];case 2:return x.sent(),C.Or.delete(3),[4,Vu(C)];case 3:return x.sent(),[2]}})})}(e.remoteStore,f)}),t.onlineComponents=e,[2]}})})}function K0(t){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Le("FirestoreClient","Using default OfflineComponentProvider"),[4,Km(t,new SS)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Qm(t){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Le("FirestoreClient","Using default OnlineComponentProvider"),[4,aD(t,new ju)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function uD(t){return K0(t).then(function(e){return e.persistence})}function Q0(t){return K0(t).then(function(e){return e.localStore})}function cD(t){return Qm(t).then(function(e){return e.remoteStore})}function Y0(t){return Qm(t).then(function(e){return e.syncEngine})}function mh(t){return(0,k.mG)(this,void 0,void 0,function(){var e,i;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return[4,Qm(t)];case 1:return e=a.sent(),[2,((i=e.eventManager).onListen=_S.bind(null,e.syncEngine),i.onUnlisten=XC.bind(null,e.syncEngine),i)]}})})}function lD(t,e,i){var a=this;void 0===i&&(i={});var c=new Zr;return t.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(a,void 0,void 0,function(){var f;return(0,k.Jh)(this,function(v){switch(v.label){case 0:return f=function(_,C,A,x,P){var V=new lp({next:function(K){C.enqueueAndForget(function(){return O0(_,H)});var ne=K.docs.has(A);!ne&&K.fromCache?P.reject(new xe(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):ne&&K.fromCache&&x&&"server"===x.source?P.reject(new xe(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):P.resolve(K)},error:function(K){return P.reject(K)}}),H=new k0(Uf(A.path),V,{includeMetadataChanges:!0,so:!0});return M0(_,H)},[4,mh(t)];case 1:return[2,f.apply(void 0,[v.sent(),t.asyncQueue,e,i,c])]}})})}),c.promise}function fD(t,e,i){var a=this;void 0===i&&(i={});var c=new Zr;return t.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(a,void 0,void 0,function(){var f;return(0,k.Jh)(this,function(v){switch(v.label){case 0:return f=function(_,C,A,x,P){var V=new lp({next:function(K){C.enqueueAndForget(function(){return O0(_,H)}),K.fromCache&&"server"===x.source?P.reject(new xe(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):P.resolve(K)},error:function(K){return P.reject(K)}}),H=new k0(A,V,{includeMetadataChanges:!0,so:!0});return M0(_,H)},[4,mh(t)];case 1:return[2,f.apply(void 0,[v.sent(),t.asyncQueue,e,i,c])]}})})}),c.promise}var fp=function(t,e,i,a,c,f,v,_){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=v,this.useFetchStreams=_},hp=function(){function t(e,i){this.projectId=e,this.database=i||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),J0=new Map,Z0=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},X0=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,i){this.changeListener=i,e.enqueueRetryable(function(){return i(Xr.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),hD=function(){function t(e){this.token=e,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,i){var a=this;this.changeListener=i,e.enqueueRetryable(function(){return i(a.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),dD=function(){function t(e){var i=this;this.currentUser=Xr.UNAUTHENTICATED,this.oc=new Zr,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){i.cc++,i.currentUser=i.ac(),i.oc.resolve(),i.changeListener&&i.asyncQueue.enqueueRetryable(function(){return i.changeListener(i.currentUser)})};var a=function(c){Le("FirebaseCredentialsProvider","Auth detected"),i.auth=c,i.auth.addAuthTokenListener(i.uc)};e.onInit(function(c){return a(c)}),setTimeout(function(){if(!i.auth){var c=e.getImmediate({optional:!0});c?a(c):(Le("FirebaseCredentialsProvider","Auth not yet detected"),i.oc.resolve())}},0)}return t.prototype.getToken=function(){var e=this,i=this.cc,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(function(c){return e.cc!==i?(Le("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):c?(gt("string"==typeof c.accessToken),new Z0(c.accessToken,e.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(e,i){var a=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return(0,k.mG)(a,void 0,void 0,function(){return(0,k.Jh)(this,function(c){switch(c.label){case 0:return[4,this.oc.promise];case 1:return c.sent(),[4,i(this.currentUser)];case 2:return c.sent(),this.changeListener=i,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return gt(null===e||"string"==typeof e),new Xr(e)},t}(),PS=function(){function t(e,i,a){this.hc=e,this.lc=i,this.fc=a,this.type="FirstParty",this.user=Xr.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},i=this.hc.auth.getAuthHeaderValueForFirstParty([]);return i&&(e.Authorization=i),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),t}(),pD=function(){function t(e,i,a){this.hc=e,this.lc=i,this.fc=a}return t.prototype.getToken=function(){return Promise.resolve(new PS(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(e,i){e.enqueueRetryable(function(){return i(Xr.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function eb(t,e,i){if(!i)throw new xe(ve.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function tb(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe(ve.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function gD(t,e,i,a){if(!0===e&&!0===a)throw new xe(ve.INVALID_ARGUMENT,t+" and "+i+" cannot be used together.")}function mD(t){if(!ut.isDocumentKey(t))throw new xe(ve.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function vh(t){if(ut.isDocumentKey(t))throw new xe(ve.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Bu(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(i){if(i.constructor){var a=/function\s+([^\s(]+)\s*\(/.exec(i.constructor.toString());if(a&&a.length>1)return a[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":nt()}function Xt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var i=Bu(t);throw new xe(ve.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+i)}return t}function Ym(t,e){if(e<=0)throw new xe(ve.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var ts=function(){function t(e){var i;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(i=e.ssl)||void 0===i||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,gD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},t}(),dp=function(){function t(e,i){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ts({}),this._settingsFrozen=!1,e instanceof hp?(this._databaseId=e,this._credentials=new X0):(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new xe(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hp(a.options.projectId)}(e),this._credentials=new dD(i))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new xe(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(e){if(this._settingsFrozen)throw new xe(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ts(e),void 0!==e.credentials&&(this._credentials=function(i){if(!i)return new X0;switch(i.type){case"gapi":var a=i.client;return gt(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new pD(a,i.sessionIndex||"0",i.iamToken||null);case"provider":return i.client;default:throw new xe(ve.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(i=J0.get(this))&&(Le("ComponentProvider","Removing Datastore"),J0.delete(this),i.terminate()),Promise.resolve();var i},t}(),bn=function(){function t(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Hu(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Ni=function(){function t(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Hu=function(t){function e(i,a,c){var f=this;return(f=t.call(this,i,a,Uf(c))||this)._path=c,f.type="collection",f}return(0,k.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var i=this._path.popLast();return i.isEmpty()?null:new bn(this.firestore,null,new ut(i))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(i){return new e(this.firestore,i,this._path)},e}(Ni);function MS(t,e){for(var i,a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];if(t=(0,Pt.m9)(t),eb("collection","path",e),t instanceof dp)return vh(i=Jt.fromString.apply(Jt,(0,k.ev)([e],a))),new Hu(t,null,i);if(!(t instanceof bn||t instanceof Hu))throw new xe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return vh(i=Jt.fromString.apply(Jt,(0,k.ev)([t.path],a)).child(Jt.fromString(e))),new Hu(t.firestore,null,i)}function yh(t,e){for(var i,a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];if(t=(0,Pt.m9)(t),1===arguments.length&&(e=L_.u()),eb("doc","path",e),t instanceof dp)return mD(i=Jt.fromString.apply(Jt,(0,k.ev)([e],a))),new bn(t,null,new ut(i));if(!(t instanceof bn||t instanceof Hu))throw new xe(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return mD(i=t._path.child(Jt.fromString.apply(Jt,(0,k.ev)([e],a)))),new bn(t.firestore,t instanceof Hu?t.converter:null,new ut(i))}function Jm(t,e){return t=(0,Pt.m9)(t),e=(0,Pt.m9)(e),(t instanceof bn||t instanceof Hu)&&(e instanceof bn||e instanceof Hu)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function nb(t,e){return t=(0,Pt.m9)(t),e=(0,Pt.m9)(e),t instanceof Ni&&e instanceof Ni&&t.firestore===e.firestore&&Bf(t._query,e._query)&&t.converter===e.converter}var rb=function(){function t(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Wm(this,"async_queue_retry"),this.Ic=function(){var a=Lu();a&&Le("AsyncQueue","Visibility state changed to "+a.visibilityState),e.Zi.Gi()};var i=Lu();i&&"function"==typeof i.addEventListener&&i.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(e){this.enqueue(e)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},t.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var i=Lu();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(e){var i=this;if(this.Ac(),this._c)return new Promise(function(){});var a=new Zr;return this.Rc(function(){return i._c&&i.Ec?Promise.resolve():(e().then(a.resolve,a.reject),a.promise)}).then(function(){return a.promise})},t.prototype.enqueueRetryable=function(e){var i=this;this.enqueueAndForget(function(){return i.wc.push(e),i.bc()})},t.prototype.bc=function(){return(0,k.mG)(this,void 0,void 0,function(){var e,i=this;return(0,k.Jh)(this,function(a){switch(a.label){case 0:if(0===this.wc.length)return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return a.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!wo(e=a.sent()))throw e;return Le("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return i.bc()}),a.label=5;case 5:return[2]}})})},t.prototype.Rc=function(e){var i=this,a=this.dc.then(function(){return i.gc=!0,e().catch(function(c){throw i.yc=c,i.gc=!1,Qn("INTERNAL UNHANDLED ERROR: ",(v=(f=c).message||"",f.stack&&(v=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),v)),c;var f,v}).then(function(c){return i.gc=!1,c})});return this.dc=a,a},t.prototype.enqueueAfterDelay=function(e,i,a){var c=this;this.Ac(),this.Tc.indexOf(e)>-1&&(i=0);var f=N0.createAndSchedule(this,e,i,a,function(v){return c.vc(v)});return this.mc.push(f),f},t.prototype.Ac=function(){this.yc&&nt()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,k.mG)(this,void 0,void 0,function(){var e;return(0,k.Jh)(this,function(i){switch(i.label){case 0:return[4,e=this.dc];case 1:i.sent(),i.label=2;case 2:if(e!==this.dc)return[3,0];i.label=3;case 3:return[2]}})})},t.prototype.Vc=function(e){for(var i=0,a=this.mc;i<a.length;i++)if(a[i].timerId===e)return!0;return!1},t.prototype.Sc=function(e){var i=this;return this.Pc().then(function(){i.mc.sort(function(v,_){return v.targetTimeMs-_.targetTimeMs});for(var a=0,c=i.mc;a<c.length;a++){var f=c[a];if(f.skipDelay(),"all"!==e&&f.timerId===e)break}return i.Pc()})},t.prototype.Dc=function(e){this.Tc.push(e)},t.prototype.vc=function(e){var i=this.mc.indexOf(e);this.mc.splice(i,1)},t}();function Gu(t){return function(e,i){if("object"!=typeof e||null===e)return!1;for(var a=e,c=0,f=["next","error","complete"];c<f.length;c++){var v=f[c];if(v in a&&"function"==typeof a[v])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(e,i,a){this._progressObserver={next:e,error:i,complete:a}},t.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},t.prototype.then=function(e,i){return this._taskCompletionResolver.promise.then(e,i)},t.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},t.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},t.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}();var Xn=function(t){function e(i,a){var c=this;return(c=t.call(this,i,a)||this).type="firestore",c._queue=new rb,c._persistenceKey="name"in i?i.name:"[DEFAULT]",c}return(0,k.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||ib(this),this._firestoreClient.terminate()},e}(dp);function Ir(t){return t._firestoreClient||ib(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ib(t){var e,f,_,i=t._freezeSettings(),a=(f=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new fp(t._databaseId,f,t._persistenceKey,(_=i).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));t._firestoreClient=new NS(t._credentials,t._queue,a)}function Zm(t,e,i){var a=this,c=new Zr;return t.asyncQueue.enqueue(function(){return(0,k.mG)(a,void 0,void 0,function(){var f;return(0,k.Jh)(this,function(v){switch(v.label){case 0:return v.trys.push([0,3,,4]),[4,Km(t,i)];case 1:return v.sent(),[4,aD(t,e)];case 2:return v.sent(),c.resolve(),[3,4];case 3:if(!("FirebaseError"===(_=f=v.sent()).name?_.code===ve.FAILED_PRECONDITION||_.code===ve.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&_ instanceof DOMException)||22===_.code||20===_.code||11===_.code))throw f;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+f),c.reject(f),[3,4];case 4:return[2]}var _})})}).then(function(){return c.promise})}function ob(t){if(t._initialized||t._terminated)throw new xe(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ws=function(){function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var a=0;a<e.length;++a)if(0===e[a].length)throw new xe(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vo(e)}return t.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},t}(),$u=function(){function t(e){this._byteString=e}return t.fromBase64String=function(e){try{return new t(sr.fromBase64String(e))}catch(i){throw new xe(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}},t.fromUint8Array=function(e){return new t(sr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},t}(),Wu=function(t){this._methodName=t},Xm=function(){function t(e,i){if(!isFinite(e)||e<-90||e>90)throw new xe(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new xe(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(e){return qt(this._lat,e._lat)||qt(this._long,e._long)},t}(),vD=/^__.*__$/,yD=function(){function t(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}return t.prototype.toMutation=function(e,i){return null!==this.fieldMask?new Bs(e,this.data,this.fieldMask,i,this.fieldTransforms):new qf(e,this.data,i,this.fieldTransforms)},t}(),_D=function(){function t(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}return t.prototype.toMutation=function(e,i){return new Bs(e,this.data,this.fieldMask,i,this.fieldTransforms)},t}();function sb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}var bD=function(){function t(e,i,a,c,f,v){this.settings=e,this.databaseId=i,this.R=a,this.ignoreUndefinedProperties=c,void 0===f&&this.Cc(),this.fieldTransforms=f||[],this.fieldMask=v||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(e){var i,a=null===(i=this.path)||void 0===i?void 0:i.child(e),c=this.xc({path:a,Fc:!1});return c.$c(e),c},t.prototype.Oc=function(e){var i,a=null===(i=this.path)||void 0===i?void 0:i.child(e),c=this.xc({path:a,Fc:!1});return c.Cc(),c},t.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(e){return gp(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(i){return e.isPrefixOf(i)})||void 0!==this.fieldTransforms.find(function(i){return e.isPrefixOf(i.field)})},t.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},t.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(sb(this.Nc)&&vD.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),ER=function(){function t(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.R=a||sl(e)}return t.prototype.Uc=function(e,i,a,c){return void 0===c&&(c=!1),new bD({Nc:e,methodName:i,qc:a,path:vo.emptyPath(),Fc:!1,Bc:c},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function er(t){var e=t._freezeSettings(),i=sl(t._databaseId);return new ER(t._databaseId,!!e.ignoreUndefinedProperties,i)}function Ha(t,e,i,a,c,f){void 0===f&&(f={});var v=t.Uc(f.merge||f.mergeFields?2:0,e,i,c);nv("Data must be an object, but it was:",v,a);var _,C,A=tv(a,v);if(f.merge)_=new Gc(v.fieldMask),C=v.fieldTransforms;else if(f.mergeFields){for(var x=[],P=0,V=f.mergeFields;P<V.length;P++){var H=_h(e,V[P],i);if(!v.contains(H))throw new xe(ve.INVALID_ARGUMENT,"Field '"+H+"' is specified in your field mask but missing from your input data.");DD(x,H)||x.push(H)}_=new Gc(x),C=v.fieldTransforms.filter(function(K){return _.covers(K.field)})}else _=null,C=v.fieldTransforms;return new yD(new Ti(A),_,C)}var ab=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,k.ZT)(e,t),e.prototype._toFieldTransform=function(i){if(2!==i.Nc)throw i.Lc(1===i.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return i.fieldMask.push(i.path),null},e.prototype.isEqual=function(i){return i instanceof e},e}(Wu);function wD(t,e,i){return new bD({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:i},e.databaseId,e.R,e.ignoreUndefinedProperties)}var CR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,k.ZT)(e,t),e.prototype._toFieldTransform=function(i){return new ct(i.path,new $f)},e.prototype.isEqual=function(i){return i instanceof e},e}(Wu),pp=function(t){function e(i,a){var c=this;return(c=t.call(this,i)||this).Kc=a,c}return(0,k.ZT)(e,t),e.prototype._toFieldTransform=function(i){var a=wD(this,i,!0),c=this.Kc.map(function(v){return cl(v,a)}),f=new _o(c);return new ct(i.path,f)},e.prototype.isEqual=function(i){return this===i},e}(Wu),kS=function(t){function e(i,a){var c=this;return(c=t.call(this,i)||this).Kc=a,c}return(0,k.ZT)(e,t),e.prototype._toFieldTransform=function(i){var a=wD(this,i,!0),c=this.Kc.map(function(v){return cl(v,a)}),f=new La(c);return new ct(i.path,f)},e.prototype.isEqual=function(i){return this===i},e}(Wu),ub=function(t){function e(i,a){var c=this;return(c=t.call(this,i)||this).Qc=a,c}return(0,k.ZT)(e,t),e.prototype._toFieldTransform=function(i){var a=new zc(i.R,Z_(i.R,this.Qc));return new ct(i.path,a)},e.prototype.isEqual=function(i){return this===i},e}(Wu);function cb(t,e,i,a){var c=t.Uc(1,e,i);nv("Data must be an object, but it was:",c,a);var f=[],v=Ti.empty();xu(a,function(C,A){var x=CD(e,C,i);A=(0,Pt.m9)(A);var P=c.Oc(x);if(A instanceof ab)f.push(x);else{var V=cl(A,P);null!=V&&(f.push(x),v.set(x,V))}});var _=new Gc(f);return new _D(v,_,c.fieldTransforms)}function ev(t,e,i,a,c,f){var v=t.Uc(1,e,i),_=[_h(e,a,i)],C=[c];if(f.length%2!=0)throw new xe(ve.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var A=0;A<f.length;A+=2)_.push(_h(e,f[A])),C.push(f[A+1]);for(var x=[],P=Ti.empty(),V=_.length-1;V>=0;--V)if(!DD(x,_[V])){var H=_[V],K=C[V];K=(0,Pt.m9)(K);var ne=v.Oc(H);if(K instanceof ab)x.push(H);else{var _e=cl(K,ne);null!=_e&&(x.push(H),P.set(H,_e))}}var Ie=new Gc(x);return new _D(P,Ie,v.fieldTransforms)}function ED(t,e,i,a){return void 0===a&&(a=!1),cl(i,t.Uc(a?4:3,e))}function cl(t,e){if(lb(t=(0,Pt.m9)(t)))return nv("Unsupported field value:",e,t),tv(t,e);if(t instanceof Wu)return function(i,a){if(!sb(a.Nc))throw a.Lc(i._methodName+"() can only be used with update() and set()");if(!a.path)throw a.Lc(i._methodName+"() is not currently supported inside arrays");var c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(i,a){for(var c=[],f=0,v=0,_=i;v<_.length;v++){var C=cl(_[v],a.Mc(f));null==C&&(C={nullValue:"NULL_VALUE"}),c.push(C),f++}return{arrayValue:{values:c}}}(t,e)}return function(i,a){if(null===(i=(0,Pt.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return Z_(a.R,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){var c=fi.fromDate(i);return{timestampValue:Kf(a.R,c)}}if(i instanceof fi)return c=new fi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3)),{timestampValue:Kf(a.R,c)};if(i instanceof Xm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $u)return{bytesValue:Qf(a.R,i._byteString)};if(i instanceof bn){var f=i.firestore._databaseId;if(!f.isEqual(c=a.databaseId))throw a.Lc("Document reference is for database "+f.projectId+"/"+f.database+" but should be for database "+c.projectId+"/"+c.database);return{referenceValue:s0(i.firestore._databaseId||a.databaseId,i._key.path)}}throw a.Lc("Unsupported field value: "+Bu(i))}(t,e)}function tv(t,e){var i={};return VE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xu(t,function(a,c){var f=cl(c,e.kc(a));null!=f&&(i[a]=f)}),{mapValue:{fields:i}}}function lb(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof fi||t instanceof Xm||t instanceof $u||t instanceof bn||t instanceof Wu)}function nv(t,e,i){if(!lb(i)||"object"!=typeof(c=i)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){var a=Bu(i);throw e.Lc("an object"===a?t+" a custom object":t+" "+a)}var c}function _h(t,e,i){if((e=(0,Pt.m9)(e))instanceof Ws)return e._internalPath;if("string"==typeof e)return CD(t,e);throw gp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,i)}var fb=new RegExp("[~\\*/\\[\\]]");function CD(t,e,i){if(e.search(fb)>=0)throw gp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,i);try{return(new(Ws.bind.apply(Ws,(0,k.ev)([void 0],e.split(".")))))._internalPath}catch(a){throw gp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,i)}}function gp(t,e,i,a,c){var f=a&&!a.isEmpty(),v=void 0!==c,_="Function "+e+"() called with invalid data";i&&(_+=" (via `toFirestore()`)");var C="";return(f||v)&&(C+=" (found",f&&(C+=" in field "+a),v&&(C+=" in document "+c),C+=")"),new xe(ve.INVALID_ARGUMENT,(_+=". ")+t+C)}function DD(t,e){return t.some(function(i){return i.isEqual(e)})}var bh=function(){function t(e,i,a,c,f){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=c,this._converter=f}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new bn(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var e=new rv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(e){if(this._document){var i=this._document.data.field(mp("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i)}},t}(),rv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,k.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(bh);function mp(t,e){return"string"==typeof e?CD(t,e):e instanceof Ws?e._internalPath:e._delegate._internalPath}var ll=function(){function t(e,i){this.hasPendingWrites=e,this.fromCache=i}return t.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},t}(),ns=function(t){function e(i,a,c,f,v,_){var C=this;return(C=t.call(this,i,a,c,f,_)||this)._firestore=i,C._firestoreImpl=i,C.metadata=v,C}return(0,k.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(i){if(void 0===i&&(i={}),this._document){if(this._converter){var a=new fl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,i)}return this._userDataWriter.convertValue(this._document.data.value,i.serverTimestamps)}},e.prototype.get=function(i,a){if(void 0===a&&(a={}),this._document){var c=this._document.data.field(mp("DocumentSnapshot.get",i));if(null!==c)return this._userDataWriter.convertValue(c,a.serverTimestamps)}},e}(bh),fl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,k.ZT)(e,t),e.prototype.data=function(i){return void 0===i&&(i={}),t.prototype.data.call(this,i)},e}(ns),qu=function(){function t(e,i,a,c){this._firestore=e,this._userDataWriter=i,this._snapshot=c,this.metadata=new ll(c.hasPendingWrites,c.fromCache),this.query=a}return Object.defineProperty(t.prototype,"docs",{get:function(){var e=[];return this.forEach(function(i){return e.push(i)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e,i){var a=this;this._snapshot.docs.forEach(function(c){e.call(i,new fl(a._firestore,a._userDataWriter,c.key,c,new ll(a._snapshot.mutatedKeys.has(c.key),a._snapshot.fromCache),a.query.converter))})},t.prototype.docChanges=function(e){void 0===e&&(e={});var i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new xe(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){var f=0;return a._snapshot.docChanges.map(function(_){return{type:"added",doc:new fl(a._firestore,a._userDataWriter,_.doc.key,_.doc,new ll(a._snapshot.mutatedKeys.has(_.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:f++}})}var v=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(function(_){return c||3!==_.type}).map(function(_){var C=new fl(a._firestore,a._userDataWriter,_.doc.key,_.doc,new ll(a._snapshot.mutatedKeys.has(_.doc.key),a._snapshot.fromCache),a.query.converter),A=-1,x=-1;return 0!==_.type&&(A=v.indexOf(_.doc.key),v=v.delete(_.doc.key)),1!==_.type&&(x=(v=v.add(_.doc)).indexOf(_.doc.key)),{type:LS(_.type),doc:C,oldIndex:A,newIndex:x}})}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges},t}();function LS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function hb(t,e){return t instanceof ns&&e instanceof ns?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof qu&&e instanceof qu&&t._firestore===e._firestore&&nb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function db(t){if(Tm(t)&&0===t.explicitOrderBy.length)throw new xe(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wh=function(){};function zu(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var a=0,c=e;a<c.length;a++){var f=c[a];t=f._apply(t)}return t}var ID=function(t){function e(i,a,c){var f=this;return(f=t.call(this)||this).jc=i,f.Wc=a,f.Gc=c,f.type="where",f}return(0,k.ZT)(e,t),e.prototype._apply=function(i){var f,_,a=er(i.firestore),c=function(f,v,_,C,A,x,P){var V;if(A.isKeyField()){if("array-contains"===x||"array-contains-any"===x)throw new xe(ve.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+x+"' queries on FieldPath.documentId().");if("in"===x||"not-in"===x){mb(P,x);for(var H=[],K=0,ne=P;K<ne.length;K++)H.push(gb(C,f,ne[K]));V={arrayValue:{values:H}}}else V=gb(C,f,P)}else"in"!==x&&"not-in"!==x&&"array-contains-any"!==x||mb(P,x),V=ED(_,"where",P,"in"===x||"not-in"===x);var Ie=Si.create(A,x,V);return function(Fe,ke){if(ke.g()){var Xe=q_(Fe);if(null!==Xe&&!Xe.isEqual(ke.field))throw new xe(ve.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+Xe.toString()+"' and '"+ke.field.toString()+"'");var ze=W_(Fe);null!==ze&&vb(0,ke.field,ze)}var St=function(kn,Wa){for(var kr=0,yI=kn.filters;kr<yI.length;kr++){var Cv=yI[kr];if(Wa.indexOf(Cv.op)>=0)return Cv.op}return null}(Fe,function(kn){switch(kn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ke.op));if(null!==St)throw new xe(ve.INVALID_ARGUMENT,St===ke.op?"Invalid query. You cannot use more than one '"+ke.op.toString()+"' filter.":"Invalid query. You cannot use '"+ke.op.toString()+"' filters with '"+St.toString()+"' filters.")}(f,Ie),Ie}(i._query,0,a,i.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Ni(i.firestore,i.converter,(_=(f=i._query).filters.concat([c]),new ka(f.path,f.collectionGroup,f.explicitOrderBy.slice(),_,f.limit,f.limitType,f.startAt,f.endAt)))},e}(wh),TD=function(t){function e(i,a){var c=this;return(c=t.call(this)||this).jc=i,c.zc=a,c.type="orderBy",c}return(0,k.ZT)(e,t),e.prototype._apply=function(i){var c,v,a=function(c,f,v){if(null!==c.startAt)throw new xe(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new xe(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var _=new Vf(f,v);return function(C,A){if(null===W_(C)){var x=q_(C);null!==x&&vb(0,x,A.field)}}(c,_),_}(i._query,this.jc,this.zc);return new Ni(i.firestore,i.converter,(v=(c=i._query).explicitOrderBy.concat([a]),new ka(c.path,c.collectionGroup,v,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)))},e}(wh),SD=function(t){function e(i,a,c){var f=this;return(f=t.call(this)||this).type=i,f.Hc=a,f.Jc=c,f}return(0,k.ZT)(e,t),e.prototype._apply=function(i){return new Ni(i.firestore,i.converter,JE(i._query,this.Hc,this.Jc))},e}(wh),AD=function(t){function e(i,a,c){var f=this;return(f=t.call(this)||this).type=i,f.Yc=a,f.Xc=c,f}return(0,k.ZT)(e,t),e.prototype._apply=function(i){var c,f,a=RD(i,this.type,this.Yc,this.Xc);return new Ni(i.firestore,i.converter,(f=a,new ka((c=i._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,f,c.endAt)))},e}(wh),pb=function(t){function e(i,a,c){var f=this;return(f=t.call(this)||this).type=i,f.Yc=a,f.Xc=c,f}return(0,k.ZT)(e,t),e.prototype._apply=function(i){var c,f,a=RD(i,this.type,this.Yc,this.Xc);return new Ni(i.firestore,i.converter,(f=a,new ka((c=i._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,f)))},e}(wh);function RD(t,e,i,a){if(i[0]=(0,Pt.m9)(i[0]),i[0]instanceof bh)return function(f,v,_,C,A){if(!C)throw new xe(ve.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+_+"().");for(var x=[],P=0,V=jf(f);P<V.length;P++){var H=V[P];if(H.field.isKeyField())x.push(Cm(v,C.key));else{var K=C.data.field(H.field);if(Em(K))throw new xe(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+H.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===K){var ne=H.field.canonicalString();throw new xe(ve.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+ne+"' (used as the orderBy) does not exist.")}x.push(K)}}return new qd(x,A)}(t._query,t.firestore._databaseId,e,i[0]._document,a);var c=er(t.firestore);return function(f,v,_,C,A,x){var P=f.explicitOrderBy;if(A.length>P.length)throw new xe(ve.INVALID_ARGUMENT,"Too many arguments provided to "+C+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var V=[],H=0;H<A.length;H++){var K=A[H];if(P[H].field.isKeyField()){if("string"!=typeof K)throw new xe(ve.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+C+"(), but got a "+typeof K);if(!z_(f)&&-1!==K.indexOf("/"))throw new xe(ve.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+C+"() must be a plain document ID, but '"+K+"' contains a slash.");var ne=f.path.child(Jt.fromString(K));if(!ut.isDocumentKey(ne))throw new xe(ve.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+C+"() must result in a valid document path, but '"+ne+"' is not because it contains an odd number of segments.");var _e=new ut(ne);V.push(Cm(v,_e))}else{var Ie=ED(_,C,K);V.push(Ie)}}return new qd(V,x)}(t._query,t.firestore._databaseId,c,e,i,a)}function gb(t,e,i){if("string"==typeof(i=(0,Pt.m9)(i))){if(""===i)throw new xe(ve.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!z_(e)&&-1!==i.indexOf("/"))throw new xe(ve.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+i+"' contains a '/' character.");var a=e.path.child(Jt.fromString(i));if(!ut.isDocumentKey(a))throw new xe(ve.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+a+"' is not because it has an odd number of segments ("+a.length+").");return Cm(t,new ut(a))}if(i instanceof bn)return Cm(t,i._key);throw new xe(ve.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Bu(i)+".")}function mb(t,e){if(!Array.isArray(t)||0===t.length)throw new xe(ve.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new xe(ve.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function vb(t,e,i){if(!i.isEqual(e))throw new xe(ve.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+i.toString()+"' instead.")}var iv=function(){function t(){}return t.prototype.convertValue=function(e,i){switch(void 0===i&&(i="none"),Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Of(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw nt()}},t.prototype.convertObject=function(e,i){var a=this,c={};return xu(e.fields,function(f,v){c[f]=a.convertValue(v,i)}),c},t.prototype.convertGeoPoint=function(e){return new Xm(Yn(e.latitude),Yn(e.longitude))},t.prototype.convertArray=function(e,i){var a=this;return(e.values||[]).map(function(c){return a.convertValue(c,i)})},t.prototype.convertServerTimestamp=function(e,i){switch(i){case"previous":var a=vT(e);return null==a?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(Ff(e));default:return null}},t.prototype.convertTimestamp=function(e){var i=Nu(e);return new fi(i.seconds,i.nanos)},t.prototype.convertDocumentKey=function(e,i){var a=Jt.fromString(e);gt(gC(a));var c=new hp(a.get(1),a.get(3)),f=new ut(a.popFirst(5));return c.isEqual(i)||Qn("Document "+f+" contains a document reference within a different database ("+c.projectId+"/"+c.database+") which is not supported. It will be treated as a reference in the current database ("+i.projectId+"/"+i.database+") instead."),f},t}();function ov(t,e,i){return t?i&&(i.merge||i.mergeFields)?t.toFirestore(e,i):t.toFirestore(e):e}var VS=function(t){function e(i){var a=this;return(a=t.call(this)||this).firestore=i,a}return(0,k.ZT)(e,t),e.prototype.convertBytes=function(i){return new $u(i)},e.prototype.convertReference=function(i){var a=this.convertDocumentKey(i,this.firestore._databaseId);return new bn(this.firestore,null,a)},e}(iv),US=function(){function t(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=er(e)}return t.prototype.set=function(e,i,a){this._verifyNotCommitted();var c=Ga(e,this._firestore),f=ov(c.converter,i,a),v=Ha(this._dataReader,"WriteBatch.set",c._key,f,null!==c.converter,a);return this._mutations.push(v.toMutation(c._key,Qr.none())),this},t.prototype.update=function(e,i,a){for(var c=[],f=3;f<arguments.length;f++)c[f-3]=arguments[f];this._verifyNotCommitted();var v,_=Ga(e,this._firestore);return v="string"==typeof(i=(0,Pt.m9)(i))||i instanceof Ws?ev(this._dataReader,"WriteBatch.update",_._key,i,a,c):cb(this._dataReader,"WriteBatch.update",_._key,i),this._mutations.push(v.toMutation(_._key,Qr.exists(!0))),this},t.prototype.delete=function(e){this._verifyNotCommitted();var i=Ga(e,this._firestore);return this._mutations=this._mutations.concat(new zd(i._key,Qr.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new xe(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Ga(t,e){if((t=(0,Pt.m9)(t)).firestore!==e)throw new xe(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Eh=function(t){function e(i){var a=this;return(a=t.call(this)||this).firestore=i,a}return(0,k.ZT)(e,t),e.prototype.convertBytes=function(i){return new $u(i)},e.prototype.convertReference=function(i){var a=this.convertDocumentKey(i,this.firestore._databaseId);return new bn(this.firestore,null,a)},e}(iv);function jS(t,e,i){for(var a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];t=Xt(t,bn);var f=Xt(t.firestore,Xn),v=er(f);return sv(f,[("string"==typeof(e=(0,Pt.m9)(e))||e instanceof Ws?ev(v,"updateDoc",t._key,e,i,a):cb(v,"updateDoc",t._key,e)).toMutation(t._key,Qr.exists(!0))])}function BS(t){for(var e,i,a,c=[],f=1;f<arguments.length;f++)c[f-1]=arguments[f];t=(0,Pt.m9)(t);var v={includeMetadataChanges:!1},_=0;"object"!=typeof c[_]||Gu(c[_])||(v=c[_],_++);var C,A,x,P={includeMetadataChanges:v.includeMetadataChanges};if(Gu(c[_])){var V=c[_];c[_]=null===(e=V.next)||void 0===e?void 0:e.bind(V),c[_+1]=null===(i=V.error)||void 0===i?void 0:i.bind(V),c[_+2]=null===(a=V.complete)||void 0===a?void 0:a.bind(V)}if(t instanceof bn)A=Xt(t.firestore,Xn),x=Uf(t._key.path),C={next:function(ne){c[_]&&c[_](xD(A,t,ne))},error:c[_+1],complete:c[_+2]};else{var H=Xt(t,Ni);A=Xt(H.firestore,Xn),x=H._query;var K=new Eh(A);C={next:function(ne){c[_]&&c[_](new qu(A,K,H,ne))},error:c[_+1],complete:c[_+2]},db(t._query)}return function(ne,_e,Ie,Fe){var ke=this,Xe=new lp(Fe),ze=new k0(_e,Xe,Ie);return ne.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(ke,void 0,void 0,function(){var St;return(0,k.Jh)(this,function(kn){switch(kn.label){case 0:return St=M0,[4,mh(ne)];case 1:return[2,St.apply(void 0,[kn.sent(),ze])]}})})}),function(){Xe.Wo(),ne.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(ke,void 0,void 0,function(){var St;return(0,k.Jh)(this,function(kn){switch(kn.label){case 0:return St=O0,[4,mh(ne)];case 1:return[2,St.apply(void 0,[kn.sent(),ze])]}})})})}}(Ir(A),x,P,C)}function sv(t,e){return function(i,a){var c=this,f=new Zr;return i.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(c,void 0,void 0,function(){var v;return(0,k.Jh)(this,function(_){switch(_.label){case 0:return v=bS,[4,Y0(i)];case 1:return[2,v.apply(void 0,[_.sent(),a,f])]}})})}),f.promise}(Ir(t),e)}function xD(t,e,i){var a=i.docs.get(e._key),c=new Eh(t);return new ns(t,c,e._key,a,new ll(i.hasPendingWrites,i.fromCache),e.converter)}var DR=function(t){function e(i,a){var c=this;return(c=t.call(this,i,a)||this)._firestore=i,c}return(0,k.ZT)(e,t),e.prototype.get=function(i){var a=this,c=Ga(i,this._firestore),f=new Eh(this._firestore);return t.prototype.get.call(this,i).then(function(v){return new ns(a._firestore,f,c._key,v._document,new ll(!1,!1),c.converter)})},e}(function(){function t(e,i){this._firestore=e,this._transaction=i,this._dataReader=er(e)}return t.prototype.get=function(e){var i=this,a=Ga(e,this._firestore),c=new VS(this._firestore);return this._transaction.lookup([a._key]).then(function(f){if(!f||1!==f.length)return nt();var v=f[0];if(v.isFoundDocument())return new bh(i._firestore,c,v.key,v,a.converter);if(v.isNoDocument())return new bh(i._firestore,c,a._key,null,a.converter);throw nt()})},t.prototype.set=function(e,i,a){var c=Ga(e,this._firestore),f=ov(c.converter,i,a),v=Ha(this._dataReader,"Transaction.set",c._key,f,null!==c.converter,a);return this._transaction.set(c._key,v),this},t.prototype.update=function(e,i,a){for(var c=[],f=3;f<arguments.length;f++)c[f-3]=arguments[f];var v,_=Ga(e,this._firestore);return v="string"==typeof(i=(0,Pt.m9)(i))||i instanceof Ws?ev(this._dataReader,"Transaction.update",_._key,i,a,c):cb(this._dataReader,"Transaction.update",_._key,i),this._transaction.update(_._key,v),this},t.prototype.delete=function(e){var i=Ga(e,this._firestore);return this._transaction.delete(i._key),this},t}());function HS(){if("undefined"==typeof Uint8Array)throw new xe(ve.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function GS(){if("undefined"==typeof atob)throw new xe(ve.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var $S=function(){function t(e){this._delegate=e}return t.fromBase64String=function(e){return GS(),new t($u.fromBase64String(e))},t.fromUint8Array=function(e){return HS(),new t($u.fromUint8Array(e))},t.prototype.toBase64=function(){return GS(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return HS(),this._delegate.toUint8Array()},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),IR=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(e,i){return function(a,c){ob(a=Xt(a,Xn));var f=Ir(a),v=a._freezeSettings(),_=new ju;return Zm(f,_,new oD(_,v.cacheSizeBytes,null==c?void 0:c.forceOwnership))}(e._delegate,{forceOwnership:i})},t.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(i){ob(i=Xt(i,Xn));var a=Ir(i),c=i._freezeSettings(),f=new ju;return Zm(a,f,new AS(f,c.cacheSizeBytes))}(e._delegate)},t.prototype.clearIndexedDbPersistence=function(e){return function(i){var a=this;if(i._initialized&&!i._terminated)throw new xe(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var c=new Zr;return i._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,k.mG)(a,void 0,void 0,function(){var f;return(0,k.Jh)(this,function(v){switch(v.label){case 0:return v.trys.push([0,2,,3]),[4,function(_){return(0,k.mG)(this,void 0,void 0,function(){return(0,k.Jh)(this,function(A){switch(A.label){case 0:return Yc.yt()?[4,Yc.delete(_+"main")]:[2,Promise.resolve()];case 1:return A.sent(),[2]}})})}(xC(i._databaseId,i._persistenceKey))];case 1:return v.sent(),c.resolve(),[3,3];case 2:return f=v.sent(),c.reject(f),[3,3];case 3:return[2]}})})}),c.promise}(e._delegate)},t}(),WS=function(){function t(e,i,a){var c=this;this._delegate=i,this.Zc=a,this.INTERNAL={delete:function(){return c.terminate()}},e instanceof hp||(this.tu=e)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(e){var i=this._delegate._getSettings();e.merge||i.host===e.host||Pf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},i),e)).merge,this._delegate._setSettings(e)},t.prototype.useEmulator=function(e,i,a){void 0===a&&(a={}),function(c,f,v,_){var C;void 0===_&&(_={});var A=(c=Xt(c,dp))._getSettings();if("firestore.googleapis.com"!==A.host&&A.host!==f&&Pf("Host has been set in both settings() and useEmulator(), emulator host will be used"),c._setSettings(Object.assign(Object.assign({},A),{host:f+":"+v,ssl:!1})),_.mockUserToken){var x,P;if("string"==typeof _.mockUserToken)x=_.mockUserToken,P=Xr.MOCK_USER;else{x=(0,Pt.Sg)(_.mockUserToken,null===(C=c._app)||void 0===C?void 0:C.options.projectId);var V=_.mockUserToken.sub||_.mockUserToken.user_id;if(!V)throw new xe(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new Xr(V)}c._credentials=new hD(new Z0(x,P))}}(this._delegate,e,i,a)},t.prototype.enableNetwork=function(){return function(e){var i=this;return e.asyncQueue.enqueue(function(){return(0,k.mG)(i,void 0,void 0,function(){var a,c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return[4,uD(e)];case 1:return a=f.sent(),[4,cD(e)];case 2:return c=f.sent(),[2,(a.setNetworkEnabled(!0),v=c,_=He(v),_.Or.delete(0),Vu(_))]}var v,_})})})}(Ir(Xt(this._delegate,Xn)))},t.prototype.disableNetwork=function(){return function(e){var i=this;return e.asyncQueue.enqueue(function(){return(0,k.mG)(i,void 0,void 0,function(){var a,c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return[4,uD(e)];case 1:return a=f.sent(),[4,cD(e)];case 2:return c=f.sent(),[2,(a.setNetworkEnabled(!1),function(v){return(0,k.mG)(this,void 0,void 0,function(){var _;return(0,k.Jh)(this,function(C){switch(C.label){case 0:return(_=He(v)).Or.add(0),[4,uh(_)];case 1:return C.sent(),_.Br.set("Offline"),[2]}})})}(c))]}})})})}(Ir(Xt(this._delegate,Xn)))},t.prototype.enablePersistence=function(e){var i=!1,a=!1;return e&&gD("synchronizeTabs",i=!!e.synchronizeTabs,"experimentalForceOwningTab",a=!!e.experimentalForceOwningTab),i?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,a)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(e){var i=this,a=new Zr;return e.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(i,void 0,void 0,function(){var c;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return c=ES,[4,Y0(e)];case 1:return[2,c.apply(void 0,[f.sent(),a])]}})})}),a.promise}(Ir(Xt(this._delegate,Xn)))},t.prototype.onSnapshotsInSync=function(e){return a=e,function(c,f){var v=this,_=new lp(f);return c.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(v,void 0,void 0,function(){var C;return(0,k.Jh)(this,function(A){switch(A.label){case 0:return C=function(x,P){He(x).Gr.add(P),P.next()},[4,mh(c)];case 1:return[2,C.apply(void 0,[A.sent(),_])]}})})}),function(){_.Wo(),c.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(v,void 0,void 0,function(){var C;return(0,k.Jh)(this,function(A){switch(A.label){case 0:return C=function(x,P){He(x).Gr.delete(P)},[4,mh(c)];case 1:return[2,C.apply(void 0,[A.sent(),_])]}})})})}}(Ir(Xt(this._delegate,Xn)),Gu(a)?a:{next:a});var a},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new xe(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new lv(this,MS(this._delegate,e))}catch(i){throw pi(i,"collection()","Firestore.collection()")}},t.prototype.doc=function(e){try{return new Ch(this,yh(this._delegate,e))}catch(i){throw pi(i,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(e){try{return new cv(this,function(i,a){if(i=Xt(i,dp),eb("collectionGroup","collection id",a),a.indexOf("/")>=0)throw new xe(ve.INVALID_ARGUMENT,"Invalid collection ID '"+a+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ni(i,null,(c=a,new ka(Jt.emptyPath(),c)));var c}(this._delegate,e))}catch(i){throw pi(i,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(e){var a,i=this;return function(f,v){var _=this,C=new Zr;return f.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(_,void 0,void 0,function(){var A;return(0,k.Jh)(this,function(x){switch(x.label){case 0:return[4,(P=f,Qm(P).then(function(V){return V.datastore}))];case 1:return A=x.sent(),new sD(f.asyncQueue,A,v,C).run(),[2]}var P})})}),C.promise}(Ir(a=this._delegate),function(f){return function(a){return e(new qS(i,a))}(new DR(a,f))})},t.prototype.batch=function(){var e=this;return Ir(this._delegate),new zS(new US(this._delegate,function(i){return sv(e._delegate,i)}))},t.prototype.loadBundle=function(e){throw new xe(ve.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(e){throw new xe(ve.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),yb=function(t){function e(i){var a=this;return(a=t.call(this)||this).firestore=i,a}return(0,k.ZT)(e,t),e.prototype.convertBytes=function(i){return new $S(new $u(i))},e.prototype.convertReference=function(i){var a=this.convertDocumentKey(i,this.firestore._databaseId);return Ch.eu(a,this.firestore,null)},e}(iv),qS=function(){function t(e,i){this._firestore=e,this._delegate=i,this._userDataWriter=new yb(e)}return t.prototype.get=function(e){var i=this,a=Dh(e);return this._delegate.get(a).then(function(c){return new av(i._firestore,new ns(i._firestore._delegate,i._userDataWriter,c._key,c._document,c.metadata,a.converter))})},t.prototype.set=function(e,i,a){var c=Dh(e);return a?(tb("Transaction.set",a),this._delegate.set(c,i,a)):this._delegate.set(c,i),this},t.prototype.update=function(e,i,a){for(var c,f=[],v=3;v<arguments.length;v++)f[v-3]=arguments[v];var _=Dh(e);return 2===arguments.length?this._delegate.update(_,i):(c=this._delegate).update.apply(c,(0,k.ev)([_,i,a],f)),this},t.prototype.delete=function(e){var i=Dh(e);return this._delegate.delete(i),this},t}(),zS=function(){function t(e){this._delegate=e}return t.prototype.set=function(e,i,a){var c=Dh(e);return a?(tb("WriteBatch.set",a),this._delegate.set(c,i,a)):this._delegate.set(c,i),this},t.prototype.update=function(e,i,a){for(var c,f=[],v=3;v<arguments.length;v++)f[v-3]=arguments[v];var _=Dh(e);return 2===arguments.length?this._delegate.update(_,i):(c=this._delegate).update.apply(c,(0,k.ev)([_,i,a],f)),this},t.prototype.delete=function(e){var i=Dh(e);return this._delegate.delete(i),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),_b=function(){function t(e,i,a){this._firestore=e,this._userDataWriter=i,this._delegate=a}return t.prototype.fromFirestore=function(e,i){var a=new fl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uv(this._firestore,a),null!=i?i:{})},t.prototype.toFirestore=function(e,i){return i?this._delegate.toFirestore(e,i):this._delegate.toFirestore(e)},t.nu=function(e,i){var a=t.su,c=a.get(e);c||(c=new WeakMap,a.set(e,c));var f=c.get(i);return f||(f=new t(e,new yb(e),i),c.set(i,f)),f},t}();_b.su=new WeakMap;var Ch=function(){function t(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new yb(e)}return t.iu=function(e,i,a){if(e.length%2!=0)throw new xe(ve.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(i,new bn(i._delegate,a,new ut(e)))},t.eu=function(e,i,a){return new t(i,new bn(i._delegate,a,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new lv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new lv(this.firestore,MS(this._delegate,e))}catch(i){throw pi(i,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(e){return(e=(0,Pt.m9)(e))instanceof bn&&Jm(this._delegate,e)},t.prototype.set=function(e,i){i=tb("DocumentReference.set",i);try{return function(a,c,f){a=Xt(a,bn);var v=Xt(a.firestore,Xn),_=ov(a.converter,c,f);return sv(v,[Ha(er(v),"setDoc",a._key,_,null!==a.converter,f).toMutation(a._key,Qr.none())])}(this._delegate,e,i)}catch(a){throw pi(a,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(e,i){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];try{return 1===arguments.length?jS(this._delegate,e):jS.apply(void 0,(0,k.ev)([this._delegate,e,i],a))}catch(f){throw pi(f,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return sv(Xt((e=this._delegate).firestore,Xn),[new zd(e._key,Qr.none())]);var e},t.prototype.onSnapshot=function(){for(var e=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var c=ND(i),f=PD(i,function(v){return new av(e.firestore,new ns(e.firestore._delegate,e._userDataWriter,v._key,v._document,v.metadata,e._delegate.converter))});return BS(this._delegate,c,f)},t.prototype.get=function(e){var i=this;return("cache"===(null==e?void 0:e.source)?function(a){a=Xt(a,bn);var c=Xt(a.firestore,Xn),f=Ir(c),v=new Eh(c);return function(_,C){var A=this,x=new Zr;return _.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(A,void 0,void 0,function(){var P;return(0,k.Jh)(this,function(V){switch(V.label){case 0:return P=function(H,K,ne){return(0,k.mG)(this,void 0,void 0,function(){var _e,Ie;return(0,k.Jh)(this,function(Fe){switch(Fe.label){case 0:return Fe.trys.push([0,2,,3]),[4,(ke=H,Xe=K,ze=He(ke),ze.persistence.runTransaction("read document","readonly",function(St){return ze.Mn.mn(St,Xe)}))];case 1:return(Ie=Fe.sent()).isFoundDocument()?ne.resolve(Ie):Ie.isNoDocument()?ne.resolve(null):ne.reject(new xe(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return _e=Fe.sent(),Ie=fh(_e,"Failed to get document '"+K+" from cache"),ne.reject(Ie),[3,3];case 3:return[2]}var ke,Xe,ze})})},[4,Q0(_)];case 1:return[2,P.apply(void 0,[V.sent(),C,x])]}})})}),x.promise}(f,a._key).then(function(_){return new ns(c,v,a._key,_,new ll(null!==_&&_.hasLocalMutations,!0),a.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(a){a=Xt(a,bn);var c=Xt(a.firestore,Xn);return lD(Ir(c),a._key,{source:"server"}).then(function(f){return xD(c,a,f)})}(this._delegate):function(a){a=Xt(a,bn);var c=Xt(a.firestore,Xn);return lD(Ir(c),a._key).then(function(f){return xD(c,a,f)})}(this._delegate)).then(function(a){return new av(i.firestore,new ns(i.firestore._delegate,i._userDataWriter,a._key,a._document,a.metadata,i._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?_b.nu(this.firestore,e):null))},t}();function pi(t,e,i){return t.message=t.message.replace(e,i),t}function ND(t){for(var e=0,i=t;e<i.length;e++){var a=i[e];if("object"==typeof a&&!Gu(a))return a}return{}}function PD(t,e){var i,a,c;return{next:function(f){c.next&&c.next(e(f))},error:null===(i=(c=Gu(t[0])?t[0]:Gu(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===i?void 0:i.bind(c),complete:null===(a=c.complete)||void 0===a?void 0:a.bind(c)}}var av=function(){function t(e,i){this._firestore=e,this._delegate=i}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Ch(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(e){return this._delegate.data(e)},t.prototype.get=function(e,i){return this._delegate.get(e,i)},t.prototype.isEqual=function(e){return hb(this._delegate,e._delegate)},t}(),uv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,k.ZT)(e,t),e.prototype.data=function(i){return this._delegate.data(i)},e}(av),cv=function(){function t(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new yb(e)}return t.prototype.where=function(e,i,a){try{return new t(this.firestore,zu(this._delegate,(v=a,_=i,C=mp("where",c=e),new ID(C,_,v))))}catch(c){throw pi(c,/(orderBy|where)\(\)/,"Query.$1()")}var c,v,_,C},t.prototype.orderBy=function(e,i){try{return new t(this.firestore,zu(this._delegate,function(a,c){void 0===c&&(c="asc");var f=c,v=mp("orderBy",a);return new TD(v,f)}(e,i)))}catch(a){throw pi(a,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,zu(this._delegate,(Ym("limit",i=e),new SD("limit",i,"F"))))}catch(i){throw pi(i,"limit()","Query.limit()")}var i},t.prototype.limitToLast=function(e){try{return new t(this.firestore,zu(this._delegate,(Ym("limitToLast",i=e),new SD("limitToLast",i,"L"))))}catch(i){throw pi(i,"limitToLast()","Query.limitToLast()")}var i},t.prototype.startAt=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return new t(this.firestore,zu(this._delegate,function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return new AD("startAt",a,!0)}.apply(void 0,e)))}catch(a){throw pi(a,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return new t(this.firestore,zu(this._delegate,function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return new AD("startAfter",a,!1)}.apply(void 0,e)))}catch(a){throw pi(a,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return new t(this.firestore,zu(this._delegate,function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return new pb("endBefore",a,!0)}.apply(void 0,e)))}catch(a){throw pi(a,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];try{return new t(this.firestore,zu(this._delegate,function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return new pb("endAt",a,!1)}.apply(void 0,e)))}catch(a){throw pi(a,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(e){return nb(this._delegate,e._delegate)},t.prototype.get=function(e){var i=this;return("cache"===(null==e?void 0:e.source)?function(a){a=Xt(a,Ni);var c=Xt(a.firestore,Xn),f=Ir(c),v=new Eh(c);return function(_,C){var A=this,x=new Zr;return _.asyncQueue.enqueueAndForget(function(){return(0,k.mG)(A,void 0,void 0,function(){var P;return(0,k.Jh)(this,function(V){switch(V.label){case 0:return P=function(H,K,ne){return(0,k.mG)(this,void 0,void 0,function(){var _e,Ie,Fe,ke,Xe;return(0,k.Jh)(this,function(ze){switch(ze.label){case 0:return ze.trys.push([0,2,,3]),[4,tl(H,K,!0)];case 1:return Xe=ze.sent(),_e=new V0(K,Xe.Bn),Ie=_e._o(Xe.documents),Fe=_e.applyChanges(Ie,!1),ne.resolve(Fe.snapshot),[3,3];case 2:return ke=ze.sent(),Xe=fh(ke,"Failed to execute query '"+K+" against cache"),ne.reject(Xe),[3,3];case 3:return[2]}})})},[4,Q0(_)];case 1:return[2,P.apply(void 0,[V.sent(),C,x])]}})})}),x.promise}(f,a._query).then(function(_){return new qu(c,v,a,_)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(a){a=Xt(a,Ni);var c=Xt(a.firestore,Xn),f=Ir(c),v=new Eh(c);return fD(f,a._query,{source:"server"}).then(function(_){return new qu(c,v,a,_)})}(this._delegate):function(a){a=Xt(a,Ni);var c=Xt(a.firestore,Xn),f=Ir(c),v=new Eh(c);return db(a._query),fD(f,a._query).then(function(_){return new qu(c,v,a,_)})}(this._delegate)).then(function(a){return new bb(i.firestore,new qu(i.firestore._delegate,i._userDataWriter,i._delegate,a._snapshot))})},t.prototype.onSnapshot=function(){for(var e=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var c=ND(i),f=PD(i,function(v){return new bb(e.firestore,new qu(e.firestore._delegate,e._userDataWriter,e._delegate,v._snapshot))});return BS(this._delegate,c,f)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?_b.nu(this.firestore,e):null))},t}(),KS=function(){function t(e,i){this._firestore=e,this._delegate=i}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new uv(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),bb=function(){function t(e,i){this._firestore=e,this._delegate=i}return Object.defineProperty(t.prototype,"query",{get:function(){return new cv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(i){return new uv(e._firestore,i)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(e){var i=this;return this._delegate.docChanges(e).map(function(a){return new KS(i._firestore,a)})},t.prototype.forEach=function(e,i){var a=this;this._delegate.forEach(function(c){e.call(i,new uv(a._firestore,c))})},t.prototype.isEqual=function(e){return hb(this._delegate,e._delegate)},t}(),lv=function(t){function e(i,a){var c=this;return(c=t.call(this,i,a)||this).firestore=i,c._delegate=a,c}return(0,k.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var i=this._delegate.parent;return i?new Ch(this.firestore,i):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(i){try{return new Ch(this.firestore,void 0===i?yh(this._delegate):yh(this._delegate,i))}catch(a){throw pi(a,"doc()","CollectionReference.doc()")}},e.prototype.add=function(i){var c,f,v,_,C,a=this;return(c=this._delegate,f=i,v=Xt(c.firestore,Xn),_=yh(c),C=ov(c.converter,f),sv(v,[Ha(er(c.firestore),"addDoc",_._key,C,null!==c.converter,{}).toMutation(_._key,Qr.exists(!1))]).then(function(){return _})).then(function(c){return new Ch(a.firestore,c)})},e.prototype.isEqual=function(i){return Jm(this._delegate,i._delegate)},e.prototype.withConverter=function(i){return new e(this.firestore,this._delegate.withConverter(i?_b.nu(this.firestore,i):null))},e}(cv);function Dh(t){return Xt(t,bn)}var SR=function(){function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._delegate=new(Ws.bind.apply(Ws,(0,k.ev)([void 0],e)))}return t.documentId=function(){return new t(vo.keyField().canonicalString())},t.prototype.isEqual=function(e){return(e=(0,Pt.m9)(e))instanceof Ws&&this._delegate._internalPath.isEqual(e._internalPath)},t}(),AR=function(){function t(e){this._delegate=e}return t.serverTimestamp=function(){var e=new CR("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new ab("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var a=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return new pp("arrayUnion",c)}.apply(void 0,e);return a._methodName="FieldValue.arrayUnion",new t(a)},t.arrayRemove=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var a=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return new kS("arrayRemove",c)}.apply(void 0,e);return a._methodName="FieldValue.arrayRemove",new t(a)},t.increment=function(e){var i=new ub("increment",e);return i._methodName="FieldValue.increment",new t(i)},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t}(),QS=G(6034),YS={Firestore:WS,GeoPoint:Xm,Timestamp:fi,Blob:$S,Transaction:qS,WriteBatch:zS,DocumentReference:Ch,DocumentSnapshot:av,Query:cv,QueryDocumentSnapshot:uv,QuerySnapshot:bb,CollectionReference:lv,FieldPath:SR,FieldValue:AR,setLogLevel:function(t){zo.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function Eb(t,e){return function(t,e=Ny.z){return new rr.y(i=>{let a;return null!=e?e.schedule(()=>{a=t.onSnapshot({includeMetadataChanges:!0},i)}):a=t.onSnapshot({includeMetadataChanges:!0},i),()=>{null!=a&&a()}})}(t,e)}function Cb(t,e){return Eb(t,e).pipe((0,Dt.U)(i=>({payload:i,type:"query"})))}function Th(t,e){return Cb(t,e).pipe(Yh(void 0),hf(),(0,Dt.U)(([i,a])=>{const c=a.payload.docChanges(),f=c.map(v=>({type:v.type,payload:v}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((v,_)=>{const C=c.find(x=>x.doc.ref.isEqual(v.ref)),A=null==i?void 0:i.payload.docs.find(x=>x.ref.isEqual(v.ref));C&&JSON.stringify(C.doc.metadata)===JSON.stringify(v.metadata)||!C&&A&&JSON.stringify(A.metadata)===JSON.stringify(v.metadata)||f.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:v}})}),f}))}function Db(t,e,i){return Th(t,i).pipe(ca((a,c)=>function(t,e,i){return e.forEach(a=>{i.indexOf(a.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return fv(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const i=t.slice();return i.splice(e.oldIndex,1),i.splice(e.newIndex,0,e),i}return fv(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return fv(t,e.oldIndex,1)}return t}(t,a))}),t}(a,c.map(f=>f.payload),e),[]),Py(),(0,Dt.U)(a=>a.map(c=>({type:c.type,payload:c}))))}function fv(t,e,i,...a){const c=t.slice();return c.splice(e,i,...a),c}function Ib(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}!function(t){t.INTERNAL.registerComponent(new QS.wA("firestore",function(a){return e=a.getProvider("app").getImmediate(),i=a.getProvider("auth-internal"),new WS(e,new Xn(e,i),new IR);var e,i},"PUBLIC").setServiceProps(Object.assign({},YS))),t.registerVersion("@firebase/firestore","2.4.0")}(Mw.Z);class vp{constructor(e,i,a){this.ref=e,this.query=i,this.afs=a}stateChanges(e){let i=Th(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(i=i.pipe((0,Dt.U)(a=>a.filter(c=>e.indexOf(c.type)>-1)))),i.pipe(Yh(void 0),hf(),Vo(([a,c])=>c.length>0||!a),(0,Dt.U)(([a,c])=>c),this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(ca((i,a)=>[...i,...a],[]))}snapshotChanges(e){const i=Ib(e);return Db(this.query,i,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return Cb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),this.afs.keepUnstableUntilFirst)}get(e){return(0,yn.D)(this.query.get(e)).pipe((0,mr.QV)(this.afs.schedulers.insideAngular))}add(e){return this.ref.add(e)}doc(e){return new Tb(this.ref.doc(e),this.afs)}}class Tb{constructor(e,i){this.ref=e,this.afs=i}set(e,i){return this.ref.set(e,i)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,i){const a=this.ref.collection(e),{ref:c,query:f}=yp(a,i);return new vp(c,f,this.afs)}snapshotChanges(){return function(t,e){return Eb(t,e).pipe(Yh(void 0),hf(),(0,Dt.U)(([i,a])=>a.exists?(null==i?void 0:i.exists)?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Dt.U)(({payload:i})=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data()))}get(e){return(0,yn.D)(this.ref.get(e)).pipe((0,mr.QV)(this.afs.schedulers.insideAngular))}}class NR{constructor(e,i){this.query=e,this.afs=i}stateChanges(e){return e&&0!==e.length?Th(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)),Vo(i=>i.length>0),this.afs.keepUnstableUntilFirst):Th(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(e){return this.stateChanges(e).pipe(ca((i,a)=>[...i,...a],[]))}snapshotChanges(e){const i=Ib(e);return Db(this.query,i,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(e={}){return Cb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(a=>a.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),this.afs.keepUnstableUntilFirst)}get(e){return(0,yn.D)(this.query.get(e)).pipe((0,mr.QV)(this.afs.schedulers.insideAngular))}}const OD=new I.OlP("angularfire2.enableFirestorePersistence"),FD=new I.OlP("angularfire2.firestore.persistenceSettings"),kD=new I.OlP("angularfire2.firestore.settings"),ZS=new I.OlP("angularfire2.firestore.use-emulator");function yp(t,e=(i=>i)){return{query:e(t),ref:t}}let XS=(()=>{class t{constructor(i,a,c,f,v,_,C,A,x){this.schedulers=new mt.HU(_),this.keepUnstableUntilFirst=(0,mt.ss)(this.schedulers);const P=(0,mt.on)(i,_,a);!cf.Z.auth&&x&&(0,mt.yq)();const V=A;[this.firestore,this.persistenceEnabled$]=(0,mt.sI)(`${P.name}.firestore`,"AngularFirestore",P,()=>{const H=_.runOutsideAngular(()=>P.firestore());if(f&&H.settings(f),V&&H.useEmulator(...V),c&&!El(v)){const K=()=>{try{return(0,yn.D)(H.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ne){return"undefined"!=typeof console&&console.warn(ne),(0,tt.of)(!1)}};return[H,_.runOutsideAngular(K)]}return[H,(0,tt.of)(!1)]},[f,V,c])}collection(i,a){let c;c="string"==typeof i?this.firestore.collection(i):i;const{ref:f,query:v}=yp(c,a),_=this.schedulers.ngZone.run(()=>f);return new vp(_,v,this)}collectionGroup(i,a){const c=a||(v=>v),f=this.firestore.collectionGroup(i);return new NR(c(f),this)}doc(i){let a;a="string"==typeof i?this.firestore.doc(i):i;const c=this.schedulers.ngZone.run(()=>a);return new Tb(c,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(mt.Dh),I.LFG(mt.xv,8),I.LFG(OD,8),I.LFG(kD,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(FD,8),I.LFG(ZS,8),I.LFG(uf,8))},t.\u0275prov=I.Yz7({factory:function(){return new t(I.LFG(mt.Dh),I.LFG(mt.xv,8),I.LFG(OD,8),I.LFG(kD,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(FD,8),I.LFG(ZS,8),I.LFG(uf,8))},token:t,providedIn:"any"}),t})(),PR=(()=>{class t{static enablePersistence(i){return{ngModule:t,providers:[{provide:OD,useValue:!0},{provide:FD,useValue:i}]}}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=I.oAB({type:t}),t.\u0275inj=I.cJS({providers:[XS]}),t})();class Sb{constructor(e,i){this.dueTime=e,this.scheduler=i}call(e,i){return i.subscribe(new eA(e,this.dueTime,this.scheduler))}}class eA extends Hr.L{constructor(e,i,a){super(e),this.dueTime=i,this.scheduler=a,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(OR,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function OR(t){t.debouncedNext()}var tA="firebasestorage.googleapis.com",LD="storageBucket",lr=function(t){function e(i,a){var c=t.call(this,UD(i),"Firebase Storage: "+a+" ("+UD(i)+")")||this;return c.customData={serverResponse:null},c._baseMessage=c.message,Object.setPrototypeOf(c,e.prototype),c}return(0,k.ZT)(e,t),e.prototype._codeEquals=function(i){return UD(i)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(i){this.customData.serverResponse=i,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(Pt.ZR);function UD(t){return"storage/"+t}function jD(){return new lr("unknown","An unknown error occurred, please check the error payload for server response.")}function BD(){return new lr("canceled","User canceled the upload/download.")}function HD(){return new lr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function hl(t){return new lr("invalid-argument",t)}function Nb(){return new lr("app-deleted","The Firebase app was deleted.")}function GD(t){return new lr("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sh(t,e){return new lr("invalid-format","String does not match format '"+t+"': "+e)}function bp(t){throw new lr("internal-error","Internal error: "+t)}var Io={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},wp=function(e,i){this.data=e,this.contentType=i||null};function Pb(t,e){switch(t){case Io.RAW:return new wp(Mb(e));case Io.BASE64:case Io.BASE64URL:return new wp($D(t,e));case Io.DATA_URL:return new wp(function(t){var e=new To(t);return e.base64?$D(Io.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(i){throw Sh(Io.DATA_URL,"Malformed data URL.")}return Mb(e)}(e.rest)}(e),function(t){return new To(t).contentType}(e))}throw jD()}function Mb(t){for(var e=[],i=0;i<t.length;i++){var a=t.charCodeAt(i);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|63&a);else if(55296==(64512&a))if(i<t.length-1&&56320==(64512&t.charCodeAt(i+1))){var f=a,v=t.charCodeAt(++i);e.push(240|(a=65536|(1023&f)<<10|1023&v)>>18,128|a>>12&63,128|a>>6&63,128|63&a)}else e.push(239,191,189);else 56320==(64512&a)?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|63&a)}return new Uint8Array(e)}function $D(t,e){switch(t){case Io.BASE64:var i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Sh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break;case Io.BASE64URL:var f=-1!==e.indexOf("+"),v=-1!==e.indexOf("/");if(f||v)throw Sh(t,"Invalid character '"+(f?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var _;try{_=function(t){return atob(t)}(e)}catch(x){throw Sh(t,"Invalid character found")}for(var C=new Uint8Array(_.length),A=0;A<_.length;A++)C[A]=_.charCodeAt(A);return C}var To=function(e){this.base64=!1,this.contentType=null;var i=e.match(/^data:([^,]+)?,/);if(null===i)throw Sh(Io.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var a=i[1]||null;null!=a&&(this.base64=function(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-";base64".length):a),this.rest=e.substring(e.indexOf(",")+1)},LR={STATE_CHANGED:"state_changed"},gi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fb(t){switch(t){case"running":case"pausing":case"canceling":return gi.RUNNING;case"paused":return gi.PAUSED;case"success":return gi.SUCCESS;case"canceled":return gi.CANCELED;case"error":default:return gi.ERROR}}var Ku=(()=>(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Ku||(Ku={})),Ku))(),VR=function(){function t(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ku.NO_ERROR,this.sendPromise_=new Promise(function(i){e.xhr_.addEventListener("abort",function(){e.errorCode_=Ku.ABORT,i()}),e.xhr_.addEventListener("error",function(){e.errorCode_=Ku.NETWORK_ERROR,i()}),e.xhr_.addEventListener("load",function(){i()})})}return t.prototype.send=function(e,i,a,c){if(this.sent_)throw bp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(i,e,!0),void 0!==c)for(var f in c)c.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,c[f].toString());return void 0!==a?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw bp("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw bp("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw bp("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},t.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},t.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},t}(),WD=function(){function t(){}return t.prototype.createConnection=function(){return new VR},t}(),So=function(){function t(e,i){this.bucket=e,this.path_=i}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,i){var a;try{a=t.makeFromUrl(e,i)}catch(c){return new t(e,"")}if(""===a.path)return a;throw function(t){return new lr("invalid-default-bucket","Invalid default bucket '"+t+"'.")}(e)},t.makeFromUrl=function(e,i){var a=null,c="([A-Za-z0-9.\\-_]+)",_=new RegExp("^gs://"+c+"(/(.*))?$","i");function A(kr){kr.path_=decodeURIComponent(kr.path)}for(var P=i.replace(/[.]/g,"\\."),ke=[{regex:_,indices:{bucket:1,path:3},postModify:function(kr){"/"===kr.path.charAt(kr.path.length-1)&&(kr.path_=kr.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+P+"/v[A-Za-z0-9_]+/b/"+c+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:A},{regex:new RegExp("^https?://"+(i===tA?"(?:storage.googleapis.com|storage.cloud.google.com)":i)+"/"+c+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:A}],Xe=0;Xe<ke.length;Xe++){var ze=ke[Xe],St=ze.regex.exec(e);if(St){var Wa=St[ze.indices.path];Wa||(Wa=""),a=new t(St[ze.indices.bucket],Wa),ze.postModify(a);break}}if(null==a)throw function(t){return new lr("invalid-url","Invalid URL '"+t+"'.")}(e);return a},t}(),hA=function(){function t(e){this.promise_=Promise.reject(e)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){},t}();function hv(t){return"string"==typeof t||t instanceof String}function QD(t){return dv()&&t instanceof Blob}function dv(){return"undefined"!=typeof Blob}function dl(t,e,i,a){if(a<e)throw hl("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(a>i)throw hl("Invalid value for '"+t+"'. Expected "+i+" or less.")}function qs(t,e){var i=e.match(/^(\w+):\/\/.+/),c=e;return null==(null==i?void 0:i[1])&&(c="https://"+e),c+"/v0"+t}function kb(t){var e=encodeURIComponent,i="?";for(var a in t)t.hasOwnProperty(a)&&(i=i+(e(a)+"=")+e(t[a])+"&");return i.slice(0,-1)}var pA=function(){function t(e,i,a,c,f,v,_,C,A,x,P){var V=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=i,this.headers_=a,this.body_=c,this.successCodes_=f.slice(),this.additionalRetryCodes_=v.slice(),this.callback_=_,this.errorCallback_=C,this.progressCallback_=x,this.timeout_=A,this.pool_=P,this.promise_=new Promise(function(H,K){V.resolve_=H,V.reject_=K,V.start_()})}return t.prototype.start_=function(){var e=this;function a(c,f){var v=e.resolve_,_=e.reject_,C=f.connection;if(f.wasSuccessCode)try{var A=e.callback_(C,C.getResponseText());!function(t){return void 0!==t}(A)?v():v(A)}catch(P){_(P)}else if(null!==C)(x=jD()).serverResponse=C.getResponseText(),_(e.errorCallback_?e.errorCallback_(C,x):x);else if(f.canceled)_(x=e.appDelete_?Nb():BD());else{var x;_(x=new lr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?a(0,new pv(!1,null,!0)):this.backoffId_=function(t,e,i){var a=1,c=null,f=!1,v=0;function _(){return 2===v}var C=!1;function A(){for(var K=[],ne=0;ne<arguments.length;ne++)K[ne]=arguments[ne];C||(C=!0,e.apply(null,K))}function x(K){c=setTimeout(function(){c=null,t(P,_())},K)}function P(K){for(var ne=[],_e=1;_e<arguments.length;_e++)ne[_e-1]=arguments[_e];if(!C){if(K)return void A.call.apply(A,(0,k.ev)([null,K],ne));var Fe;if(_()||f)return void A.call.apply(A,(0,k.ev)([null,K],ne));a<64&&(a*=2),1===v?(v=2,Fe=0):Fe=1e3*(a+Math.random()),x(Fe)}}var V=!1;function H(K){V||(V=!0,!C&&(null!==c?(K||(v=2),clearTimeout(c),x(0)):K||(v=1)))}return x(0),setTimeout(function(){f=!0,H(!0)},i),H}(function(c,f){if(f)c(!1,new pv(!1,null,!0));else{var v=e.pool_.createConnection();e.pendingConnection_=v,null!==e.progressCallback_&&v.addUploadProgressListener(_),v.send(e.url_,e.method_,e.body_,e.headers_).then(function(){null!==e.progressCallback_&&v.removeUploadProgressListener(_),e.pendingConnection_=null;var C=v.getErrorCode()===Ku.NO_ERROR,A=v.getStatus();if(C&&!e.isRetryStatusCode_(A)){var P=-1!==e.successCodes_.indexOf(A);c(!0,new pv(P,v))}else{var x=v.getErrorCode()===Ku.ABORT;c(!1,new pv(!1,null,x))}})}function _(C){null!==e.progressCallback_&&e.progressCallback_(C.loaded,C.lengthComputable?C.total:-1)}},a,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(e){var i=e>=500&&e<600,c=-1!==[408,429].indexOf(e),f=-1!==this.additionalRetryCodes_.indexOf(e);return i||c||f},t}(),pv=function(e,i,a){this.wasSuccessCode=e,this.connection=i,this.canceled=!!a};function gA(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function mA(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=gA();if(void 0!==i){for(var a=new i,c=0;c<t.length;c++)a.append(t[c]);return a.getBlob()}if(dv())return new Blob(t);throw new lr("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Lb=function(){function t(e,i){var a=0,c="";QD(e)?(this.data_=e,a=e.size,c=e.type):e instanceof ArrayBuffer?(i?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(i?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=c}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,i){if(QD(this.data_)){var c=function(t,e,i){return t.webkitSlice?t.webkitSlice(e,i):t.mozSlice?t.mozSlice(e,i):t.slice?t.slice(e,i):null}(this.data_,e,i);return null===c?null:new t(c)}return new t(new Uint8Array(this.data_.buffer,e,i-e),!0)},t.getBlob=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(dv()){var a=e.map(function(C){return C instanceof t?C.data_:C});return new t(mA.apply(null,a))}var c=e.map(function(C){return hv(C)?Pb(Io.RAW,C).data:C.data_}),f=0;c.forEach(function(C){f+=C.byteLength});var v=new Uint8Array(f),_=0;return c.forEach(function(C){for(var A=0;A<C.length;A++)v[_++]=C[A]}),new t(v,!0)},t.prototype.uploadData=function(){return this.data_},t}();function gv(t){var e;try{e=JSON.parse(t)}catch(i){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function ZD(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Vb(t,e){return e}var en=function(e,i,a,c){this.server=e,this.local=i||e,this.writable=!!a,this.xform=c||Vb},Ub=null;function Ep(){if(Ub)return Ub;var t=[];t.push(new en("bucket")),t.push(new en("generation")),t.push(new en("metageneration")),t.push(new en("name","fullPath",!0));var i=new en("name");i.xform=function(f,v){return function(t){return!hv(t)||t.length<2?t:ZD(t)}(v)},t.push(i);var c=new en("size");return c.xform=function(f,v){return void 0!==v?Number(v):v},t.push(c),t.push(new en("timeCreated")),t.push(new en("updated")),t.push(new en("md5Hash",null,!0)),t.push(new en("cacheControl",null,!0)),t.push(new en("contentDisposition",null,!0)),t.push(new en("contentEncoding",null,!0)),t.push(new en("contentLanguage",null,!0)),t.push(new en("contentType",null,!0)),t.push(new en("metadata","customMetadata",!0)),Ub=t}function eI(t,e,i){var a=gv(e);return null===a?null:function(t,e,i){for(var a={type:"file"},c=i.length,f=0;f<c;f++){var v=i[f];a[v.local]=v.xform(a,e[v.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var f=new So(t.bucket,t.fullPath);return e._makeStorageReference(f)}})}(a,t),a}(t,a,i)}function vv(t,e){for(var i={},a=e.length,c=0;c<a;c++){var f=e[c];f.writable&&(i[f.server]=t[f.local])}return JSON.stringify(i)}var Qu="prefixes";var $a=function(e,i,a,c){this.url=e,this.method=i,this.handler=a,this.timeout=c,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Xi(t){if(!t)throw jD()}function yv(t,e){return function(a,c){var f=eI(t,c,e);return Xi(null!==f),f}}function Fn(t){return function(i,a){var c;return(c=401===i.getStatus()?i.getResponseText().includes("Firebase App Check token is invalid")?new lr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new lr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===i.getStatus()?function(t){return new lr("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===i.getStatus()?function(t){return new lr("unauthorized","User does not have permission to access '"+t+"'.")}(t.path):a).serverResponse=a.serverResponse,c}}function $b(t){var e=Fn(t);return function(a,c){var f=e(a,c);return 404===a.getStatus()&&(f=function(t){return new lr("object-not-found","Object '"+t+"' does not exist.")}(t.path)),f.serverResponse=c.serverResponse,f}}function nI(t,e,i){var c=qs(e.fullServerUrl(),t.host),v=t.maxOperationRetryTime,_=new $a(c,"GET",yv(t,i),v);return _.errorHandler=$b(e),_}function bA(t,e,i,a,c){var f={};f.prefix=e.isRoot?"":e.path+"/",i&&i.length>0&&(f.delimiter=i),a&&(f.pageToken=a),c&&(f.maxResults=c);var _=qs(e.bucketOnlyServerUrl(),t.host),A=t.maxOperationRetryTime,x=new $a(_,"GET",function(t,e){return function(a,c){var f=function(t,e,i){var a=gv(i);return null===a?null:function(t,e,i){var a={prefixes:[],items:[],nextPageToken:i.nextPageToken};if(i[Qu])for(var c=0,f=i[Qu];c<f.length;c++){var _=f[c].replace(/\/$/,""),C=t._makeStorageReference(new So(e,_));a.prefixes.push(C)}if(i.items)for(var A=0,x=i.items;A<x.length;A++)C=t._makeStorageReference(new So(e,x[A].name)),a.items.push(C);return a}(t,e,a)}(t,e,c);return Xi(null!==f),f}}(t,e.bucket),A);return x.urlParams=f,x.errorHandler=Fn(e),x}function EA(t,e,i){var a=Object.assign({},i);return a.fullPath=t.path,a.size=e.size(),a.contentType||(a.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),a}var bv=function(e,i,a,c){this.current=e,this.total=i,this.finalized=!!a,this.metadata=c||null};function Wb(t,e){var i=null;try{i=t.getResponseHeader("X-Goog-Upload-Status")}catch(c){Xi(!1)}return Xi(!!i&&-1!==(e||["active"]).indexOf(i)),i}var IA=function(e,i,a){if(function(t){return"function"==typeof t}(e)||null!=i||null!=a)this.next=e,this.error=i,this.complete=a;else{var f=e;this.next=f.next,this.error=f.error,this.complete=f.complete}};function Ah(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var iI=function(){function t(e,i,a){var c=this;void 0===a&&(a=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=i,this._metadata=a,this._mappings=Ep(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(f){c._request=void 0,c._chunkMultiplier=1,f._codeEquals("canceled")?(c._needToFetchStatus=!0,c.completeTransitions_()):(c._error=f,c._transition("error"))},this._metadataErrorHandler=function(f){c._request=void 0,f._codeEquals("canceled")?c.completeTransitions_():(c._error=f,c._transition("error"))},this._promise=new Promise(function(f,v){c._resolve=f,c._reject=v,c._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var e=this,i=this._transferred;return function(a){return e._updateProgress(i+a)}},t.prototype._shouldDoResumable=function(e){return e.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(e){var i=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(a){var c=a[0],f=a[1];switch(i._state){case"running":e(c,f);break;case"canceling":i._transition("canceled");break;case"pausing":i._transition("paused")}})},t.prototype._createResumable=function(){var e=this;this._resolveToken(function(i,a){var c=function(t,e,i,a,c){var f=e.bucketOnlyServerUrl(),v=EA(e,a,c),_={name:v.fullPath},C=qs(f,t.host),x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+a.size(),"X-Goog-Upload-Header-Content-Type":v.contentType,"Content-Type":"application/json; charset=utf-8"},P=vv(v,i),K=new $a(C,"POST",function(ne){var _e;Wb(ne);try{_e=ne.getResponseHeader("X-Goog-Upload-URL")}catch(Ie){Xi(!1)}return Xi(hv(_e)),_e},t.maxUploadRetryTime);return K.urlParams=_,K.headers=x,K.body=P,K.errorHandler=Fn(e),K}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),f=e._ref.storage._makeRequest(c,i,a);e._request=f,f.getPromise().then(function(v){e._request=void 0,e._uploadUrl=v,e._needToFetchStatus=!1,e.completeTransitions_()},e._errorHandler)})},t.prototype._fetchStatus=function(){var e=this,i=this._uploadUrl;this._resolveToken(function(a,c){var f=function(t,e,i,a){var C=new $a(i,"POST",function(A){var x=Wb(A,["active","final"]),P=null;try{P=A.getResponseHeader("X-Goog-Upload-Size-Received")}catch(H){Xi(!1)}P||Xi(!1);var V=Number(P);return Xi(!isNaN(V)),new bv(V,a.size(),"final"===x)},t.maxUploadRetryTime);return C.headers={"X-Goog-Upload-Command":"query"},C.errorHandler=Fn(e),C}(e._ref.storage,e._ref._location,i,e._blob),v=e._ref.storage._makeRequest(f,a,c);e._request=v,v.getPromise().then(function(_){_=_,e._request=void 0,e._updateProgress(_.current),e._needToFetchStatus=!1,_.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()},e._errorHandler)})},t.prototype._continueUpload=function(){var e=this,i=262144*this._chunkMultiplier,a=new bv(this._transferred,this._blob.size()),c=this._uploadUrl;this._resolveToken(function(f,v){var _;try{_=function(t,e,i,a,c,f,v,_){var C=new bv(0,0);if(v?(C.current=v.current,C.total=v.total):(C.current=0,C.total=a.size()),a.size()!==C.total)throw new lr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var A=C.total-C.current,x=A;c>0&&(x=Math.min(x,c));var P=C.current,K={"X-Goog-Upload-Command":x===A?"upload, finalize":"upload","X-Goog-Upload-Offset":""+C.current},ne=a.slice(P,P+x);if(null===ne)throw HD();var ke=new $a(i,"POST",function(Xe,ze){var kr,St=Wb(Xe,["active","final"]),kn=C.current+x,Wa=a.size();return kr="final"===St?yv(e,f)(Xe,ze):null,new bv(kn,Wa,"final"===St,kr)},e.maxUploadRetryTime);return ke.headers=K,ke.body=ne.uploadData(),ke.progressCallback=_||null,ke.errorHandler=Fn(t),ke}(e._ref._location,e._ref.storage,c,e._blob,i,e._mappings,a,e._makeProgressCallback())}catch(A){return e._error=A,void e._transition("error")}var C=e._ref.storage._makeRequest(_,f,v);e._request=C,C.getPromise().then(function(A){e._increaseMultiplier(),e._request=void 0,e._updateProgress(A.current),A.finalized?(e._metadata=A.metadata,e._transition("success")):e.completeTransitions_()},e._errorHandler)})},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var e=this;this._resolveToken(function(i,a){var c=nI(e._ref.storage,e._ref._location,e._mappings),f=e._ref.storage._makeRequest(c,i,a);e._request=f,f.getPromise().then(function(v){e._request=void 0,e._metadata=v,e._transition("success")},e._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var e=this;this._resolveToken(function(i,a){var c=function(t,e,i,a,c){var f=e.bucketOnlyServerUrl(),v={"X-Goog-Upload-Protocol":"multipart"},C=function(){for(var ke="",Xe=0;Xe<2;Xe++)ke+=Math.random().toString().slice(2);return ke}();v["Content-Type"]="multipart/related; boundary="+C;var A=EA(e,a,c),x=vv(A,i),H=Lb.getBlob("--"+C+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+C+"\r\nContent-Type: "+A.contentType+"\r\n\r\n",a,"\r\n--"+C+"--");if(null===H)throw HD();var K={name:A.fullPath},ne=qs(f,t.host),Ie=t.maxUploadRetryTime,Fe=new $a(ne,"POST",yv(t,i),Ie);return Fe.urlParams=K,Fe.headers=v,Fe.body=H.uploadData(),Fe.errorHandler=Fn(e),Fe}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),f=e._ref.storage._makeRequest(c,i,a);e._request=f,f.getPromise().then(function(v){e._request=void 0,e._metadata=v,e._updateProgress(e._blob.size()),e._transition("success")},e._errorHandler)})},t.prototype._updateProgress=function(e){var i=this._transferred;this._transferred=e,this._transferred!==i&&this._notifyObservers()},t.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var i="paused"===this._state;this._state=e,i&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=BD(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var e=Fb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(e,i,a,c){var f=this,v=new IA(i,a,c);return this._addObserver(v),function(){f._removeObserver(v)}},t.prototype.then=function(e,i){return this._promise.then(e,i)},t.prototype.catch=function(e){return this.then(null,e)},t.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},t.prototype._removeObserver=function(e){var i=this._observers.indexOf(e);-1!==i&&this._observers.splice(i,1)},t.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(a){e._notifyObserver(a)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(Fb(this._state)){case gi.SUCCESS:Ah(this._resolve.bind(null,this.snapshot))();break;case gi.CANCELED:case gi.ERROR:Ah(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(e){switch(Fb(this._state)){case gi.RUNNING:case gi.PAUSED:e.next&&Ah(e.next.bind(e,this.snapshot))();break;case gi.SUCCESS:e.complete&&Ah(e.complete.bind(e))();break;case gi.CANCELED:case gi.ERROR:e.error&&Ah(e.error.bind(e,this._error))();break;default:e.error&&Ah(e.error.bind(e,this._error))()}},t.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},t.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},t.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},t}(),qb=function(){function t(e,i){this._service=e,this._location=i instanceof So?i:So.makeFromUrl(i,e.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,i){return new t(e,i)},Object.defineProperty(t.prototype,"root",{get:function(){var e=new So(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return ZD(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var i=new So(this._location.bucket,e);return new t(this._service,i)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(e){if(""===this._location.path)throw GD(e)},t}();function TA(t){var e={prefixes:[],items:[]};return oI(t,e).then(function(){return e})}function oI(t,e,i){return(0,k.mG)(this,void 0,void 0,function(){var c,f,v;return(0,k.Jh)(this,function(_){switch(_.label){case 0:return[4,sI(t,{pageToken:i})];case 1:return c=_.sent(),(f=e.prefixes).push.apply(f,c.prefixes),(v=e.items).push.apply(v,c.items),null==c.nextPageToken?[3,3]:[4,oI(t,e,c.nextPageToken)];case 2:_.sent(),_.label=3;case 3:return[2]}})})}function sI(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i,a;return(0,k.Jh)(this,function(c){switch(c.label){case 0:return null!=e&&"number"==typeof e.maxResults&&dl("options.maxResults",1,1e3,e.maxResults),a=bA(t.storage,t._location,"/",(i=e||{}).pageToken,i.maxResults),[4,t.storage.makeRequestWithTokens(a)];case 1:return[2,c.sent().getPromise()]}})})}function rs(t){return(0,k.mG)(this,void 0,void 0,function(){var e;return(0,k.Jh)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,i){var c=qs(e.fullServerUrl(),t.host),v=t.maxOperationRetryTime,_=new $a(c,"GET",function(t,e){return function(a,c){var f=eI(t,c,e);return Xi(null!==f),function(t,e,i){var a=gv(e);if(null===a||!hv(a.downloadTokens))return null;var c=a.downloadTokens;if(0===c.length)return null;var f=encodeURIComponent;return c.split(",").map(function(C){var x=t.fullPath;return qs("/b/"+f(t.bucket)+"/o/"+f(x),i)+kb({alt:"media",token:C})})[0]}(f,c,t.host)}}(t,i),v);return _.errorHandler=$b(e),_}(t.storage,t._location,Ep()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,i.sent().getPromise().then(function(a){if(null===a)throw new lr("no-download-url","The given file does not have any download URLs.");return a})]}})})}function aI(t,e){var i=function(t,e){var i=e.split("/").filter(function(a){return a.length>0}).join("/");return 0===t.length?i:t+"/"+i}(t._location.path,e),a=new So(t._location.bucket,i);return new qb(t.storage,a)}function zb(t){return/^[A-Za-z]+:\/\//.test(t)}function NA(t,e){if(t instanceof Yu){var i=t;if(null==i._bucket)throw new lr("no-default-bucket","No default bucket found. Did you set the '"+LD+"' property when initializing the app?");var a=new qb(i,i._bucket);return null!=e?NA(a,e):a}return void 0!==e?aI(t,e):t}function PA(t,e){if(e&&zb(e)){if(t instanceof Yu)return function(t,e){return new qb(t,e)}(t,e);throw hl("To use ref(service, url), the first argument must be a Storage instance.")}return NA(t,e)}function uI(t,e){var i=null==e?void 0:e[LD];return null==i?null:So.makeFromBucketSpec(i,t)}var Yu=function(){function t(e,i,a,c,f,v){this.app=e,this._authProvider=i,this._appCheckProvider=a,this._pool=c,this._url=f,this._firebaseVersion=v,this._bucket=null,this._host=tA,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=f?So.makeFromBucketSpec(f,this._host):uI(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,this._bucket=null!=this._url?So.makeFromBucketSpec(this._url,e):uI(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){dl("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){dl("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,k.mG)(this,void 0,void 0,function(){var e,i;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(i=a.sent()))return[2,i.accessToken];a.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,k.mG)(this,void 0,void 0,function(){var e;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,a.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(e){return new qb(this,e)},t.prototype._makeRequest=function(e,i,a){var c=this;if(this._deleted)return new hA(Nb());var f=function(t,e,i,a,c,f){var v=kb(t.urlParams),_=t.url+v,C=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(C,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(C,i),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(C,f),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(C,a),new pA(_,t.method,C,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,c)}(e,this._appId,i,a,this._pool,this._firebaseVersion);return this._requests.add(f),f.getPromise().then(function(){return c._requests.delete(f)},function(){return c._requests.delete(f)}),f},t.prototype.makeRequestWithTokens=function(e){return(0,k.mG)(this,void 0,void 0,function(){var i;return(0,k.Jh)(this,function(f){switch(f.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return i=f.sent(),[2,this._makeRequest(e,i[0],i[1])]}})})},t}();function lI(t,e){return PA(t=(0,Pt.m9)(t),e)}var Qb=function(){function t(e,i,a){this._delegate=e,this.task=i,this.ref=a}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),fI=function(){function t(e,i){this._delegate=e,this._ref=i,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Qb(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(e,i){var a=this;return this._delegate.then(function(c){if(e)return e(new Qb(c,a,a._ref))},i)},t.prototype.on=function(e,i,a,c){var f=this,v=void 0;return i&&(v="function"==typeof i?function(_){return i(new Qb(_,f,f._ref))}:{next:i.next?function(_){return i.next(new Qb(_,f,f._ref))}:void 0,complete:i.complete||void 0,error:i.error||void 0}),this._delegate.on(e,v,a||void 0,c||void 0)},t}(),hI=function(){function t(e,i){this._delegate=e,this._service=i}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(i){return new Cp(i,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(i){return new Cp(i,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Cp=function(){function t(e,i){this._delegate=e,this.storage=i}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return aI(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(e,i){return this._throwIfRoot("put"),new fI(function(t,e,i){return function(t,e,i){return t._throwIfRoot("uploadBytesResumable"),new iI(t,new Lb(e),i)}(t=(0,Pt.m9)(t),e,i)}(this._delegate,e,i),this)},t.prototype.putString=function(e,i,a){void 0===i&&(i=Io.RAW),this._throwIfRoot("putString");var c=Pb(i,e),f=(0,k.pi)({},a);return null==f.contentType&&null!=c.contentType&&(f.contentType=c.contentType),new fI(new iI(this._delegate,new Lb(c.data,!0),f),this)},t.prototype.listAll=function(){var e=this;return function(t){return TA(t=(0,Pt.m9)(t))}(this._delegate).then(function(i){return new hI(i,e.storage)})},t.prototype.list=function(e){var i=this;return function(t,e){return sI(t=(0,Pt.m9)(t),e)}(this._delegate,e||void 0).then(function(a){return new hI(a,i.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,k.mG)(this,void 0,void 0,function(){var e;return(0,k.Jh)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("getMetadata"),e=nI(t.storage,t._location,Ep()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,i.sent().getPromise()]}})})}(t=(0,Pt.m9)(t))}(this._delegate)},t.prototype.updateMetadata=function(e){return function(t,e){return function(t,e){return(0,k.mG)(this,void 0,void 0,function(){var i;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return t._throwIfRoot("updateMetadata"),i=function(t,e,i,a){var f=qs(e.fullServerUrl(),t.host),_=vv(i,a),A=t.maxOperationRetryTime,x=new $a(f,"PATCH",yv(t,a),A);return x.headers={"Content-Type":"application/json; charset=utf-8"},x.body=_,x.errorHandler=$b(e),x}(t.storage,t._location,e,Ep()),[4,t.storage.makeRequestWithTokens(i)];case 1:return[2,a.sent().getPromise()]}})})}(t=(0,Pt.m9)(t),e)}(this._delegate,e)},t.prototype.getDownloadURL=function(){return function(t){return rs(t=(0,Pt.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,k.mG)(this,void 0,void 0,function(){var e;return(0,k.Jh)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var a=qs(e.fullServerUrl(),t.host),_=new $a(a,"DELETE",function(C,A){},t.maxOperationRetryTime);return _.successCodes=[200,204],_.errorHandler=$b(e),_}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,i.sent().getPromise()]}})})}(t=(0,Pt.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw GD(e)},t}(),is=function(){function t(e,i){this.app=e,this._delegate=i}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(e){if(zb(e))throw hl("ref() expected a child path but got a URL, use refFromURL instead.");return new Cp(lI(this._delegate,e),this)},t.prototype.refFromURL=function(e){if(!zb(e))throw hl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{So.makeFromUrl(e,this._delegate.host)}catch(i){throw hl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Cp(lI(this._delegate,e),this)},t.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},t.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},t.prototype.useEmulator=function(e,i,a){void 0===a&&(a={}),function(t,e,i,a){void 0===a&&(a={}),function(t,e,i,a){void 0===a&&(a={}),t.host="http://"+e+":"+i;var c=a.mockUserToken;c&&(t._overrideAuthToken="string"==typeof c?c:(0,Pt.Sg)(c,t.app.options.projectId))}(t,e,i,a)}(this._delegate,e,i,a)},t}();function pI(t,e){var i=e.instanceIdentifier,a=t.getProvider("app").getImmediate(),c=t.getProvider("auth-internal"),f=t.getProvider("app-check-internal");return new is(a,new Yu(a,c,f,new WD,i,Mw.Z.SDK_VERSION))}function wv(t){const e=function(t){return new rr.y(e=>{const i=v=>e.next(v);i(t.snapshot);const f=t.on("state_changed",i);return t.then(v=>{i(v),e.complete()},v=>{i(t.snapshot),(v=>{e.error(v)})(v)}),function(){f()}}).pipe(function(t,e=Ny.P){return i=>i.lift(new Sb(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Dt.U)(i=>i.bytesTransferred/i.totalBytes*100))}}function Rh(t,e,i){return{getDownloadURL:()=>(0,tt.of)(void 0).pipe((0,mr.QV)(e.outsideAngular),rn(()=>t.getDownloadURL()),i),getMetadata:()=>(0,tt.of)(void 0).pipe((0,mr.QV)(e.outsideAngular),rn(()=>t.getMetadata()),i),delete:()=>(0,yn.D)(t.delete()),child:a=>Rh(t.child(a),e,i),updateMetadata:a=>(0,yn.D)(t.updateMetadata(a)),put:(a,c)=>wv(t.put(a,c)),putString:(a,c,f)=>wv(t.putString(a,c,f)),listAll:()=>(0,yn.D)(t.listAll())}}!function(t){var e={TaskState:gi,TaskEvent:LR,StringFormat:Io,Storage:Yu,Reference:Cp};t.INTERNAL.registerComponent(new QS.wA("storage",pI,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.7.0")}(Mw.Z);const Ev=new I.OlP("angularfire2.storageBucket"),Dp=new I.OlP("angularfire2.storage.maxUploadRetryTime"),Ip=new I.OlP("angularfire2.storage.maxOperationRetryTime");let Yb=(()=>{class t{constructor(i,a,c,f,v,_,C){this.schedulers=new mt.HU(v),this.keepUnstableUntilFirst=(0,mt.ss)(this.schedulers);const A=(0,mt.on)(i,v,a);this.storage=(0,mt.sI)(`${A.name}.storage.${c}`,"AngularFireStorage",A,()=>{const x=v.runOutsideAngular(()=>A.storage(c||void 0));return _&&x.setMaxUploadRetryTime(_),C&&x.setMaxOperationRetryTime(C),x},[_,C])}ref(i){return Rh(this.storage.ref(i),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(i){return Rh(this.storage.refFromURL(i),this.schedulers,this.keepUnstableUntilFirst)}upload(i,a,c){return Rh(this.storage.ref(i),this.schedulers,this.keepUnstableUntilFirst).put(a,c)}}return t.\u0275fac=function(i){return new(i||t)(I.LFG(mt.Dh),I.LFG(mt.xv,8),I.LFG(Ev,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(Dp,8),I.LFG(Ip,8))},t.\u0275prov=I.Yz7({factory:function(){return new t(I.LFG(mt.Dh),I.LFG(mt.xv,8),I.LFG(Ev,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(Dp,8),I.LFG(Ip,8))},token:t,providedIn:"any"}),t})(),UA=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=I.oAB({type:t}),t.\u0275inj=I.cJS({}),t})(),jA=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=I.oAB({type:t}),t.\u0275inj=I.cJS({providers:[Yb],imports:[UA]}),t})(),vI=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=I.oAB({type:t,bootstrap:[qy]}),t.\u0275inj=I.cJS({providers:[],imports:[[qv,SI,mt.hO.initializeApp(zy_firebaseConfig),PR,jA]]}),t})();(0,I.G48)(),ms().bootstrapModule(vI).catch(t=>console.error(t))},4762:(Je,Ae,G)=>{"use strict";G.d(Ae,{ZT:()=>de,pi:()=>M,mG:()=>ae,Jh:()=>te,XA:()=>j,CR:()=>Y,ev:()=>Ce});var I=function(ce,fe){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,ue){he.__proto__=ue}||function(he,ue){for(var Te in ue)Object.prototype.hasOwnProperty.call(ue,Te)&&(he[Te]=ue[Te])})(ce,fe)};function de(ce,fe){if("function"!=typeof fe&&null!==fe)throw new TypeError("Class extends value "+String(fe)+" is not a constructor or null");function he(){this.constructor=ce}I(ce,fe),ce.prototype=null===fe?Object.create(fe):(he.prototype=fe.prototype,new he)}var M=function(){return(M=Object.assign||function(fe){for(var he,ue=1,Te=arguments.length;ue<Te;ue++)for(var le in he=arguments[ue])Object.prototype.hasOwnProperty.call(he,le)&&(fe[le]=he[le]);return fe}).apply(this,arguments)};function ae(ce,fe,he,ue){return new(he||(he=Promise))(function(le,st){function lt(at){try{Ze(ue.next(at))}catch(We){st(We)}}function gn(at){try{Ze(ue.throw(at))}catch(We){st(We)}}function Ze(at){at.done?le(at.value):function(le){return le instanceof he?le:new he(function(st){st(le)})}(at.value).then(lt,gn)}Ze((ue=ue.apply(ce,fe||[])).next())})}function te(ce,fe){var ue,Te,le,st,he={label:0,sent:function(){if(1&le[0])throw le[1];return le[1]},trys:[],ops:[]};return st={next:lt(0),throw:lt(1),return:lt(2)},"function"==typeof Symbol&&(st[Symbol.iterator]=function(){return this}),st;function lt(Ze){return function(at){return function(Ze){if(ue)throw new TypeError("Generator is already executing.");for(;he;)try{if(ue=1,Te&&(le=2&Ze[0]?Te.return:Ze[0]?Te.throw||((le=Te.return)&&le.call(Te),0):Te.next)&&!(le=le.call(Te,Ze[1])).done)return le;switch(Te=0,le&&(Ze=[2&Ze[0],le.value]),Ze[0]){case 0:case 1:le=Ze;break;case 4:return he.label++,{value:Ze[1],done:!1};case 5:he.label++,Te=Ze[1],Ze=[0];continue;case 7:Ze=he.ops.pop(),he.trys.pop();continue;default:if(!(le=(le=he.trys).length>0&&le[le.length-1])&&(6===Ze[0]||2===Ze[0])){he=0;continue}if(3===Ze[0]&&(!le||Ze[1]>le[0]&&Ze[1]<le[3])){he.label=Ze[1];break}if(6===Ze[0]&&he.label<le[1]){he.label=le[1],le=Ze;break}if(le&&he.label<le[2]){he.label=le[2],he.ops.push(Ze);break}le[2]&&he.ops.pop(),he.trys.pop();continue}Ze=fe.call(ce,he)}catch(at){Ze=[6,at],Te=0}finally{ue=le=0}if(5&Ze[0])throw Ze[1];return{value:Ze[0]?Ze[1]:void 0,done:!0}}([Ze,at])}}}function j(ce){var fe="function"==typeof Symbol&&Symbol.iterator,he=fe&&ce[fe],ue=0;if(he)return he.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&ue>=ce.length&&(ce=void 0),{value:ce&&ce[ue++],done:!ce}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(ce,fe){var he="function"==typeof Symbol&&ce[Symbol.iterator];if(!he)return ce;var Te,st,ue=he.call(ce),le=[];try{for(;(void 0===fe||fe-- >0)&&!(Te=ue.next()).done;)le.push(Te.value)}catch(lt){st={error:lt}}finally{try{Te&&!Te.done&&(he=ue.return)&&he.call(ue)}finally{if(st)throw st.error}}return le}function Ce(ce,fe,he){if(he||2===arguments.length)for(var le,ue=0,Te=fe.length;ue<Te;ue++)(le||!(ue in fe))&&(le||(le=Array.prototype.slice.call(fe,0,ue)),le[ue]=fe[ue]);return ce.concat(le||Array.prototype.slice.call(fe))}}},Je=>{Je(Je.s=8831)}]);